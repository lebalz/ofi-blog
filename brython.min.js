var __BRYTHON__=globalThis.__BRYTHON__||{};try{eval("async function* f(){}")}catch(err){console.warn("Your browser is not fully supported. If you are using Microsoft Edge, please upgrade to the latest version")}!function(e){e.isWebWorker="undefined"!=typeof WorkerGlobalScope&&"function"==typeof importScripts&&navigator instanceof WorkerNavigator,e.isNode="undefined"!=typeof process&&"node"===process.release.name&&1!==process.__nwjs;var t=globalThis;t.location||={href:"",origin:"",pathname:""},t.navigator||={userLanguage:""},t.document||={getElementsByTagName:()=>[{src:"http://localhost/"}],currentScript:{src:"http://localhost/"},querySelectorAll:()=>[]},t.HTMLElement||=class{},t.MutationObserver||=function(){this.observe=()=>{}},t.customElements||={define:()=>{}};var r=t.location.href;if(e.protocol=r.split(":")[0],e.BigInt=t.BigInt,e.indexedDB=t.indexedDB,void 0===e.brython_path){var n;e.isWebWorker?(n=t.location.href).startsWith("blob:")&&(n=n.substr(5)):n=document.currentScript.src;var a=n.split("/");a.pop(),e.brython_path=a.join("/")+"/"}else e.brython_path.endsWith("/")||(e.brython_path+="/"),e.brython_path;var o=new RegExp("(.*?)://(.*?)/(.*)").exec(e.brython_path);o&&(e.full_url={protocol:o[1],host:o[2],address:o[3]});var s=(t.location.origin+t.location.pathname).split("/");s.pop();e.script_dir=s.join("/");e.__ARGV=[],e.webworkers={},e.file_cache={},e.url2name={},e.scripts={},e.import_info={},e.imported={},e.precompiled={},e.frame_obj=null,e.builtins=Object.create(null),e.builtins_scope={id:"__builtins__",module:"__builtins__",binding:{}},e.builtin_funcs={},e.builtin_classes=[],e.__getattr__=function(e){return this[e]},e.__setattr__=function(t,r){if(!(["debug","stdout","stderr"].indexOf(t)>-1))throw e.builtins.AttributeError.$factory("__BRYTHON__ object has no attribute "+t);e[t]=r},e.language=t.navigator.userLanguage||t.navigator.language,e.locale="C";for(var i=new Date,_=new Intl.DateTimeFormat(e.language,{timeZoneName:"short"}),l=_.format(i),c=(_=new Intl.DateTimeFormat(e.language,{timeZoneName:"long"})).format(i),u=0,f=Math.min(l.length,c.length);u<f&&l[u]==c[u];)u++;if(e.tz_name=c.substr(u).trim(),e.PyCF_ONLY_AST=1024,e.isWebWorker?e.charset="utf-8":e.charset=document.characterSet||document.inputEncoding||"utf-8",e.max_int=Math.pow(2,53)-1,e.min_int=-e.max_int,e.max_float=new Number(Number.MAX_VALUE),e.min_float=new Number(Number.MIN_VALUE),e.int_max_str_digits=4300,e.str_digits_check_threshold=640,e.max_array_size=2**32-1,e.recursion_limit=200,e.pep657=!0,e.special_string_repr={8:"\\x08",9:"\\t",10:"\\n",11:"\\x0b",12:"\\x0c",13:"\\r",92:"\\\\",160:"\\xa0"},e.$py_next_hash=Math.pow(2,53)-1,e.$py_UUID=0,e.lambda_magic=Math.random().toString(36).substr(2,8),e.set_func_names=function(t,r){for(var n in t)"function"==typeof t[n]&&(t[n].$infos={__doc__:t[n].__doc__||"",__module__:r,__qualname__:t.__qualname__+"."+n,__name__:n},"classmethod"==t[n].$type&&(t[n].__class__=e.method));t.__module__=r},"undefined"!=typeof Storage){e.has_local_storage=!1;try{localStorage&&(e.local_storage=localStorage,e.has_local_storage=!0)}catch(err){}e.has_session_storage=!1;try{sessionStorage&&(e.session_storage=sessionStorage,e.has_session_storage=!0)}catch(err){}}else e.has_local_storage=!1,e.has_session_storage=!1;e.globals=function(){return e.frame_obj.frame[3]},e.scripts={},e.$options={},e.builtins_repr_check=function(t,r){var n=e.args("__repr__",1,{self:null},["self"],r,{},null,null).self;if(!e.$isinstance(n,t))throw e.builtins.TypeError.$factory(`descriptor '__repr__' requires a '${t.__name__}' object but received a '${e.class_name(n)}'`)},e.update_VFS=function(t){e.VFS=e.VFS||{};var r=t.$timestamp;for(var n in void 0!==r&&delete t.$timestamp,t)e.VFS.hasOwnProperty(n)&&console.warn("Virtual File System: duplicate entry "+n),e.VFS[n]=t[n],e.VFS[n].timestamp=r;e.stdlib_module_names=Object.keys(e.VFS)},e.add_files=function(t){for(var r in e.files=e.files||{},t)e.files[r]=t[r]},e.has_file=function(t){return e.files&&e.files.hasOwnProperty(t)},e.show_tokens=function(t,r){for(var n of e.tokenizer(t,"<string>",r||"file"))console.log(n.type,e.builtins.repr(n.string),n.start,n.end,n.line)};Math.random().toString(36).substr(2,8);function p(t,r){e.options_parsed||e.parse_options(),r=r||"python_script_"+e.UUID();var n=e.script_path+"#"+r;return e.url2name[n]=r,e.imported[r]={},__BRYTHON__.py2js({src:t,filename:n},r,r,__BRYTHON__.builtins_scope).to_js()}e.getPythonModule=function(t){return e.imported[t]},e.python_to_js=function(e,t){return"(function() {\n"+p(e,t)+"\nreturn locals}())"},e.pythonToJS=e.python_to_js,e.runPythonSource=function(t,r){var n=p(t,r)+"\nreturn locals",a=new Function("$B","_b_",n);return e.imported[r]=a(e,e.builtins),e.imported[r]}}(__BRYTHON__),__BRYTHON__.ast_classes={Add:"",And:"",AnnAssign:"target,annotation,value?,simple",Assert:"test,msg?",Assign:"targets*,value,type_comment?",AsyncFor:"target,iter,body*,orelse*,type_comment?",AsyncFunctionDef:"name,args,body*,decorator_list*,returns?,type_comment?,type_params*",AsyncWith:"items*,body*,type_comment?",Attribute:"value,attr,ctx",AugAssign:"target,op,value",Await:"value",BinOp:"left,op,right",BitAnd:"",BitOr:"",BitXor:"",BoolOp:"op,values*",Break:"",Call:"func,args*,keywords*",ClassDef:"name,bases*,keywords*,body*,decorator_list*,type_params*",Compare:"left,ops*,comparators*",Constant:"value,kind?",Continue:"",Del:"",Delete:"targets*",Dict:"keys*,values*",DictComp:"key,value,generators*",Div:"",Eq:"",ExceptHandler:"type?,name?,body*",Expr:"value",Expression:"body",FloorDiv:"",For:"target,iter,body*,orelse*,type_comment?",FormattedValue:"value,conversion,format_spec?",FunctionDef:"name,args,body*,decorator_list*,returns?,type_comment?,type_params*",FunctionType:"argtypes*,returns",GeneratorExp:"elt,generators*",Global:"names*",Gt:"",GtE:"",If:"test,body*,orelse*",IfExp:"test,body,orelse",Import:"names*",ImportFrom:"module?,names*,level?",In:"",Interactive:"body*",Invert:"",Is:"",IsNot:"",JoinedStr:"values*",LShift:"",Lambda:"args,body",List:"elts*,ctx",ListComp:"elt,generators*",Load:"",Lt:"",LtE:"",MatMult:"",Match:"subject,cases*",MatchAs:"pattern?,name?",MatchClass:"cls,patterns*,kwd_attrs*,kwd_patterns*",MatchMapping:"keys*,patterns*,rest?",MatchOr:"patterns*",MatchSequence:"patterns*",MatchSingleton:"value",MatchStar:"name?",MatchValue:"value",Mod:"",Module:"body*,type_ignores*",Mult:"",Name:"id,ctx",NamedExpr:"target,value",Nonlocal:"names*",Not:"",NotEq:"",NotIn:"",Or:"",ParamSpec:"name",Pass:"",Pow:"",RShift:"",Raise:"exc?,cause?",Return:"value?",Set:"elts*",SetComp:"elt,generators*",Slice:"lower?,upper?,step?",Starred:"value,ctx",Store:"",Sub:"",Subscript:"value,slice,ctx",Try:"body*,handlers*,orelse*,finalbody*",TryStar:"body*,handlers*,orelse*,finalbody*",Tuple:"elts*,ctx",TypeAlias:"name,type_params*,value",TypeIgnore:"lineno,tag",TypeVar:"name,bound?",TypeVarTuple:"name",UAdd:"",USub:"",UnaryOp:"op,operand",While:"test,body*,orelse*",With:"items*,body*,type_comment?",Yield:"value?",YieldFrom:"value",alias:"name,asname?",arg:"arg,annotation?,type_comment?",arguments:"posonlyargs*,args*,vararg?,kwonlyargs*,kw_defaults*,kwarg?,defaults*",boolop:["And","Or"],cmpop:["Eq","NotEq","Lt","LtE","Gt","GtE","Is","IsNot","In","NotIn"],comprehension:"target,iter,ifs*,is_async",excepthandler:["ExceptHandler"],expr:["BoolOp","NamedExpr","BinOp","UnaryOp","Lambda","IfExp","Dict","Set","ListComp","SetComp","DictComp","GeneratorExp","Await","Yield","YieldFrom","Compare","Call","FormattedValue","JoinedStr","Constant","Attribute","Subscript","Starred","Name","List","Tuple","Slice"],expr_context:["Load","Store","Del"],keyword:"arg?,value",match_case:"pattern,guard?,body*",mod:["Module","Interactive","Expression","FunctionType"],operator:["Add","Sub","Mult","MatMult","Div","Mod","Pow","LShift","RShift","BitOr","BitXor","BitAnd","FloorDiv"],pattern:["MatchValue","MatchSingleton","MatchSequence","MatchMapping","MatchClass","MatchStar","MatchAs","MatchOr"],stmt:["FunctionDef","AsyncFunctionDef","ClassDef","Return","Delete","Assign","TypeAlias","AugAssign","AnnAssign","For","AsyncFor","While","If","With","AsyncWith","Match","Raise","Try","TryStar","Assert","Import","ImportFrom","Global","Nonlocal","Expr","Pass","Break","Continue"],type_ignore:["TypeIgnore"],type_param:["TypeVar","ParamSpec","TypeVarTuple"],unaryop:["Invert","Not","UAdd","USub"],withitem:"context_expr,optional_vars?"};var $B=__BRYTHON__;$B.unicode={No_digits:[178,179,185,[4969,9],6618,8304,[8308,6],[8320,10],[9312,9],[9332,9],[9352,9],9450,[9461,9],9471,[10102,9],[10112,9],[10122,9],[68160,4],[69216,9],[69714,9],[127232,11]],Lo_numeric:[13317,13443,14378,15181,19968,19971,19975,19977,20061,20108,20116,20118,20159,20160,20191,20200,20237,20336,20740,20806,[20841,3,2],21313,[21315,3],21324,[21441,4],22235,22769,22777,24186,24318,24319,[24332,3],24336,25342,25420,26578,28422,29590,30334,32902,33836,36014,36019,36144,38433,38470,38476,38520,38646,63851,63859,63864,63922,63953,63955,63997,131073,131172,131298,131361,133418,133507,133516,133532,133866,133885,133913,140176,141720,146203,156269,194704]},$B.digits_starts=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296,66720,68912,69734,69872,69942,70096,70384,70736,70864,71248,71360,71472,71904,72016,72784,73040,73120,73552,92768,92864,93008,120782,120792,120802,120812,120822,123200,123632,124144,125264,130032],$B.unicode_casefold={223:[115,115],304:[105,775],329:[700,110],496:[106,780],912:[953,776,769],944:[965,776,769],1415:[1381,1410],7830:[104,817],7831:[116,776],7832:[119,778],7833:[121,778],7834:[97,702],7838:[223],8016:[965,787],8018:[965,787,768],8020:[965,787,769],8022:[965,787,834],8064:[7936,953],8065:[7937,953],8066:[7938,953],8067:[7939,953],8068:[7940,953],8069:[7941,953],8070:[7942,953],8071:[7943,953],8072:[8064],8073:[8065],8074:[8066],8075:[8067],8076:[8068],8077:[8069],8078:[8070],8079:[8071],8080:[7968,953],8081:[7969,953],8082:[7970,953],8083:[7971,953],8084:[7972,953],8085:[7973,953],8086:[7974,953],8087:[7975,953],8088:[8080],8089:[8081],8090:[8082],8091:[8083],8092:[8084],8093:[8085],8094:[8086],8095:[8087],8096:[8032,953],8097:[8033,953],8098:[8034,953],8099:[8035,953],8100:[8036,953],8101:[8037,953],8102:[8038,953],8103:[8039,953],8104:[8096],8105:[8097],8106:[8098],8107:[8099],8108:[8100],8109:[8101],8110:[8102],8111:[8103],8114:[8048,953],8115:[945,953],8116:[940,953],8118:[945,834],8119:[945,834,953],8124:[8115],8130:[8052,953],8131:[951,953],8132:[942,953],8134:[951,834],8135:[951,834,953],8140:[8131],8146:[953,776,768],8147:[912],8150:[953,834],8151:[953,776,834],8162:[965,776,768],8163:[944],8164:[961,787],8166:[965,834],8167:[965,776,834],8178:[8060,953],8179:[969,953],8180:[974,953],8182:[969,834],8183:[969,834,953],8188:[8179],64256:[102,102],64257:[102,105],64258:[102,108],64259:[102,102,105],64260:[102,102,108],64261:[64262],64262:[115,116],64275:[1396,1398],64276:[1396,1381],64277:[1396,1387],64278:[1406,1398],64279:[1396,1389]},$B.unicode_bidi_whitespace=[9,10,11,12,13,28,29,30,31,32,133,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8287,12288],function(e){e.stdlib={};for(var t=["VFS_import","__future__","_aio","_codecs","_codecs_jp","_collections","_collections_abc","_compat_pickle","_compression","_contextvars","_csv","_dummy_thread","_frozen_importlib","_functools","_imp","_io","_markupbase","_multibytecodec","_operator","_py_abc","_pydatetime","_pydecimal","_queue","_signal","_socket","_sre","_struct","_sysconfigdata","_sysconfigdata_0_brython_","_testcapi","_thread","_threading_local","_typing","_weakref","_weakrefset","abc","antigravity","argparse","ast","asyncio","atexit","base64","bdb","binascii","bisect","browser.ajax","browser.highlight","browser.idbcache","browser.indexed_db","browser.local_storage","browser.markdown","browser.object_storage","browser.session_storage","browser.svg","browser.template","browser.timer","browser.ui","browser.webcomponent","browser.websocket","browser.worker","calendar","cmath","cmd","code","codecs","codeop","colorsys","configparser","contextlib","contextvars","copy","copyreg","csv","dataclasses","datetime","decimal","difflib","doctest","enum","errno","external_import","faulthandler","fnmatch","formatter","fractions","functools","gc","genericpath","getopt","getpass","gettext","glob","gzip","heapq","hmac","imp","inspect","interpreter","io","ipaddress","itertools","keyword","linecache","locale","mimetypes","nntplib","ntpath","numbers","opcode","operator","optparse","os","pathlib","pdb","pickle","pkgutil","platform","posixpath","pprint","profile","pwd","py_compile","pydoc","queue","quopri","random","re","re1","reprlib","secrets","select","selectors","shlex","shutil","signal","site","site-packages.__future__","site-packages.docs","site-packages.header","site-packages.test_sp","socket","sre_compile","sre_constants","sre_parse","stat","statistics","string","stringprep","struct","subprocess","symtable","sys","sysconfig","tabnanny","tarfile","tb","tempfile","test.namespace_pkgs.module_and_namespace_package.a_test","textwrap","this","threading","time","timeit","token","tokenize","traceback","turtle","types","typing","uu","uuid","warnings","weakref","webbrowser","zipfile","zipimport","zlib"],r=0;r<t.length;r++)e.stdlib[t[r]]=["py"];var n=["_ajax","_ast","_base64","_binascii","_io_classes","_json","_jsre","_locale","_multiprocessing","_posixsubprocess","_profile","_random","_sre","_sre_utils","_string","_strptime","_svg","_symtable","_tokenize","_webcomponent","_webworker","_zlib_utils","aes","array","builtins","dis","encoding_cp932","hashlib","hmac-md5","hmac-ripemd160","hmac-sha1","hmac-sha224","hmac-sha256","hmac-sha3","hmac-sha384","hmac-sha512","html_parser","marshal","math","md5","modulefinder","pbkdf2","posix","python_re","rabbit","rabbit-legacy","rc4","ripemd160","sha1","sha224","sha256","sha3","sha384","sha512","tripledes","unicodedata"];for(r=0;r<n.length;r++)e.stdlib[n[r]]=["js"];var a=["browser","browser.widgets","collections","concurrent","concurrent.futures","email","email.mime","encodings","html","http","importlib","importlib.metadata","importlib.resources","json","logging","multiprocessing","multiprocessing.dummy","pydoc_data","site-packages.foobar","site-packages.simpleaio","site-packages.ui","test","test.encoded_modules","test.leakers","test.namespace_pkgs.not_a_namespace_pkg.foo","test.support","test.test_email","test.test_importlib","test.test_importlib.builtin","test.test_importlib.extension","test.test_importlib.frozen","test.test_importlib.import_","test.test_importlib.source","test.test_json","test.tracedmodules","unittest","unittest.test","unittest.test.testmock","urllib"];for(r=0;r<a.length;r++)e.stdlib[a[r]]=["py",!0];e.stdlib_module_names=Object.keys(e.stdlib)}(__BRYTHON__),__BRYTHON__.implementation=[3,12,1,"dev",0],__BRYTHON__.version_info=[3,12,0,"final",0],__BRYTHON__.compiled_date="2023-11-27 07:51:15.689826",__BRYTHON__.timestamp=1701067875689,__BRYTHON__.builtin_module_names=["_ajax","_ast","_base64","_binascii","_io_classes","_json","_jsre","_locale","_multiprocessing","_posixsubprocess","_profile","_random","_sre","_sre_utils","_string","_strptime","_svg","_symtable","_tokenize","_webcomponent","_webworker","_zlib_utils","array","builtins","dis","encoding_cp932","hashlib","html_parser","marshal","math","modulefinder","posix","python_re","python_re_new","unicodedata"],function(e){var t=e.builtins;e.is_identifier=function(t,r){var n=e.unicode_identifiers[t],a=0,o=n.length-1,s=n.length,i=Math.floor(s/2),_=0,l=n[a];if(r<(u="number"==typeof l?l:l[0]))return!1;var c=n[o];if("number"==typeof c){if(r>c)return!1}else if(c[0]+c[1]<r)return!1;for(;;){var u;if(++_>100&&(console.log("infinite loop for",r),alert()),"number"!=typeof(u=n[i])&&(u=u[0]),u==r)return!0;if(u>r?o=i:a=i,s=Math.floor((o-a)/2),o-a==1)break;i=a+s}return n[a][0]+n[a][1]>r};const r=[6277,6278,8472,8494,12443,12444].map((e=>String.fromCodePoint(e)));function n(e){return/\p{Letter}/u.test(e)||/\p{Nl}/u.test(e)||"_"==e||r.includes(e)}const a=[183,903,4969,4976,4977,6618,8204,8205,12539,65381].map((e=>String.fromCodePoint(e)));function o(e){return n(e)||/\p{Mn}|\p{Mc}|\p{Nd}|\p{Pc}/u.test(e)||a.includes(e)}e.is_XID_Start=function(e){if(!n(r=String.fromCodePoint(e)))return!1;var t=r.normalize("NFKC");if(!n(t[0]))return!1;for(var r of t.substr(1))if(!o(r))return!1;return!0},e.is_XID_Continue=function(e){if(!o(r=String.fromCodePoint(e)))return!1;var t=r.normalize("NFKC");for(var r of t.substr(1))if(!o(r))return!1;return!0},e.in_unicode_category=function(t,r){if(isNaN(r))return!1;try{return new RegExp("\\p{"+t+"}","u").test(String.fromCodePoint(r))}catch(err){return function(t,r){var n=e.unicode[t],a=0,o=n.length-1,s=n.length,i=Math.floor(s/2),_=0,l=n[a],c="number"==typeof l?l:l[0];if(r<c)return!1;var u=n[o];if("number"==typeof u){if(r>u)return!1}else if(u[0]+u[1]<r)return!1;for(;;){if(++_>100&&(console.log("infinite loop for",r),alert()),"number"!=typeof(c=n[i])&&(c=c[0]),c==r)return!0;if(c>r?o=i:a=i,s=Math.floor((o-a)/2),o-a==1)break;i=a+s}var f=n[a][2];if(void 0===f)return n[a][0]+n[a][1]>r;return n[a][0]+f*n[a][1]>r&&(r-n[a][0])%f==0}(t,r)}};const s="FSTRING_MIDDLE";function i(e){if(1==e.length)return e.charCodeAt(0);var t=65536;return t+=(1023&e.charCodeAt(0))<<10,t+=1023&e.charCodeAt(1)}function _(e){return e[e.length-1]}var l=["**","//",">>","<<"],c={"}":"{","]":"[",")":"("};function u(e,t,r,n,a){var o={type:e,string:t,start:r=r.slice(0,2),end:n,line:a};return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o[4]=a,o}function f(e,t,r,n,a,o){for(var s,i=t,_=[];;){if(t>=e.length||(s="\r\n".indexOf(e[t]))>-1){if(_.push(u("COMMENT",e.substring(i-1,t),[r,i-n],[r,t-n+1],o)),void 0!==s){var l=1;"\r"==e[t]&&"\n"==e[t+1]?l++:void 0===e[t]&&(l=0),_.push(u(a,e.substr(t,l),[r,t-n+1],[r,t-n+l+1],o)),void 0===e[t]&&_.push(u("NEWLINE","\n",[r,t-n+1],[r,t-n+2],"")),t+=l}return{t:_,pos:t}}t++}}function p(t,r){switch(t){case"":return e.in_unicode_category("Nd",i(r));case"x":return"0123456789abcdef".includes(r.toLowerCase());case"b":return"01".includes(r);case"o":return"01234567".includes(r);default:throw Error("unknown num type "+t)}}function h(e){for(var t=e.length-1;t>=0;){var r=e[t];if(void 0!==r.nesting)return r.nesting;t--}}e.TokenReader=function(t,r){this.tokens=[],this.tokenizer=e.tokenizer(t,r),this.position=0},e.TokenReader.prototype.read=function(){if(this.position<this.tokens.length)var e=this.tokens[this.position];else{if((e=this.tokenizer.next()).done)return void(this.done=!0);e=e.value,this.tokens.push(e)}return this.position++,e},e.TokenReader.prototype.seek=function(e){this.position=e},e.tokenizer=function*(r,n,a){var o=/^(r|u|R|U|f|F|fr|Fr|fR|FR|rf|rF|Rf|RF)$/,d=/^(b|B|br|Br|bR|BR|rb|rB|Rb|RB)$/;r=r.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),"eval"==a||r.endsWith("\n")||(r+="\n");for(var m=r.split("\n"),g=0,v={},$=0,y=r.length;$<y;$++)v[$]=g,"\n"==r[$]&&g++;function b(e){return m[v[e]]+"\n"}var w,x,k,j,B,E,N,S,T,O,A,I,C,M,R,F,P,L="line_start",D=0,q=!1,U=[],W=[],V=0,G=1,z=["regular"],J="regular",Y=J;for(yield u("ENCODING","utf-8",[0,0],[0,0],"");D<r.length;){if(w=r[D],(x=r.charCodeAt(D))>=55296&&x<=56319&&(x=i(r.substr(D,2)),w=r.substr(D,2),D++),D++,J!=Y&&("fstring"==J?(I="",R=!1):"format_specifier"==J&&(F="")),Y=J,"fstring"==J){if(w==J.quote){if(R){I+="\\"+w,R=!1;continue}if(J.triple_quote){if(r.substr(D,2)!=J.quote.repeat(2)){I+=w;continue}w=J.quote.repeat(3),D+=2}I.length>0&&(yield u(s,I,[V,C],[V,C+I.length],P)),yield u("FSTRING_END",w,[V,D],[V,D],P),z.pop(),J=e.last(z),L=null;continue}if("{"!=w){if("}"==w){if("}"==r.charAt(D)){I+=w,D++;continue}yield u("OP",w,[V,D-G],[V,D-G+1],P);continue}if("\\"==w){J.raw?I+=w+w:(R&&(I+=w),R=!R);continue}R&&(I+="\\"),I+=w,R=!1,"\n"==w&&V++;continue}if("{"==r.charAt(D)){I+=w,D++;continue}I.length>0&&(yield u(s,I,[V,C],[V,C+I.length],P)),J="regular_within_fstring",M=D-G,L=null,z.push(J)}else if("format_specifier"==J)if(w==k){if(F.length>0){yield u(s,F,[V,C],[V,C+F.length],P),z.pop(),J=e.last(z);continue}}else{if("{"!=w){if("}"==w){if(yield u(s,F,[V,C],[V,C+F.length],P),yield u("OP",w,[V,D-G],[V,D-G+1],P),0==W.length||"{"!==e.last(W))throw Error("wrong braces");W.pop(),z.pop(),J=e.last(z);continue}F+=w;continue}yield u(s,F,[V,C],[V,C+F.length],P),J="regular_within_fstring",M=D-G,L=null,z.push(J)}switch(L){case"line_start":if(P=b(D-1),G=D,V++,ne=/^\f?(\r\n|\r|\n)/.exec(r.substr(D-1))){yield u("NL",ne[0],[V,0],[V,ne[0].length],P),D+=ne[0].length-1;continue}if("#"==w){for(var H of(K=f(r,D,V,G,"NL",P)).t)yield H;D=K.pos,L="line_start";continue}if(A=0," "==w?A=1:"\t"==w&&(A=8),A){for(;D<r.length;){if(" "==r[D])A++;else{if("\t"!=r[D])break;A+=8}D++}if(D==r.length){V--;break}if("#"==r[D]){var K=f(r,D+1,V,G,"NL",P);for(var H of K.t)yield H;D=K.pos;continue}if(ne=/^\f?(\r\n|\r|\n)/.exec(r.substr(D))){yield u("NL","",[V,D-G+1],[V,D-G+1+ne[0].length],P),D+=ne[0].length;continue}if(0==U.length||A>_(U))U.push(A),yield u("INDENT","",[V,0],[V,A],P);else if(A<_(U)){var X=U.indexOf(A);if(-1==X){var Z=Error("unindent does not match any outer indentation level");throw Z.type="IndentationError",Z.line_num=V,Z}for($=U.length-1;$>X;$--)U.pop(),yield u("DEDENT","",[V,A],[V,A],P)}L=null}else{for(;U.length>0;)U.pop(),yield u("DEDENT","",[V,A],[V,A],P);L=null,D--}break;case null:switch(w){case'"':case"'":k=w,B=[V,D-G,G],(j=r[D]==w&&r[D+1]==w)&&(D+=2),q=!1,L="STRING",E="",N="";break;case"#":var Q=W.length>0?"NL":"NEWLINE";for(var H of(K=f(r,D,V,G,Q,P)).t)yield H;D=K.pos,0==W.length?L="line_start":(L=null,V++,G=D+1,P=b(D));break;case"0":if(L="NUMBER",T=w,O="",r[D]&&"xbo".includes(r[D].toLowerCase()))T+=r[D],O=r[D].toLowerCase(),D++;else if(r[D])for(var ee=D;ee<r.length&&r[ee].match(/\d/);){if("0"==r[ee]){ee++;continue}let a="leading zeros in decimal integer literals are not permitted; use an 0o prefix for octal integers";e.raise_error_known_location(t.SyntaxError,n,V,D-G-T.length,V,D-G,P,a)}break;case".":if(r[D]&&e.in_unicode_category("Nd",i(r[D])))L="NUMBER",O="",T=w;else{for(var te=w;r[D]==w;)D++,te+=w;for(var re=D-G-te.length+1;te.length>=3;)yield u("OP","...",[V,re],[V,re+3],P),te=te.substr(3);for($=0;$<te.length;$++)yield u("OP",".",[V,re],[V,re+1],P),re++}break;case"\\":var ne=/^\f?(\r\n|\r|\n)/.exec(r.substr(D));if(ne=/^\f?(\r\n|\r|\n)/.exec(r.substr(D))){if(D==r.length-1){yield u("ERRORTOKEN",w,[V,D-G],[V,D-G+1],P);Q=W.length>0?"NL":"NEWLINE";yield u(Q,ne[0],[V,D-G],[V,D-G+ne[0].length],P)}V++,G=(D+=ne[0].length)+1,P=b(D)}else{var ae="unexpected character after line continuation character";e.raise_error_known_location(t.SyntaxError,n,V,D,V,D+1,P,ae)}break;case"\n":case"\r":Q=W.length>0?"NL":"NEWLINE";ne=/^\f?(\r\n|\r|\n)/.exec(r.substr(D-1)),yield u(Q,ne[0],[V,D-G],[V,D-G+ne[0].length],P),D+=ne[0].length-1,"NEWLINE"==Q?L="line_start":(V++,G=D+1,P=b(D));break;default:if(e.is_XID_Start(i(w)))L="NAME",S=w;else if(e.in_unicode_category("Nd",i(w)))L="NUMBER",O="",T=w;else if(".,:;+-*/%~^|&=<>[](){}@".includes(w)){if("regular_within_fstring"==J&&(":"==w||"}"==w)){if(":"!=w){let t=u("OP",w,[V,D-G-te.length+1],[V,D-G+1],P);if(t.metadata=r.substring(G+C+2,D-1),yield t,z.pop(),J=z[z.length-1],0==W.length||"{"!==e.last(W))throw Error("wrong braces");W.pop();continue}if(h(z)==W.length-1){let e=u("OP",w,[V,D-G-te.length+1],[V,D-G+1],P);e.metadata=r.substr(G+M,D-G-M-1),yield e,z.pop(),J="format_specifier",z.push(J);continue}}te=w;l.includes(w+r[D])&&(te=w+r[D],D++),"="!=r[D]||2!=te.length&&!"+-*/%^|&=<>@".includes(te)?("-"==w&&">"==r[D]||":"==w&&"="==r[D])&&(te+=r[D],D++):(te+=r[D],D++),"[({".includes(w)?W.push(w):"])}".includes(w)&&(W&&_(W)==c[w]?W.pop():W.push(w)),yield u("OP",te,[V,D-G-te.length+1],[V,D-G+1],P)}else if("!"==w)if("="==r[D])yield u("OP","!=",[V,D-G],[V,D-G+2],P),D++;else{let e=u("OP",w,[V,D-G],[V,D-G+1],P);e.metadata=r.substring(G+C+2,D-1),yield e}else" "==w||"\t"==w||(yield u("ERRORTOKEN",w,[V,D-G],[V,D-G+1],P))}break;case"NAME":if(e.is_XID_Continue(i(w)))S+=w;else if('"'==w||"'"==w)if(o.exec(S)||d.exec(S)){if(L="STRING",k=w,(j=r[D]==k&&r[D+1]==k)&&(D+=2),(N=S).toLowerCase().includes("f")){C=D-G-S.length,(J=new String("fstring")).nesting=W.length,J.quote=k,J.triple_quote=j,J.raw=N.toLowerCase().includes("r"),z.push(J);var oe=j?k.repeat(3):k,se=C+S.length+oe.length;yield u("FSTRING_START",N+oe,[V,C],[V,se],P);continue}q=!1,B=[V,D-G-S.length,G],E=""}else yield u("NAME",S,[V,D-G-S.length],[V,D-G],P),L=null,D--;else yield u("NAME",S,[V,D-G-S.length],[V,D-G],P),L=null,D--;break;case"STRING":switch(w){case k:if(q)E+=w;else{var ie=P;if(V>B[0]&&(ie=r.substring(B[2]-1,D+2)),j)if(w+r.substr(D,2)==k.repeat(3)){_e=N+k.repeat(3)+E+k.repeat(3);yield u("STRING",_e,B,[V,D-G+3],ie),D+=2,L=null}else E+=w;else{var _e=N+k+E+k;yield u("STRING",_e,B,[V,D-G+1],ie),L=null}}q=!1;break;case"\r":case"\n":if(!q&&!j){var le=B[1]+G-1;for(D=le;" "==r[D-1];)D--;for(;D<le;)yield u("ERRORTOKEN"," ",[V,D-G+1],[V,D-G+2],P),D++;D++,yield u("ERRORTOKEN",k,[V,D-G],[V,D-G+1],P),L=null,D++;break}E+=w,V++,G=D+1,"\r"==w&&"\n"==r[D]&&(E+=r[D],G++,D++),P=b(D),q=!1;break;case"\\":E+=w,q=!q;break;default:q=!1,E+=w}break;case"NUMBER":if(p(O,w))T+=w;else if("_"!=w||T.endsWith("."))"."!=w||T.includes(w)?"e"!=w.toLowerCase()||T.toLowerCase().includes("e")?"+"!=w&&"-"!=w||!T.toLowerCase().endsWith("e")?"j"==w.toLowerCase()?(T+=w,yield u("NUMBER",T,[V,D-G-T.length+1],[V,D-G+1],P),L=null):w.match(/\p{Letter}/u)?e.raise_error_known_location(t.SyntaxError,n,V,D-G-T.length,V,D-G,P,"invalid decimal literal"):(yield u("NUMBER",T,[V,D-G-T.length],[V,D-G],P),L=null,D--):T+=w:"+-".includes(r[D])||e.in_unicode_category("Nd",i(r[D]))?T+=w:(yield u("NUMBER",T,[V,D-G-T.length],[V,D-G],P),L=null,D--):T+=w;else{if(T.endsWith("_"))throw SyntaxError("consecutive _ in number");void 0!==r[D]&&p(O,r[D])?T+=w:(yield u("NUMBER",T,[V,D-G-T.length],[V,D-G],P),L=null,D--)}}}if(W.length>0)throw SyntaxError("EOF in multi-line statement");switch(L){case"line_start":V++;break;case"NAME":yield u("NAME",S,[V,D-G-S.length+1],[V,D-G+1],P);break;case"NUMBER":yield u("NUMBER",T,[V,D-G-T.length+1],[V,D-G+1],P);break;case"STRING":ae="unterminated "+(j?"triple-quoted ":"")+`string literal (detected at line ${V})`;throw SyntaxError(ae)}for(r.endsWith("\n")||L==G||(yield u("NEWLINE","",[V,D-G+1],[V,D-G+1],P+"\n"),V++);U.length>0;)U.pop(),yield u("DEDENT","",[V,0],[V,0],"");yield u("ENDMARKER","",[V,0],[V,0],"")}}(__BRYTHON__),function(e){var t=e.op_types=[{"+":"Add","-":"Sub","*":"Mult","/":"Div","//":"FloorDiv","%":"Mod","**":"Pow","<<":"LShift",">>":"RShift","|":"BitOr","^":"BitXor","&":"BitAnd","@":"MatMult"},{and:"And",or:"Or"},{"==":"Eq","!=":"NotEq","<":"Lt","<=":"LtE",">":"Gt",">=":"GtE",is:"Is",is_not:"IsNot",in:"In",not_in:"NotIn"},{unary_inv:"Invert",unary_pos:"UAdd",unary_neg:"USub",unary_not:"Not"}],r=e.builtins,n=e.ast={};for(var a in e.ast_classes){var o=e.ast_classes[a],s="";if("string"==typeof o){if(o.length>0)for(var i of o.split(","))i.endsWith("*")?s+=` this.${i=i.substr(0,i.length-1)} = ${i} === undefined ? [] : ${i}\n`:i.endsWith("?")?s+=` this.${i=i.substr(0,i.length-1)} = ${i}\n`:s+=` this.${i} = ${i}\n`;var _=o.replace(/[*?]/g,"").split(",");n[a]=Function(..._,s),n[a]._fields=o.split(",")}else n[a]=o.map((e=>n[e]));n[a].$name=a}e.ast_js_to_py=function(t){if(e.create_python_ast_classes(),void 0===t)return r.None;if(Array.isArray(t))return t.map(e.ast_js_to_py);var n=t.constructor.$name,a=e.python_ast_classes[n],o={__class__:a};if(void 0===a)return t;for(var s of a._fields)o[s]=e.ast_js_to_py(t[s]);for(var i of(o._attributes=e.fast_tuple([]),["lineno","col_offset","end_lineno","end_col_offset"]))void 0!==t[i]&&(o[i]=t[i],o._attributes.push(i));return o},e.ast_py_to_js=function(t){if(void 0!==t&&t!==r.None){if(Array.isArray(t))return t.map(e.ast_py_to_js);if("string"==typeof t)return t;var n=e.class_name(t),a=e.ast[n];if(void 0===a)return t;var o=new a;for(var s of a._fields)(s.endsWith("?")||s.endsWith("*"))&&(s=s.substr(0,s.length-1)),o[s]=e.ast_py_to_js(t[s]);for(var i of["lineno","col_offset","end_lineno","end_col_offset"])void 0!==t[i]&&(o[i]=t[i]);return o}},e.create_python_ast_classes=function(){if(!e.python_ast_classes)for(var t in e.python_ast_classes={},e.ast_classes)e.python_ast_classes[t]=function(n){var a,o;"string"==typeof e.ast_classes[n]&&(""==e.ast_classes[n]?o=a=[]:a=(o=e.ast_classes[n].split(",")).map((e=>e.endsWith("*")||e.endsWith("?")?e.substr(0,e.length-1):e)));var s=e.make_class(n),i={},_={},l=0;if(o)for(var c=0,u=a.length;c<u;c++){var f=a[c],p=o[c];l++,_[f]=null,p.endsWith("*")?i[f]=[]:p.endsWith("?")&&(i[f]=r.None)}if(s.$factory=function(){var r=e.args(t,l,e.clone(_),Object.keys(_),arguments,e.clone(i),null,"kw"),n={__class__:s,_attributes:e.fast_tuple([])};for(var a in r)if("kw"==a)for(var a in r.kw.$jsobj)n[a]=r.kw.$jsobj[a];else n[a]=r[a];return"Constant"==t&&(n.value=e.AST.$convert(r.value)),n},a&&(s._fields=a),s.__mro__=[e.AST,r.object],s.__module__="ast",s.__dict__=e.empty_dict(),o)for(c=0,u=o.length;c<u;c++){o[c].endsWith("?")&&r.dict.$setitem(s.__dict__,a[c],r.None)}return s}(t)};for(var l=e.op2ast_class={},c=[n.BinOp,n.BoolOp,n.Compare,n.UnaryOp],u=0;u<4;u++)for(var f in t[u])l[f]=[c[u],n[t[u][f]]]}(__BRYTHON__),function(e){e.produce_ast=!1,Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Number.isSafeInteger=Number.isSafeInteger||function(e){return Number.isInteger(e)&&Math.abs(e)<=Number.MAX_SAFE_INTEGER};var t,r=e.builtins;t=e.isNode?{location:{href:"",origin:"",pathname:""}}:self,e.parser={};e.clone=function(e){var t={};for(var r in e)t[r]=e[r];return t};e.last=function(t){return void 0===t&&console.log(e.make_frames_stack()),t[t.length-1]},e.list2obj=function(e,t){var r={},n=e.length;for(void 0===t&&(t=!0);n-- >0;)r[e[n]]=t;return r},e.op2method={operations:{"**":"pow","//":"floordiv","<<":"lshift",">>":"rshift","+":"add","-":"sub","*":"mul","/":"truediv","%":"mod","@":"matmul"},augmented_assigns:{"//=":"ifloordiv",">>=":"irshift","<<=":"ilshift","**=":"ipow","+=":"iadd","-=":"isub","*=":"imul","/=":"itruediv","%=":"imod","&=":"iand","|=":"ior","^=":"ixor","@=":"imatmul"},binary:{"&":"and","|":"or","~":"invert","^":"xor"},comparisons:{"<":"lt",">":"gt","<=":"le",">=":"ge","==":"eq","!=":"ne"},boolean:{or:"or",and:"and",in:"in",not:"not",is:"is"},subset:function(){var t={},r=[];if("all"==arguments[0])(r=Object.keys(e.op2method)).splice(r.indexOf("subset"),1);else for(var n of arguments)r.push(n);for(var a of r){var o=e.op2method[a];if(void 0===o)throw Error(a);for(var s in o)t[s]=o[s]}return t}};var n=e.op2method.subset("all");for(var a in e.method_to_op={},e.op2method)for(var o in e.op2method[a]){var s=`__${e.op2method[a][o]}__`;e.method_to_op[s]=o}var i=e.augmented_assigns=e.op2method.augmented_assigns,_=e.list2obj(["True","False","None","__debug__"]),l={},c=1;for(var u of[["or"],["and"],["not"],["in","not_in"],["<","<=",">",">=","!=","==","is","is_not"],["|"],["^"],["&"],[">>","<<"],["+","-"],["*","@","/","//","%"],["unary_neg","unary_inv","unary_pos"],["**"]]){for(var f of u)l[f]=c;c++}var p=e.ast,h=e.op2ast_class;function d(e){var t=[];for(var r of e.node.children){var n=r.C.tree[0];if(!(["single_kw","except","decorator"].indexOf(n.type)>-1||"condition"==n.type&&"elif"==n.token)){var a=n.ast();p.expr.indexOf(a.constructor)>-1&&y(a=new p.Expr(a),a.value),t.push(a)}}return t}var m=e.ast_dump=function(t,n){var a,o;if(n=n||0,t===r.None)return"None";if("string"==typeof t)return`'${t}'`;if("number"==typeof t)return t+"";if(t.imaginary)return t.value+"j";if(Array.isArray(t)){if(0==t.length)return"[]";l="[\n";var s=[];for(var i of t)try{s.push(m(i,n+1))}catch(err){throw console.log("error",t),console.log("for item",i),err}return(l+=s.join(",\n"))+"]"}if(t.$name)return t.$name+"()";if(t instanceof p.MatchSingleton)return`MatchSingleton(value=${e.AST.$convert(t.value)})`;if(t instanceof p.Constant)return(o=t.value).imaginary?`Constant(value=${r.repr(o.value)}j)`:`Constant(value=${e.AST.$convert(o)})`;var _=Object.getPrototypeOf(t).constructor,l="  ".repeat(n)+_.$name+"(";void 0===e.ast_classes[_.$name]&&console.log("no ast class",_);var c=e.ast_classes[_.$name].split(","),u=[];if(c=c.map((e=>e.endsWith("*")||e.endsWith("?")?e.substr(0,e.length-1):e)),[p.Name].indexOf(_)>-1){for(a of c)void 0!==t[a]&&u.push(`${a}=${m(t[a])}`);return l+u.join(", ")+")"}for(a of c)void 0!==t[a]&&(o=t[a],u.push(a+"="+m(t[a],n+1).trimStart()));return u.length>0&&(l+="\n",l+=u.map((e=>"  ".repeat(n+1)+e)).join(",\n")),l+=")"};function g(t,n){var a=e.file_cache[t],o=r.None;void 0!==a&&(o=a.split("\n")[n-1]);return o}var v=["nested_scopes","generators","division","absolute_import","with_statement","print_function","unicode_literals","barry_as_FLUFL","generator_stop","annotations"];function $(e,t,r){e.lineno=t.start[0],e.col_offset=t.start[1],t=r||t,e.end_lineno=t.end[0],e.end_col_offset=t.end[1]}function y(e,t){e.lineno=t.lineno,e.col_offset=t.col_offset,e.end_lineno=t.end_lineno,e.end_col_offset=t.end_col_offset}function b(e){for(var t=e;t.tree&&t.tree.length>0;)t=t.tree[0];return t.position}function w(t){for(var r=t;r.tree&&r.tree.length>0;)if((r=e.last(r.tree)).end_position)return r.end_position;return r.end_position||r.position}function x(t,r,n,a,o,s,i,_){var l=t.$factory(_);throw l.filename=r,l.lineno=n,l.offset=a+1,l.end_lineno=o,l.end_offset=s+1,l.text=i,l.args[1]=e.fast_tuple([r,l.lineno,l.offset,l.text,l.end_lineno,l.end_offset]),l.$frame_obj=e.frame_obj,l}function k(e,t,n,a){x(r.SyntaxError,bt(e).filename,t.start[0],t.start[1],n.end[0],n.end[1],t.line,a)}function j(e,t,r,n){var a=bt(t).filename;n=n||qt.value,(r=r||"invalid syntax").startsWith("(")&&(r="invalid syntax "+r),r=r.trim(),x(e,a,n.start[0],n.start[1],n.end[0],n.end[1]-1,n.line,r)}function B(e,t,n){j(r.SyntaxError,e,t,n)}function E(e,t,n){if(n){var a=n.C.tree[0].type,o=n.C.tree[0].token,s=n.line_num;switch(a){case"class":a="class definition";break;case"condition":case"single_kw":a=`'${o}' statement`;break;case"def":a="function definition";break;case"case":case"except":case"for":case"match":case"try":case"while":case"with":a=`'${a}' statement`}t+=` after ${a} on line ${s}`}j(r.IndentationError,e,t)}function N(t,r){var n,a="assign to",o=!1;r&&(n=r.once,a=r.action||a,o=void 0!==r.augmented&&r.augmented);var s=t,i=["assert","import","raise","return","decorator","comprehension","await"];function l(e,r,n){if(r=r||t.position,n=n||qt.value,o)k(t,r,n,`'${e}' is an illegal expression for augmented assignment`);else{var s=e;Array.isArray(s)?s=s[0]:"="==qt.value.string&&"OP"==qt.value.type&&(gt(t,{type:"augm_assign"})&&B(t),gt(t,{type:"assign"})&&k(t,r,n,"invalid syntax. Maybe you meant '==' or ':=' instead of '='?"),gt(t,{type:"list_or_tuple"})||(s+=" here. Maybe you meant '==' instead of '='?")),k(t,r,n,`cannot ${a} ${s}`)}}if("delete"!=a&&i.push("del"),"expr"==t.type){for(s=t;s.parent;)"expr"==s.parent.type&&s.parent,s=s.parent}if(function(e,t){for(var r=e;r;){if(r.parent&&r.parent.type==t&&r===r.parent.tree[0])return!0;r=r.parent}}(t,"augm_assign")&&B(t),"target_list"!=t.type)for(s=t;s;){if(i.indexOf(s.type)>-1)B(t,`(assign to ${s.type})`);else if("expr"==s.type){if(gt(s,{type:"annotation"}))return!0;"yield"==s.parent.type&&k(s,s.parent.position,w(s),"assignment to yield expression not possible");var c=s.tree[0];if("op"==c.type)void 0!==e.op2method.comparisons[s.tree[0].op]?(gt(s,{type:"target_list"})&&B(t),l("comparison",c.tree[0].position,w(c))):l("expression",c.tree[0].position,w(c));else if("attribute"==c.type&&gt(s,{type:"condition"}))l("attribute",s.position,w(t));else if("sub"==c.type&&gt(s,{type:"condition"}))l("subscript",s.position,w(t));else if("unary"==c.type)l("expression",c.position,w(c));else if("call"==c.type)l("function call",c.position,c.end_position);else if("id"==c.type){var u=c.value;["None","True","False","__debug__"].indexOf(u)>-1&&("__debug__"==u&&o&&(qt.value=c.position,B(c,"cannot assign to __debug__")),l([u])),!0===_[u]&&l(keyword)}else if(["str","int","float","complex"].indexOf(c.type)>-1)"op"!=s.parent.type&&l("literal");else if("ellipsis"==c.type)l("ellipsis");else if("genexpr"==c.type)l(["generator expression"]);else if("starred"==c.type)"delete"==a&&l("starred",c.position,w(c)),N(c.tree[0],{action:a,once:!0});else if("named_expr"==c.type)c.parenthesized?"node"==s.parent.type?k(t,c.target.position,w(c),"cannot assign to named expression here. Maybe you meant '==' instead of '='?"):"delete"==a&&l("named expression",c.position,w(c)):l("named expression");else if("list_or_tuple"==c.type)for(var f of s.tree)N(f,{action:a,once:!0});else"dict_or_set"==c.type?c.closed&&l("set"==c.real?"set display":"dict literal",s.position,w(c)):"lambda"==c.type?l("lambda"):"ternary"==c.type?l(["conditional expression"]):"JoinedStr"==c.type&&l("f-string expression",c.position,w(c))}else if("list_or_tuple"==s.type)for(var f of s.tree)N(f,{action:a,once:!0});else if("ternary"==s.type)l(["conditional expression"],s.position,w(t));else if("op"==s.type){var p=s.tree[0].position,h=e.last(s.tree).tree[0],d=h.end_position||h.position;void 0!==e.op2method.comparisons[s.op]?(gt(t,{type:"target_list"})&&B(t),l("comparison",p,d)):l("expression",p,d)}else if("yield"==s.type)l("yield expression");else if(s.comprehension)break;if(n)break;s=s.parent}else for(var m of t.tree)N(m,{action:"assign to"})}function S(t){t.length>0&&"abstract_expr"==e.last(t).type&&t.pop()}function T(e){var t=wt(e).line_num,r=bt(e).src;console.log("this",e,"\nline",t,r.split("\n")[t-1])}e.future_features=function(t,n){var a=0,o=0;for(t.body[0]instanceof e.ast.Expr&&t.body[0].value instanceof e.ast.Constant&&"string"==typeof t.body[0].value.value&&o++;o<t.body.length;){var s=t.body[o];if(!(s instanceof e.ast.ImportFrom&&"__future__"==s.module))break;for(var i of s.names){var _=i.name;"braces"==_?x(r.SyntaxError,n,i.lineno,i.col_offset,i.end_lineno,i.end_col_offset,g(n,s.lineno),"not a chance"):"annotations"==_?a|=16777216:-1==v.indexOf(_)&&x(r.SyntaxError,n,i.lineno,i.col_offset,i.end_lineno,i.end_col_offset,g(n,s.lineno),`future feature ${_} is not defined`)}o++}return{features:a}},e.raise_error_known_location=x,e.format_indent=function(t,r){for(var n=t.split("\n"),a=r,o="",s=!1,i=!1,_=!1,l=0,c=n.length;l<c;l++){var u=n[l],f=!1,p=!0;i?p=!1:u=_?"    "+u.trim():u.trim(),p&&s&&(u.startsWith("else")||u.startsWith("catch")||u.startsWith("finally"))&&(o=o.substr(0,o.length-1),p=!1),s=u.endsWith("}"),u.startsWith("}")?a--:u.endsWith("}")&&(u=u.substr(0,u.length-1),f=!0),a<0&&(e.get_option("debug")>2&&(console.log("wrong js indent"),console.log(o)),a=0);try{o+=(p?"  ".repeat(a):"")+u+"\n"}catch(err){throw console.log(o),err}if(u.endsWith("{"))a++;else if(f){--a<0&&(a=0);try{o+="  ".repeat(a)+"}\n"}catch(err){throw console.log(o),err}}i=u.endsWith("\\"),_=u.endsWith(",")&&(u.startsWith("var ")||_)}return o};var O=e.parser.$Node=function(e){this.type=e,this.children=[]};O.prototype.add=function(e){this.children[this.children.length]=e,e.parent=this,e.module=this.module},O.prototype.ast=function(){var t=new p.Module([],[]);for(var r of(t.lineno=this.line_num,this.children)){var n=r.C.tree[0];if(!(["single_kw","except","decorator"].indexOf(n.type)>-1||"condition"==n.type&&"elif"==n.token)){var a=r.C.tree[0].ast();p.expr.indexOf(a.constructor)>-1&&y(a=new p.Expr(a),a.value),t.body.push(a)}}return"eval"==this.mode&&(!(t.body.length>1)&&t.body[0]instanceof e.ast.Expr||B(this.children[0].C,"eval() argument must be an expression"),y(t=new e.ast.Expression(t.body[0].value),t.body)),t},O.prototype.insert=function(e,t){this.children.splice(e,0,t),t.parent=this,t.module=this.module},O.prototype.show=function(e){var t="";if("module"===this.type){for(var r of this.children)t+=r.show(e);return t}for(var r of(t+=" ".repeat(e=e||0),t+=this.C,this.children.length>0&&(t+="{"),t+="\n",this.children))t+=r.show(e+4);return this.children.length>0&&(t+=" ".repeat(e),t+="}\n"),t};var A=e.parser.AbstractExprCtx=function(e,t){this.type="abstract_expr",this.with_commas=t,this.parent=e,this.tree=[],this.position=qt.value,e.tree.push(this)};A.prototype.transition=function(e,t){var r=this,n=r.packed,a=r.is_await;r.position;switch(e){case"await":case"id":case"imaginary":case"int":case"float":case"str":case"JoinedStr":case"bytes":case"ellipsis":case"[":case"(":case"{":case".":case"not":case"lambda":case"yield":r.parent.tree.pop();var o,s=r.with_commas;r.packed&&(o=r.star_position),(r=r.parent).packed=n,r.is_await=a,void 0===r.position&&(r.position=qt.value),o&&(r.star_position=o)}switch(e){case"await":return new A(new q(new ie(r,"await",!1)),!1);case"id":return new ye(new ie(r,"id",s),t);case"str":return new tt(new ie(r,"str",s),t);case"JoinedStr":return new fe(new ie(r,"str",s),t);case"bytes":return new tt(new ie(r,"bytes",s),t);case"int":return new Ce("int",new ie(r,"int",s),t);case"float":return new Ce("float",new ie(r,"float",s),t);case"imaginary":return new Ce("imaginary",new ie(r,"imaginary",s),t);case"(":return new Ne(new ie(r,"tuple",s),"tuple");case"[":return new Ne(new ie(r,"list",s),"list");case"{":return new A(new re(new ie(r,"dict_or_set",s)),!1);case"ellipsis":return new ae(new ie(r,"ellipsis",s));case"not":return"op"==r.type&&"is"==r.op?(r.op="is_not",new A(r,!1)):new A(new Ie(new ie(r,"not",s)),!1);case"lambda":return new Be(new ie(r,"lambda",s));case"op":var i=t;switch("op"==r.parent.type&&-1=="+-~".indexOf(i)&&B(r),i){case"*":r.parent.tree.pop();s=r.with_commas;return(r=r.parent).position=qt.value,new A(new et(new ie(r,"expr",s)),!1);case"**":r.parent.tree.pop();s=r.with_commas;return(r=r.parent).position=qt.value,new A(new ke(new ie(r,"expr",s)),!1);case"-":case"~":case"+":return r.parent.tree.pop(),new A(new pt(new ie(r.parent,"unary",!1),i),!1);case"not":r.parent.tree.pop();s=r.with_commas;return r=r.parent,new Ie(new ie(r,"not",s));case"...":return new ae(new ie(r,"ellipsis",s))}B(r);break;case"in":if("op"==r.parent.type&&"not"==r.parent.op)return r.parent.op="not_in",r;B(r);break;case"=":"yield"==r.parent.type&&B(r,"assignment to yield expression not possible",r.parent.position),B(r);break;case"yield":return new A(new mt(r),!0);case":":return"sub"==r.parent.type||"list_or_tuple"==r.parent.type&&"sub"==r.parent.parent.type?new A(new Ze(r.parent),!1):kt(r.parent,e,t);case")":case",":switch(r.parent.type){case"list_or_tuple":case"slice":case"call_arg":case"op":case"yield":break;case"match":if(","==e){r.parent.tree.pop();var _=new Ne(r.parent,"tuple");return _.implicit=!0,_.has_comma=!0,_.tree=[r],r.parent=_,_}break;default:B(r)}break;case".":case"assert":case"break":case"class":case"continue":case"def":case"except":case"for":case"while":case"in":case"return":case"try":B(r)}return kt(r.parent,e,t)};var I=e.parser.AliasCtx=function(e){this.type="ctx_manager_alias",this.parent=e,this.tree=[],e.tree[e.tree.length-1].alias=this};I.prototype.transition=function(e,t){var r=this;switch(e){case",":case")":case":":return N(r.tree[0]),r.parent.set_alias(r.tree[0].tree[0]),kt(r.parent,e,t);case"eol":qt.value=w(r),B(r,"expected ':'")}B(r)};var C=e.parser.AnnotationCtx=function(e){this.type="annotation",this.parent=e,this.tree=[],e.annotation=this;var t=yt(e);if("def"==t.ntype&&e.tree&&e.tree.length>0&&"id"==e.tree[0].type){var r=e.tree[0].value;t.annotations=t.annotations||new Set,t.annotations.add(r)}};C.prototype.transition=function(e,t){var r=this;return"eol"==e&&1==r.tree.length&&0==r.tree[0].tree.length?B(r):":"==e&&"def"!=r.parent.type?B(r,"more than one annotation"):"augm_assign"==e?B(r,"augmented assign as annotation"):"op"==e&&B(r,"operator as annotation"),"expr"==r.parent.type&&(r.parent.with_commas=!1),kt(r.parent,e)};var M=e.parser.AssertCtx=function(e){this.type="assert",this.parent=e,this.tree=[],this.position=qt.value,e.tree[e.tree.length]=this};M.prototype.ast=function(){var e=this.tree[1],t=new p.Assert(this.tree[0].ast(),void 0===e?e:e.ast());return $(t,this.position),t},M.prototype.transition=function(t,n){var a=this;return","==t?(this.tree.length>1&&B(a,"(too many commas after assert)"),new A(this,!1)):"eol"==t?(1==this.tree.length&&"expr"==this.tree[0].type&&"list_or_tuple"==this.tree[0].tree[0].type&&e.warn(r.SyntaxWarning,"assertion is always true, perhaps remove parentheses?",bt(a).filename,qt.value),kt(a.parent,t)):void B(a)};var R=e.parser.AssignCtx=function(e,t){N(e),this.type="assign",this.position=qt.value,e.parent.tree.pop(),e.parent.tree.push(this),this.parent=e.parent,this.tree=[e];yt(this);if("assign"==e.type)N(e.tree[1]);else{var r=e.tree[0];if("ellipsis"==r.type)B(e,"cannot assign to Ellipsis");else if("unary"==r.type)B(e,"cannot assign to operator");else if("starred"==r.type){if("id"==r.tree[0].name){var n=r.tree[0].tree[0].value;["None","True","False","__debug__"].indexOf(n)>-1&&B(e,"cannot assign to "+n)}void 0===r.parent.in_tuple&&B(e,"starred assignment target must be in a list or tuple")}}};function F(e){if(Array.isArray(e))for(var t of e)F(t);else if(e instanceof p.List||e instanceof p.Tuple)for(var t of e.elts)F(t);else e instanceof p.Starred?e.value.ctx=new p.Store:void 0===e||(e.ctx?e.ctx=new p.Store:console.log("bizarre",e,e.constructor.$name))}R.prototype.ast=function(){var e=this.tree[1].ast(),t=[],r=this.tree[0];if("expr"==r.type&&"list_or_tuple"==r.tree[0].type&&(r=r.tree[0]),"list_or_tuple"==r.type)(r=r.ast()).ctx=new p.Store,t=[r];else{for(;"assign"==r.type;)t.splice(0,0,r.tree[1].ast()),r=r.tree[0];t.splice(0,0,r.ast())}e.ctx=new p.Load;wt(this).line_num;if(r.annotation)$((n=new p.AnnAssign(r.tree[0].ast(),r.annotation.tree[0].ast(),e,r.$was_parenthesized?0:1)).annotation,r.annotation.position,w(r.annotation)),n.target.ctx=new p.Store;else var n=new p.Assign(t,e);return $(n,this.position),F(n.targets),n},R.prototype.transition=function(e,t){var r=this;if("eol"==e)return"abstract_expr"==r.tree[1].type&&B(r),kt(r.parent,"eol");B(r)};var P=e.parser.AsyncCtx=function(e){this.type="async",this.parent=e,e.async=!0,this.position=e.position=qt.value};P.prototype.transition=function(e,t){var r,n=this;return"def"==e?kt(n.parent,e,t):"with"==e?((r=kt(n.parent,e,t)).async=n,r):"for"==e?((r=kt(n.parent,e,t)).parent.async=n,r):void B(n)};var L=e.parser.AttrCtx=function(e){this.type="attribute",this.value=e.tree[0],this.parent=e,this.position=qt.value,e.tree.pop(),e.tree[e.tree.length]=this,this.tree=[],this.func="getattr"};L.prototype.ast=function(){var e=this.value.ast(),t=this.unmangled_name,r=new p.Load;"setattr"==this.func?r=new p.Store:"delattr"==this.func&&(r=new p.Delete);var n=new p.Attribute(e,t,r);return $(n,this.position,this.end_position),n},L.prototype.transition=function(e,t){var r=this;if("id"===e){var n=t;return"__debug__"==n?B(r,"cannot assign to __debug__"):!0===_[n]&&B(r),r.unmangled_name=n,r.position=qt.value,r.end_position=qt.value,n=xt(n,r),r.name=n,r.parent}B(r)};var D=e.parser.AugmentedAssignCtx=function(e,t){N(e,{augmented:!0}),this.type="augm_assign",this.C=e,this.parent=e.parent,this.position=qt.value,e.parent.tree.pop(),e.parent.tree[e.parent.tree.length]=this,this.op=t,this.tree=[e];var r=this.scope=yt(this);this.module=r.module};D.prototype.ast=function(){var e=this.tree[0].ast(),t=this.tree[1].ast();e.ctx=new p.Store,t.ctx=new p.Load;var r=this.op.substr(0,this.op.length-1),n=h[r][1],a=new p.AugAssign(e,new n,t);return $(a,this.position),a},D.prototype.transition=function(e,t){var r=this;if("eol"==e)return"abstract_expr"==r.tree[1].type&&B(r),kt(r.parent,"eol");B(r)};var q=e.parser.AwaitCtx=function(e){this.type="await",this.parent=e,this.tree=[],this.position=qt.value,e.tree.push(this);for(var t=e;t;)"list_or_tuple"==t.type&&(t.is_await=!0),t=t.parent;var r=wt(this);r.awaits=r.awaits||[],r.awaits.push(this)};q.prototype.ast=function(){var e=new p.Await(this.tree[0].ast());return $(e,this.position),e},q.prototype.transition=function(e,t){return this.parent.is_await=!0,kt(this.parent,e,t)};var U=e.parser.BodyCtx=function(e){for(var t=e.parent;"node"!==t.type;)t=t.parent;var r=t.node,n=new O;return n.is_body_node=!0,n.line_num=r.line_num,r.insert(0,n),new Oe(n)},W=e.parser.BreakCtx=function(e){this.type="break",this.position=qt.value,this.parent=e,e.tree[e.tree.length]=this};W.prototype.ast=function(){var e=new p.Break;return $(e,this.position),e},W.prototype.transition=function(e,t){if("eol"==e)return kt(this.parent,"eol");B(this)};var V=e.parser.CallArgCtx=function(e){this.type="call_arg",this.parent=e,this.tree=[],this.position=qt.value,e.tree.push(this),this.expect="id"};V.prototype.transition=function(e,t){var r=this;switch(e){case"await":case"id":case"imaginary":case"int":case"float":case"str":case"JoinedStr":case"bytes":case"[":case"(":case"{":case".":case"ellipsis":case"not":case"lambda":if("id"==r.expect){this.position=qt.value,r.expect=",";var n=new A(r,!1);return kt(n,e,t)}break;case"=":if(","==r.expect)return new ie(new je(r),"kw_value",!1);break;case"for":return new ot(new le(new ve(r)));case"op":if("id"==r.expect){var a=t;switch(r.expect=",",a){case"+":case"-":case"~":return kt(new A(r,!1),e,a);case"*":return r.parent.tree.pop(),new Qe(r.parent);case"**":return r.parent.tree.pop(),new ne(r.parent)}}B(r);break;case")":return kt(r.parent,e);case":":if(","==r.expect&&"lambda"==r.parent.parent.type)return kt(r.parent.parent,e);break;case",":if(","==r.expect)return kt(r.parent,e,t)}B(r)};var G=e.parser.CallCtx=function(e){this.position=qt.value,this.type="call",this.func=e.tree[0],void 0!==this.func&&(this.func.parent=this,this.parenth_position=this.position,this.position=this.func.position),this.parent=e,"class"!=e.type?(e.tree.pop(),e.tree[e.tree.length]=this):e.args=this,this.expect="id",this.tree=[]};G.prototype.ast=function(){var e=new p.Call(this.func.ast(),[],[]),t=new Set;for(var n of this.tree)if("double_star_arg"==n.type){var a=n.tree[0].tree[0].ast();delete(i=new p.keyword(r.None,a)).arg,e.keywords.push(i)}else if("star_arg"==n.type){e.keywords.length>0&&(e.keywords[0].arg||B(this,"iterable argument unpacking follows keyword argument unpacking"));var o=new p.Starred(n.tree[0].ast());$(o,n.position),o.ctx=new p.Load,e.args.push(o)}else if("genexpr"==n.type)e.args.push(n.ast());else{var s=n.tree[0];if(void 0===s)continue;if("kwarg"==s.type){var i,_=s.tree[0].value;"__debug__"==_?k(this,this.position,this.end_position,"cannot assign to __debug__"):["True","False","None"].indexOf(_)>-1&&k(this,s.position,s.equal_sign_position,'expression cannot contain assignment, perhaps you meant "=="?'),t.has(_)&&k(s,s.position,w(s),`keyword argument repeated: ${_}`),t.add(_),$(i=new p.keyword(s.tree[0].value,s.tree[1].ast()),s.position),e.keywords.push(i)}else e.keywords.length>0&&(e.keywords[0].arg?k(this,s.position,w(s),"positional argument follows keyword argument"):k(this,s.position,w(s),"positional argument follows keyword argument unpacking")),e.args.push(s.ast())}return $(e,this.position,this.end_position),e},G.prototype.transition=function(e,t){var r=this;switch(e){case",":return"id"==r.expect&&B(r),r.expect="id",r;case"await":case"id":case"imaginary":case"int":case"float":case"str":case"JoinedStr":case"bytes":case"[":case"(":case"{":case".":case"not":case"lambda":case"ellipsis":return r.expect=",",kt(new V(r),e,t);case")":return r.end_position=qt.value,r.parent;case"op":switch(r.expect=",",t){case"-":case"~":case"+":return r.expect=",",kt(new V(r),e,t);case"*":return r.has_star=!0,new Qe(r);case"**":return r.has_dstar=!0,new ne(r)}B(r);break;case"yield":B(r)}return kt(r.parent,e,t)};var z=e.parser.CaseCtx=function(e){this.type="case",this.position=qt.value,e.tree=[this],this.parent=e,this.tree=[],this.expect="as"};z.prototype.ast=function(){var e=new p.match_case(this.tree[0].ast(),this.has_guard?this.tree[1].tree[0].ast():void 0,d(this.parent));return $(e,this.position),e},z.prototype.set_alias=function(e){this.alias=e},z.prototype.transition=function(t,r){var n=this;switch(t){case"as":return n.expect=":",new A(new I(n));case":":var a;switch((a=function e(t){var r;if("capture_pattern"==t.type)return t.tree[0];if("or_pattern"==t.type){for(var n of t.tree)if(r=e(n))return r}else if("sequence_pattern"==t.type&&"("==t.token&&1==t.tree.length&&(r=e(t.tree[0])))return r;return!1}(this.tree[0]))&&(wt(n).parent.irrefutable=a),n.expect){case"id":case"as":case":":var o=e.last(n.tree);return o&&"sequence_pattern"==o.type&&Ue(o),U(n)}break;case"op":if("|"==r)return new Fe(new ze(n));B(n,"expected :");break;case",":if(":"==n.expect||"as"==n.expect)return new Fe(new Je(n));break;case"if":return n.has_guard=!0,new A(new H(n,t),!1);default:B(n,"expected :")}};var J=e.parser.ClassCtx=function(e){this.type="class",this.parent=e,this.tree=[],this.position=qt.value,e.tree[e.tree.length]=this,this.expect="id";var t=this.scope=yt(this);this.parent.node.parent_block=t,this.parent.node.bound={}};J.prototype.ast=function(){var e=Z(this.parent.node),t=[],r=[],n=[];if(this.args)for(var a of this.args.tree)"kwarg"==a.tree[0].type?r.push(new p.keyword(a.tree[0].tree[0].value,a.tree[0].tree[1].ast())):t.push(a.tree[0].ast());this.type_params&&(n=this.type_params.ast());var o=new p.ClassDef(this.name,t,r,d(this.parent),e,n);return $(o,this.position),o},J.prototype.transition=function(e,t){var r=this;switch(e){case"id":if("id"==r.expect)return r.set_name(t),r.expect="(:",r;break;case"(":return void 0===r.name&&B(r,"missing class name"),r.parenthesis_position=qt.value,new G(r);case"[":return void 0===r.name&&B(r,"missing class name"),new lt(r);case":":if(this.args)for(var n of this.args.tree){var a=n.tree[0];"call_arg"!=n.type&&(qt.value=r.parenthesis_position,B(r,"expected ':'")),"expr"==a.type&&"id"==a.name||"kwarg"==a.type||(qt.value=n.position,B(n,"invalid class parameter"))}return U(r);case"eol":B(r,"expected ':'")}B(r)},J.prototype.set_name=function(t){var r=this.parent;this.random=e.UUID(),this.name=t,this.id=r.node.module+"_"+t+"_"+this.random,this.parent.node.id=this.id;for(var n=this.scope,a=n,o=n,s=[];"class"==o.ntype;)s.splice(0,0,o.C.tree[0].name),o=o.parent;for(this.qualname=s.concat([t]).join(".");a.C&&"class"==a.C.tree[0].type;)a=a.parent;for(;a.C&&"def"!=a.C.tree[0].type&&"generator"!=a.C.tree[0].type;)a=a.parent;this.parent.node.parent_block=a};var Y={generators:function(t){var r=[];for(var n of t)if("for"==n.type){var a=n.tree[0].ast();F(a),r.push(new p.comprehension(a,n.tree[1].ast(),[],n.is_async?1:0))}else e.last(r).ifs.push(n.tree[0].ast());return r},make_comp:function(t,r){if("yield"==r.tree[0].type)"listcomp"==t.type||("dictcomp"==t.type||("setcomp"==t.type||t.type)),r.tree[0];t.comprehension=!0,t.position=qt.value,t.parent=r.parent,t.id=t.type+e.UUID();var n=yt(r);for(t.parent_block=n;n;){if(n.C&&n.C.tree&&n.C.tree.length>0&&n.C.tree[0].async){t.async=!0;break}n=n.parent_block}t.module=bt(r).module,t.module_ref=t.module.replace(/\./g,"_"),r.parent.tree[r.parent.tree.length-1]=t,Y.set_parent_block(r.tree[0],t)},set_parent_block:function(e,t){if(e.tree)for(var r of e.tree)r.comprehension&&(r.parent_block=t),Y.set_parent_block(r,t)}},H=e.parser.ConditionCtx=function(e,t){if(this.type="condition",this.token=t,this.parent=e,this.tree=[],this.position=qt.value,this.node=wt(this),this.scope=yt(this),"elif"==t){var r=this.node.parent.children.indexOf(this.node);this.node.parent.children[r-1].C.tree[0].orelse=this}e.tree.push(this)};H.prototype.ast=function(){var e=new p[{if:"If",while:"While",elif:"If"}[this.token]](this.tree[0].ast());return this.orelse?"elif"==this.orelse.token?e.orelse=[this.orelse.ast()]:e.orelse=this.orelse.ast():e.orelse=[],e.body=d(this),$(e,this.position),e},H.prototype.transition=function(e,t){var r=this;if(":"==e)return"abstract_expr"==r.tree[0].type&&0==r.tree[0].tree.length&&B(r),U(r);if(r.in_comp&&"if"==r.token){if("]"==e)return kt(r.parent,e,t);if("if"==e){var n=new H(r.parent,"if");return n.in_comp=r.in_comp,new A(n,!1)}if(")]}".indexOf(e)>-1)return kt(this.parent,e,t);if(r.in_comp&&"for"==e)return new ot(new le(r.parent));","==e&&gt(r,{type:"call"})&&k(r,r.in_comp.position,w(r),"Generator expression must be parenthesized")}B(r,"expected ':'")};var K=e.parser.ContinueCtx=function(e){this.type="continue",this.parent=e,this.position=qt.value,wt(this).is_continue=!0,e.tree[e.tree.length]=this};K.prototype.ast=function(){var e=new p.Continue;return $(e,this.position),e},K.prototype.transition=function(e,t){if("eol"==e)return this.parent;B(this)};var X=e.parser.DecoratorCtx=function(e){this.type="decorator",this.parent=e,e.tree[e.tree.length]=this,this.tree=[],this.position=qt.value};function Z(e){for(var t=[],r=e.parent,n=r.children.indexOf(e);!(--n<0)&&"decorator"==r.children[n].C.tree[0].type;){var a=r.children[n].C.tree[0].tree[0];t.splice(0,0,a.ast())}return t}X.prototype.transition=function(e,t){if("eol"==e)return kt(this.parent,e);B(this)};var Q=e.parser.DefCtx=function(e){this.type="def",this.name=null,this.parent=e,this.tree=[],this.async=e.async,this.async?this.position=e.position:this.position=qt.value,e.tree[e.tree.length]=this,this.enclosing=[];var t=this.scope=yt(this);t.C&&"class"==t.C.tree[0].type&&(this.class_name=t.C.tree[0].name);for(var r=t;r.C&&"class"==r.C.tree[0].type;)r=r.parent;for(;r.C&&"def"!=r.C.tree[0].type;)r=r.parent;this.parent.node.parent_block=r;var n=r;for(this.is_comp=n.is_comp;n&&n.C;){if("def"==n.C.tree[0].type){this.inside_function=!0;break}n=n.parent_block}this.module=t.module,this.root=bt(this),this.positional_list=[],this.default_list=[],this.other_args=null,this.other_kw=null,this.after_star=[]};Q.prototype.ast=function(){var e,t,r=Z(this.parent.node);return e=this.tree[1].ast(),t=this.async?new p.AsyncFunctionDef(this.name,e,[],r):new p.FunctionDef(this.name,e,[],r),this.annotation&&(t.returns=this.annotation.tree[0].ast()),this.type_params&&(t.type_params=this.type_params.ast()),t.body=d(this.parent),$(t,this.position),t},Q.prototype.set_name=function(t){["None","True","False"].indexOf(t)>-1&&B(this);new ye(this,t);this.name=t,this.id=this.scope.id+"_"+t,this.id=this.id.replace(/\./g,"_"),this.id+="_"+e.UUID(),this.parent.node.id=this.id,this.parent.node.module=this.module},Q.prototype.transition=function(e,t){var r=this;switch(e){case"id":return r.name&&B(r),r.set_name(t),r;case"(":return null==r.name&&B(r,"missing name in function definition"),r.has_args=!0,new de(r);case"[":return void 0===r.name&&B(r,"missing function name"),new lt(r);case")":return r;case"annotation":return new A(new C(r),!0);case":":if(r.has_args)return U(r);B(r,"missing function parameters");break;case"eol":r.has_args&&B(r,"expected ':'")}B(r)};var ee=e.parser.DelCtx=function(e){this.type="del",this.parent=e,e.tree.push(this),this.tree=[],this.position=qt.value};ee.prototype.ast=function(){var e;if("list_or_tuple"==this.tree[0].type)e=this.tree[0].tree.map((e=>e.ast()));else{if("expr"==this.tree[0].type&&"list_or_tuple"==this.tree[0].tree[0].type){for(var t of((e=this.tree[0].tree[0].ast()).ctx=new p.Del,e.elts))t.ctx=new p.Del;var r;return $(r=new p.Delete([e]),this.position),r}e=[this.tree[0].tree[0].ast()]}for(var n of e)n.ctx=new p.Del;return $(r=new p.Delete(e),this.position),r},ee.prototype.transition=function(e,t){if("eol"==e)return N(this.tree[0],{action:"delete"}),kt(this.parent,e);B(this)};var te=function(t){"expr"==t.tree[0].type&&t.tree[0].tree[0].comprehension&&(t.tree[0].tree[0].parent_block=this);this.type="dictcomp",this.position=qt.value,this.comprehension=!0,this.parent=t.parent,this.key=t.tree[0],this.value=t.tree[1],this.key.parent=this,this.value.parent=this,this.tree=[],this.id="dictcomp"+e.UUID(),this.parent_block=yt(t),this.module=bt(t).module,t.parent.tree[t.parent.tree.length-1]=this,this.type="dictcomp",Y.make_comp(this,t)};te.prototype.ast=function(){void 0===this.value.ast&&console.log("dict comp ast, no value.ast",this);var e=new p.DictComp(this.key.ast(),this.value.ast(),Y.generators(this.tree));return $(e,this.position),e},te.prototype.transition=function(e,t){if("}"==e)return this.parent;B(this)};var re=e.parser.DictOrSetCtx=function(e){this.type="dict_or_set",this.real="dict_or_set",this.expect=",",this.closed=!1,this.position=qt.value,this.nb_items=0,this.parent=e,this.tree=[],e.tree[e.tree.length]=this};re.prototype.ast=function(){var e;if("dict"==this.real){for(var t=[],n=[],a=(Date.now(),0),o=this.items.length;a<o;a++)"expr"==this.items[a].type&&"kwd"==this.items[a].tree[0].type?(t.push(r.None),n.push(this.items[a].tree[0].tree[0].ast())):(t.push(this.items[a].ast()),n.push(this.items[a+1].ast()),a++);e=new p.Dict(t,n)}else if("set"==this.real){var s=[];for(var i of this.items)if(i.packed){var _=new p.Starred(i.ast(),new p.Load);$(_,i.position),s.push(_)}else s.push(i.ast());e=new p.Set(s)}return $(e,this.position),e},re.prototype.transition=function(t,r){var n=this;if(n.closed){switch(t){case"[":return new A(new at(n.parent),!1);case"(":return new V(new G(n.parent))}return kt(n.parent,t,r)}if(","==n.expect){function a(){var t,r=e.last(n.tree);r&&r.wrong_assignment?t="invalid syntax. Maybe you meant '==' or ':=' instead of '='?":"dict"==n.real&&"expr"==r.type&&"starred"==r.tree[0].type?t="cannot use a starred expression in a dictionary value":"set"==n.real&&"kwd"==r.tree[0].type&&(qt.value=r.position,B(n)),t&&k(n,r.position,w(r),t)}switch(t){case"}":switch("expr"==(o=e.last(n.tree)).type&&"kwd"==o.tree[0].type?n.nb_items+=2:"abstract_expr"==o.type?n.tree.pop():n.nb_items++,a(),n.end_position=qt.value,"dict_or_set"==n.real&&(n.real=0==n.tree.length?"dict":"set"),n.real){case"set":return n.items=n.tree,n.tree=[],n.closed=!0,n;case"dict":return n.tree.length&&"abstract_expr"==e.last(n.tree).type?B(n,"expression expected after dictionary key and ':'"):n.nb_items%2!=0&&B(n,"':' expected after dictionary key"),n.items=n.tree,n.tree=[],n.closed=!0,n}B(n);break;case",":if(a(),"expr"==(o=e.last(n.tree)).type&&"kwd"==o.tree[0].type?n.nb_items+=2:n.nb_items++,"dict_or_set"==n.real){var o=n.tree[0];n.real="expr"==o.type&&"kwd"==o.tree[0].type?"dict":"set"}return"dict"==n.real&&n.nb_items%2&&B(n,"':' expected after dictionary key"),new A(n,!1);case":":if("dict_or_set"==n.real&&(n.real="dict"),"dict"==n.real)return n.expect="value",this.nb_items++,n.value_pos=qt.value,n;B(n);break;case"for":"set"==n.real&&n.tree.length>1&&(qt.value=n.tree[0].position,B(n,"did you forget parentheses around the comprehension target?"));var s,i=n.tree[0];return"expr"==i.type&&("kwd"==i.tree[0].type?s="dict unpacking cannot be used in dict comprehension":"starred"==i.tree[0].type&&(s="iterable unpacking cannot be used in comprehension"),s&&k(n,i.position,w(i),s)),"dict_or_set"==n.real?new ot(new le(new Ke(this))):new ot(new le(new te(this)))}B(n)}else if("value"==n.expect){if(Dt.indexOf(t)>-1){var _=new A(n,!1);try{kt(_,t,r),n.tree.pop()}catch(err){B(n)}}try{return n.expect=",",kt(new A(n,!1),t,r)}catch(err){qt.value=n.value_pos,B(n,"expression expected after dictionary key and ':'")}}return kt(n.parent,t,r)};var ne=e.parser.DoubleStarArgCtx=function(e){this.type="double_star_arg",this.parent=e,this.tree=[],e.tree[e.tree.length]=this};ne.prototype.transition=function(e,t){var r=this;switch(e){case"id":case"imaginary":case"int":case"float":case"str":case"JoinedStr":case"bytes":case"[":case"(":case"{":case".":case"not":case"lambda":return kt(new A(r,!1),e,t);case",":case")":return kt(r.parent,e);case":":if("lambda"==r.parent.parent.type)return kt(r.parent.parent,e)}B(r)};var ae=e.parser.EllipsisCtx=function(e){this.type="ellipsis",this.parent=e,this.position=qt.value,e.tree[e.tree.length]=this};ae.prototype.ast=function(){var e=new p.Constant(r.Ellipsis);return $(e,this.position),e},ae.prototype.transition=function(e,t){return kt(this.parent,e,t)};var oe=e.parser.$EndOfConditionalCtx=function(e){this.type="end_positional",this.parent=e,e.has_end_positional=!0,e.parent.pos_only=e.tree.length,e.tree.push(this)};oe.prototype.transition=function(e,t){if(","==e||")"==e)return kt(this.parent,e,t);B(this)};var se=e.parser.ExceptCtx=function(e){this.type="except",this.position=qt.value,this.parent=e,e.tree[e.tree.length]=this,this.tree=[],this.scope=yt(this);for(var t=e.node,r=t.parent.children.indexOf(t),n=r-1;"try"!=t.parent.children[n].C.tree[0].type;)n--;this.try_node=t.parent.children[n],this.is_first_child=r==n+1,this.try_node.C.is_trystar?this.expect="*":this.expect="id"};se.prototype.ast=function(){var e=new p.ExceptHandler(1==this.tree.length?this.tree[0].ast():void 0,this.has_alias?this.tree[0].alias:void 0,d(this.parent));return $(e,this.position),e},se.prototype.transition=function(e,t){var r=this;if("op"==e&&"*"==t){if(r.is_first_child)return r.try_node.C.is_trystar=!0,r.expect="id",r;if("*"==r.expect)return r.expect="id",r;B(r,"cannot have both 'except' and 'except*' on the same 'try'")}else"*"==r.expect&&B(r,"cannot have both 'except' and 'except*' on the same 'try'");switch(e){case"id":case"imaginary":case"int":case"float":case"str":case"JoinedStr":case"bytes":case"[":case"(":case"{":case"not":case"lambda":if("id"==r.expect)return r.expect="as",kt(new A(r,!1),e,t)}switch(e){case"as":if("as"==r.expect&&void 0===r.has_alias)return r.expect="alias",r.has_alias=!0,r;break;case"id":if("alias"==r.expect)return r.expect=":",r.set_alias(t),r;break;case":":var n=r.expect;if("id"==n||"as"==n||":"==n)return U(r);break;case"(":if("id"==r.expect&&0==r.tree.length)return r.parenth=!0,r;break;case")":if(","==r.expect||"as"==r.expect)return r.expect="as",r;break;case",":if(void 0!==r.parenth&&void 0===r.has_alias&&("as"==r.expect||","==r.expect))return r.expect="id",r;void 0===r.parenth&&B(r,"multiple exception types must be parenthesized");break;case"eol":B(r,"expected ':'")}B(r)},se.prototype.set_alias=function(e){this.tree[0].alias=xt(e,this)};var ie=e.parser.ExprCtx=function(e,t,r){this.type="expr",this.name=t,this.position=qt.value,this.with_commas=r,this.expect=",",this.parent=e,e.packed&&(this.packed=e.packed),this.tree=[],e.tree[e.tree.length]=this};ie.prototype.ast=function(){var e=this.tree[0].ast();return this.packed||this.annotation&&$(e=new p.AnnAssign(e,this.annotation.tree[0].ast(),void 0,this.$was_parenthesized?0:1),this.position),e},ie.prototype.transition=function(e,t){var r=this;if(Dt.indexOf(e)>-1&&-1==["as","else","if","for","from","in"].indexOf(e)&&B(r),"star_target"==r.parent.expect&&["pass","in","not","op","augm_assign","=",":=","if","eol"].indexOf(e)>-1)return kt(r.parent,e,t);switch(e){case"bytes":case"float":case"id":case"imaginary":case"int":case"lambda":case"pass":var n="invalid syntax. Perhaps you forgot a comma?";k(r,this.position,qt.value,n);break;case"{":return"id"==r.tree[0].type&&-1!=["print","exec"].indexOf(r.tree[0].value)||B(r),new A(new re(r),!1);case"[":case"(":case".":case"not":if("expr"==r.expect)return r.expect=",",kt(new A(r,!1),e,t)}switch(e){case"not":if(","==r.expect)return new _e(r);break;case"in":if("target_list"==r.parent.type)return kt(r.parent,e);if(","==r.expect)return kt(r,"op","in");break;case",":if(","==r.expect){if("iterator"==r.name&&"node"!=r.parent.parent.type){var a=r.parent.parent;k(r,b(a),w(a),"Generator expression must be parenthesized")}if(r.with_commas||["assign","return"].indexOf(r.parent.type)>-1){gt(r,{type:"yield",from:!0})&&B(r,"no implicit tuple for yield from"),r.parent.tree.pop();var o=new Ne(r.parent,"tuple");return o.implicit=!0,o.has_comma=!0,o.tree=[r],r.parent=o,o}}return kt(r.parent,e);case".":return new L(r);case"[":return"id"==r.tree[0].type&&delete r.tree[0].bound,new A(new at(r),!0);case"(":return new G(r);case"op":if(void 0===l[t]){if($=gt(r,{type:"fstring_replacement_field"}))return kt($,e,t);B(r)}"withitem"==r.parent.type&&2==r.parent.tree.length&&B(r,"expected ':'"),"~"==t&&B(r);var s=r.parent,i=t;if("ternary"==s.type&&s.in_else){var _=new Me(r,i);return new A(_,!1)}for(var c=r.parent,u=null;;)if("unary"==c.type&&"**"!==i)u=c,c=c.parent;else if("expr"==c.type)c=c.parent;else if("op"==c.type&&l[c.op]>=l[i]&&("**"!=c.op||"**"!=i))u=c,c=c.parent;else{if(!("not"==c.type&&l.not>l[i]))break;u=c,c=c.parent}if(null===u){if("op"==c.type){var f=c.tree.pop();(h=new ie(c,"operand",r.with_commas)).tree.push(f),f.parent=h;_=new Me(h,i);return new A(_,!1)}for(var p=r.position;r.parent!==c;)s=(r=r.parent).parent;var h;r.parent.tree.pop(),(h=new ie(s,"operand",r.with_commas)).position=p,h.expect=",",r.parent=h;_=new Me(r,i);return new A(_,!1)}if("and"===i||"or"===i)for(;"not"==u.parent.type||"expr"==u.parent.type&&"not"==u.parent.parent.type;)s=(u=u.parent).parent;if("op"==u.type){var d=!1;switch(u.op){case"<":case"<=":case"==":case"!=":case"is":case">=":case">":d=!0}if(d)switch(i){case"<":case"<=":case"==":case"!=":case"is":case">=":case">":case"in":case"not_in":return u.ops=u.ops||[u.op],u.ops.push(i),new A(u,!1)}}u.parent.tree.pop(),(h=new ie(u.parent,"operand",!1)).tree=[c],h.position=c.position,u.parent=h;_=new Me(u,i);return new A(_,!1);case"augm_assign":N(r,{augmented:!0});for(var m=r;m;)"assign"==m.type||"augm_assign"==m.type?B(r,"augmented assignment inside assignment"):"op"==m.type?B(r,"cannot assign to operator"):"list_or_tuple"==m.type?B(r,`'${m.real}' is an illegal expression for augmented assignment`):["list","tuple"].indexOf(m.name)>-1?B(r,`'${m.name}' is an illegal expression for augmented assignment`):["dict_or_set"].indexOf(m.name)>-1&&B(r,`'${m.tree[0].real} display' is an illegal expression for augmented assignment`),m=m.parent;return","==r.expect?new A(new D(r,t),!0):kt(r.parent,e,t);case":":if("sub"==r.parent.type||"list_or_tuple"==r.parent.type&&"sub"==r.parent.parent.type)return new A(new Ze(r.parent),!1);if("slice"==r.parent.type)return kt(r.parent,e,t);if("node"==r.parent.type){if(1==r.tree.length){var g=r.tree[0];if(N(g),["id","sub","attribute"].indexOf(g.type)>-1)return new A(new C(r),!1);if("tuple"==g.real&&","==g.expect&&1==g.tree.length)return new A(new C(g.tree[0]),!1)}var v=r.tree[0].real;k(r,r.position,w(r),`only single target (not ${v}) can be annotated`)}break;case"=":var $;if($=gt(r,{type:"fstring_replacement_field"}))return kt($,e,t);var y,x=gt(r,{type:"call_arg"});try{N(r)}catch(err){if(!x)throw err;for(var j=r;j.parent!==x;)j=j.parent;k(j,j.position,qt.value,'expression cannot contain assignment, perhaps you meant "=="?')}if(","==r.expect){if("call_arg"==r.parent.type)return"id"!=r.tree[0].type&&k(r,r.position,qt.value,'expression cannot contain assignment, perhaps you meant "=="?'),new A(new je(r),!0);if(y=gt(r,{type:"annotation"}))return kt(y,e,t);if("op"==r.parent.type)B(r,"cannot assign to operator");else if("not"==r.parent.type)B(r,"cannot assign to operator");else if("with"==r.parent.type)B(r,"expected :");else if("dict_or_set"==r.parent.type){if(","==r.parent.expect)return r.wrong_assignment=!0,kt(r,":=")}else if("list_or_tuple"==r.parent.type){for(var E=0;E<r.parent.tree.length;E++){var S=r.parent.tree[E];try{N(S,{once:!0})}catch(err){console.log(r),B(r,"invalid syntax. Maybe you meant '==' or ':=' instead of '='?")}"expr"==S.type&&"operand"==S.name&&B(r,"cannot assign to operator")}("list"==r.parent.real||"tuple"==r.parent.real&&!r.parent.implicit)&&B(r,"invalid syntax. Maybe you meant '==' or ':=' instead of '='?")}else"expr"==r.parent.type&&"iterator"==r.parent.name?B(r,"expected :"):"lambda"==r.parent.type?"node"!=r.parent.parent.parent.type&&B(r,'expression cannot contain assignment, perhaps you meant "=="?'):"target_list"==r.parent.type&&B(r,"(assign to target in iteration)");for(;void 0!==r.parent;)"condition"==(r=r.parent).type?B(r,"invalid syntax. Maybe you meant '==' or ':=' instead of '='?"):"augm_assign"==r.type&&B(r,"(assignment inside augmented assignment)");return r=r.tree[0],new A(new R(r),!0)}break;case":=":var T=r.parent.type;if(["node","assign","kwarg","annotation"].indexOf(T)>-1||"func_arg_id"==T&&r.parent.tree.length>0?B(r,"(:= invalid, parent "+T+")"):"call_arg"==T&&"call"==r.parent.parent.type&&"lambda"==r.parent.parent.parent.type&&B(r,"(:= invalid inside function arguments)"),1==r.tree.length&&"id"==r.tree[0].type){var O=yt(r),I=r.tree[0].value;for(["None","True","False"].indexOf(I)>-1?B(r,`cannot use assignment expressions with ${I}`):"__debug__"==I&&B(r,"cannot assign to __debug__");O.comprehension;)O=O.parent_block;return new A(new Te(r),!1)}B(r);break;case"if":var M=!1;for(j=r.parent;j;){if(j.comprehension){M=!0;break}if("list_or_tuple"==j.type)break;if("comp_for"==j.type)break;if("comp_if"==j.type){M=!0;break}if("call_arg"==j.type||"sub"==j.type)break;if("expr"==j.type&&"comp_iterable"==j.parent.type){M=!0;break}j=j.parent}if(M)break;for(j=r;j.parent&&("op"==j.parent.type||"not"==j.parent.type||"unary"==j.parent.type||"expr"==j.parent.type&&"operand"==j.parent.name);)j=j.parent;return new A(new st(j),!1);case"JoinedStr":if(1==r.tree.length&&r.tree[0]instanceof fe)return F=r.tree[0];n="invalid syntax. Perhaps you forgot a comma?";k(r,this.position,qt.value,n);break;case"str":if(1==r.tree.length&&r.tree[0]instanceof fe){var F=r.tree[0];return new tt(F,t),r}n="invalid syntax. Perhaps you forgot a comma?";k(r,this.position,qt.value,n);break;case"eol":if(2==r.tree.length&&"id"==r.tree[0].type&&["print","exec"].indexOf(r.tree[0].value)>-1){var P=r.tree[0].value;k(r,r.position,qt.value,`Missing parentheses in call to '${P}'. Did you mean ${P}(...)?`)}if(-1==["dict_or_set","list_or_tuple","str"].indexOf(r.parent.type)){var q=r.tree[0];"starred"==q.type?(qt.value=q.position,gt(r,{type:"del"})&&B(r,"cannot delete starred"),k(r,q.position,w(q),"can't use starred expression here")):"call"==q.type&&"starred"==q.func.type&&(qt.value=q.func.position,B(r,"can't use starred expression here"))}}return kt(r.parent,e)};var _e=e.parser.ExprNot=function(e){this.type="expr_not",this.parent=e,this.tree=[],e.tree[e.tree.length]=this};_e.prototype.transition=function(e,t){var r=this;if("in"==e){r.parent.tree.pop();for(var n=r.parent;"expr"!==n.type;)n=n.parent;return n.transition("op","not_in")}B(r)};var le=e.parser.ForExpr=function(e){e.node&&e.node.parent.is_comp&&(e.node.parent.first_for=this),this.type="for",this.parent=e,this.tree=[],this.position=qt.value,e.tree.push(this),this.scope=yt(this),this.module=this.scope.module};le.prototype.ast=function(){var e=this.tree[0].ast(),t=this.tree[1].ast(),r=this.orelse?this.orelse.ast():[],n=d(this.parent);F(e);var a=new(this.async?p.AsyncFor:p.For)(e,t,n,r,undefined);return $(a,this.async?this.async.position:this.position,w(this)),a},le.prototype.transition=function(e,t){var r=this;switch(e){case"in":return 0==r.tree[0].tree.length&&B(r,"(missing target between 'for' and 'in')"),N(r.tree[0]),new A(new ie(r,"iterator",!0),!1);case":":return N(r.tree[0]),(r.tree.length<2||"abstract_expr"==r.tree[1].tree[0].type)&&B(r),U(r)}if(this.parent.comprehension)switch(e){case"]":if("listcomp"==this.parent.type)return kt(this.parent,e,t);break;case")":if("genexpr"==this.parent.type)return kt(this.parent,e,t);break;case"}":if("dictcomp"==this.parent.type||"setcomp"==this.parent.type)return kt(this.parent,e,t);break;case"for":return new ot(new le(this.parent));case"if":var n=new H(this.parent,"if");return n.in_comp=this.parent,new A(n,!1)}"eol"==e&&(qt.value=w(r),2==r.tree.length&&B(r,"expected ':'")),B(r)};var ce=e.parser.FromCtx=function(e){this.type="from",this.parent=e,this.module="",this.names=[],this.names_position=[],this.position=qt.value,e.tree[e.tree.length]=this,this.expect="module",this.scope=yt(this)};function ue(e,t){if(1==t.length)return t+e+t;var r=t[0];return r+e.replace(new RegExp(r,"g"),"\\"+r)+r}ce.prototype.ast=function(){for(var e,t=this.module,r=0;t.length>0&&t.startsWith(".");)r++,t=t.substr(1);for(var n={module:t||void 0,names:[],level:r},a=0,o=this.names.length;a<o;a++){var s=this.names[a],i=this.names_position[a];$(e=Array.isArray(s)?new p.alias(s[0],s[1]):new p.alias(s),i),n.names.push(e)}var _=new p.ImportFrom(n.module,n.names,n.level);return $(_,this.position),_},ce.prototype.add_name=function(e){this.names.push(e),this.names_position.push(qt.value),"*"==e&&(this.scope.blurred=!0),this.end_position=qt.value},ce.prototype.transition=function(t,r){var n=this;switch(t){case"id":if("module"==n.expect)return n.module+=r,n;if("id"==n.expect)return n.add_name(r),n.expect=",",n;if("alias"==n.expect)return n.names[n.names.length-1]=[e.last(n.names),r],n.expect=",",n;break;case".":if("module"==n.expect)return n.module+="id"==t?r:".",n;break;case"ellipsis":if("module"==n.expect)return n.module+="...",n;break;case"import":if(n.names.length>0&&B(n,"only one 'import' allowed after 'from'"),"module"==n.expect)return n.expect="id",n;break;case"op":if("*"==r&&"id"==n.expect&&0==n.names.length)return"module"!==yt(n).ntype&&B(n,"import * only allowed at module level"),n.add_name("*"),n.expect="eol",n;B(n);break;case",":if(","==n.expect)return n.expect="id",n;break;case"eol":switch(n.expect){case",":case"eol":return kt(n.parent,t);case"id":B(n,"trailing comma not allowed without surrounding parentheses");break;default:B(n)}break;case"as":if(","==n.expect||"eol"==n.expect)return n.expect="alias",n;break;case"(":if("id"==n.expect)return n.expect="id",n;break;case")":if(","==n.expect||"id"==n.expect)return n.expect="eol",n}B(n)};var fe=e.parser.FStringCtx=function(e,t){for(var r=0;r<t.length;r++)if('"'==t[r]||"'"==t[r]){this.prefix=t.substr(0,r),this.quotes=t.substr(r);break}this.type="fstring",this.parent=e,this.tree=[],this.position=qt.value,this.scope=yt(e),e.tree.push(this),this.raw=this.prefix.toLowerCase().indexOf("r")>-1};fe.prototype.transition=function(e,t){var r=this;return"middle"==e?(new tt(r,ue(t,this.quotes)),r):"{"==e?new A(new pe(r),!1):"end"==e?r.parent:void B(r)},fe.prototype.ast=function(){var t,r={type:"JoinedStr",values:[]};for(var n of this.tree)if(n instanceof tt){if("string"==t)e.last(r.values).value+=n.value;else $(a=new p.Constant(n.value),n.position),r.values.push(a);t="string"}else{var a;$(a=n.ast(),n.position),r.values.push(a),t="formatted_value"}var o=new p.JoinedStr(r.values);return $(o,this.position),o};var pe=e.parser.FStringReplacementFieldCtx=function(e){this.type="fstring_replacement_field",this.tree=[],this.parent=e,this.position=qt.value,e.tree.push(this)};pe.prototype.transition=function(e,t){var r=this;if("="==e){r.equal_sign_pos&&B(r);var n=r.position.line.substring(r.position.start[1]+1,qt.value.start[1]),a=r.parent.quotes;r.formula=new tt(r.parent,ue(n+"=",a));var o=r.parent.tree.pop();return r.parent.tree.splice(r.parent.tree.length-1,0,o),r.equal_sign_pos=qt.value.start,r}if(r.equal_sign_pos&&!r.insert_whitespace){var s=qt.value.start[1]-r.equal_sign_pos[1];s>1&&(r.formula.value+=" ".repeat(s-1)),r.insert_whitespace=!0}if("op"==e&&"!"==t)return r.expect="id",r;if(":"==e)return new he(r);if("}"==e)return 1==r.tree.length&&r.tree[0]instanceof A&&B(r,"f-string: valid expression required before '}'"),r.parent;if("id"==e&&"id"==this.expect){if("sra".indexOf(t)>-1)return r.conversion=t,delete this.expect,r;B(r,`unknown conversion type ${t}`)}B(r)},pe.prototype.ast=function(){var e=this.tree[0].ast(),t=this.tree[1],r={a:97,r:114,s:115}[this.conversion]||-1;void 0!==t&&(t=t.ast());var n=new p.FormattedValue(e,r,t);return $(n,this.position),n};var he=e.parser.FStringFormatSpecCtx=function(e){this.type="fstring_format_spec",this.tree=[],this.parent=e,this.position=qt.value,e.tree.push(this)};he.prototype.transition=function(e,t){var r=this;if("middle"==e){var n=this.parent.parent.quotes;return new tt(r,ue(t,n)),r}return"{"==e?new A(new pe(r),!1):"}"==e?kt(r.parent,e,t):void B(r)},he.prototype.ast=function(){return 1==this.tree.length?this.tree[0].ast():fe.prototype.ast.call(this)};var de=e.parser.FuncArgs=function(e){this.type="func_args",this.parent=e,this.tree=[],this.names=[],e.tree[e.tree.length]=this,this.expect="id",this.has_default=!1,this.has_star_arg=!1,this.has_kw_arg=!1};de.prototype.ast=function(){var e,t={posonlyargs:[],args:[],kwonlyargs:[],kw_defaults:[],defaults:[]},n="arg";for(var a of this.tree)if("end_positional"==a.type)t.posonlyargs=t.args,t.args=[];else if("func_star_arg"==a.type)n="kwonly","*"==a.op&&"*"!=a.name?(t.vararg=new p.arg(a.name),a.annotation&&(t.vararg.annotation=a.annotation.tree[0].ast()),$(t.vararg,a.position)):"**"==a.op&&(t.kwarg=new p.arg(a.name),a.annotation&&(t.kwarg.annotation=a.annotation.tree[0].ast()),$(t.kwarg,a.position));else{e=!1,a.has_default&&(e=a.tree[0].ast());var o=new p.arg(a.name);$(o,a.position,w(a)),a.annotation&&(o.annotation=a.annotation.tree[0].ast()),"kwonly"==n?(t.kwonlyargs.push(o),e?t.kw_defaults.push(e):t.kw_defaults.push(r.None)):(t.args.push(o),e&&t.defaults.push(e))}return new p.arguments(t.posonlyargs,t.args,t.vararg,t.kwonlyargs,t.kw_defaults,t.kwarg,t.defaults)},de.prototype.transition=function(t,r){var n,a=this;function o(){if(0!=a.tree.length){var t=e.last(a.tree);if(a.has_default&&!t.has_default){if("func_star_arg"==t.type||"end_positional"==t.type)return;if(a.has_star_arg)return;B(a,"non-default argument follows default argument")}t.has_default&&(a.has_default=!0)}}switch(t){case"id":return a.has_kw_arg&&B(a,"duplicate keyword argument"),"id"==a.expect&&(a.expect=",",a.names.indexOf(r)>-1&&B(a,"duplicate argument "+r+" in function definition")),new me(a,r);case",":if(","==a.expect)return o(),a.expect="id",a;B(a);break;case")":return o(),(n=e.last(a.tree))&&"func_star_arg"==n.type&&"*"==n.name&&B(a,"named arguments must follow bare *"),kt(a.parent,t,r);case"op":a.has_kw_arg&&B(a,"(unpacking after '**' argument)");var s=r;if(a.expect=",","*"==s)return a.has_star_arg&&B(a,"(only one '*' argument allowed)"),new ge(a,"*");if("**"==s)return new ge(a,"**");if("/"==s)return a.has_end_positional?B(a,"/ may appear only once"):a.has_star_arg&&B(a,"/ must be ahead of *"),new oe(a);B(a);break;case":":if("lambda"==a.parent.type)return kt(a.parent,t)}B(a)};var me=e.parser.FuncArgIdCtx=function(e,t){this.type="func_arg_id",["None","True","False"].indexOf(t)>-1&&B(e),"__debug__"==t&&B(e,"cannot assign to __debug__"),this.name=t,this.parent=e,this.position=qt.value,e.has_star_arg?e.parent.after_star.push(t):e.parent.positional_list.push(t),this.tree=[],e.tree[e.tree.length]=this,this.expect="="};me.prototype.transition=function(e,t){var r=this;switch(e){case"=":if("="==r.expect){r.has_default=!0;var n=r.parent.parent;return r.parent.has_star_arg?n.default_list.push(n.after_star.pop()):n.default_list.push(n.positional_list.pop()),new A(r,!1)}break;case",":case")":if(!r.parent.has_default||0!=r.tree.length||void 0!==r.parent.has_star_arg)return kt(r.parent,e);B(r,"non-default argument follows default argument");break;case":":return"lambda"==r.parent.parent.type?kt(r.parent.parent,":"):(r.has_default&&B(r),new A(new C(r),!1))}B(r)};var ge=e.parser.FuncStarArgCtx=function(e,t){this.type="func_star_arg",this.op=t,this.parent=e,this.node=wt(this),this.position=qt.value,e.has_star_arg="*"==t,e.has_kw_arg="**"==t,e.tree[e.tree.length]=this};ge.prototype.transition=function(e,t){var r=this;switch(e){case"id":return void 0===r.name&&r.parent.names.indexOf(t)>-1&&B(r,"duplicate argument "+t+" in function definition"),["None","True","False"].indexOf(t)>-1&&B(r),r.set_name(t),r.parent.names.push(t),r;case",":case")":return void 0===r.name&&(r.set_name("*"),r.parent.names.push("*")),kt(r.parent,e);case":":return"lambda"==r.parent.parent.type?(void 0===r.name&&B(r,"named arguments must follow bare *"),kt(r.parent.parent,":")):(void 0===r.name&&B(r,"(annotation on an unnamed parameter)"),new A(new C(r),!1))}B(r)},ge.prototype.set_name=function(e){"__debug__"==e&&k(this,this.position,qt.value,"cannot assign to __debug__"),this.name=e;for(var t=this.parent;void 0!==t.parent&&"def"!=t.type;)t=t.parent;"*"==this.op?t.other_args='"'+e+'"':t.other_kw='"'+e+'"'};var ve=function(e){this.type="genexpr",this.tree=[e.tree[0]],this.tree[0].parent=this,this.position=e.position,Y.make_comp(this,e)};ve.prototype.ast=function(){var e=new p.GeneratorExp(this.tree[0].ast(),Y.generators(this.tree.slice(1)));return $(e,this.position),e},ve.prototype.transition=function(e,t){var r=this;if(")"==e)return"call"==this.parent.type?(r.parent.tree.length>1&&k(r,b(r),w(r),"Generator expression must be parenthesized"),this.parent.parent):this.parent;B(r)};var $e=e.parser.GlobalCtx=function(e){if(this.type="global",this.parent=e,this.tree=[],this.position=qt.value,e.tree[e.tree.length]=this,this.expect="id",this.scope=yt(this),this.module=bt(this),"<module>"!==this.module.module)for(;this.module.module!=this.module.id;)this.module=this.module.parent_block};$e.prototype.ast=function(){var e=new p.Global(this.tree.map((e=>e.value)));return $(e,this.position),e},$e.prototype.transition=function(e,t){var r=this;switch(e){case"id":if("id"==r.expect)return new ye(r,t),r.add(t),r.expect=",",r;break;case",":if(","==r.expect)return r.expect="id",r;break;case"eol":if(","==r.expect)return kt(r.parent,e)}B(r)},$e.prototype.add=function(e){if("module"!=this.scope.type){var t=this.scope.parent_block;if(this.module.module.startsWith("$exec"))for(;t&&t.parent_block!==this.module;)t._globals=t._globals||new Map,t._globals.set(e,this.module.id),t=t.parent_block}};var ye=e.parser.IdCtx=function(t,r){this.type="id",this.value=r,this.parent=t,this.tree=[],t.tree[t.tree.length]=this,this.position=qt.value;var n=this.scope=yt(this);this.blurred_scope=this.scope.blurred,["def","generator"].indexOf(n.ntype)>-1&&(t instanceof $e||t instanceof Ae||(n.referenced=n.referenced||{},e.builtins[this.value]||(n.referenced[this.value]=!0))),"call_arg"==t.parent.type&&(this.call_arg=!0)};ye.prototype.ast=function(){var e;return $(e=["True","False","None"].indexOf(this.value)>-1?new p.Constant(r[this.value]):new p.Name(this.value,this.bound?new p.Store:new p.Load),this.position),e},ye.prototype.transition=function(e,t){var r=this,n=bt(this);if("case"==r.value&&"node"==r.parent.parent.type){var a=n.token_reader.position,o=Ot(n.token_reader,n.filename);if(n.token_reader.position=a,o){var s=wt(r);s.parent;if(s.parent&&s.parent.is_match){if(s.parent.irrefutable){var i=s.parent.irrefutable;B(r,`${l="_"==i?"wildcard":`name capture '${i}'`} makes remaining patterns unreachable`)}}else B(r,"('case' not inside 'match')");return kt(new Fe(new z(r.parent.parent)),e,t)}}else if("match"==r.value&&"node"==r.parent.parent.type){a=n.token_reader.position,o=Ot(n.token_reader,n.filename);if(n.token_reader.position=a,o)return kt(new A(new Se(r.parent.parent),!0),e,t)}else if("type"==r.value&&"node"==r.parent.parent.type&&"id"==e)return new _t(r,t);switch(e){case"=":return"expr"==r.parent.type&&void 0!==r.parent.parent&&"call_arg"==r.parent.parent.type?new A(new je(r.parent),!1):kt(r.parent,e,t);case".":return delete this.bound,kt(r.parent,e,t);case"op":return kt(r.parent,e,t);case"id":case"str":case"JoinedStr":case"int":case"float":case"imaginary":if(["print","exec"].indexOf(r.value)>-1)var _=r.value,l=`Missing parentheses in call to '${_}'. Did you mean ${_}(...)?`;else l="invalid syntax. Perhaps you forgot a comma?";gt(r,{type:"call_arg"});k(r,this.position,qt.value,l)}return"starred"==this.parent.parent.type&&-1==[".","[","("].indexOf(e)?this.parent.parent.transition(e,t):kt(r.parent,e,t)};var be=e.parser.ImportCtx=function(e){this.type="import",this.parent=e,this.tree=[],this.position=qt.value,e.tree[e.tree.length]=this,this.expect="id"};be.prototype.ast=function(){var e=[];for(var t of this.tree){var r=new p.alias(t.name);t.alias!=t.name&&(r.asname=t.alias),e.push(r)}var n=new p.Import(e);return $(n,this.position),n},be.prototype.transition=function(e,t){var r=this;switch(e){case"id":if("id"==r.expect)return r.order_error&&B(r,"Did you mean to use 'from ... import ...' instead?"),new we(r,t),r.expect=",",r;if("qual"==r.expect)return r.expect=",",r.tree[r.tree.length-1].name+="."+t,r.tree[r.tree.length-1].alias+="."+t,r;if("alias"==r.expect)return r.expect=",",r.tree[r.tree.length-1].alias=t,r;break;case".":if(","==r.expect)return r.expect="qual",r;break;case",":if(","==r.expect)return r.expect="id",r;break;case"as":if(","==r.expect)return r.expect="alias",r;break;case"eol":if(","==r.expect)return kt(r.parent,e);break;case"from":if(","==r.expect)return r.expect="id",r.order_error=!0,r}B(r)};var we=e.parser.ImportedModuleCtx=function(e,t){this.type="imported module",this.parent=e,this.name=t,this.alias=t,e.tree[e.tree.length]=this};we.prototype.transition=function(e,t){};var xe=e.parser.JoinedStrCtx=function(t,r){this.type="JoinedStr",this.parent=t,this.tree=[],this.position=qt.value,this.scope=yt(t);var n=wt(t).line_num;for(var a of r)if("string"==typeof a)new tt(this,"'"+a.replace(new RegExp("'","g"),"\\'")+"'");else{void 0!==a.format&&(a.format=new xe(this,a.format),this.tree.pop());var o=a.expression.trimStart(),s=bt(this).filename,i=Wt(o,this.scope.module,this.scope.id,this.scope.parent_block,n);try{Ut(i)}catch(err){var _=this.position.start[0],l=this.position.start[1];throw err.filename=bt(this).filename,err.lineno+=_-1,err.offset+=l-1,err.end_lineno+=_-1,err.end_offset+=l-1,err.text=this.position.string,err.args[1]=e.fast_tuple([s,err.lineno,err.offset,err.text,err.end_lineno,err.end_offset]),err}var c=i.children[0].C.tree[0];this.tree.push(c),c.parent=this,c.elt=a}t.tree.push(this),this.raw=!1};xe.prototype.ast=function(){var t,r={type:"JoinedStr",values:[]};for(var n of this.tree)if(n instanceof tt){if("string"==t)e.last(r.values).value+=n.value;else{var a=new p.Constant(n.value);$(a,n.position),r.values.push(a)}t="string"}else{o=void 0===(o=n.elt.format)?o:o.ast();var o,s=new p.FormattedValue(n.ast(),{a:97,r:114,s:115}[n.elt.conversion]||-1,o);$(s,this.position),void 0!==(o=n.format)&&(s.format=n.format.ast()),r.values.push(s),t="formatted_value"}var i=new p.JoinedStr(r.values);return $(i,this.position),i},xe.prototype.transition=function(t,r){var n=this;switch(t){case"[":return new A(new at(n.parent),!1);case"(":return n.parent.tree[0]=n,new G(n.parent);case"str":return n.tree.length>0&&"str"==e.last(n.tree).type?n.tree[n.tree.length-1].add_value(r):new tt(this,r),n;case"JoinedStr":var a=new xe(n.parent,r);return n.parent.tree.pop(),n.tree.length>0&&e.last(n.tree)instanceof tt&&a.tree[0]instanceof tt?(e.last(n.tree).value+=a.tree[0].value,n.tree=n.tree.concat(a.tree.slice(1))):n.tree=n.tree.concat(a.tree),n}return kt(n.parent,t,r)};var ke=e.parser.KwdCtx=function(e){this.type="kwd",this.position=e.position,this.parent=e,this.tree=[],e.tree.push(this)};ke.prototype.ast=function(){var t=new e.ast.keyword(this.tree[0].ast(),new p.Load);return $(t,this.position),t},ke.prototype.transition=function(e,t){return kt(this.parent,e,t)};var je=e.parser.KwArgCtx=function(e){this.type="kwarg",this.parent=e.parent,this.position=b(e),this.equal_sign_position=qt.value,this.tree=[e.tree[0]],e.parent.tree.pop(),e.parent.tree.push(this),e.parent.parent.has_kw=!0};je.prototype.transition=function(e,t){var r=this;return","==e?new V(r.parent.parent):("for"==e&&k(r,r.position,r.equal_sign_position,"invalid syntax. Maybe you meant '==' or ':=' instead of '='?"),kt(r.parent,e))};var Be=e.parser.LambdaCtx=function(e){this.type="lambda",this.parent=e,e.tree[e.tree.length]=this,this.tree=[],this.position=qt.value,this.node=wt(this),this.positional_list=[],this.default_list=[],this.other_args=null,this.other_kw=null,this.after_star=[]};Be.prototype.ast=function(){var e;e=0==this.args.length?new p.arguments([],[],void 0,[],[],void 0,[]):this.args[0].ast();var t=new p.Lambda(e,this.tree[0].ast());return $(t,this.position),t},Be.prototype.transition=function(e,t){var r=this;if(":"==e&&void 0===r.args)return r.args=r.tree,r.tree=[],new A(r,!1);if(void 0!==r.args)return kt(r.parent,e);if(void 0===r.args)if("("==e)B(r,"Lambda expression parameters cannot be parenthesized");else{if(!(r.tree.length>0&&"func_args"==r.tree[0].type))return kt(new de(r),e,t);B(r)}B(r)};var Ee=function(e){this.type="listcomp",this.tree=[e.tree[0]],this.tree[0].parent=this,this.position=qt.value,Y.make_comp(this,e)};Ee.prototype.ast=function(){var e=new p.ListComp(this.tree[0].ast(),Y.generators(this.tree.slice(1)));return $(e,this.position),e},Ee.prototype.transition=function(e,t){if("]"==e)return this.parent;B(this)};var Ne=e.parser.ListOrTupleCtx=function(e,t){this.type="list_or_tuple",this.real=t,this.expect="id",this.closed=!1,this.parent=e,this.tree=[],this.position=qt.value,e.tree[e.tree.length]=this};Ne.prototype.ast=function(){var e,t=this.tree.map((e=>e.ast()));return"list"==this.real?e=new p.List(t,new p.Load):"tuple"==this.real&&(e=new p.Tuple(t,new p.Load)),$(e,this.position,this.end_position),e},Ne.prototype.transition=function(e,t){var r=this;if(r.closed)return"["==e?new A(new at(r.parent),!1):"("==e?new G(r.parent):kt(r.parent,e,t);if(","==r.expect){switch(r.real){case"tuple":if(")"==e){if(r.implicit)return kt(r.parent,e,t);if(r.end_position=qt.value,1==r.tree.length){gt(r,{type:"del"})&&"expr"==r.tree[0].type&&"starred"==r.tree[0].tree[0].type&&k(r,r.tree[0].tree[0].position,w(r.tree[0]),"cannot use starred expression here");var n=r.parent.parent;return n.tree.pop(),n.tree.push(r.tree[0]),r.tree[0].$was_parenthesized=!0,r.tree[0].parent=n,r.tree[0]}return(r.packed||"list_or_tuple"==r.type&&1==r.tree.length&&"expr"==r.tree[0].type&&"starred"==r.tree[0].tree[0].type)&&B(r,"cannot use starred expression here"),r.close(),"starred"==r.parent.type?r.parent.parent:r.parent}break;case"list":if("]"==e)return r.close(),"starred"==r.parent.type?r.parent.tree.length>0?r.parent.tree[0]:r.parent.parent:r.parent}switch(e){case",":return"tuple"==r.real&&(r.has_comma=!0),r.expect="id",r;case"for":return"list"==r.real?(this.tree.length>1&&B(r,"did you forget parentheses around the comprehension target?"),new ot(new le(new Ee(r)))):new ot(new le(new ve(r)))}return kt(r.parent,e,t)}if("id"!=r.expect)return kt(r.parent,e,t);switch(r.real){case"tuple":if(")"==e)return r.close(),r.parent;if("eol"==e&&!0===r.implicit)return r.close(),kt(r.parent,e);break;case"list":if("]"==e)return r.close(),r}switch(e){case"=":if("tuple"==r.real&&!0===r.implicit)return r.close(),r.parent.tree.pop(),(a=new ie(r.parent,"tuple",!1)).tree=[r],r.parent=a,kt(r.parent,e);B(r,"(unexpected '=' inside list)");break;case")":break;case"]":if("tuple"==r.real&&!0===r.implicit)return kt(r.parent,e,t);break;case",":B(r,"(unexpected comma inside list)");break;case"str":case"JoinedStr":case"int":case"float":case"imaginary":case"ellipsis":case"lambda":case"yield":case"id":case"(":case"[":case"{":case"await":case"not":case":":r.expect=",";var a=new A(r,!1);return kt(a,e,t);case"op":if("+-~*".indexOf(t)>-1||"**"==t){r.expect=",";a=new A(r,!1);return kt(a,e,t)}B(r,`(unexpected operator: ${t})`);break;default:B(r)}},Ne.prototype.close=function(){this.closed=!0,this.end_position=qt.value,this.src=bt(this).src;for(var e=0,t=this.tree.length;e<t;e++){var r=this.tree[e];"expr"==r.type&&"list_or_tuple"==r.tree[0].type&&"tuple"==r.tree[0].real&&1==r.tree[0].tree.length&&","==r.tree[0].expect&&(this.tree[e]=r.tree[0].tree[0],this.tree[e].parent=this)}};var Se=e.parser.MatchCtx=function(e){this.type="match",this.position=qt.value,e.tree=[this],e.node.is_match=!0,this.parent=e,this.tree=[],this.expect="as",this.token_position=bt(this).token_reader.position};Se.prototype.ast=function(){var e=new p.Match(this.tree[0].ast(),d(this.parent));return $(e,this.position),e.$line_num=wt(this).line_num,e},Se.prototype.transition=function(e,t){var r=this;switch(e){case":":switch("list_or_tuple"==this.tree[0].type&&S(this.tree[0].tree),r.expect){case"id":case"as":case":":return U(r)}break;case"eol":B(r,"expected ':'")}B(r)};var Te=function(e){this.type="named_expr",this.position=e.position,this.target=e.tree[0],e.tree.pop(),e.tree.push(this),this.parent=e,this.target.parent=this,this.tree=[],"list_or_tuple"==e.parent.type&&"tuple"==e.parent.real&&(this.parenthesized=!0)};Te.prototype.ast=function(){var e=new p.NamedExpr(this.target.ast(),this.tree[0].ast());return e.target.ctx=new p.Store,$(e,this.position),e},Te.prototype.transition=function(e,t){return kt(this.parent,e,t)};var Oe=e.parser.NodeCtx=function(e){this.node=e,e.C=this,this.tree=[],this.type="node";for(var t=null,r=e;r.parent&&"module"!=r.parent.type;){var n=!1;switch(r.parent.C.tree[0].type){case"def":case"class":case"generator":t=r.parent,n=!0}if(n)break;r=r.parent}null===t&&(t=r.parent||r),this.scope=t};Oe.prototype.transition=function(e,t){var r=this;if(this.node.parent&&this.node.parent.C){var n=this.node.parent.C;n.tree&&1==n.tree.length&&"match"==n.tree[0].type&&("eol"==e||"id"===e&&"case"===t||B(r))}if(0==this.tree.length&&this.node.parent){var a=this.node.parent.children.indexOf(this.node);if(a>0)"try"==(_=this.node.parent.children[a-1]).C.tree[0].type&&-1==["except","finally"].indexOf(e)&&B(r,"expected 'except' or 'finally' block")}switch(e){case",":r.tree&&0==r.tree.length&&B(r);var o=r.tree[0];r.tree=[];var s=new Ne(r);return s.real="tuple",s.implicit=0,s.tree.push(o),o.parent=s,s;case"[":case"(":case"{":case".":case"bytes":case"float":case"id":case"imaginary":case"int":case"str":case"JoinedStr":case"not":case"lambda":var i=new A(r,!0);return kt(i,e,t);case"assert":return new A(new M(r),!1,!0);case"async":return new P(r);case"await":return new A(new q(r),!1);case"break":return new W(r);case"class":return new J(r);case"continue":return new K(r);case"def":return new Q(r);case"del":return new A(new ee(r),!0);case"elif":try{var _=vt(r)}catch(err){B(r,"('elif' does not follow 'if')")}return-1!=["condition"].indexOf(_.type)&&"while"!=_.token||B(r,`(elif after ${_.type})`),new A(new H(r,e),!1);case"ellipsis":i=new A(r,!0);return kt(i,e,t);case"else":_=vt(r);return-1==["condition","except","for"].indexOf(_.type)&&B(r,`(else after ${_.type})`),new Xe(r,e);case"except":_=vt(r);return-1==["try","except"].indexOf(_.type)&&B(r,`(except after ${_.type})`),new se(r);case"finally":_=vt(r);return-1!=["try","except"].indexOf(_.type)||"single_kw"==_.type&&"else"==_.token||B(r,`finally after ${_.type})`),new Xe(r,e);case"for":return new ot(new le(r));case"from":return new ce(r);case"global":return new $e(r);case"if":case"while":return new A(new H(r,e),!1);case"import":return new be(r);case"lambda":return new Be(r);case"nonlocal":return new Ae(r);case"op":switch(t){case"*":i=new A(r,!0);return kt(i,e,t);case"+":case"-":case"~":r.position=qt.value;i=new ie(r,"unary",!0);return new A(new pt(i,t),!1);case"@":return new A(new X(r),!1)}break;case"pass":return new Re(r);case"raise":return new A(new Ye(r),!1);case"return":return new A(new He(r),!0);case"try":return new it(r);case"with":return new ht(r);case"yield":return new A(new mt(r),!0);case"eol":return r.maybe_type&&(r.tree.length>0&&"assign"==r.tree[0].type?alert("type soft keyword"):B(r)),0==r.tree.length?(r.node.parent.children.pop(),r.node.parent.C):r}console.log("error, C",r,"token",e,t),B(r)};var Ae=e.parser.NonlocalCtx=function(e){this.type="nonlocal",this.parent=e,this.tree=[],this.position=qt.value,e.tree[e.tree.length]=this,this.expect="id",this.scope=yt(this),this.scope.nonlocals=this.scope.nonlocals||new Set};Ae.prototype.ast=function(){var e=new p.Nonlocal(this.tree.map((e=>e.value)));return $(e,this.position),e},Ae.prototype.transition=function(e,t){var r=this;switch(e){case"id":if("id"==r.expect)return new ye(r,t),r.expect=",",r;break;case",":if(","==r.expect)return r.expect="id",r;break;case"eol":if(","==r.expect)return kt(r.parent,e)}B(r)};var Ie=e.parser.NotCtx=function(e){this.type="not",this.parent=e,this.tree=[],this.position=qt.value,e.tree[e.tree.length]=this};Ie.prototype.ast=function(){var e=new p.UnaryOp(new p.Not,this.tree[0].ast());return $(e,this.position),e},Ie.prototype.transition=function(e,t){var r=this;switch(e){case"in":return r.parent.parent.tree.pop(),new ie(new Me(r.parent,"not_in"),"op",!1);case"id":case"imaginary":case"int":case"float":case"str":case"JoinedStr":case"bytes":case"[":case"(":case"{":case".":case"not":case"lambda":var n=new A(r,!1);return kt(n,e,t);case"op":if("+"==t||"-"==t||"~"==t){n=new A(r,!1);return kt(n,e,t)}}return(0==this.tree.length||this.tree[0]instanceof A)&&B(r),kt(r.parent,e)};var Ce=e.parser.NumberCtx=function(e,t,r){this.type=e,this.value=r,this.parent=t,this.tree=[],this.position=qt.value,t.tree[t.tree.length]=this};Ce.prototype.ast=function(){var t=e.AST.$convert(this),r=new e.ast.Constant(t);return $(r,this.position),r},Ce.prototype.transition=function(t,n){var a=this,o={2:"binary",8:"octal",10:"decimal",16:"hexadecimal"}[this.value[0]];return"id"==t?"_"==n?B(a,"invalid decimal literal"):-1==["and","else","for","if","in","is","or"].indexOf(n)?B(a,`invalid ${o} literal`):"hexadecimal"==o&&this.value[1].length%2==1&&e.warn(r.SyntaxWarning,"invalid hexadecimal literal",bt(a).filename,qt.value):"op"==t&&["and","in","is","or"].indexOf(n)>-1&&"hexadecimal"==o&&this.value[1].length%2==1&&e.warn(r.SyntaxWarning,"invalid hexadecimal literal",bt(a).filename,qt.value),kt(a.parent,t,n)};var Me=e.parser.OpCtx=function(e,t){this.type="op",this.op=t,this.parent=e.parent,this.position=qt.value,this.tree=[e],this.scope=yt(this),"expr"==e.type&&["int","float","str"].indexOf(e.tree[0].type)>-1&&(this.left_type=e.tree[0].type),e.parent.tree.pop(),e.parent.tree.push(this)};Me.prototype.ast=function(){var e,t=h[this.op],r=t[0],n=t[1];if(r===p.Compare){var a=this.tree[0].ast(),o=[new n];if(this.ops){for(var s of this.ops.slice(1))o.push(new h[s][1]);e=new p.Compare(a,o,this.tree.slice(1).map((e=>e.ast())))}else e=new p.Compare(a,o,[this.tree[1].ast()])}else if(r===p.UnaryOp)e=new r(new n,this.tree[1].ast());else if(r===p.BoolOp){for(var i=[this.tree[1]],_=this.op,l=this;"op"==l.tree[0].type&&l.tree[0].op==_;)i.splice(0,0,l.tree[0].tree[1]),l=l.tree[0];i.splice(0,0,l.tree[0]),e=new r(new n,i.map((e=>e.ast())))}else e=new r(this.tree[0].ast(),new n,this.tree[1].ast());return $(e,this.position),e},Me.prototype.transition=function(t,n){var a,o=this;if(void 0===o.op&&(console.log("C has no op",o),B(o)),("is"==o.op||"is_not"==o.op)&&o.tree.length>1)for(var s of o.tree)if("expr"==(a=s).type&&["int","str","float","imaginary"].indexOf(a.tree[0].type)>-1){var i="is"==o.op?"is":"is not";e.warn(r.SyntaxWarning,`"${i}" with a literal. Did you mean "=="?"`,bt(o).filename,qt.value);break}switch(t){case"id":case"imaginary":case"int":case"float":case"str":case"JoinedStr":case"bytes":case"[":case"(":case"{":case".":case"not":case"lambda":return kt(new A(o,!1),t,n);case"op":switch(n){case"+":case"-":case"~":return new pt(o,n)}break;default:"abstract_expr"==o.tree[o.tree.length-1].type&&B(o)}return kt(o.parent,t)};var Re=e.parser.PassCtx=function(e){this.type="pass",this.parent=e,this.tree=[],this.position=qt.value,e.tree[e.tree.length]=this};Re.prototype.ast=function(){var e=new p.Pass;return $(e,this.position),e},Re.prototype.transition=function(e,t){if("eol"==e)return this.parent;B(this)};var Fe=e.parser.PatternCtx=function(e){this.type="pattern",this.parent=e,this.tree=[],e.tree.push(this),this.expect="id"};function Pe(e,t,r){if("as"==e.expect)return"as"==t?(e.expect="alias",e):kt(e.parent,t,r);if("alias"==e.expect){if("id"==t)return"_"==r&&B(e,"cannot use '_' as a target"),e.bindings().indexOf(r)>-1&&B(e,`multiple assignments to name '${r}' in pattern`),e.alias=r,e.parent;B(e,"invalid pattern target")}}Fe.prototype.transition=function(e,t){var r=this;switch(r.expect){case"id":switch(e){case"str":case"int":case"float":case"imaginary":return r.expect=",",new We(r,e,t);case"op":switch(t){case"-":case"+":return r.expect=",",new We(r,{sign:t});case"*":return r.expect="starred_id",r;default:B(r)}break;case"id":return r.expect=",",["None","True","False"].indexOf(t)>-1?new We(r,e,t):new Le(r,t);case"[":return new Fe(new Je(r.parent,e));case"(":return new Fe(new qe(r.parent,e));case"{":return new Ve(r.parent,e);case"JoinedStr":B(r,"patterns may only match literals and attribute lookups")}break;case"starred_id":if("id"==e){var n=new Le(r,t);return n.starred=!0,n}B(r,"(expected id after '*')");break;case"number":switch(e){case"int":case"float":case"imaginary":return r.expect=",",new We(r,e,t,r.sign);default:B(r)}break;case",":switch(e){case",":return r.parent instanceof Je?new Fe(r.parent):new Fe(new Je(r.parent));case":":return U(r)}}return r.parent.transition(e,t)};var Le=function(e,t){this.type="capture_pattern",this.parent=e.parent,e.parent.tree.pop(),e.parent.tree.push(this),this.tree=[t],this.position=qt.value,this.positions=[this.position],this.expect="."};Le.prototype.ast=function(){var e;try{if(this.tree.length>1){$(n=new p.Name(this.tree[0],new p.Load),this.position);for(var t=1;t<this.tree.length;t++)y(n=new p.Attribute(n,this.tree[t],new p.Load),n.value);y(n=new p.MatchValue(n),n.value)}else if(this.starred){var r=this.tree[0];$(e="_"==r?new p.MatchStar:new p.MatchStar(r),this.position)}else{var n;"string"==typeof(n=this.tree[0])||("group_pattern"==n.type?n=n.ast():(console.log("bizarre",n),n=Ce.prototype.ast.bind(this)())),"_"==n&&$(n=new p.MatchAs,this.position)}return this.alias?("string"==typeof n&&$(n=new p.MatchAs(void 0,n),this.position),e=new p.MatchAs(n,this.alias)):this.tree.length>1||n instanceof p.MatchAs?e=n:"string"==typeof n?e=new p.MatchAs(void 0,n):this.starred||(e=new p.MatchAs(void 0,n)),$(e,this.position),e}catch(err){throw console.log("error capture ast"),T(this),err}},Le.prototype.bindings=function(){var e="_"==this.tree[0]?[]:this.tree.slice();return this.alias&&e.push(this.alias),e},Le.prototype.transition=function(e,t){var r=this;switch(r.expect){case".":return"."==e?(r.type="value_pattern",r.expect="id",r):"("==e?new Fe(new De(r)):r.parent instanceof Ve?r.parent.transition(e,t):(r.expect="as",r.transition(e,t));case"as":case"alias":return Pe(r,e,t);case"id":if("id"==e)return r.tree.push(t),r.positions.push(qt.value),r.expect=".",r}return kt(r.parent,e,t)};const De=function(e){this.type="class_pattern",this.tree=[],this.parent=e.parent,this.position=qt.value,this.class_id=e.tree.slice(),this.positions=e.positions,e.tree.pop(),this.attrs=e.tree.slice(2),e.parent.tree.pop(),e.parent.tree.push(this),this.expect=",",this.keywords=[],this.positionals=[],this.bound_names=[]};De.prototype.ast=function(){if(1==this.class_id.length)var e=new p.Name(this.class_id[0]);else for(var t=0,r=this.class_id.length;t<r-1;t++){var n=new p.Name(this.class_id[t],new p.Load);$(n,this.positions[t]),$(e=0==t?new p.Attribute(n,this.class_id[t+1]):new p.Attribute(e,this.class_id[t+1]),this.positions[t])}$(e,this.position),e.ctx=new p.Load;var a=[],o=[],s=[];for(var i of this.tree)if(i.is_keyword)o.push(i.tree[0]),s.push(i.tree[1].ast());else try{a.push(i.ast())}catch(err){throw console.log("error in class pattern item"),T(this),err}var _=new p.MatchClass(e,a,o,s);return $(_,this.position),this.alias&&$(_=new p.MatchAs(_,this.alias),this.position),_},De.prototype.bindings=function(){var e=this.bound_names;return this.alias&&e.push(this.alias),e},De.prototype.transition=function(t,r){var n=this;function a(){var t,r=e.last(n.tree);if(r instanceof Le){for(var a of(!r.is_keyword&&n.keywords.length>0&&(qt.value=r.position,B(n,"positional patterns follow keyword patterns")),r.is_keyword?(n.keywords.indexOf(r.tree[0])>-1&&B(n,`keyword argument repeated: ${r.tree[0]}`),n.keywords.push(r.tree[0]),t=r.tree[1].bindings()):t=r.bindings(),t))n.bound_names.indexOf(a)>-1&&B(n,`multiple assignments to name '${a}' in pattern`);n.bound_names=n.bound_names.concat(t)}}switch(this.expect){case",":switch(t){case"=":var o=e.last(this.tree);if(o instanceof Le)return this.keywords.indexOf(o.tree[0])>-1&&B(n,"attribute name repeated in class pattern: "+o.tree[0]),o.is_keyword=!0,new Fe(o);B(this,"'=' after non-capture");break;case",":return a(),new Fe(this);case")":return a(),0==e.last(this.tree).tree.length&&this.tree.pop(),n.expect="as",n;default:B(n)}break;case"as":case"alias":return Pe(n,t,r)}return kt(n.parent,t,r)};var qe=function(e){this.type="group_pattern",this.parent=e,this.position=qt.value,this.tree=[],e.tree.pop(),this.expect=",|",e.tree.push(this)};function Ue(t){var r=e.last(t.tree);r&&r instanceof Fe&&0==r.tree.length&&t.tree.pop()}qe.prototype.ast=function(){var e;return e=1!=this.tree.length||this.has_comma?Je.prototype.ast.bind(this)():this.tree[0].ast(),this.alias&&(e=new p.MatchAs(e,this.alias)),$(e,this.position),e},qe.prototype.bindings=function(){var e=[];for(var t of this.tree)e=e.concat(t.bindings());return this.alias&&e.push(this.alias),e},qe.prototype.transition=function(e,t){var r=this;switch(r.expect){case",|":if(")"==e)return Ue(r),r.expect="as",r;if(","==e)return r.expect="id",r.has_comma=!0,r;if("op"==e&&"|"==t){var n=new ze(r.parent);return n.parenthese=!0,new Fe(n)}if(void 0===this.token)return kt(r.parent,e,t);B(r);break;case"as":case"alias":return Pe(r,e,t);case"id":return")"==e?(Ue(r),r.expect="as",r):(r.expect=",|",kt(new Fe(r),e,t))}B(r)};var We=function(e,t,r,n){this.type="literal_pattern",this.parent=e.parent,this.position=qt.value,e.parent.tree.pop(),e.parent.tree.push(this),t.sign?(this.tree=[{sign:t.sign}],this.expect="number"):("str"==t?(this.tree=[],new tt(this,r)):"JoinedStr"==t?B(this,"patterns cannot include f-strings"):this.tree=[{type:t,value:r,sign:n}],this.expect="op")};We.prototype.ast=function(){try{var e,t=this.tree[0];if("str"==t.type){var n=tt.prototype.ast.bind(t)();e=new p.MatchValue(n)}else if("id"==t.type)e=new p.MatchSingleton(r[t.value]);else{t.position=this.position;var a=Ce.prototype.ast.bind(t)(),o=new p.MatchValue(a);if(t.sign&&"+"!=t.sign){var s={"+":p.UAdd,"-":p.USub,"~":p.Invert}[t.sign],i=new p.UnaryOp(new s,o.value);$(i,this.position),$(o=new p.MatchValue(i),this.position)}if(1==this.tree.length)e=o;else{this.tree[2].position=this.position;var _=Ce.prototype.ast.bind(this.tree[2])(),l=new p.BinOp(o.value,"+"==this.tree[1]?new p.Add:new p.Sub,_);$(l,this.position),e=new p.MatchValue(l)}}return $(e,this.position),2==this.tree.length&&(e=new p.MatchValue(new p.BinOp(this.tree[0].ast(),"+"==this.num_sign?p.Add:p.Sub,this.tree[1].ast()))),this.alias&&(e=new p.MatchAs(e,this.alias)),$(e,this.position),e}catch(err){throw T(this),err}},We.prototype.bindings=function(){return this.alias?[this.alias]:[]},We.prototype.transition=function(t,r){var n=this;switch(n.expect){case"op":if("op"==t)switch(r){case"+":case"-":if(["int","float"].indexOf(n.tree[0].type)>-1)return n.expect="imaginary",this.tree.push(r),n.num_sign=r,n;B(n,"patterns cannot include operators");break;default:return kt(n.parent,t,r)}break;case"number":switch(t){case"int":case"float":case"imaginary":var a=e.last(n.tree);if(void 0===this.tree.token)return a.type=t,a.value=r,n.expect="op",n;break;default:B(n)}break;case"imaginary":if("imaginary"===t)return n.tree.push({type:t,value:r,sign:n.num_sign}),n.parent;B(n,"(expected imaginary)");break;case"as":case"alias":return Pe(n,t,r)}return"as"==t&&1==n.tree.length?(n.expect="as",n.transition(t,r)):kt(n.parent,t,r)};var Ve=function(e){this.type="mapping_pattern",this.parent=e,this.position=qt.value,e.tree.pop(),this.tree=[],e.tree.push(this),this.expect="key_value_pattern",this.literal_keys=[],this.bound_names=[]};Ve.prototype.ast=function(){var e=[],t=[];for(var r of this.tree)e.push(r.tree[0].ast().value),r.tree[0]instanceof We?t.push(r.tree[1].ast()):t.push(r.tree[2].ast());var n=new p.MatchMapping(e,t);return this.double_star&&(n.rest=this.double_star.tree[0]),$(n,this.position),n},Ve.prototype.bindings=function(){var e=[];for(var t of this.tree)e=e.concat(t.bindings());return this.rest&&(e=e.concat(this.rest.bindings())),this.alias&&e.push(this.alias),e},Ve.prototype.transition=function(t,r){var n=this;switch(n.expect){case"key_value_pattern":if("}"==t||","==t){if(function(){var t,r=e.last(n.tree);if(r instanceof Ge){for(var a of(n.double_star&&B(n,"can't use starred name here (consider moving to end)"),t="value_pattern"==r.tree[0].type?r.tree[2].bindings():r.tree[1].bindings()))n.bound_names.indexOf(a)>-1&&B(n,`multiple assignments to name '${a}' in pattern`);n.bound_names=n.bound_names.concat(t)}}(),n.double_star)n.tree.indexOf(n.double_star)!=n.tree.length-1&&B(n,"can't use starred name here (consider moving to end)"),n.rest=n.tree.pop();return","==t?n:n.parent}if("op"==t&&"**"==r)return n.expect="capture_pattern",n;var a=new Fe(n);try{var o=a.transition(t,r)}catch(err){B(n,"mapping pattern keys may only match literals and attribute lookups")}if(n.double_star&&B(n),o instanceof We)return n.tree.pop(),new Ge(n,o),o;if(o instanceof Le)return n.has_value_pattern_keys=!0,n.tree.pop(),new Ge(n,o),n.expect=".",this;B(n,"(expected key or **)");break;case"capture_pattern":a=new Fe(n);var s=kt(a,t,r);if(s instanceof Le)return n.double_star&&B(n,"only one double star pattern is accepted"),"_"==r&&B(n),n.bound_names.indexOf(r)>-1&&B(n,"duplicate binding: "+r),n.bound_names.push(r),s.double_star=!0,n.double_star=s,n.expect=",",n;B(n,"(expected identifier)");break;case",":if(","==t)return n.expect="key_value_pattern",n;if("}"==t)return n.expect="key_value_pattern",n.transition(t,r);B(n);break;case".":if(n.tree.length>0){var i=e.last(n.tree);if(i instanceof Ge)return new ye(i,i.tree[0].tree[0]),n.expect="key_value_pattern",kt(i.tree[0],t,r)}B(n)}return kt(n.parent,t,r)};var Ge=function(e,t){this.type="pattern_key_value",this.parent=e,this.tree=[t],t.parent=this,this.expect=":",e.tree.push(this)};Ge.prototype.bindings=Ve.prototype.bindings,Ge.prototype.transition=function(t,n){var a=this;switch(a.expect){case":":if(":"===t){var o=this.tree[0];if(o instanceof We){var s=e.AST.$convert(o.tree[0]);r.list.__contains__(this.parent.literal_keys,s)&&B(a,`mapping pattern checks duplicate key (${r.repr(s)})`),this.parent.literal_keys.push(s)}return this.expect=",",new Fe(this)}B(a,"(expected :)");break;case",":switch(t){case"}":return kt(a.parent,t,n);case",":return a.parent.expect="key_value_pattern",kt(a.parent,t,n);case"op":if("|"==n)return new Fe(new ze(a))}B(a,"(expected ',' or '}')")}return kt(a.parent,t,n)};var ze=function(e){this.type="or_pattern",this.parent=e,this.position=qt.value;var t=e.tree.pop();t instanceof qe&&"as"!=t.expect&&(t=t.tree[0]),this.tree=[t],t.parent=this,this.expect="|",e.tree.push(this),this.check_reachable()};ze.prototype.ast=function(){var e=new p.MatchOr(this.tree.map((e=>e.ast())));return $(e,this.position),this.alias&&(e=new p.MatchAs(e,this.alias)),$(e,this.position),e},ze.prototype.bindings=function(){var e;for(var t of this.tree){void 0===t.bindings&&console.log("no binding",t);var r=t.bindings();if(void 0===e)e=r;else{for(let t of e)-1==r.indexOf(t)&&B(this,"alternative patterns bind different names");for(let t of r)-1==e.indexOf(t)&&B(this,"alternative patterns bind different names")}}return this.alias?e.concat(this.alias):e},ze.prototype.check_reachable=function(){var t,r=e.last(this.tree);("capture_pattern"==r.type?t=r.tree[0]:"group_pattern"==r.type&&1==r.tree.length&&"capture_pattern"==r.tree[0].type?t=r.tree[0].tree[0]:r instanceof ze&&r.check_reachable(),t)&&B(this,`${"_"==t?"wildcard":`name capture '${t}'`} makes remaining patterns unreachable`)},ze.prototype.transition=function(t,r){function n(){var t=e.last(a.tree);t.alias&&(a.alias=t.alias,delete t.alias)}var a=this;if(["as","alias"].indexOf(a.expect)>-1)return Pe(a,t,r);if("op"==t&&"|"==r){for(var o of a.tree)o.alias&&B(a,"(no as pattern inside or pattern)");return a.check_reachable(),new Fe(a)}return")"==t&&a.parenthese?(n(),a.bindings(),delete a.parenthese,a.expect="as",a):(n(),a.bindings(),kt(a.parent,t,r))};var Je=function(e,t){this.type="sequence_pattern",this.parent=e,this.position=qt.value,this.tree=[],this.bound_names=[];var r=e.tree.pop();void 0===t?(this.bound_names=r.bindings(),this.tree=[r],r.starred&&(this.has_star=!0),r.parent=this):this.token=t,this.expect=",",e.tree.push(this)};Je.prototype.ast=function(){var e=new p.MatchSequence(this.tree.map((e=>e.ast())));return $(e,this.position),this.alias&&$(e=new p.MatchAs(e,this.alias),this.position),e},Je.prototype.bindings=Ve.prototype.bindings,Je.prototype.transition=function(t,r){function n(){var t=e.last(a.tree);if(!(t instanceof Fe)){var r=t.bindings();for(var n of r)a.bound_names.indexOf(n)>-1&&B(a,`multiple assignments to name '${n}' in pattern`);t.starred&&(a.has_star&&B(a,"multiple starred names in sequence pattern"),a.has_star=!0),a.bound_names=a.bound_names.concat(r)}}var a=this;if(","==a.expect){if("["==a.token&&"]"==t||"("==a.token&&")"==t){var o=0;for(var s of a.tree)s instanceof Le&&s.starred&&++o>1&&B(a,"multiple starred names in sequence pattern");return a.expect="as",n(),Ue(a),a}if(","==t)return n(),a.expect="id",a;if("op"==t&&"|"==r)return Ue(a),new Fe(new ze(a));if(void 0===this.token)return n(),kt(a.parent,t,r);B(a)}else{if("as"==a.expect)return"as"==t?(this.expect="alias",a):kt(a.parent,t,r);if("alias"==a.expect){if("id"==t)return a.alias=r,a.parent;B(a,"expected alias")}else if("id"==a.expect)return a.expect=",",kt(new Fe(a),t,r)}};var Ye=e.parser.RaiseCtx=function(e){this.type="raise",this.parent=e,this.tree=[],this.position=qt.value,e.tree[e.tree.length]=this,this.scope_type=yt(this).ntype};Ye.prototype.ast=function(){var e=new p.Raise(...this.tree.map((e=>e.ast())));return $(e,this.position),e},Ye.prototype.transition=function(e,t){var r=this;switch(e){case"id":if(0==r.tree.length)return new ye(new ie(r,"exc",!1),t);break;case"from":if(r.tree.length>0)return new A(r,!1);break;case"eol":return S(this.tree),kt(r.parent,e)}B(r)};var He=e.parser.ReturnCtx=function(e){this.type="return",this.parent=e,this.tree=[],this.position=qt.value,e.tree[e.tree.length]=this,this.scope=yt(this),-1==["def","generator"].indexOf(this.scope.ntype)&&B(e,"'return' outside function");for(var t=this.node=wt(this);t.parent;){if(t.parent.C){var r=t.parent.C.tree[0];if("for"==r.type){r.has_return=!0;break}("try"==r.type||"single_kw"==r.type&&"finally"==r.token)&&(r.has_return=!0)}t=t.parent}};He.prototype.ast=function(){var e=new p.Return;return this.tree.length>0&&(e.value=this.tree[0].ast()),$(e,this.position),e},He.prototype.transition=function(e,t){return"eol"==e&&1==this.tree.length&&"abstract_expr"==this.tree[0].type&&this.tree.pop(),kt(new A(this.parent,!1),e,t)};var Ke=function(e){this.type="setcomp",this.tree=[e.tree[0]],this.tree[0].parent=this,Y.make_comp(this,e)};Ke.prototype.ast=function(){var e=new p.SetComp(this.tree[0].ast(),Y.generators(this.tree.slice(1)));return $(e,this.position),e},Ke.prototype.transition=function(e){if("}"==e)return this.parent;B(this)};var Xe=e.parser.SingleKwCtx=function(e,t){if(this.type="single_kw",this.token=t,this.parent=e,this.tree=[],e.tree[e.tree.length]=this,"else"==t){var r=e.node,n=r.parent.children.indexOf(r),a=r.parent.children[n-1].C;if(a.tree[0].orelse=this,a.tree.length>0){var o=a.tree[0];("for"==o.type||"asyncfor"==o.type||"condition"==o.type&&"while"==o.token)&&(o.has_break=!0,o.else_node=wt(this))}}};Xe.prototype.ast=function(){return d(this.parent)},Xe.prototype.transition=function(e){var t=this;if(":"==e)return U(t);"eol"==e&&B(t,"expected ':'"),B(t)};var Ze=e.parser.SliceCtx=function(e){this.type="slice",this.parent=e,this.position=qt.value,this.tree=e.tree.length>0?[e.tree.pop()]:[],e.tree.push(this)};Ze.prototype.ast=function(){for(var e=new p.Slice,t=["lower","upper","step"],r=0;r<this.tree.length;r++){var n=this.tree[r];"abstract_expr"!==n.type&&(e[t[r]]=n.ast())}return $(e,this.position),e},Ze.prototype.transition=function(e,t){return":"==e?new A(this,!1):kt(this.parent,e,t)};var Qe=e.parser.StarArgCtx=function(e){this.type="star_arg",this.parent=e,this.tree=[],this.position=qt.value,e.tree[e.tree.length]=this};Qe.prototype.transition=function(e,t){var r=this;switch(e){case"id":return"target_list"==r.parent.type?(r.tree.push(t),r.parent.expect=",",r.parent):kt(new A(r,!1),e,t);case"imaginary":case"int":case"float":case"str":case"JoinedStr":case"bytes":case"[":case"(":case"{":case"not":case"lambda":return kt(new A(r,!1),e,t);case",":case")":return 0==r.tree.length&&B(r,"(unnamed star argument)"),kt(r.parent,e);case":":if("lambda"==r.parent.parent.type)return kt(r.parent.parent,e)}B(r)};var et=e.parser.StarredCtx=function(e){if(this.type="starred",this.position=e.position,"list_or_tuple"==e.parent.type&&"node"==e.parent.parent.type)for(var t=0;t<e.parent.tree.length;t++){var r=e.parent.tree[t];"expr"==r.type&&r.tree.length>0&&"starred"==r.tree[0].type&&B(e,"two starred expressions in assignment")}this.parent=e,this.tree=[],e.tree[e.tree.length]=this};et.prototype.ast=function(){var e=new p.Starred(this.tree[0].ast(),new p.Load);return $(e,this.position),e},et.prototype.transition=function(e,t){return kt(this.parent,e,t)};var tt=e.parser.StringCtx=function(e,t){this.type="str",this.parent=e,this.position=this.end_position=qt.value,e.tree.push(this),this.is_bytes=t.startsWith("b"),this.value=this.is_bytes?[]:"",this.add_value(t),this.raw=!1};e.string_from_ast_value=function(e){return e.replace(new RegExp("\\\\'","g"),"'")};var rt=e.make_string_for_ast_value=function(e){if("'"==(e=(e=e.replace(/\n/g,"\\n\\\n")).replace(/\r/g,"\\r\\\r"))[0])return e.substr(1,e.length-2);if(e.indexOf("'")>-1){var t="",r=!1;for(var n of e)"\\"==n?(r&&(t+="\\\\"),r=!r):("'"!=n||r?r&&(t+="\\"):t+="\\",t+=n,r=!1);e=t}return e.substr(1,e.length-2)};tt.prototype.add_value=function(e){if(this.is_bytes="b"==e.charAt(0),this.is_bytes){e=e.substr(2,e.length-3);try{var t=nt(e)}catch(err){B(this,"bytes can only contain ASCII literal characters")}this.value=this.value.concat(t)}else this.value+=rt(e)};var nt=e.encode_bytestring=function(e){for(var t=[],r=0,n=(e=e.replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\f/g,"\f").replace(/\\v/g,"\v").replace(/\\\\/g,"\\")).length;r<n;r++){var a=e.codePointAt(r);if(a>255)throw Error();t.push(a)}return t};tt.prototype.ast=function(){var e=this.value;this.is_bytes&&(e=r.bytes.$factory(this.value));var t=new p.Constant(e);return $(t,this.position),t},tt.prototype.transition=function(e,t){var r=this;switch(e){case"[":return new A(new at(r.parent),!1);case"(":return r.parent.tree[0]=r,new G(r.parent);case"str":return(this.is_bytes&&!t.startsWith("b")||!this.is_bytes&&t.startsWith("b"))&&B(r,"cannot mix bytes and nonbytes literals"),r.add_value(t),r;case"JoinedStr":r.parent.tree.pop();var n=new fe(r.parent,t);return new tt(n,n.quotes+this.value+n.quotes),n}return kt(r.parent,e,t)};var at=e.parser.SubscripCtx=function(e){this.type="sub",this.func="getitem",this.value=e.tree[0],this.position=qt.value,e.tree.pop(),e.tree[e.tree.length]=this,this.parent=e,this.tree=[]};at.prototype.ast=function(){var e;if(this.tree.length>1){var t=this.tree.map((e=>e.ast()));$(e=new p.Tuple(t),this.position,this.end_position)}else e=this.tree[0].ast();e.ctx=new p.Load;var r=this.value.ast();r.ctx&&(r.ctx=new p.Load);var n=new p.Subscript(r,e,new p.Load);return n.lineno=r.lineno,n.col_offset=r.col_offset,n.end_lineno=e.end_lineno,n.end_col_offset=e.end_col_offset,n},at.prototype.transition=function(e,t){var r=this;switch(e){case"id":case"imaginary":case"int":case"float":case"str":case"JoinedStr":case"bytes":case"[":case"(":case"{":case".":case"not":case"lambda":var n=new A(r,!1);return kt(n,e,t);case"]":if(r.end_position=qt.value,r.parent.packed)return r.parent;if(r.tree[0].tree.length>0)return r.parent;break;case":":return new A(new Ze(r),!1);case",":return new A(r,!1)}B(r)};var ot=e.parser.TargetListCtx=function(e){this.type="target_list",this.parent=e,this.tree=[],this.position=qt.value,this.expect="id",this.nb_packed=0,e.tree[e.tree.length]=this};ot.prototype.ast=function(){if(1!=this.tree.length||this.implicit_tuple){let t=[];for(let e of this.tree)e=e.ast(),e.hasOwnProperty("ctx")&&(e.ctx=new p.Store),t.push(e);var e=new p.Tuple(t,new p.Store);return $(e,this.position),e}{let e=this.tree[0].ast();if(e.ctx=new p.Store,e instanceof p.Tuple)for(var t of e.elts)t.ctx=new p.Store;return e}},ot.prototype.transition=function(e,t){var r=this;switch(e){case"id":if("id"==r.expect)return r.expect=",",new ye(new ie(r,"target",!1),t);break;case"op":if("id"==r.expect&&"*"==t)return this.nb_packed++,r.expect=",",new A(new et(r),!1);break;case"(":case"[":if("id"==r.expect)return r.expect=",",new Ne(r,"("==e?"tuple":"list");break;case")":case"]":if(","==r.expect)return r.parent;break;case",":if(","==r.expect)return r.expect="id",r.implicit_tuple=!0,r}return","==r.expect||"in"==e?kt(r.parent,e,t):(console.log("unexpected token for target list",e,t),console.log(r),void B(r))};var st=e.parser.TernaryCtx=function(e){this.type="ternary",this.position=e.position,e.parent.tree.pop();var t=new ie(e.parent,"ternary",!1);t.tree.push(this),this.parent=t,this.tree=[e],e.parent=this};st.prototype.ast=function(){var e=new p.IfExp(this.tree[1].ast(),this.tree[0].ast(),this.tree[2].ast());return $(e,this.position),e},st.prototype.transition=function(e,t){var r=this;if("else"==e)return r.in_else=!0,new A(r,!1);if(r.in_else){if(","==e&&["assign","augm_assign","node","return"].indexOf(r.parent.type)>-1){r.parent.tree.pop();var n=new Ne(r.parent,"tuple");return n.implicit=!0,n.tree[0]=r,r.parent=n,n.expect="id",n}}else":"==e&&B(r),k(r,r.position,w(r),"expected 'else' after 'if' expression");return kt(r.parent,e,t)};var it=e.parser.TryCtx=function(e){this.type="try",this.parent=e,this.position=qt.value,e.tree[e.tree.length]=this};it.prototype.ast=function(){var e=this.parent.node,t={body:d(this.parent),handlers:[],orelse:[],finalbody:[]},r=e.parent.children.indexOf(e);for(var n of e.parent.children.slice(r+1)){var a=n.C.tree[0],o=a.type;if("single_kw"==o&&(o=a.token),"except"==o)t.handlers.push(a.ast());else if("else"==o)t.orelse=d(n.C);else{if("finally"!=o)break;t.finalbody=d(n.C)}}return 0==t.handlers.length&&0==t.finalbody.length&&B(this,"expected 'except' or 'finally' block"),$(t=new(this.parent.is_trystar?p.TryStar:p.Try)(t.body,t.handlers,t.orelse,t.finalbody),this.position),t},it.prototype.transition=function(e){if(":"==e)return U(this);B(this,"expected ':'")};var _t=e.parser.TypeAlias=function(e,t){e.parent.parent.tree=[this],this.parent=e.parent.parent,this.name=t,this.expect="=",this.tree=[],this.position=qt.value};_t.prototype.transition=function(e,t){var r=this;if("="==r.expect){if("["==e)return this.tree.length>0&&B(r),new lt(r);if("="==e)return r.has_value=!0,new A(r,!1);if("eol"==e)return(!r.has_value||1!==this.tree.length||this.tree[0]instanceof A)&&B(r),kt(r.parent,e,t)}B(r)},_t.prototype.ast=function(){var e,t=new p.Name(this.name),r=this.tree[0].ast();this.type_params&&(e=this.type_params.ast());var n=new p.TypeAlias(t,e,r);return $(n,this.position),n};var lt=e.parser.TypeParamsCtx=function(e){this.type="type_params",this.parent=e,e.type_params=this,this.tree=[],this.expect="param"};lt.prototype.check_duplicate=function(e){for(var t of this.tree)t.name==e&&B(this,`duplicate type parameter '${e}'`)},lt.prototype.transition=function(e,t){var r=this;if("param"==r.expect){if("id"==e)return r.check_duplicate(t),r.expect=",",new ct(r,t);if("op"==e){if("*"==t)return r.expect=",",new ft(r);if("**"==t)return r.expect=",",new ut(r)}else if("]"==e)return r.parent;B(r)}else if(","==r.expect){if(","==e)return r.expect="param",r;if("]"==e)return r.parent;B(r)}B(r)},lt.prototype.ast=function(){return this.tree.map((e=>e.ast()))};var ct=e.parser.TypeVarCtx=function(e,t){this.name=t,this.parent=e,e.tree.push(this),this.tree=[],this.position=qt.value};ct.prototype.transition=function(e,t){return":"==e?new A(this,!1):kt(this.parent,e,t)},ct.prototype.ast=function(){var e,t=this.name;this.tree.length>0&&(e=this.tree[0].ast());var r=new p.TypeVar(t,e);return $(r,this.position),r};var ut=e.parser.TypeParamSpecCtx=function(e){this.parent=e,e.tree.push(this),this.tree=[],this.position=qt.value};ut.prototype.transition=function(e,t){var r,n=this;return"id"==e?(n.name&&B(n),n.parent.check_duplicate(t),n.name=t,n):":"==e?(n.name||B(n),this.has_colon=!0,new A(n,!1)):(this.has_colon&&(r="tuple"==this.tree[0].name?"cannot use constraints with ParamSpec":"cannot use bound with ParamSpec",k(n,this.position,qt.value,r)),kt(this.parent,e,t))},ut.prototype.ast=function(){var e=new p.Name(this.name),t=new p.ParamSpec(e);return $(t,this.position),t};var ft=e.parser.TypeVarTupleCtx=function(e){this.parent=e,e.tree.push(this),this.tree=[],this.position=qt.value};ft.prototype.transition=function(e,t){var r,n=this;return"id"==e?(n.name&&B(n),n.parent.check_duplicate(t),n.name=t,n):":"==e?(n.name||B(n),this.has_colon=!0,new A(n,!1)):(this.has_colon&&(r="tuple"==this.tree[0].name?"cannot use constraints with TypeVarTuple":"cannot use bound with TypeVarTuple",k(n,this.position,qt.value,r)),kt(this.parent,e,t))},ft.prototype.ast=function(){var e=new p.Name(this.name),t=new p.TypeVarTuple(e);return $(t,this.position),t};var pt=e.parser.UnaryCtx=function(e,t){this.type="unary",this.op=t,this.parent=e,this.tree=[],this.position=qt.value,e.tree.push(this)};pt.prototype.ast=function(){var e={"+":p.UAdd,"-":p.USub,"~":p.Invert}[this.op],t=new p.UnaryOp(new e,this.tree[0].ast());return $(t,this.position),t},pt.prototype.transition=function(e,t){var r=this;switch(e){case"op":if("+"==t||"-"==t)return r.op===t?r.op="+":r.op="-",r;break;case"int":case"float":case"imaginary":return"starred"==r.parent.type&&B(r,"can't use starred expression here"),new Ce(e,r,t);case"id":return kt(new A(r,!1),e,t)}return 0!=this.tree.length&&"abstract_expr"!=this.tree[0].type||B(r),kt(r.parent,e,t)};var ht=e.parser.WithCtx=function(e){this.type="with",this.parent=e,this.position=qt.value,e.tree[e.tree.length]=this,this.tree=[],this.expect="expr",this.scope=yt(this)};ht.prototype.ast=function(){var e=[];for(var t of this.tree)e.push(t.ast());var r=new(this.async?p.AsyncWith:p.With)(e,d(this.parent));return $(r,this.async?this.async.position:this.position,w(this)),r},ht.prototype.transition=function(t,r){var n=this;function a(){var t=e.last(n.tree);if(t.tree.length>1){var r=t.tree[1];0==r.tree.length&&B(n,"expected ':'"),N(r)}}switch(t){case"(":case"[":if("expr"==this.expect&&0==this.tree.length)return n.parenth=t,n;B(n);break;case"id":if("expr"==n.expect)return n.expect=",",kt(new A(new dt(n),!1),t,r);B(n);break;case":":return n.parenth&&"implicit"!=n.parenth||a(),U(n);case")":case"]":if(n.parenth==Tt[t]&&(","==n.expect||"expr"==n.expect))return a(),n.expect=":",n;break;case",":if(","==n.expect)return n.parenth||(n.parenth="implicit"),a(),n.expect="expr",n;break;case"eol":B(n,"expected ':'")}B(n)},ht.prototype.set_alias=function(e){var t=[];if("id"==e.type)t=[e];else if("list_or_tuple"==e.type)for(var r of e.tree)"expr"==r.type&&"id"==r.tree[0].type&&t.push(r.tree[0])};var dt=function(e){this.type="withitem",this.parent=e,e.tree.push(this),this.tree=[],this.expect="as",this.position=qt.value};dt.prototype.ast=function(){var e=new p.withitem(this.tree[0].ast());if(this.tree[1])if(e.optional_vars=this.tree[1].tree[0].ast(),e.optional_vars.elts)for(var t of e.optional_vars.elts)t.ctx=new p.Store;else e.optional_vars.ctx=new p.Store;return $(e,this.position),e},dt.prototype.transition=function(e,t){var r=this;return"as"==e&&"as"==r.expect?(r.expect="star_target",new A(r,!1)):kt(r.parent,e,t)};var mt=e.parser.YieldCtx=function(t,r){this.type="yield",this.parent=t,this.tree=[],this.is_await=r,this.position=qt.value,t.tree[t.tree.length]=this,"list_or_tuple"==t.type&&t.tree.length>1&&B(t,"(non-parenthesized yield)"),gt(t,{type:"annotation"})&&B(t,"'yield' outside function");var n=bt(this);n.yields_func_check=n.yields_func_check||[],n.yields_func_check.push(this);var a=this.scope=yt(this,!0),o=wt(this);o.has_yield=this;var s=gt(this,{type:"comprehension"});if(yt(this).id.startsWith("lc"+e.lambda_magic)&&delete o.has_yield,s){var i=s.tree[0].tree[1];for(l=t;l&&l!==i;)l=l.parent;l||B(t,"'yield' inside list comprehension")}for(var _=!1,l=t;l;){if("lambda"==l.type){_=!0,this.in_lambda=!0;break}l=l.parent}for(l=o.parent;l;){if(l.C&&l.C.tree.length>0&&"with"==l.C.tree[0].type){a.C.tree[0].$has_yield_in_cm=!0;break}l=l.parent}if(!_)switch(t.type){case"node":case"assign":case"list_or_tuple":break;default:B(t,"(non-parenthesized yield)")}};function gt(e,t){for(var r;e.parent;){for(var n in r=!0,t)if(e.parent[n]!=t[n]){r=!1;break}if(r)return e.parent;e=e.parent}return!1}mt.prototype.ast=function(){var e;return $(e=this.from?new p.YieldFrom(this.tree[0].ast()):1==this.tree.length?new p.Yield(this.tree[0].ast()):new p.Yield,this.position),e},mt.prototype.transition=function(t){var r=this;return"from"==t?("abstract_expr"!=r.tree[0].type&&B(r,"('from' must follow 'yield')"),r.from=!0,r.from_num=e.UUID(),r.tree[0]):(S(r.tree),r.from&&0==r.tree.length&&B(r),kt(r.parent,t))},mt.prototype.check_in_function=function(){if(!this.in_lambda){var e=yt(this),t=e.is_function,r=e;if(!t&&e.comprehension){for(var n=e.parent_block;n.comprehension;)n=n.parent_block;t=n.is_function,r=n}if(t){var a=r.C.tree[0];this.is_await||(a.type="generator")}}};var vt=e.parser.get_previous=function(e){var t=e.node.parent.children[e.node.parent.children.length-2];return t&&t.C||B(e,"(keyword not following correct keyword)"),t.C.tree[0]},$t=e.parser.get_docstring=function(t){var n=r.None;if(t.body.length>0){var a=t.body[0];a instanceof e.ast.Constant&&"string"==typeof a.value&&(n=a.value)}return n},yt=e.parser.get_scope=function(e){for(var t=e.parent;"node"!==t.type;){if(t.comprehension)return t;t=t.parent}for(var r=t.node,n=null;r.parent&&"module"!==r.parent.type;){var a=r.parent.C.tree[0].type;switch(a){case"def":case"class":case"generator":return(n=r.parent).ntype=a,n.is_function="class"!=a,n}r=r.parent}return(n=r.parent||r).ntype="module",n},bt=e.parser.get_module=function(e){for(var t=e instanceof Oe?e:e.parent;"node"!==t.type;)t=t.parent;var r=t.node;if("module"==r.ntype)return r;for(var n=null;"module"!=r.parent.type;)r=r.parent;return(n=r.parent).ntype="module",n},wt=e.parser.get_node=function(e){for(var t=e;t.parent;)t=t.parent;return t.node},xt=e.parser.mangle_name=function(e,t){if("__"!=e.substr(0,2)||"__"===e.substr(e.length-2))return e;for(var r=yt(t);;){if("module"==r.ntype)return e;if("class"==r.ntype){for(var n=r.C.tree[0].name;"_"==n.charAt(0);)n=n.substr(1);return"_"+n+e}if(!r.parent||!r.parent.C)return e;r=yt(r.C.tree[0])}};e.nb_debug_lines=0;for(var kt=e.parser.transition=function(t,r,n){return e.nb_debug_lines>100&&(alert("too many debug lines"),e.nb_debug_lines=0),e.track_transitions&&(console.log("C",t,"token",r,n),e.nb_debug_lines++),t.transition(r,n)},jt="abfnrtvxuU\"0123456789'\\",Bt={},Et=0;Et<jt.length;Et++)Bt[jt.charAt(Et)]=!0;function Nt(e){return e-=65536,String.fromCharCode(55296|e>>10)+String.fromCharCode(56320|1023&e)}function St(e){var t,r=e.length,n=0,a=null,o={b:"binary",o:"octal",x:"hexadecimal"},s=/[_\d]/;function i(e){throw SyntaxError(e)}function _(e){if(0==e.value.length){i("invalid "+(o[e.subtype]||"decimal")+" literal")}else{if(!e.value[e.value.length-1].match(/[-+_]/))return e.value=e.value.replace(/_/g,""),e.length=n,e;i("invalid "+(o[e.subtype]||"decimal")+" literal")}}for(;n<r;)if((t=e[n]).match(s))null===a?a={value:t}:("_"==t&&a.value.match(/[._+-]$/)?i("consecutive _ at "+n):"_"==t&&"float"==a.subtype&&a.value.match(/e$/i)?i("syntax error"):"b"!=a.subtype||t.match(/[01_]/)?"o"!=a.subtype||t.match(/[0-7_]/)?void 0===a.subtype&&a.value.startsWith("0")&&!t.match(/[0_]/)&&i("leading zeros in decimal integer literals are not permitted; use an 0o prefix for octal integers"):i(`invalid digit '${t}' in octal literal`):i(`invalid digit '${t}' in binary literal`),a.value+=t),n++;else if(t.match(/[oxb]/i))"0"==a.value?(a.subtype=t.toLowerCase(),"x"==a.subtype&&(s=/[_\da-fA-F]/),a.value="",n++):i("invalid char "+t);else if("."==t)if(null===a)i("invalid char in "+e+" pos "+n+": "+t);else{if(void 0!==a.subtype)return _(a);a.subtype="float",a.value.endsWith("_")&&i("invalid decimal literal"),a.value=a.value.replace(/_/g,"")+t,n++}else if(t.match(/e/i))if(void 0===e[n+1])i("nothing after e");else if(a&&void 0!==o[a.subtype])i("syntax error");else if(a&&a.value.endsWith("_"))i("syntax error");else{if(!e[n+1].match(/[+\-0-9_]/))return _(a);if(a&&a.value){if(a.exp)return a.length=n,a;a.subtype="float",a.value+=t,a.exp=!0,n++}else i("unexpected e")}else if(t.match(/[+-]/i))if(null===a)a={value:t},n++;else{if(!(a.value.search(/e$/i)>-1))return _(a);a.value+=t,n++}else{if(!t.match(/j/i))break;if(a&&(!a.subtype||"float"==a.subtype))return a.imaginary=!0,_(a),a.length++,a;i("invalid syntax")}return _(a)}var Tt={")":"(","}":"{","]":"["};function Ot(t){var r=[];for(t.position--;;){var n=t.read();if(!n)return!1;if("OP"==n.type&&":"==n.string&&0==r.length)return!0;if("OP"==n.type){if("([{".indexOf(n.string)>-1)r.push(n);else if(")]}".indexOf(n.string)>-1){if(0==r.length){let e=SyntaxError(`unmatched '${n.string}'`);throw e.offset=n.start[1],e}if(e.last(r).string!=Tt[n.string]){let t=SyntaxError(`closing parenthesis '${n.string}' does not match opening parenthesis '${e.last(r).string}'`);throw t.offset=n.start[1],t}r.pop()}}else if("NEWLINE"==n.type)return!1}return!1}function At(e){if(e.startsWith("."))return e.endsWith("j")?{type:"imaginary",value:At(e.substr(0,e.length-1))}:{type:"float",value:e.replace(/_/g,"")};if(!e.startsWith("0")||"0"==e){let t=St(e);return"float"==t.subtype?t.imaginary?{type:"imaginary",value:At(t.value)}:{type:"float",value:t.value}:t.imaginary?{type:"imaginary",value:At(t.value)}:{type:"int",value:[10,t.value]}}{let t,r=St(e);if(r.imaginary)return{type:"imaginary",value:At(r.value)};if("float"==r.subtype)return{type:r.subtype,value:r.value};if(t=void 0===r.subtype?10:{b:2,o:8,x:16}[r.subtype],void 0!==t)return{type:"int",value:[t,r.value]}}}function It(e,t){var r,n;if(n=/^[0-7]{1,3}/.exec(e.substr(t+1)))return[String.fromCharCode(parseInt(n[0],8)),1+n[0].length];switch(e[t+1]){case"x":if(2!=(n=/^[0-9A-F]{0,2}/i.exec(e.substr(t+2)))[0].length)throw r=t+n[0].length+1,qt.value.start[1]=r,Error(`(unicode error) 'unicodeescape' codec can't decode bytes in position ${t}-${r}: truncated \\xXX escape`);return[String.fromCharCode(parseInt(n[0],16)),2+n[0].length];case"u":if(4!=(n=/^[0-9A-F]{0,4}/i.exec(e.substr(t+2)))[0].length)throw r=t+n[0].length+1,qt.value.start[1]=r,Error(`(unicode error) 'unicodeescape' codec can't decode bytes in position ${t}-${r}: truncated \\uXXXX escape`);return[String.fromCharCode(parseInt(n[0],16)),2+n[0].length];case"U":if(8!=(n=/^[0-9A-F]{0,8}/i.exec(e.substr(t+2)))[0].length)throw r=t+n[0].length+1,qt.value.start[1]=r,Error(`(unicode error) 'unicodeescape' codec can't decode bytes in position ${t}-${r}: truncated \\uXXXX escape`);{let e=parseInt(n[0],16);if(e>1114111)throw Error("invalid unicode escape "+n[0]);return e>=65536?[Nt(e),2+n[0].length]:[String.fromCharCode(e),2+n[0].length]}}}function Ct(t,r){var n,a=r.length,o=0,s="string";let i,_;for(;o<a;){if('"'==r[o]||"'"==r[o]){i=r[o],n=r.substr(0,o),r.substr(o,3)==i.repeat(3)?(s="triple_string",_=r.substring(o+3,r.length-3)):_=r.substring(o+i.length,a-i.length);break}o++}var l={quote:i},c={r:"raw",f:"fstring",b:"bytes"};for(var u of n)l[c[u]]=!0;var f="str"==t.type&&t.raw,p=!1,h=!1,d=null;if(n){switch(n){case"r":f=!0;break;case"u":break;case"b":p=!0;break;case"rb":case"br":p=!0,f=!0;break;case"f":h=!0;break;case"fr":case"rf":h=!0,f=!0}n=!1}var m=!1,g="",v=_;for(d=0;d<v.length;)if(m)"a"!=v.charAt(d)||f?(g+=v.charAt(d),f&&"\\"==v.charAt(d)&&(g+="\\")):g=g.substr(0,g.length-1)+"\x07",m=!1,d++;else if("\\"==v.charAt(d))if(f)d<v.length-1&&v.charAt(d+1)==i?(g+="\\\\"+i,d+=2):(g+="\\\\",d++),m=!0;else if("\n"==v.charAt(d+1))d+=2;else if("N{"==v.substr(d+1,2)){let r=d+3,n=new RegExp("[-a-zA-Z0-9 ]+").exec(v.substr(r));null===n&&B(t," (unicode error) malformed \\N character escape",o),r+=n[0].length,"}"!=v.charAt(r)&&B(t," (unicode error) malformed \\N character escape");var $=n[0].toUpperCase();if(void 0===e.unicodedb){var y=new XMLHttpRequest;y.open("GET",e.brython_path+"unicode.txt",!1),y.onreadystatechange=function(){4==this.readyState&&(200==this.status?e.unicodedb=this.responseText:console.log("Warning - could not load unicode.txt"))},y.send()}if(void 0!==e.unicodedb){n=new RegExp("^([0-9A-F]+);"+$+";.*$","m").exec(e.unicodedb),null===n&&B(t," (unicode error) unknown Unicode character name");var b=parseInt(n[1],16);g+=String.fromCodePoint(b),d=r+1}else d++}else{try{var w=It(v,d)}catch(err){B(t,err.message)}w?("\\"==w[0]?g+="\\\\":g+=w[0],d+=w[1]):(d<v.length-1&&void 0===Bt[v.charAt(d+1)]&&(g+="\\"),g+="\\",m=!0,d++)}else"\n"==v.charAt(d)&&"triple_string"!=s?B(t,"EOL while scanning string literal"):(g+=v.charAt(d),d++);for(var x=g,k="",j=0;j<x.length;j++){var E=x.charAt(j);if(E==i)if(f||0==j||"\\"!=x.charAt(j-1))k+="\\";else if("triple_string"==s){for(var N=j-1;"\\"==x.charAt(N);)N--;(j-N-1)%2==0&&(k+="\\")}k+=E}if(h)try{let t=new RegExp("\\\\"+i,"g"),r=k.replace(t,i);var S=e.parse_fstring(r)}catch(err){B(t,err.message)}return l.value=p?"b"+i+k+i:h?S:i+k+i,t.raw=f,l}function Mt(e){for(var t,r,n,a=e.split("\n"),o=[],s=0,i=a.length;s<i;s++)if((n=(t=a[s]).match(/^\s*/)[0])!=t)if(void 0===r){if(0==n.length)return e;var _=(r=n).length;o.push(t.substr(_))}else{if(!t.startsWith(r))throw SyntaxError(`first line starts at column ${_}, line ${s} at column `+t.match(/\s*/).length+"\n    "+t);o.push(t.substr(_))}else o.push("");return o.join("\n")}function Rt(e,t,n){if("'"==t.string||'"'==t.string)B(e,`unterminated string literal (detected at line ${t.start[0]})`);else if("\\"==t.string){var a=n.read();a&&"NEWLINE"!=a.type?k(e,a,a,"unexpected character after line continuation character"):B(e,"unexpected EOF while parsing")}else if(-1==" `$".indexOf(t.string)){var o=r.ord(t.string).toString(16).toUpperCase();o="U+"+"0".repeat(Math.max(0,4-o.length))+o,B(e,`invalid character '${t.string}' (${o})`)}B(e)}e.test_escape=It;const Ft={")":"(","]":"[","}":"{"},Pt={"(":")","{":"}","[":"]"};function Lt(e,t){for(var r=t.position,n=Pt[e],a=1;;){var o=t.read();if("OP"==o.type&&o.string==e)a+=1;else if("OP"==o.type&&o.string==n&&0==(a-=1)){t.seek(r);break}}}var Dt=["class","return","break","for","lambda","try","finally","raise","def","from","nonlocal","while","del","global","with","as","elif","else","if","yield","assert","import","except","raise","in","pass","with","continue","async","await"],qt={},Ut=e.parser.dispatch_tokens=function(t){var a=t.src;t.token_reader=new e.TokenReader(a,t.filename);var o=[],s=[],_=t.module,l=void 0===t.line_num?1:t.line_num,c=new O;c.line_num=l,t.add(c);for(var u,f=null,p=!1,h=0,d={0:0,1:0},m=1,g=0,v=a.length;g<v;g++)"\n"==a[g]&&(d[++m]=g+1);for(;;){try{u=t.token_reader.read()}catch(err){if(f=f||new Oe(c),"IndentationError"==err.type)E(f,err.message);else if(err instanceof SyntaxError){if(o.length>0){let t=e.last(o);qt.value=t,B(f,`'${t.string}' was never closed`)}var $=err.message;"EOF in multi-line statement"==$&&($="unexpected EOF while parsing"),err.lineno?x(r.SyntaxError,t.filename,err.lineno,err.col_offset,err.end_lineno,err.end_col_offset,err.line,err.message):B(f,$)}throw err}if(!u)throw Error("token done without ENDMARKER.");switch(qt.value=u,void 0===u[2]&&(console.log("token incomplet",u,"module",_,t),console.log("src",a)),void 0===u.start&&console.log("no start",u),l=u.start[0],p&&-1==["INDENT","COMMENT","NL"].indexOf(u.type)&&E(f=f||new Oe(c),"expected an indented block",p),u.type){case"ENDMARKER":if(t.yields_func_check)for(const e of t.yields_func_check)qt.value=e.position,e.check_in_function();return 0!=h&&E(c.C,"expected an indented block"),void(void 0!==c.C&&0!=c.C.tree.length||c.parent.children.pop());case"ENCODING":case"TYPE_COMMENT":case"COMMENT":continue;case"NL":c.C&&0!=c.C.tree.length||c.line_num++;continue;case"ERRORTOKEN":f=f||new Oe(c)," "!=u.string&&Rt(f,u,t.token_reader);continue}switch(u[0]){case"NAME":case"NUMBER":case"OP":case"STRING":case"FSTRING_START":f=f||new Oe(c)}switch(u[0]){case"NAME":var y=u[1];Dt.indexOf(y)>-1?(s.indexOf(y)>-1&&B(f,"(Unsupported Python keyword '"+y+"')"),f=kt(f,y)):f="not"==y?kt(f,"not"):"string"==typeof n[y]?kt(f,"op",y):kt(f,"id",y);continue;case"OP":var b=u[1];if(1==b.length&&"()[]{}.,=".indexOf(b)>-1||[":="].indexOf(b)>-1){if("([{".indexOf(b)>-1){o.push(u);try{Lt(b,t.token_reader)}catch(err){if("EOF in multi-line statement"!=err.message)throw err;B(f,`'${b}' was never closed`)}}else if(Ft[b])if(0==o.length)B(f,"(unmatched '"+b+"')");else{let t=e.last(o);t.string==Ft[b]?o.pop():B(f,`closing parenthesis '${b}' does not match opening parenthesis '${t.string}'`)}f=kt(f,u[1])}else if(":"==b)(f=kt(f,":")).node&&f.node.is_body_node&&(c=f.node);else if("..."==b)f=kt(f,"ellipsis");else if("->"==b)f=kt(f,"annotation");else if(";"==b){"node"==f.type&&0==f.tree.length&&B(f,"(statement cannot start with ;)"),kt(f,"eol");let e=new O;e.line_num=u[2][0]+1,f=new Oe(e),c.parent.add(e),c=e}else f=i[b]?kt(f,"augm_assign",b):kt(f,"op",b);continue;case"STRING":var w=Ct(f,u[1],u[2]);f=w.value instanceof Array?kt(f,"JoinedStr",w.value):kt(f,"str",w.value);continue;case"FSTRING_START":f=kt(f,"JoinedStr",u[1]);break;case"FSTRING_MIDDLE":f=kt(f,"middle",u[1]);break;case"FSTRING_END":f=kt(f,"end",u[1]);break;case"NUMBER":try{var k=At(u[1])}catch(err){B(f,err.message)}f=kt(f,k.type,k.value);continue;case"NEWLINE":f&&f.node&&f.node.is_body_node&&(p=f.node.parent),f=f||new Oe(c),kt(f,"eol");var j=new O;j.line_num=u[2][0]+1,c.parent.children.length>0&&c.parent.children[0].is_body_node?c.parent.parent.add(j):c.parent.add(j),f=new Oe(j),c=j;continue;case"DEDENT":h--,N||(c.parent.children.pop(),c.parent.parent.add(c),f=new Oe(c));continue;case"INDENT":h++;var N=!1;p||("\\"==u.line.trim()?N=!0:E(f=f||new Oe(c),"unexpected indent")),p=!1;continue}}},Wt=e.parser.create_root_node=function(e,t,r,n,a){var o=new O("module");return o.module=t,o.id=r,o.parent_block=n,o.line_num=a,o.indent=-1,o.imports={},"object"==typeof e&&(o.is_comp=e.is_comp,o.filename=e.filename,e=e.src),e=e.replace(/\r\n/gm,"\n"),o.src=e,o};if(e.py2js=function(t,r,n,a){var o,s,i;if("object"==typeof r&&(r=r.__name__),a=a||e.builtins_scope,"object"==typeof t&&(o=t.filename,s=t.imported,t=t.src),Array.isArray(n)&&(n=n[0]),e.parser_to_ast)console.log("use standard parser"),i=new e.Parser(t,o,"file").parse();else{var _=Wt({src:t,filename:o},r,n,a);Ut(_),i=_.ast()}var l=e.future_features(i,o),c=e._PySymtable_Build(i,o,l),u=e.js_from_root({ast:i,symtable:c,filename:o,imported:s}),f=u.js;return{_ast:i,imports:u.imports,to_js:function(){return f}}},e.parse_options=function(t){return void 0===t?t={}:"number"==typeof t?t={debug:t}:"object"!=typeof t&&(console.warn("ignoring invalid argument passed to brython():",t),t={}),e.debug=void 0===t.debug?1:t.debug,r.__debug__=e.debug>0,t.python_extension=t.python_extension||".py",e.$options.args?e.__ARGV=e.$options.args:e.__ARGV=r.list.$factory([]),e.options_parsed=!0,t},!e.isWebWorker&&!e.isNode){var Vt=new MutationObserver((function(e){for(var t of e)for(var r of t.addedNodes)Xt(r)}));Vt.observe(document.documentElement,{childList:!0,subtree:!0})}var Gt={},zt=[];if(!e.isWebWorker){var Jt;zt=zt.concat(Array.from(document.querySelectorAll('script[type="text/python"]'))).concat(Array.from(document.querySelectorAll('script[type="text/python3"]'))),addEventListener("DOMContentLoaded",(function(e){e.target.body&&(Jt=e.target.body.onload),e.target.body.onload=Jt?function(){Jt(),Zt.brython_called||tr()}:function(){return tr()}}));class e extends HTMLElement{constructor(){super()}connectedCallback(){for(var e of this.getAttributeNames())Gt[e]=rr(e,this.getAttribute(e))}}customElements.define("brython-options",e)}var Yt={},Ht=new Map,Kt={};function Xt(e){"SCRIPT"!=e.tagName||"text/python"!=e.type&&"text/python3"!=e.type||zt.push(e)}var Zt={brython_called:!1,first_unnamed_script:!0};function Qt(e){"SCRIPT"==e.tagName&&"text/python"==e.type&&(er(e),ar([e]))}function er(t){if(Ht.has(t));else if(t.id){if(Yt[t.id])throw Error("Brython error : Found 2 scripts with the same id '"+t.id+"'");Yt[t.id]=!0,Ht.set(t,t.id)}else{if("webworker"===t.className)throw r.AttributeError.$factory("webworker script has no attribute 'id'");Zt.first_unnamed_script?(Ht.set(t,"__main__"),Zt.first_unnamed_script=!1):Ht.set(t,"__main__"+e.UUID())}var n=Ht.get(t);return Kt[n]=t,n}e.dispatch_load_event=function(e){e.dispatchEvent(new Event("load"))};var tr=e.parser.brython=function(n){if(e.$options=e.parse_options(n),e.isWebWorker||e.isNode){if(e.isNode)return}else Zt.brython_called||(Zt.brython_called=!0,Vt.disconnect(),new MutationObserver((function(e){for(var t of e)for(var r of t.addedNodes)Qt(r)})).observe(document.documentElement,{childList:!0,subtree:!0}));for(var a of zt)er(a);var o=[],s=(e.script_path=t.location.href.split("#")[0]).split("/");s.pop(),(e.isWebWorker||e.isNode)&&s.pop(),e.curdir=s.join("/");Object.keys(t);var i=e.get_page_option("ids");if(void 0!==i){if(!Array.isArray(i))throw r.ValueError.$factory("ids is not a list");for(var _ of(i.length,i)){var l=document.querySelector(`script[id="${_}"]`);if(!l)throw console.log(`no script with id '${_}'`),r.KeyError.$factory(`no script with id '${_}'`);er(l),o.push(l)}}else e.isWebWorker||(o=zt.slice());ar(o)};function rr(e,t){if("debug"==e){if("string"==typeof t&&t.match(/^\d+$/))return parseInt(t);null!=t&&console.debug(`Invalid value for debug: ${t}`)}else if("cache"==e||"indexeddb"==e||"static_stdlib_import"==e){if("1"==t||"true"==t.toLowerCase())return!0;if("0"==t||"false"==t.toLowerCase())return!1;console.debug(`Invalid value for ${e}: ${t}`)}else if(("ids"==e||"pythonpath"==e||"args"==e)&&"string"==typeof t)return 0==t.trim().length?[]:t.trim().split(/\s+/);return t}const nr={args:[],cache:!1,debug:1,indexeddb:!0,python_extension:".py",static_stdlib_import:!0};function ar(t){var r,n,a,o=t.filter((e=>"webworker"===e.className)),s=t.filter((e=>"webworker"!==e.className));for(var i of((s.length>0||e.isWebWorker)&&e.get_page_option("indexedDB")&&e.has_indexedDB&&e.hasOwnProperty("VFS")&&e.tasks.push([e.idb_open]),o))if(i.src)e.tasks.push([e.ajax_load_script,{script:i,name:i.id,url:i.src,is_ww:!0}]);else{var _=i.innerText||i.textContent;_=(_=Mt(_)).replace(/^\n/,""),e.webworkers[i.id]=i,n=e.script_filename=e.script_path+"#"+i.id,e.url2name[n]=i.id,e.file_cache[n]=_,e.scripts[n]=i,e.dispatch_load_event(i)}for(var l of s)r=Ht.get(l),l.src?e.tasks.push([e.ajax_load_script,{script:l,name:r,url:l.src,id:l.id}]):((a=(a=Mt(a=l.innerHTML||l.textContent)).replace(/^\n/,"")).endsWith("\n")&&(a=a.substr(0,a.length-1)),n=e.script_filename=e.script_path+"#"+r,e.file_cache[n]=a,e.url2name[n]=r,e.scripts[n]=l,e.tasks.push([e.run_script,l,a,r,n,!0]));e.loop()}e.get_filename=function(){if(e.count_frames()>0)return e.get_frame_at(0).__file__},e.get_filename_for_import=function(){var t=e.get_filename();return void 0===e.import_info[t]&&e.make_import_paths(t),t},e.get_page_option=function(t){return e.$options.hasOwnProperty(t)?e.$options[t]:Gt.hasOwnProperty(t.toLowerCase())?Gt[t.toLowerCase()]:nr[t]},e.get_option=function(t,r){var n=e.script_filename;return n=r&&r.$frame_obj?e.get_frame_at(0,r.$frame_obj).__file__:e.get_filename(),e.get_option_from_filename(t,n)},e.get_option_from_filename=function(t,r){if(!r||!e.scripts[r])return e.get_page_option(t);var n=e.scripts[r].getAttribute(t);return null!==n?rr(t,n):e.get_page_option(t)},e.run_script=function(t,n,a,o,s){var i,_,l=o.split("/");l.pop(),e.script_dir=l.join("/"),e.file_cache[o]=n,e.url2name[o]=a,e.scripts[o]=t,e.make_import_paths(o),r.__debug__=e.get_option("debug")>0;try{_=(i=e.py2js({src:n,filename:o},a,a)).to_js(),e.get_option_from_filename("debug",o)>1&&console.log(e.format_indent(_,0))}catch(err){return e.handle_error(e.exception(err))}var c={__doc__:$t(i._ast),js:_,__name__:a,__file__:o,script_element:t};e.tasks.push(["execute",c]),s&&e.loop()},e.$operators=n,e.$Node=O,e.brython=tr}(__BRYTHON__),globalThis.brython=__BRYTHON__.brython,__BRYTHON__.isNode&&(global.__BRYTHON__=__BRYTHON__,module.exports={__BRYTHON__:__BRYTHON__}),function(e){var t=e.builtins;function r(t){var a=e.idb_cx.result.transaction("modules","readonly");try{a.objectStore("modules").get(t).onsuccess=function(a){!function(t,a){var s=t.target.result,i=e.get_page_option("debug");if(void 0===s||s.timestamp!=e.timestamp||e.VFS[a]&&s.source_ts!==e.VFS[a].timestamp){if(void 0!==e.VFS[a]){var _=e.VFS[a],l=_[0],c=_[1];if(".py"==l){var u;if(4==_.length)u=a;else{var f=a.split(".");f.pop(),u=f.join(".")}e.imported[a]=e.module.$factory(a,"",u),e.url2name[a]=a;try{e.py2js({src:c,filename:a},a,a)}catch(err){e.handle_error(err)}delete e.imported[a],i>1&&console.log("precompile",a)}else console.log("bizarre",a,l)}}else if(s.is_package?e.precompiled[a]=[s.content]:e.precompiled[a]=s.content,s.imports.length>0){i>1&&console.log(a,"imports",s.imports);for(var p=s.imports.split(","),h=0;h<p.length;h++){var d=p[h];if(d.startsWith(".")){for(var m=a.split("."),g=0;d.startsWith(".");)g++,d=d.substr(1);let e=m.slice(0,g);d&&(e=e.concat([d])),d=e.join(".")}if(!e.imported.hasOwnProperty(d)&&!e.precompiled.hasOwnProperty(d)&&e.VFS.hasOwnProperty(d)){let t=e.VFS[d],a=(t[0],t[1]);".py"==t[0]?e.tasks.splice(0,0,[r,d]):n(d,a)}}}o()}(a,t)}}catch(err){console.info("error",err)}}function n(t,r){r+="\nvar $locals_"+t.replace(/\./g,"_")+" = $module",e.precompiled[t]=r}function a(t){e.isWebWorker||document.dispatchEvent(new CustomEvent("precompile",{detail:"remove outdated "+t+" from cache"}))}e.VFS_timestamp&&e.VFS_timestamp>e.timestamp&&(e.timestamp=e.VFS_timestamp),e.idb_open_promise=function(){return new Promise((function(t,r){e.idb_name="brython-cache";var n=e.idb_cx=indexedDB.open(e.idb_name);n.onsuccess=function(){var a=n.result;if(a.objectStoreNames.contains("modules")){var o,s=a.transaction("modules","readwrite").objectStore("modules"),i=[],_=s.openCursor();_.onerror=function(){r("open cursor error")},_.onsuccess=function(r){var n=r.target.result;n?((o=n.value).timestamp==e.timestamp?e.VFS&&e.VFS[o.name]&&e.VFS[o.name].timestamp!=o.source_ts?i.push(o.name):o.is_package?e.precompiled[o.name]=[o.content]:e.precompiled[o.name]=o.content:i.push(o.name),n.continue()):(e.outdated=i,t())}}else{var l=a.version;a.close(),(n=indexedDB.open(e.idb_name,l+1)).onupgradeneeded=function(){e.idb_cx.result.createObjectStore("modules",{keyPath:"name"}).onsuccess=t},n.onsuccess=function(){n.result.createObjectStore("modules",{keyPath:"name"}).onsuccess=t}}},n.onupgradeneeded=function(){n.result.createObjectStore("modules",{keyPath:"name"}).onsuccess=t},n.onerror=function(){e.idb_cx=null,e.idb_name=null,e.$options.indexedDB=!1,r("could not open indexedDB database")}}))},e.idb_open=function(){e.idb_name="brython-cache";var t=e.idb_cx=indexedDB.open(e.idb_name);t.onsuccess=function(){var r=t.result;if(r.objectStoreNames.contains("modules")){e.get_page_option("debug")>1&&console.info("using indexedDB for stdlib modules cache");var n,a=r.transaction("modules","readwrite").objectStore("modules"),s=[],i=a.openCursor();i.onerror=function(e){console.log("open cursor error",e)},i.onsuccess=function(t){var r=t.target.result;r?((n=r.value).timestamp==e.timestamp?e.VFS&&e.VFS[n.name]&&e.VFS[n.name].timestamp!=n.source_ts?s.push(n.name):(n.is_package?e.precompiled[n.name]=[n.content]:e.precompiled[n.name]=n.content,e.get_page_option("debug")>1&&console.info("load from cache",n.name)):s.push(n.name),r.continue()):(e.get_page_option("debug")>1&&console.log("done"),e.outdated=s,o())}}else{var _=r.version;r.close(),console.info("create object store",_),(t=indexedDB.open(e.idb_name,_+1)).onupgradeneeded=function(){console.info("upgrade needed"),e.idb_cx.result.createObjectStore("modules",{keyPath:"name"}).onsuccess=o},t.onversionchanged=function(){console.log("version changed")},t.onsuccess=function(){console.info("db opened",t),t.result.createObjectStore("modules",{keyPath:"name"}).onsuccess=o}}},t.onupgradeneeded=function(){console.info("upgrade needed"),t.result.createObjectStore("modules",{keyPath:"name"}).onsuccess=o},t.onerror=function(){console.info("could not open indexedDB database"),e.idb_cx=null,e.idb_name=null,e.$options.indexedDB=!1,o()}},e.ajax_load_script=function(r){var n=r.script,a=r.url,s=r.name,i=a.substr(e.script_dir.length+1);if(e.files&&e.files.hasOwnProperty(i)){var _=atob(e.files[i].content);e.tasks.splice(0,0,[e.run_script,n,_,s,a,!0]),o()}else{if("file"==e.protocol)throw t.IOError.$factory("can't load external script at "+n.url+" (Ajax calls not supported with protocol file:///)");e.script_filename=a,e.scripts[a]=n;var l=new XMLHttpRequest,c=e.get_option("cache")?"":(a.search(/\?/)>-1?"&":"?")+Date.now();l.open("GET",a+c,!0),l.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var t=this.responseText;r.is_ww?(e.webworkers[s]=n,e.file_cache[a]=t,e.dispatch_load_event(n)):e.tasks.splice(0,0,[e.run_script,n,t,s,a,!0]),o()}else if(404==this.status)throw Error(a+" not found")},l.send()}},e.inImported=function(t){if(e.imported.hasOwnProperty(t));else if(__BRYTHON__.VFS&&__BRYTHON__.VFS.hasOwnProperty(t)){var a=__BRYTHON__.VFS[t];void 0===a&&console.log("bizarre",t);var s=a[0],i=a[1];".py"==s?e.idb_cx&&!e.idb_cx.$closed&&e.tasks.splice(0,0,[r,t]):n(t,i)}else console.log("bizarre",t);o()};var o=e.loop=function(){if(0!=e.tasks.length){var r=e.tasks.shift(),n=r[0],s=r.slice(1);if("execute"==n){try{var i=r[1],_=i.__name__.replace(/\./g,"_");(d=e.module.$factory(i.__name__)).__file__=i.__file__,d.__doc__=i.__doc__,e.imported[_]=d;d=new Function(i.js+"\nreturn locals")();for(var l in d)l.startsWith("$")||(e.imported[_][l]=d[l]);e.dispatch_load_event(i.script_element)}catch(err){if(void 0===err.__class__)if(err.$py_exc)err=err.$py_exc;else{e.freeze(err);var c=err.$stack,u=err.$frame_obj,f=err.$linenums,p=err.lineNumber;void 0!==p&&(console.log("around line",p),console.log(i.js.split("\n").slice(p-4,p).join("\n"))),e.print_stack(),(err=t.RuntimeError.$factory(err+"")).$stack=c,err.$frame_obj=u,err.$linenums=f}e.handle_error(err)}o()}else try{n.apply(null,s)}catch(err){e.handle_error(err)}}else{if(e.idb_cx&&!e.idb_cx.$closed){for(var h=e.idb_cx.result.transaction("modules","readwrite").objectStore("modules");e.outdated.length>0;){var d=e.outdated.pop();h.delete(d).onsuccess=function(t){return function(r){e.get_page_option("debug")>1&&console.info("delete outdated",t),a(t)}}(d)}e.isWebWorker||document.dispatchEvent(new CustomEvent("precompile",{detail:"close"})),e.idb_cx.result.close(),e.idb_cx.$closed=!0}e.isWebWorker||document.dispatchEvent(new CustomEvent("brython_done",{detail:e.obj_dict(e.$options)}))}};e.tasks=[],e.has_indexedDB=void 0!==self.indexedDB}(__BRYTHON__),function(e){var t=e.builtins;globalThis,"undefined"!=typeof WorkerGlobalScope&&"function"==typeof importScripts&&(navigator,WorkerNavigator);function r(e,r){var n,a=1==r.length?"":"s";throw n=1==(r=r.map((e=>`'${e}'`))).length?r[0]:2==r.length?r[0]+" and "+r[1]:r.slice(0,r.length-1).join(", ")+", and "+r[r.length-1],t.TypeError.$factory(e+"() "+`missing ${r.length} required positional argument${a}: `+n)}function n(e,r){throw t.TypeError.$factory(e+"() "+`got multiple values for argument '${r}'`)}function a(e,r){return t.TypeError.$factory(e+"() got some positional-only arguments passed as keyword arguments:"+` '${r}'`)}function o(r,n,a,o,i,_,l){var c=_.length,u=e.last(_);if(u.$kw){if(!n){var f=e.parse_kwargs(u.$kw,r);for(var p in f)if(!l.hasOwnProperty(p))throw s(r,p)}c--}var h=i.length,d=a.length-o,m=1==d?"":"s";h&&(d=`from ${d-h} to ${d}`,m="s");var g=1==c?"was":"were";return t.TypeError.$factory(r+"() takes "+`${d} positional argument${m} but ${c} ${g} given`)}function s(e,r){return t.TypeError.$factory(e+`() got an unexpected keyword argument '${r}'`)}var i={};function _(t,r){var n=t.$infos.arg_names,a=t.$infos.__code__,o={};for(var s of n)o[s]=i;return e.parse_args(r,t.$infos.__name__,a.co_argcount,o,n,t.$infos.__defaults__,t.$infos.__kwdefaults__,t.$infos.vararg,t.$infos.kwarg,a.co_posonlyargcount,a.co_kwonlyargcount)}e.args0_old=_,e.args0=function(t,r){const n=r[r.length-1],a=null!=n&&void 0!==n.$kw;let o=r.length,s=null;a&&(--o,s=n.$kw);const i={},l=t.$infos,c=l.__code__,u=l.arg_names,f=c.co_argcount,p=c.co_kwonlyargcount,h=l.vararg,d=l.kwarg,m=l.__defaults__,g=m.length,v=f-g,$=Math.min(o,f);let y=0;for(;y<$;++y)i[u[y]]=r[y];if(null!==h)i[h]=e.fast_tuple(Array.prototype.slice.call(r,f,o));else if(o>f)throw _(t,r),new Error("Too much positional arguments given (args0 should have raised an error) !");if(null===s){if(y<v)throw _(t,r),new Error("Not enough positional arguments given (args0 should have raised an error) !");for(let e=y-v;e<g;++e)i[u[y++]]=m[e];if(null!==d&&(i[d]=e.obj_dict({})),0===p)return i;const n=t.$kwdefaults_values,a=n.length;if(a<p)throw _(t,r),new Error("Named argument expected (args0 should have raised an error) !");for(let e=0;e<a;++e)i[u[y++]]=n[e];return i}const b=t.$kwdefaults,w=c.co_posonlyargcount;if(y<w){if(y<v)throw _(t,r),new Error("Not enough positional parameters given (args0 should have raised an error) !");const e=g-(f-w);for(let t=y-v;t<e;++t)i[u[y++]]=m[t]}if(null===d){let n=0,a=s[0];for(let e in a)i[e]=a[e],++n;for(let _=1,c=s.length;_<c;++_){a=s[_];for(let o of e.make_js_iterator(a.__class__.keys(a))){if("string"!=typeof o)throw e.args0_old(t,r),new Error("Non string key passed in **kargs");i[o]=e.$getitem(a,o),++n}}let o=0,l=y;for(;l<v;++l){if(!(u[l]in i))throw _(t,r),new Error("Missing a named arguments (args0 should have raised an error) !")}for(;l<f;++l){const e=u[l];e in i||(i[e]=m[l-v],++o)}for(;l<u.length;++l){const e=u[l];if(!(e in i)){if(!b.has(e))throw _(t,r),new Error("Missing a named arguments (args0 should have raised an error) !");i[e]=b.get(e),++o}}if(o+n!==u.length-y)throw _(t,r),new Error("Inexistant or duplicate named arguments (args0 should have raised an error) !");return i}const x={},k=t.$hasParams;let j=0,B=0,E=s[0];for(let e in E)k.has(e)?(i[e]=E[e],++j):(x[e]=E[e],++B);for(let _=1,T=s.length;_<T;++_){E=s[_];for(let n of e.make_js_iterator(E.__class__.keys(E))){if("string"!=typeof n)throw e.args0_old(t,r),new Error("Non string key passed in **kargs");k.has(n)?(i[n]=e.$getitem(E,n),++j):(x[n]=e.$getitem(E,n),++B)}}let N=0,S=y;for(;S<v;++S){if(!(u[S]in i))throw _(t,r),new Error("Missing a named arguments (args0 should have raised an error) !")}for(;S<f;++S){const e=u[S];e in i||(i[e]=m[S-v],++N)}for(;S<u.length;++S){const e=u[S];if(!(e in i)){if(!b.has(e))throw _(t,r),new Error("Missing a named arguments (args0 should have raised an error) !");i[e]=b.get(e),++N}}if(N+j!==u.length-y)throw _(t,r),new Error("Inexistant or duplicate named arguments (args0 should have raised an error) !");if(Object.keys(x).length!==B)throw _(t,r),new Error("Duplicate name given to **kargs parameter (args0 should have raised an error) !");return i[d]=__BRYTHON__.obj_dict(x),i},e.args=function(t,r,n,a,o,s,_,l,c){c=c||0;for(var u=a.length-r,f=[],p={$jsobj:{}},h=0,d=a.length;h<d;h++){var m=a[h];s.hasOwnProperty(m)&&(h<r?f.push(s[m]):p.$jsobj[m]=s[m])}for(var g in n)n[g]=i;return e.parse_args(o,t,r,n,a,f,p,_,l,c,u)},e.single_arg=function(t,r,n){var a={};return a[r]=null,e.args(t,1,a,[r],n,{},null,null)[r]},e.parse_args=function(_,l,c,u,f,p,h,d,m,g,v){for(var $,y=_.length,b=y,w=f.length,x=w-v,k={},j=p.length,B=[],E={},N=0;N<y;N++){var S=_[N];if(S&&S.__class__===e.generator&&(u.$has_generators=!0),S&&S.$kw)b--,$=e.parse_kwargs(S.$kw,l);else if(void 0!==(O=f[N]))if(N>=x){if(!d)throw o(l,m,f,v,p,_,u);B.push(S)}else N<g&&(k[O]=!0),u[O]=S;else{if(!d)throw o(l,m,f,v,p,_,u);B.push(S)}}for(var T=b;T<x;T++){var O=f[T];if($&&$.hasOwnProperty(O))if(T<g){if(!m)throw a(l,O)}else u[O]=$[O],$[O]=i;if(u[O]===i){var A=p[T-(x-j)];if(void 0===A)throw r(l,f.slice(T,x-j));u[O]=A,T<g&&$&&$.hasOwnProperty(O)&&m&&(E[O]=$[O],$[O]=i)}}var I=[];for(N=x;N<w;N++){O=f[N];if($&&$.hasOwnProperty(O))u[O]=$[O],$[O]=i;else{var C=t.dict.$get_string(h,O);C!==t.dict.$missing?u[O]=C:I.push(O)}}if(I.length>0)throw function(e,r){var n,a=1==r.length?"":"s";throw n=1==(r=r.map((e=>`'${e}'`))).length?r[0]:2==r.length?r[0]+" and "+r[1]:r.slice(0,r.length-1).join(", ")+", and "+r[r.length-1],t.TypeError.$factory(e+"() "+`missing ${r.length} required keyword-only argument${a}: `+n)}(l,I);if(!m)for(var M in $)if(!u.hasOwnProperty(M))throw s(l,M);for(var M in $)if($[M]!==i)if(u.hasOwnProperty(M))if(u[M]!==i){if(!k[M]||!m)throw n(l,M);E[M]=$[M]}else u[M]=$[M];else m&&(E[M]=$[M]);return m&&(u[m]=e.obj_dict(E)),d&&(u[d]=e.fast_tuple(B)),u},e.parse_kwargs=function(r,n){for(var a=r[0],o=1,s=r.length;o<s;o++){var i,_=r[o];if(_.__class__===t.dict)for(var l of t.dict.$iter_items_with_hash(_)){if("string"!=typeof(i=l.key))throw t.TypeError.$factory(n+"() keywords must be strings");if(void 0!==a[i])throw t.TypeError.$factory(n+"() got multiple values for argument '"+i+"'");a[i]=l.value}else{var c=e.get_class(_);try{var u=e.$call1(e.$getattr(c,"keys"))}catch(err){throw t.TypeError.$factory(`${n} argument after ** must be a mapping, not ${e.class_name(_)}`)}var f,p=e.make_js_iterator(u(_));for(var h of p){if("string"!=typeof h)throw t.TypeError.$factory(n+"() keywords must be strings");if(void 0!==a[h])throw t.TypeError.$factory(n+"() got multiple values for argument '"+h+"'");if(!f)try{f=e.$getattr(c,"__getitem__")}catch(err){throw t.TypeError.$factory(`'${e.class_name(_)}' object is not subscriptable`)}a[h]=f(_,h)}}}return a},e.check_nb_args=function(e,r,n){var a=n.length,o=n[a-1];if(o&&o.$kw){var s=o.$kw;s[1]&&0==t.len(s[1])&&a--}if(a!=r)throw 0==r?t.TypeError.$factory(e+"() takes no argument ("+a+" given)"):t.TypeError.$factory(e+"() takes exactly "+r+" argument"+(r<2?"":"s")+" ("+a+" given)")},e.check_no_kw=function(e,r,n){if(void 0===r&&console.log("x undef",e,r,n),r.$kw&&r.$kw[0]&&Object.keys(r.$kw[0]).length>0||void 0!==n&&n.$kw)throw t.TypeError.$factory(e+"() takes no keyword arguments")},e.check_nb_args_no_kw=function(e,r,n){var a=n.length,o=n[a-1];if(o&&o.$kw){if(2!=o.$kw.length||0!=Object.keys(o.$kw[0]).length)throw t.TypeError.$factory(e+"() takes no keyword arguments");a--}if(a!=r)throw 0==r?t.TypeError.$factory(e+"() takes no argument ("+a+" given)"):t.TypeError.$factory(e+"() takes exactly "+r+" argument"+(r<2?"":"s")+" ("+a+" given)")},e.get_class=function(r){if(null===r)return e.imported.javascript.NullType;if(void 0===r)return e.imported.javascript.UndefinedType;var n=r.__class__||r.$tp_class;if(void 0===n)switch(typeof r){case"number":if(Number.isInteger(r))return t.int;break;case"string":return t.str;case"boolean":return t.bool;case"function":return r.$is_js_func?e.JSObj:e.function;case"object":if(Array.isArray(r)){if(r.$is_js_array)return e.js_array;if(Object.getPrototypeOf(r)===Array.prototype)return r.__class__=t.list,t.list}else{if(r instanceof e.str_dict)return t.dict;if("undefined"!=typeof Node&&r instanceof Node)return r.tagName&&e.imported["browser.html"][r.tagName]||e.DOMNode}}return void 0===n?e.get_jsobj_class(r):n},e.class_name=function(t){var r=e.get_class(t);return r===e.JSObj?"Javascript "+t.constructor.name:r.__name__},e.make_js_iterator=function(r,n,a){var o=e.set_lineno;if(void 0===n)if(null===e.frame_obj)function o(){}else n=e.frame_obj.frame,a=n.$lineno;if(r.__class__===t.range){var s={ix:r.start};return r.step>0?{[Symbol.iterator](){return this},next(){if(o(n,a),s.ix>=r.stop)return{done:!0,value:null};var e=s.ix;return s.ix+=r.step,{done:!1,value:e}}}:{[Symbol.iterator](){return this},next(){if(o(n,a),s.ix<=r.stop)return{done:!0,value:null};var e=s.ix;return s.ix+=r.step,{done:!1,value:e}}}}if(r[Symbol.iterator]&&!r.$is_js_array){var i=r[Symbol.iterator]();return{[Symbol.iterator](){return this},next:()=>(o(n,a),i.next())}}var _=e.$call(e.$getattr(t.iter(r),"__next__"));return{[Symbol.iterator](){return this},next(){o(n,a);try{return{done:!1,value:_()}}catch(err){if(e.is_exc(err,[t.StopIteration]))return{done:!0,value:null};throw err}}}},e.unpacker=function(r,n,a){var o,s=3;if(a){var i=arguments[3];s++}e.pep657&&(o=e.decode_position(arguments[s]));var _=t.list.$factory(r),l=_.length,c=n+(a?i-1:0);if(l<c){var u=t.ValueError.$factory(`not enough values to unpack (expected ${c}, got ${l})`);throw o&&e.set_exception_offsets(u,o),u}if(!a&&l>c){u=t.ValueError.$factory(`too many values to unpack (expected ${c})`);throw o&&e.set_exception_offsets(u,o),u}return _.index=-1,_.read_one=function(){return _.index++,_[_.index]},_.read_rest=function(){_.index++;var e=_.slice(_.index,_.length-i);return _.index=_.length-i-1,e},_},e.set_lineno=function(r,n){return r.$lineno=n,r.$f_trace!==t.None&&e.trace_line(),!0},e.get_method_class=function(t,r,n,a){var o=r;if(t.$infos&&t.$infos.$class)return t.$infos.$class;for(var s of a){if(void 0===o[s])return e.make_class(n);o=o[s]}return o},e.$JS2Py=function(e){return"number"==typeof e?e%1==0?e:t.float.$factory(e):null==e?t.None:(Array.isArray(e)&&Object.getPrototypeOf(e)===Array.prototype&&(e.$brython_class="js"),e)},e.warn=function(r,n,a,o){var s=r.$factory(n);s.filename=a,r===t.SyntaxWarning&&(s.lineno=o.start[0],s.offset=o.start[1],s.end_lineno=o.end[0],s.end_offset=o.end[1],s.text=o.line,s.args[1]=e.fast_tuple([a,s.lineno,s.offset,s.text,s.end_lineno,s.end_offset])),e.imported._warnings.warn(s)},e.$getitem=function(r,n,a){var o=Array.isArray(r)&&r.__class__===t.list,s=r.__class__===t.dict&&!r.$jsobj;if("number"==typeof n){if(o||"string"==typeof r){if(void 0!==r[n=n>=0?n:r.length+n])return r[n];!function(e){var r="string"==typeof e?"string":"list";throw t.IndexError.$factory(r+" index out of range")}(r)}}else if(n.valueOf&&"string"==typeof n.valueOf()&&s)return t.dict.$getitem(r,n);if(r.$is_class){var i=e.$getattr(r,"__class_getitem__",t.None);if(i!==t.None)return e.$call(i)(n);if(r.__class__){if((i=e.$getattr(r.__class__,"__getitem__",t.None))!==t.None)return i(r,n);throw t.TypeError.$factory("'"+e.class_name(r.__class__)+"' object is not subscriptable")}}if(o)return t.list.$getitem(r,n);if(s)return t.dict.$getitem(r,n);var _=e.$getattr(r.__class__||e.get_class(r),"__getitem__",t.None);if(_!==t.None)return _(r,n);var l=t.TypeError.$factory("'"+e.class_name(r)+"' object is not subscriptable");throw a&&e.set_exception_offsets(l,e.decode_position(a)),l},e.getitem_slice=function(r,n){var a;return Array.isArray(r)&&r.__class__===t.list?(n.start===t.None&&n.stop===t.None?n.step===t.None||1==n.step?a=r.slice():-1==n.step&&(a=r.slice().reverse()):n.step===t.None&&(n.start===t.None&&(n.start=0),n.stop===t.None&&(n.stop=r.length),"number"==typeof n.start&&"number"==typeof n.stop&&(n.start<0&&(n.start+=r.length),n.stop<0&&(n.stop+=r.length),a=r.slice(n.start,n.stop))),a?(a.__class__=r.__class__,a.__brython__=!0,a):t.list.$getitem(r,n)):"string"==typeof r?t.str.__getitem__(r,n):e.$getattr(e.get_class(r),"__getitem__")(r,n)},e.$getattr_pep657=function(t,r,n){try{return e.$getattr(t,r)}catch(err){throw e.set_exception_offsets(err,e.decode_position(n)),err}},e.set_list_slice=function(r,n,a,o){null===n?n=0:(n=e.$GetInt(n))<0&&(n=Math.max(0,n+r.length)),null===a&&(a=r.length),(a=e.$GetInt(a))<0&&(a=Math.max(0,a+r.length));var s=t.list.$factory(o);r.splice.apply(r,[n,a-n].concat(s))},e.set_list_slice_step=function(r,n,a,o,s){if(null===o||1==o)return e.set_list_slice(r,n,a,s);if(0==o)throw t.ValueError.$factory("slice step cannot be zero");o=e.$GetInt(o),n=null===n?o>0?0:r.length-1:e.$GetInt(n),a=null===a?o>0?r.length:-1:e.$GetInt(a);var i,_=t.list.$factory(s),l=0,c=0;i=o>0?function(e){return e<a}:function(e){return e>a};for(var u=n;i(u);u+=o)c++;if(c!=_.length)throw t.ValueError.$factory("attempt to assign sequence of size "+_.length+" to extended slice of size "+c);for(u=n;i(u);u+=o)r[u]=_[l],l++},e.$setitem=function(r,n,a){if(!Array.isArray(r)||void 0!==r.__class__||r.$is_js_array||"number"!=typeof n||e.$isinstance(r,t.tuple)){if(r.__class__!==t.dict){if(r.__class__===t.list)return t.list.$setitem(r,n,a);var o=e.$getattr(r.__class__||e.get_class(r),"__setitem__",null);if(null===o||"function"!=typeof o)throw t.TypeError.$factory("'"+e.class_name(r)+"' object does not support item assignment");return o(r,n,a)}t.dict.$setitem(r,n,a)}else{if(n<0&&(n+=r.length),void 0===r[n])throw t.IndexError.$factory("list assignment index out of range");r[n]=a}},e.$delitem=function(r,n){if(!Array.isArray(r)||r.__class__!==t.list||"number"!=typeof n||e.$isinstance(r,t.tuple)){if(r.__class__!==t.dict){if(r.__class__===t.list)return t.list.__delitem__(r,n);var a=e.$getattr(r.__class__||e.get_class(r),"__delitem__",null);if(null===a)throw t.TypeError.$factory("'"+e.class_name(r)+"' object doesn't support item deletion");return a(r,n)}t.dict.__delitem__(r,n)}else{if(n<0&&(n+=r.length),void 0===r[n])throw t.IndexError.$factory("list deletion index out of range");r.splice(n,1)}},e.augm_assign=function(r,n,a){var o,s,i,_,l,c,u=(s=a,"number"==typeof(o=r)?(l=o,"number"==typeof s?(i=!0,c=s):s.__class__===t.float&&(_=!0,c=s.value)):o.__class__===t.float&&(l=o.value,"number"==typeof s?(c=s,_=!0):s.__class__===t.float&&(_=!0,c=s.value)),{is_int:i,is_float:_,x:l,y:c});if(u.is_int||u.is_float){var f;switch(n){case"+=":f=u.x+u.y;break;case"-=":f=u.x-u.y;break;case"*=":f=u.x*u.y;break;case"/=":f=u.x/u.y}if(f){if(u.is_int&&Number.isSafeInteger(f))return f;if(u.res_is_float)return e.fast_float(f)}}else if("*="==n){if("number"==typeof r&&"string"==typeof a)return r<=0?"":a.repeat(r);if("string"==typeof r&&"number"==typeof a)return a<=0?"":r.repeat(a)}else if("+="==n&&"string"==typeof r&&"string"==typeof a)return r+a;var p=n.substr(0,n.length-1),h=e.op2method.augmented_assigns[n],d=e.$getattr(r,"__"+h+"__",null);if(null!==d){var m=e.$call(d)(a);if(m===t.NotImplemented)throw t.TypeError.$factory(`unsupported operand type(s) for ${n}: '${e.class_name(r)}' and '${e.class_name(a)}'`);return m}var g=e.op2method.operations[p];return void 0===g&&(g=e.op2method.binary[p]),e.rich_op(`__${g}__`,r,a)},e.$is=function(r,n){return!(void 0!==r&&r!==e.Undefined||void 0!==n&&n!==e.Undefined)||(null===r?null===n:null===n?null===r:r.__class__===t.float&&n.__class__===t.float?!(!isNaN(r.value)||!isNaN(n.value))||r.value==n.value:r===t.int&&n==e.long_int||r===e.long_int&&n===t.int||r===n)},e.is_or_equals=function(t,r){return e.$is(t,r)||e.rich_comp("__eq__",t,r)},e.member_func=function(r){var n=e.get_class(r),a=e.$getattr(n,"__contains__",null);if(null!==a)return(a=e.$call(a)).bind(null,r);try{var o=e.make_js_iterator(r);return function(t){try{for(var r of o)if(e.is_or_equals(t,r))return!0;return!1}catch(err){return!1}}}catch(err){var s=e.$getattr(n,"__getitem__",null);if(null!==s)return function(n){for(var o=-1;;){o++;try{var i=s(r,o);if(e.is_or_equals(n,i))return!0}catch(a){if(e.$is_exc(a,[t.StopIteration]))return!1;throw a}}};throw t.TypeError.$factory(`argument of type '${e.class_name(r)}' is not iterable`)}},e.$is_member=function(t,r){return e.member_func(r)(t)},e.$call=function(t,r){return t=e.$call1(t),r?function(){try{return t.apply(null,arguments)}catch(n){throw r=e.decode_position(r),e.set_exception_offsets(n,r),n}}:t},e.$call1=function(r){if(r.__class__===e.method)return r;if(r.$factory)return r.$factory;if(r.$is_class)return r.$factory=e.$instance_creator(r);if(r.$is_js_class)return r.$factory=function(){return new r(...arguments)};if(r.$in_js_module)return function(){var e=r(...arguments);return void 0===e?t.None:e};if(r.$is_func||"function"==typeof r)return r.$infos&&r.$infos.__code__&&32&r.$infos.__code__.co_flags&&(e.frame_obj.frame.$has_generators=!0),r;try{return e.$getattr(r,"__call__")}catch(err){throw t.TypeError.$factory("'"+e.class_name(r)+"' object is not callable")}};var l=["add","sub","mul","truediv","floordiv","mod","pow","lshift","rshift","and","xor","or"];e.make_rmethods=function(e){for(var t of l)void 0===e["__r"+t+"__"]&&e["__"+t+"__"]&&(e["__r"+t+"__"]=function(t){return function(r,n){return e["__"+t+"__"](n,r)}}(t))},e.UUID=function(){return e.$py_UUID++},e.$GetInt=function(r){if("number"==typeof r||r.constructor===Number)return r;if("boolean"==typeof r)return r?1:0;if(e.$isinstance(r,t.int))return r;if(e.$isinstance(r,t.float))return r.valueOf();if(!r.$is_class){try{return e.$getattr(r,"__int__")()}catch(n){}try{return e.$getattr(r,"__index__")()}catch(n){}}throw t.TypeError.$factory("'"+e.class_name(r)+"' object cannot be interpreted as an integer")},e.to_num=function(r,n){for(var a={__complex__:t.complex,__float__:t.float,__index__:t.int,__int__:t.int},o=r.__class__||e.get_class(r),s=0;s<n.length;s++){var i={},_=e.$getattr(o,n[s],i);if(_!==i){var l=_(r);if(!e.$isinstance(l,a[n[s]]))throw t.TypeError.$factory(n[s]+"returned non-"+a[n[s]].__name__+"(type "+e.get_class(l)+")");return{result:l,method:n[s]}}}return null},e.PyNumber_Index=function(r){switch(typeof r){case"boolean":return r?1:0;case"number":return r;case"object":if(r.__class__===e.long_int)return r;if(e.$isinstance(r,t.int))return r.$brython_value;var n=e.$getattr(r,"__index__",t.None);if(n!==t.None)return n="function"==typeof n?n:e.$getattr(n,"__call__"),e.int_or_bool(n());throw t.TypeError.$factory("'"+e.class_name(r)+"' object cannot be interpreted as an integer");default:throw t.TypeError.$factory("'"+e.class_name(r)+"' object cannot be interpreted as an integer")}},e.int_or_bool=function(r){switch(typeof r){case"boolean":return r?1:0;case"number":return r;case"object":if(r.__class__===e.long_int)return r;throw t.TypeError.$factory("'"+e.class_name(r)+"' object cannot be interpreted as an integer");default:throw t.TypeError.$factory("'"+e.class_name(r)+"' object cannot be interpreted as an integer")}},e.enter_frame=function(r){if(null!==e.frame_obj&&e.frame_obj.count>1e3){var n=t.RecursionError.$factory("maximum recursion depth exceeded");throw e.set_exc(n,r),n}if(r.__class__=e.frame,e.frame_obj=e.push_frame(r),e.tracefunc&&e.tracefunc!==t.None){if(r[4]===e.tracefunc||e.tracefunc.$infos&&r[4]&&r[4]===e.tracefunc.$infos.__func__)return e.tracefunc.$frame_id=r[0],t.None;for(var a=e.frame_obj;null!==a;){if(a.frame[0]==e.tracefunc.$frame_id)return t.None;a=a.prev}try{var o=e.tracefunc(r,"call",t.None);for(a=e.frame_obj;null!==a;){if(a.frame[4]==o)return t.None;a=a.prev}return o}catch(err){throw e.set_exc(err,r),e.frame_obj=e.frame_obj.prev,err.$in_trace_func=!0,err}}else e.tracefunc=t.None;return t.None},e.trace_exception=function(){var r=e.frame_obj.frame;if(r[0]==e.tracefunc.$current_frame_id)return t.None;var n=r.$f_trace,a=r[1].$current_exception;return n(r,"exception",e.fast_tuple([a.__class__,a,e.traceback.$factory(a)]))},e.trace_line=function(){var r=e.frame_obj.frame;if(r[0]==e.tracefunc.$current_frame_id)return t.None;var n=r.$f_trace;return void 0===n&&console.log("trace line, frame",r),n(r,"line",t.None)},e.trace_return=function(r){var n=e.frame_obj.frame,a=n.$f_trace;if(n[0]==e.tracefunc.$current_frame_id)return t.None;a(n,"return",r)},e.leave_frame=function(r){if(null!==e.frame_obj){r&&void 0!==r.value&&e.tracefunc&&(void 0===e.frame_obj.frame.$f_trace&&(e.frame_obj.frame.$f_trace=e.tracefunc),e.frame_obj.frame.$f_trace!==t.None&&e.trace_return(r.value));var n=e.frame_obj.frame;if(e.frame_obj=e.frame_obj.prev,n.$has_generators)for(var a in n[1])if(n[1][a]&&n[1][a].__class__===e.generator){var o=n[1][a];if(void 0===o.$frame)continue;var s=o.$frame[1].$context_managers;if(s)for(var i of s)e.$call(e.$getattr(i,"__exit__"))(t.None,t.None,t.None)}return delete n[1].$current_exception,t.None}},e.push_frame=function(t){var r=null===e.frame_obj?0:e.frame_obj.count;return{prev:e.frame_obj,frame:t,count:r+1}},e.count_frames=function(t){return null==(t=t||e.frame_obj)?0:t.count},e.get_frame_at=function(t,r){r=r||e.frame_obj;for(var n=e.count_frames()-t-1,a=0;a<n&&null!==r.prev;a++)r=r.prev;return r.frame},e.floordiv=function(t,r){var n=t/r;return Number.isSafeInteger(t)&&Number.isSafeInteger(r)&&Number.isSafeInteger(n)?Math.floor(n):e.long_int.__floordiv__(e.long_int.$factory(t),e.long_int.$factory(r))};var c={__lt__:"__gt__",__le__:"__ge__",__gt__:"__lt__",__ge__:"__le__"},u={__lt__:"<",__le__:"<=",__gt__:">",__ge__:">="};e.rich_comp=function(r,n,a){if(void 0===n)throw t.RuntimeError.$factory("error in rich comp");var o,s=null!==n&&n.valueOf?n.valueOf():n,i=null!==a&&a.valueOf?a.valueOf():a;if("number"==typeof s&&"number"==typeof i&&void 0===n.__class__&&void 0===a.__class__)switch(r){case"__eq__":return s==i;case"__ne__":return s!=i;case"__le__":return s<=i;case"__lt__":return s<i;case"__ge__":return s>=i;case"__gt__":return s>i}if(null!==n&&(n.$is_class||n.$factory)){if("__eq__"==r)return n===a;if("__ne__"==r)return!(n===a);throw t.TypeError.$factory("'"+u[r]+"' not supported between instances of '"+e.class_name(n)+"' and '"+e.class_name(a)+"'")}var _,l=e.$call(e.$getattr(e.get_class(n),r)),f=c[r]||r;if(null!==n&&n.__class__&&null!==a&&a.__class__&&a.__class__.__mro__.indexOf(n.__class__)>-1&&(_=e.$getattr(a,f),(o=e.$call(_)(n))!==t.NotImplemented))return o;if((o=l(n,a))!==t.NotImplemented)return o;if(void 0===_&&(o=(_=e.$call(e.$getattr(e.get_class(a),f)))(a,n))!==t.NotImplemented)return o;if("__eq__"==r)return t.False;if("__ne__"==r)return t.True;throw t.TypeError.$factory("'"+u[r]+"' not supported between instances of '"+e.class_name(n)+"' and '"+e.class_name(a)+"'")};var f={__sub__:"-",__xor__:"^",__mul__:"*"};e.rich_op=function(t,r,n,a){try{return e.rich_op1(t,r,n)}catch(o){throw a&&e.set_exception_offsets(o,e.decode_position(a)),o}},e.rich_op1=function(r,n,a){var o,s,i,_;if("number"==typeof n?(i=n,"number"==typeof a?(o=!0,_=a):a.__class__===t.float&&(s=!0,_=a.value)):n.__class__===t.float&&(i=n.value,"number"==typeof a?(_=a,s=!0):a.__class__===t.float&&(s=!0,_=a.value)),o||s){var l;switch(r){case"__add__":l=i+_;break;case"__sub__":l=i-_;break;case"__mul__":l=i*_;break;case"__pow__":if(o&&_>=0)return t.int.$int_or_long(BigInt(i)**BigInt(_));break;case"__truediv__":if(0==_)throw t.ZeroDivisionError.$factory("division by zero");return l=i/_,{__class__:t.float,value:l}}if(l){if(o&&Number.isSafeInteger(l))return l;if(s)return{__class__:t.float,value:l}}}else if("string"==typeof n&&"string"==typeof a&&"__add__"==r)return n+a;var c,u=n.__class__||e.get_class(n),p=a.__class__||e.get_class(a),h="__r"+r.substr(2);if(u===p){if(u===t.int)return t.int[r](n,a);if(u===t.bool)return(t.bool[r]||t.int[r])(n,a);try{v=e.$call(e.$getattr(u,r))}catch(err){if(err.__class__===t.AttributeError){var d=e.class_name(n);throw t.TypeError.$factory("unsupported operand type(s) for "+f[r]+": '"+d+"' and '"+d+"'")}throw err}return v(n,a)}if(t.issubclass(p,u)){var m=e.$getattr(u,h,!1),g=e.$getattr(p,h,!1);if(g&&m&&g!==m)return g(a,n)}try{e.$getattr(n,r);v=e.$getattr(u,r)}catch(err){if(err.__class__!==t.AttributeError)throw err;if((c=e.$call(e.$getattr(a,h))(n))!==t.NotImplemented)return c;throw t.TypeError.$factory(`unsupported operand type(s) for ${e.method_to_op[r]}: '${e.class_name(n)}' and '${e.class_name(a)}'`)}if("__add__"!=r&&"__mul__"!=r||!Array.isArray(n)&&"string"!=typeof n&&!e.$isinstance(n,[t.str,t.bytes,t.bytearray,t.memoryview]))c=v(n,a);else try{c=v(n,a)}catch(err){c=t.NotImplemented}if(c===t.NotImplemented){try{e.$getattr(a,h);var v=e.$getattr(p,h)}catch(err){if(err.__class__!==t.AttributeError)throw err;throw t.TypeError.$factory(`unsupported operand type(s) for ${e.method_to_op[r]}: '${e.class_name(n)}' and '${e.class_name(a)}'`)}if((c=v(a,n))===t.NotImplemented)throw t.TypeError.$factory(`unsupported operand type(s) for ${e.method_to_op[r]}: '${e.class_name(n)}' and '${e.class_name(a)}'`);return c}return c},e.is_none=function(e){return null==e||e==t.None};var p=new Set;e.repr={enter:function(r){var n=t.id(r);if(p.has(n))return!0;if(p.add(n),p.size>e.recursion_limit)throw p.clear(),t.RecursionError.$factory("maximum recursion depth exceeded while getting the repr of an object")},leave:function(e){p.delete(t.id(e))}}}(__BRYTHON__),__BRYTHON__.builtins.object=function(e){var t=e.builtins,r={__name__:"object",__qualname__:"object",$is_class:!0,$native:!0};return r.__delattr__=function(r,n){if(r.__dict__&&e.$isinstance(r.__dict__,t.dict)&&t.dict.$contains_string(r.__dict__,n))return t.dict.$delete_string(r.__dict__,n),t.None;if(void 0===r.__dict__&&void 0!==r[n])return delete r[n],t.None;var a=r.__class__;if(a){var o=e.$getattr(a,n);if(o.__class__===t.property&&void 0!==o.__delete__)return o.__delete__(r),t.None}throw e.attr_error(n,r)},r.__dir__=function(r){var n;if(r.$is_class)n=[r].concat(r.__mro__);else{var a=r.__class__||e.get_class(r);n=[r,a].concat(a.__mro__)}for(var o=[],s=0,i=n.length;s<i;s++)for(var _ in n[s])"$"!=_.charAt(0)?isNaN(parseInt(_.charAt(0)))&&"__mro__"!=_&&o.push(_):"$"==_.charAt(1)&&o.push(_.substr(2));if(r.__dict__)for(var _ of e.make_js_iterator(r.__dict__))"$"!=_.charAt(0)&&o.push(_);return o=t.list.$factory(t.set.$factory(o)),t.list.sort(o),o},r.__eq__=function(e,r){return e===r||t.NotImplemented},r.__format__=function(){var r=e.args("__format__",2,{self:null,spec:null},["self","spec"],arguments,{},null,null);if(""!==r.spec)throw t.TypeError.$factory("non-empty format string passed to object.__format__");return t.getattr(r.self,"__str__")()},r.__ge__=function(){return t.NotImplemented},e.nb_from_dict=0,r.__getattribute__=function(r,n){var a=r.__class__||e.get_class(r),o=!1,s=!1;if("__class__"===n)return a;if(r.$is_class&&"__bases__"==n)throw e.attr_error(n,r);var i=r[n];if(Array.isArray(r)&&void 0!==Array.prototype[n]&&(i=void 0),void 0===i&&r.__dict__){var _=r.__dict__;if(_.__class__===e.getset_descriptor)return _.cls[n];var l=t.dict.$get_string(_,n);if(l!==t.dict.$missing)return l}if(void 0===i){function c(e,t,r){var n=t[r];if(void 0!==n)return n}if(void 0===(i=c(0,a,n))){for(var u=a.__mro__,f=0,p=u.length;f<p;f++)if(void 0!==(i=c(0,u[f],n))){s;break}}else i.__class__!==e.method&&void 0===i.__get__&&(o=!0)}else if(void 0===i.__set__)return i;if(void 0!==i){if(i.__class__&&t.issubclass(i.__class__,t.property))return e.$getattr(i,"__get__")(r,a);if(i.__class__===t.classmethod)return t.classmethod.__get__(i,r,a);if(i.__class__===e.method)return i.$infos.__self__?i:i.__get__(r,a);if(void 0===(h=i.__get__)&&i.__class__){var h=i.__class__.__get__;for(f=0;f<i.__class__.__mro__.length&&void 0===h;f++)h=i.__class__.__mro__[f].__get__}s;var d=void 0===h?null:e.$getattr(i,"__get__",null);if(null!==d){s;try{return d.apply(null,[r,a])}catch(err){throw e.get_option("debug")>2&&(console.log("error in get.apply",err),console.log("get attr",n,"of",r),console.log("res",i),console.log("__get__",d),console.log(d+"")),err}}if(null===d&&"function"==typeof i&&(d=function(e){return e}),null!==d){i.__name__=n,"__new__"!=n&&i.__class__!==e.builtin_function_or_method||(i.$type="staticmethod");var m=d.apply(null,[i,r,a]);if("function"==typeof m){if(m.__class__===e.method)return i;if("staticmethod"==i.$type)return i;var g=i.__class__===e.method?a:r,v=function(){for(var e=[g],t=0,r=arguments.length;t<r;t++)e.push(arguments[t]);return i.apply(this,e)};return v.__class__=e.method,(v.__get__=function(t,r){var n=i.bind(null,r);return n.__class__=e.method,n.$infos={__self__:r,__func__:i,__name__:i.$infos.__name__,__qualname__:r.__name__+"."+i.$infos.__name__},n}).__class__=e.method_wrapper,v.__get__.$infos=i.$infos,v.$infos={__self__:g,__func__:i,__name__:n,__qualname__:a.__qualname__+"."+n},o&&(r.$method_cache=r.$method_cache||{},r.$method_cache[n]=[v,i]),v}return m}return i}if(r.hasOwnProperty&&r.hasOwnProperty(n)&&!Array.isArray(r))return e.Undefined;throw e.attr_error(n,r)},r.__gt__=function(){return t.NotImplemented},r.__hash__=function(t){var r=t.__hashvalue__;return void 0!==r?r:t.__hashvalue__=e.$py_next_hash--},r.__init__=function(){if(0==arguments.length)throw t.TypeError.$factory("descriptor '__init__' of 'object' object needs an argument");return t.None},r.__le__=function(){return t.NotImplemented},r.__lt__=function(){return t.NotImplemented},r.__mro__=[],r.$new=function(r){return function(){if(arguments.length>0)throw t.TypeError.$factory("object() takes no parameters");var n=Object.create(null);return n.__class__=r,n.__dict__=e.obj_dict({}),n}},r.__new__=function(n,...a){if(void 0===n)throw t.TypeError.$factory("object.__new__(): not enough arguments");if(e.$getattr(n,"__init__")===r.__init__&&a.length>0)throw t.TypeError.$factory("object() takes no parameters");var o=Object.create(null);return e.update_obj(o,{__class__:n,__dict__:e.obj_dict({})}),o},r.__ne__=function(r,n){if(r===n)return!1;var a=e.$getattr(r.__class__||e.get_class(r),"__eq__",null);if(null!==a){var o=e.$call(a)(r,n);return o===t.NotImplemented?o:!e.$bool(o)}return t.NotImplemented},r.__reduce__=function(n){if(!n.__dict__)throw t.TypeError.$factory(`cannot pickle '${e.class_name(n)}' object`);void 0===e.imported.copyreg&&e.$import("copyreg");var a=[e.imported.copyreg._reconstructor],o=e.get_class(n),s=r;for(var i of o.__mro__)if("builtins"==i.__module__){s=i;break}var _=[o,s];s===r?_.push(t.None):_.push(e.$call(s)(n)),a.push(e.fast_tuple(_));var l=e.empty_dict();for(var c of t.dict.$keys_string(n.__dict__))t.dict.$setitem(l,c,t.dict.$getitem_string(n.__dict__,c));return a.push(l),t.tuple.$factory(a)},r.__reduce_ex__=function(n,a){var o=e.get_class(n);if(void 0===e.imported.copyreg&&e.$import("copyreg"),a<2)return e.$call(e.imported.copyreg._reduce_ex)(n,a);var s=e.$getattr(o,"__reduce__");if(s!==r.__reduce__)return e.$call(s)(n);var i=[e.imported.copyreg.__newobj__],_=[o],l=function(r,n){var a=e.$getattr(r,"__getnewargs_ex__",null);if(null!==a){var o;if(!(o=a())||o.__class__!==t.tuple)throw t.TypeError.$factory(`__getnewargs_ex__ should return a tuple, not '${e.class_name(o)}'`);if(2!=o.length)throw t.ValueError.$factory(`__getnewargs_ex__ should return a tuple of length 2, not ${o.length}`);var s=o[0],i=o[1];if(!s||s.__class__!==t.tuple)throw t.TypeError.$factory(`first item of the tuple returned by __getnewargs_ex__ must be a tuple, not '${e.class_name(s)}'`);if(!i||i.__class__!==t.dict)throw t.TypeError.$factory(`second item of the tuple returned by __getnewargs_ex__ must be a dict, not '${e.class_name(i)}'`);return{args:s,kwargs:i}}if((o=n.$getnewargs)||(o=e.$getattr(n,"__getnewargs__",null)),o){if(!(s=o(r))||s.__class__!==t.tuple)throw t.TypeError.$factory(`__getnewargs__ should return a tuple, not '${e.class_name(s)}'`);return{args:s}}}(n,o);l&&(_=_.concat(l.args)),i.push(e.fast_tuple(_));var c=e.empty_dict(),u=0;if(n.__dict__)for(var f of t.dict.$iter_items_with_hash(n.__dict__))"__class__"==f.key||f.key.startsWith("$")||(t.dict.$setitem(c,f.key,f.value),u++);0==u&&(c=t.None),i.push(c);var p=t.None;null!==e.$getattr(o,"append",null)&&null!==e.$getattr(o,"extend",null)&&(p=t.iter(n)),i.push(p);var h=t.None;return e.$isinstance(n,t.dict)&&(h=t.dict.items(n)),i.push(h),t.tuple.$factory(i)},r.__repr__=function(n){if(n===r)return"<class 'object'>";if(n.__class__===t.type)return"<class '"+n.__name__+"'>";var a=n.__class__.__module__;return void 0===a||a.startsWith("$")||"builtins"===a?"<"+e.class_name(n)+" object>":"<"+n.__class__.__module__+"."+e.class_name(n)+" object>"},r.__setattr__=function(n,a,o){if(void 0===o)throw t.TypeError.$factory("can't set attributes of built-in/extension type 'object'");if(n.__class__===r)throw void 0===r[a]?e.attr_error(a,n):t.AttributeError.$factory("'object' object attribute '"+a+"' is read-only");return n.__dict__?t.dict.$setitem(n.__dict__,a,o):n[a]=o,t.None},r.__setattr__.__get__=function(e){return function(t,n){r.__setattr__(e,t,n)}},r.__setattr__.__str__=function(){return"method object.setattr"},r.__str__=function(r){if(void 0===r||r.$kw)throw t.TypeError.$factory("descriptor '__str__' of 'object' object needs an argument");var n=r.__class__||e.get_class(r),a=e.$getattr(n,"__repr__");return e.$call(a).apply(null,arguments)},r.__subclasshook__=function(){return t.NotImplemented},r.$factory=function(){if(arguments.length>0||1==arguments.length&&arguments[0].$kw&&Object.keys(arguments[0].$kw).length>0)throw t.TypeError.$factory("object() takes no arguments");var e={__class__:r},n=[e];return r.__init__.apply(null,n),e},e.set_func_names(r,"builtins"),r}(__BRYTHON__),function(e){var t=e.builtins,r=1024;function n(t,r,n){try{e.$getitem(t,r)}catch(err){e.$setitem(t,r,n)}}e.$class_constructor=function(n,a,o,s,i,_){var l;a instanceof e.str_dict?(l=e.empty_dict()).$strings=a:l=a.$target;var c=a.__module__;for(var u of i)if(void 0!==u.__flags__&&!(u.__flags__&r))throw t.TypeError.$factory("type 'bool' is not an acceptable base type");var f={};if(_)for(var p=0;p<_.length;p++){var h=_[p][0],d=_[p][1];"metaclass"!=h&&(f[h]=d)}void 0!==a.__eq__&&void 0===a.__hash__&&e.$setitem(l,"__hash__",t.None);var m=a.__slots__;if(void 0!==m){if("string"==typeof m)m=[m];else for(var g of e.make_js_iterator(m))if("string"!=typeof g)throw t.TypeError.$factory(`__slots__ items must be strings, not '${e.class_name(g)}'`);e.$setitem(l,"__slots__",m)}var v=t.type.__getattribute__(o,"__new__")(o,n,s,l,{$kw:[f]});(v.__module__=c,v.$subclasses=[],v.$is_class=!0,v.__class__===o)&&t.type.__getattribute__(o,"__init__")(v,n,s,l,{$kw:[f]});for(p=0;p<i.length;p++)i[p].$subclasses=i[p].$subclasses||[],i[p].$subclasses.push(v);return v},e.get_metaclass=function(r,n,a,o){var s;if(void 0===o&&0==a.length)return t.type;if(o){if(!e.$isinstance(o,t.type))return o;s=o}if(a&&a.length>0){if(void 0===a[0].__class__){if("function"!=typeof a[0])throw t.TypeError.$factory("Argument of "+r+" is not a class (type '"+e.class_name(a[0])+"')");if(1!=a.length)throw t.TypeError.$factory("A Brython class can inherit at most 1 Javascript constructor");s=a[0].__class__=e.JSMeta,e.set_func_names(a[0],n)}for(var i of a){var _=i.__class__;if(void 0===s)s=_;else if(_===s||t.issubclass(s,_));else if(t.issubclass(_,s))s=_;else if(s.__bases__&&-1==s.__bases__.indexOf(_))throw t.TypeError.$factory("metaclass conflict: the metaclass of a derived class must be a (non-strict) subclass of the metaclasses of all its bases")}}else s=s||t.type;return s},e.make_class_namespace=function(r,a,o,s,i){var _=t.dict.$literal([["__module__",o],["__qualname__",s]]);if(r!==t.type){var l=e.$getattr(r,"__prepare__",t.None);l!==t.None&&(n(_=e.$call(l)(a,i),"__module__",o),n(_,"__qualname__",s))}if(_.__class__===t.dict)return _.$all_str?_.$strings:new Proxy(_,{get:function(e,r){return"__class__"==r?t.dict:"$target"==r?e:t.dict.$contains_string(e,r)?t.dict.$getitem_string(e,r):void 0},set:function(e,r,n){t.dict.$setitem(e,r,n)}});var c=e.$getattr(_,"__setitem__"),u=e.$getattr(_,"__getitem__");return new Proxy(_,{get:function(t,r){if("__class__"==r)return e.get_class(t);if("$target"==r)return t;try{return u(r)}catch(err){return}},set:function(e,r,n){return c(r,n),t.None}})},e.resolve_mro_entries=function(r){var n=[],a=!1;for(var o of r)if(e.$isinstance(o,t.type))n.push(o);else{var s=e.$getattr(o,"__mro_entries__",t.None);if(s!==t.None){a=!0;var i=t.list.$factory(s(r));n=n.concat(i)}else n.push(o)}return a?n:r};e.make_class=function(e,r){var n={__class__:a,__bases__:[t.object],__mro__:[t.object],__name__:e,__qualname__:e,$is_class:!0};return n.$factory=r,n};var a=e.make_class("type",(function(r,n,o){var s={},i=e.args("type",3,{kls:null,bases:null,cl_dict:null},["kls","bases","cl_dict"],arguments,{bases:s,cl_dict:s},null,"kw"),_=(r=i.kls,n=i.bases,o=i.cl_dict,i.kw),l={};for(var c in _.$jsobj)l[c]=_.$jsobj[c];var u={$kw:[l]};if(o===s){if(n!==s)throw t.TypeError.$factory("type() takes 1 or 3 arguments");return e.get_class(r)}var f=e.frame_obj.frame[2],p=e.resolve_mro_entries(n),h=e.get_metaclass(r,f,p);return a.__call__(h,r,p,o,u)}));a.__class__=a;var o=t.classmethod=e.make_class("classmethod",(function(t){return e.check_nb_args_no_kw("classmethod",1,arguments),{__class__:o,__func__:t}}));o.__get__=function(){var r=e.args("classmethod",3,{self:null,obj:null,cls:null},["self","obj","cls"],arguments,{cls:t.None},null,null),n=r.self,a=r.obj,o=r.cls;o!==t.None&&void 0!==o||(o=e.get_class(a));var s=e.get_class(n.__func__),i=[s].concat(s.__mro__);for(var _ of i){if(_===e.function)break;if(_.__get__)return _.__get__(n.__func__,o,o)}return e.method.$factory(n.__func__,o)},e.set_func_names(o,"builtins");var s=t.staticmethod=e.make_class("staticmethod",(function(e){return{__class__:s,__func__:e}}));s.__call__=function(t){return e.$call(t.__func__)},s.__get__=function(e){return e.__func__},e.set_func_names(s,"builtins"),e.getset_descriptor=e.make_class("getset_descriptor",(function(r,n,a,o){return{__class__:e.getset_descriptor,__doc__:t.None,cls:r,attr:n,getter:a,setter:o}})),e.getset_descriptor.__get__=function(e,r,n){return console.log("__get__",e,r,n),r===t.None?e:e.getter(e,r,n)},e.getset_descriptor.__set__=function(e,t,r){return e.setter(e,t,r)},e.getset_descriptor.__repr__=function(e){return`<attribute '${e.attr}' of '${e.cls.__name__}' objects>`},e.set_func_names(e.getset_descriptor,"builtins");function i(r,n){var a,o;if(null!==(a=e.$getattr(n,"__dict__",null))&&(t.dict.update(r,a),void 0!==(o=n.__bases__)))for(var s of o)i(r,s)}a.$call=function(t,r,n){return function(){var a=r.bind(null,t).apply(null,arguments);return e.$isinstance(a,t)&&n.bind(null,a).apply(null,arguments),a}},a.$call_no_init=function(e,t){return t.bind(null,e)},a.__call__=function(){for(var r=[],n=arguments[0],a=1,o=arguments.length;a<o;a++)r.push(arguments[a]);var s=t.type.__getattribute__(n,"__new__").apply(null,arguments);if((s.__class__||e.get_class(s))===n){var i=t.type.__getattribute__(n,"__init__");if(i!==t.object.__init__){var _=[s].concat(r);i.apply(null,_)}}return s},a.__class_getitem__=function(r,n,o){if(r!==a)throw t.TypeError.$factory(`type '${r.__qualname__}' is not subscriptable`);return e.GenericAlias.$factory(r,n,o)},a.__dir__=function(r){var n=e.empty_dict();return i(n,r),t.sorted(n)},a.__format__=function(e,r){return t.str.$factory(e)},a.__getattribute__=function(r,n){switch(n){case"__annotations__":var a=r.__annotations__;return void 0===a?e.empty_dict():a;case"__bases__":if(void 0!==r.__bases__)return e.fast_tuple(e.resolve_mro_entries(r.__bases__));throw e.attr_error(n,r);case"__class__":return r.__class__;case"__doc__":return r.__doc__||t.None;case"__name__":return r.__name__||r.__qualname__;case"__setattr__":if(void 0!==r.__setattr__)var o=r.__setattr__;else o=function(e,t,r){e[t]=r};return c.$factory(n,r,o);case"__delattr__":return void 0!==r.__delattr__?r.__delattr__:c.$factory(n,r,(function(e){delete r[e]}))}var s=r.hasOwnProperty(n)?r[n]:void 0,i="toString"==n;if(i&&console.log("attr",n,"of",r,"\n  ",s,s+""),r.__class__&&r.__class__[n]&&r.__class__[n].__get__&&r.__class__[n].__set__)return i&&console.log("data descriptor"),r.__class__[n].__get__(r);if(void 0===s){var _=r.hasOwnProperty(n)?r[n]:void 0;if(void 0===_)if(i&&console.log(n,"not in klass[attr], search in __dict__",r.__dict__),r.__dict__&&r.__dict__.__class__===t.dict&&t.dict.$contains_string(r.__dict__,n))s=r[n]=t.dict.$getitem_string(r.__dict__,n),i&&console.log("found in __dict__",_);else{var l=r.__mro__;void 0===l&&console.log("no mro for",r);for(var u=0;u<l.length;u++)if(l[u].hasOwnProperty(n)){s=l[u][n];break}}else s=_;i&&(console.log("search in class mro",s),void 0!==s&&(r.hasOwnProperty(n)?console.log("found in klass",r):console.log("found in",l[u])))}if(void 0===s){if(void 0===s){var p=r.__class__||e.get_class(r);s=p.hasOwnProperty(n)?p[n]:void 0;if(i&&console.log("search in meta",p,s),void 0===s){var h=p.__mro__;for(u=0;u<h.length;u++)if(h[u].hasOwnProperty(n)){s=h[u][n];break}}if(void 0!==s){if(i&&console.log("found in meta",s,typeof s),s.__class__===t.property)return s.fget(r);if("function"==typeof s){if("__new__"==n)return s;var d=s.bind(null,r);return d.__class__=e.method,d.$infos={__self__:r,__func__:s,__name__:n,__qualname__:p.__name__+"."+n,__module__:s.$infos?s.$infos.__module__:""},i&&console.log("return method from meta",d,d+""),d}}}if(void 0===s){var m=p.__getattr__;if(void 0===m)for(u=0;u<h.length;u++)if(void 0!==h[u].__getattr__){m=h[u].__getattr__;break}if(void 0!==m)return m(r,n)}}if(void 0!==s){if(i&&console.log("res",s),s.__class__===t.property)return s;if(s.__class__===t.classmethod)return t.classmethod.__get__(s,t.None,r);if(s.__get__){if(s.__class__===f){if(i&&console.log("__get__ of method",s.$infos.__self__,r),s.$infos.__self__)return s;var g=s.__get__(s.__func__,r);g.$infos={__func__:s,__name__:s.$infos.__name__,__qualname__:r.__name__+"."+s.$infos.__name__,__self__:r}}else g=s.__get__(r);return g}return!s.__class__||!s.__class__.__get__||n.startsWith("__")&&n.endsWith("__")?"function"==typeof s?(void 0===s.$infos&&e.get_option("debug")>1&&console.log("warning: no attribute $infos for",s,"klass",r,"attr",n),i&&console.log("res is function",s),"__new__"!=n&&s.__class__!==e.builtin_function_or_method||(s.$type="staticmethod"),"__class_getitem__"!=n&&"__init_subclass__"!=n||s.__class__===t.classmethod?s.__class__===e.method?s.__get__(null,r):(i&&console.log("return res",s),s):(s=t.classmethod.$factory(s),t.classmethod.__get__(s,t.None,r))):s:s.__class__.__get__(s,t.None,r)}},a.__hash__=function(e){return t.hash(e)},a.__init__=function(){if(0==arguments.length)throw t.TypeError.$factory("descriptor '__init__' of 'type' object needs an argument")},a.__init_subclass__=function(){var r=e.args("__init_subclass__",1,{cls:null},["cls"],arguments,{},"args","kwargs");if(r.args.length>0)throw t.TypeError.$factory(`${r.cls.__qualname__}.__init_subclass__ takes no arguments (${r.args.length} given)`);for(var n in r.kwargs.$jsobj)throw t.TypeError.$factory(`${r.cls.__qualname__}.__init_subclass__() takes no keyword arguments`);return t.None},t.object.__init_subclass__=a.__init_subclass__,a.__instancecheck__=function(t,r){var n=r.__class__||e.get_class(r);if(n===t)return!0;for(var a=0;a<n.__mro__.length;a++)if(n.__mro__[a]===t)return!0;return!1},a.__instancecheck__.$type="staticmethod",a.__name__="type",a.__new__=function(r,n,o,s,i){i=void 0===i?{$kw:[{}]}:i,e.$isinstance(s,t.dict)||(console.log("bizarre",r,n,o,s),alert());var _=t.dict.$get_string(s,"__module__");_===t.dict.$missing&&(_=e.frame_obj.frame[2]);var l=t.dict.$get_string(s,"__qualname__");l===t.dict.$missing&&(l=n);var c={__class__:r,__bases__:0==o.length?[t.object]:o,__dict__:s,__qualname__:l,__module__:_,__name__:n,$is_class:!0};try{var f=t.dict.$get_string(s,"__slots__");if(f!==t.dict.$missing)for(var n of e.make_js_iterator(f))c[n]=u.$factory(n,c)}catch(err){}for(var p of(c.__mro__=a.mro(c).slice(1),t.dict.$iter_items_with_hash(s))){var h=p.key,d=p.value;if(!(["__module__","__class__","__name__","__qualname__"].indexOf(h)>-1)&&(!h.startsWith("$")&&void 0!==d)){if(c[h]=d,d.__class__){var m=e.$getattr(d.__class__,"__set_name__",t.None);m!==t.None&&m(d,c,h)}if("function"==typeof d)if(void 0===d.$infos)console.log(e.make_frames_stack());else if(d.$infos.$class=c,d.$infos.__qualname__=n+"."+d.$infos.__name__,d.$infos.$defaults){var g=d.$infos.$defaults;e.function.__setattr__(d,"__defaults__",g)}}}var v=t.super.$factory(c,c);return t.super.__getattribute__(v,"__init_subclass__")(i),c},a.__or__=function(){var r=e.args("__or__",2,{cls:null,other:null},["cls","other"],arguments,{},null,null),n=r.cls,o=r.other;return o===t.None||e.$isinstance(o,[a,e.GenericAlias])?e.UnionType.$factory([n,o]):t.NotImplemented},a.__prepare__=function(){return e.empty_dict()},a.__qualname__="type",a.__repr__=function(t){e.builtins_repr_check(a,arguments);var r=t.__qualname__;return t.__module__&&"builtins"!=t.__module__&&!t.__module__.startsWith("$")&&(r=t.__module__+"."+r),"<class '"+r+"'>"},a.__ror__=function(){var e=arguments.length;if(1!=e)throw t.TypeError.$factory(`expected 1 argument, got ${e}`);return t.NotImplemented},a.__setattr__=function(r,n,o){if(a[n]&&a[n].__get__&&a[n].__set__)return a[n].__set__(r,o),t.None;if("builtins"==r.__module__)throw t.TypeError.$factory(`cannot set '${n}' attribute of immutable type '`+r.__qualname__+"'");r[n]=o;var s=r.__dict__||e.$getattr(r,"__dict__");return t.dict.$setitem(s,n,o),"__init__"==n||"__new__"==n?r.$factory=e.$instance_creator(r):"__bases__"==n&&(r.__mro__=t.type.mro(r)),t.None},a.mro=function(e){if(void 0===e)throw t.TypeError.$factory("unbound method type.mro() needs an argument");var r=e.__bases__,n=[],a=0;for(var o of r){var s=[],i=0;if(void 0===o||void 0===o.__mro__){if(void 0===o.__class__)return[t.object];console.log("error for base",o),console.log("cls",e)}s[i++]=o;var _=o.__mro__;if(_){_[0]===o&&_.splice(0,1);for(var l=0;l<_.length;l++)s[i++]=_[l]}n[a++]=s}n[a++]=r.slice();for(var c=[e],u=1;;){for(var f=[],p=(i=0,0);p<n.length;p++)n[p].length>0&&(f[i++]=n[p]);if(0==f.length)break;for(p=0;p<f.length;p++){for(var h=f[p][0],d=[],m=(i=0,0);m<f.length;m++){var g=f[m];g.slice(1).indexOf(h)>-1&&(d[i++]=g)}if(!(d.length>0))break;h=null}if(null===h)throw t.TypeError.$factory("inconsistent hierarchy, no C3 MRO is possible");c[u++]=h;for(p=0;p<n.length;p++){n[p][0]===h&&n[p].shift()}}return c[c.length-1]!==t.object&&(c[u++]=t.object),c},a.__subclasscheck__=function(e,r){var n=e;return void 0===r.__bases__?e===t.object:r.__bases__.indexOf(n)>-1},e.set_func_names(a,"builtins"),a.__init_subclass__=t.classmethod.$factory(a.__init_subclass__),t.type=a;var _=t.property=e.make_class("property",(function(e,t,r,n){var a={__class__:_};return _.__init__(a,e,t,r,n),a}));_.__init__=function(r,n,a,o,s){var i=e.args("__init__",5,{self:null,fget:null,fset:null,fdel:null,doc:null},["self","fget","fset","fdel","doc"],arguments,{fget:t.None,fset:t.None,fdel:t.None,doc:t.None},null,null);r=i.self,n=i.fget,a=i.fset,o=i.fdel,s=i.doc;if(r.__doc__=s||"",r.$type=n.$type,r.fget=n,r.fset=a,r.fdel=o,r.$is_property=!0,n&&n.$attrs)for(var l in n.$attrs)r[l]=n.$attrs[l];r.__delete__=o,r.getter=function(e){return _.$factory(e,r.fset,r.fdel,r.__doc__)},r.setter=function(e){return _.$factory(r.fget,e,r.fdel,r.__doc__)},r.deleter=function(e){return _.$factory(r.fget,r.fset,e,r.__doc__)}},_.__get__=function(r,n){if(void 0===r.fget)throw t.AttributeError.$factory("unreadable attribute");return e.$call(r.fget)(n)},_.__new__=function(e){return{__class__:e}},_.__set__=function(r,n,a){if(void 0===r.fset){var o=`property '${r.fget.$infos.__name__}' of '${e.class_name(n)}' object has no setter`;throw t.AttributeError.$factory(o)}e.$getattr(r.fset,"__call__")(n,a)},e.set_func_names(_,"builtins");var l=e.wrapper_descriptor=e.make_class("wrapper_descriptor");e.set_func_names(l,"builtins"),a.__call__.__class__=l;e.$instance_creator=function(r){if(r.prototype&&r.prototype.constructor==r)return function(){return new r(...arguments)};if(r.__abstractmethods__&&e.$bool(r.__abstractmethods__))return function(){var n=Array.from(e.make_js_iterator(r.__abstractmethods__));n.sort();var a=(n.length>1?"s ":" ")+n.join(", ");throw t.TypeError.$factory("Can't instantiate abstract class interface with abstract method"+a)};var n,o,s=r.__class__||e.get_class(r);if(s===t.type){var i=a.__getattribute__(r,"__new__"),_=a.__getattribute__(r,"__init__");o=_===t.object.__init__?i===t.object.__new__?t.object.$new(r):i.bind(null,r):a.$call(r,i,_)}else o=(n=t.type.__getattribute__(s,"__call__")).$is_class?e.$call(n):n.bind(null,r);return o.__class__=e.function,o.$infos={__name__:r.__name__,__module__:r.__module__},o};var c=e.method_wrapper=e.make_class("method_wrapper",(function(e,t,r){var n=function(){return r.apply(null,arguments)};return n.$infos={__name__:e,__module__:t.__module__},n}));c.__str__=c.__repr__=function(e){return"<method '"+e.$infos.__name__+"' of function object>"};var u=e.member_descriptor=e.make_class("member_descriptor",(function(e,t){return{__class__:u,cls:t,attr:e}}));u.__delete__=function(e,r){if(void 0===r.$slot_values||!r.$slot_values.hasOwnProperty(e.attr))throw t.AttributeError.$factory(e.attr);r.$slot_values.delete(e.attr)},u.__get__=function(r,n,a){if(n===t.None)return r;if(void 0===n.$slot_values||!n.$slot_values.has(r.attr))throw e.attr_error(r.attr,n);return n.$slot_values.get(r.attr)},u.__set__=function(e,t,r){void 0===t.$slot_values&&(t.$slot_values=new Map),t.$slot_values.set(e.attr,r)},u.__str__=u.__repr__=function(e){return"<member '"+e.attr+"' of '"+e.cls.__name__+"' objects>"},e.set_func_names(u,"builtins");var f=e.method=e.make_class("method",(function(t,r){var n=function(){return e.$call(t).bind(null,r).apply(null,arguments)};return n.__class__=f,"function"!=typeof t&&console.log("method from func w-o $infos",t,"all",e.$call(t)),(n.$infos=t.$infos||{}).__func__=t,n.$infos.__self__=r,n.$infos.__dict__=e.empty_dict(),n}));f.__eq__=function(e,t){return void 0!==e.$infos&&void 0!==t.$infos&&e.$infos.__func__===t.$infos.__func__&&e.$infos.__self__===t.$infos.__self__},f.__ne__=function(t,r){return!e.method.__eq__(t,r)},f.__get__=function(t){var r=function(){return t(arguments)};return r.__class__=e.method_wrapper,r.$infos=f.$infos,r},f.__getattribute__=function(r,n){var a=r.$infos;if(a&&a[n]){if("__code__"==n){var o={__class__:e.Code};for(var n in a.__code__)o[n]=a.__code__[n];return o}return a[n]}return f.hasOwnProperty(n)?t.object.__getattribute__(r,n):e.function.__getattribute__(r.$infos.__func__,n)},f.__repr__=f.__str__=function(e){return"<bound method "+e.$infos.__qualname__+" of "+t.str.$factory(e.$infos.__self__)+">"},f.__setattr__=function(r,n,a){if("__class__"==n)throw t.TypeError.$factory("__class__ assignment only supported for heap types or ModuleType subclasses");throw e.attr_error(n,r)},e.set_func_names(f,"builtins"),e.method_descriptor=e.make_class("method_descriptor"),e.classmethod_descriptor=e.make_class("classmethod_descriptor"),t.object.__class__=a,e.make_iterator_class=function(r){var n={__class__:t.type,__mro__:[t.object],__name__:r,__qualname__:r,$factory:function(t){return{__class__:n,__dict__:e.empty_dict(),counter:-1,items:t,len:t.length,$builtin_iterator:!0}},$is_class:!0,$iterator_class:!0,__iter__:function(e){return e.counter=void 0===e.counter?-1:e.counter,e.len=e.items.length,e},__len__:function(e){return e.items.length},__next__:function(r){if("function"==typeof r.test_change){var n=r.test_change();if(n)throw t.RuntimeError.$factory(n)}if(r.counter++,r.counter<r.items.length){var a=r.items[r.counter];return"js"==r.items.$brython_class&&(a=e.$JS2Py(a)),a}throw t.StopIteration.$factory("StopIteration")},__reduce_ex__:function(r,n){return e.fast_tuple([t.iter,t.tuple.$factory([r.items])])}};return e.set_func_names(n,"builtins"),n},e.GenericAlias=e.make_class("GenericAlias",(function(t,r){return{__class__:e.GenericAlias,__mro__:[t],origin_class:t,items:r}})),e.GenericAlias.__args__=t.property.$factory((t=>e.fast_tuple(t.items))),e.GenericAlias.__call__=function(e,...t){return e.origin_class.$factory.apply(null,t)},e.GenericAlias.__eq__=function(t,r){return!!e.$isinstance(r,e.GenericAlias)&&(e.rich_comp("__eq__",t.origin_class,r.origin_class)&&e.rich_comp("__eq__",t.items,r.items))},e.GenericAlias.__getitem__=function(r,n){throw t.TypeError.$factory("descriptor '__getitem__' for '"+r.origin_class.__name__+"' objects doesn't apply to a '"+e.class_name(n)+"' object")},e.GenericAlias.__mro_entries__=function(t,r){return e.fast_tuple([t.origin_class])},e.GenericAlias.__new__=function(t,r,n){return{__class__:e.GenericAlias,__mro__:[t],origin_class:t,items:r,$is_class:!0}},e.GenericAlias.__or__=function(t,r){e.args("__or__",2,{self:null,other:null},["self","other"],arguments,{},null,null);return e.UnionType.$factory([t,r])},e.GenericAlias.__origin__=t.property.$factory((e=>e.origin_class)),e.GenericAlias.__parameters__=t.property.$factory((t=>e.fast_tuple([]))),e.GenericAlias.__repr__=function(e){var r=Array.isArray(e.items)?e.items:[e.items],n=[];for(var a of r)a===t.Ellipsis?n.push("..."):a.$is_class?n.push(a.__name__):n.push(t.repr(a));return e.origin_class.__qualname__+"["+n.join(", ")+"]"},e.set_func_names(e.GenericAlias,"types"),e.UnionType=e.make_class("UnionType",(function(t){return{__class__:e.UnionType,items:t}})),e.UnionType.__args__=t.property.$factory((t=>e.fast_tuple(t.items))),e.UnionType.__eq__=function(r,n){return e.$isinstance(n,e.UnionType)?t.list.__eq__(r.items,n.items):t.NotImplemented},e.UnionType.__parameters__=t.property.$factory((()=>e.fast_tuple([]))),e.UnionType.__repr__=function(e){var r=[];for(var n of e.items)if(n.$is_class){var a=n.__name__;"builtins"!==n.__module__&&(a=n.__module__+"."+a),r.push(a)}else r.push(t.repr(n));return r.join(" | ")},e.set_func_names(e.UnionType,"types")}(__BRYTHON__),function($B){var _b_=$B.builtins;_b_.__debug__=!1,$B.$comps={">":"gt",">=":"ge","<":"lt","<=":"le"},$B.$inv_comps={">":"lt",">=":"le","<":"gt","<=":"ge"};var check_nb_args=$B.check_nb_args,check_no_kw=$B.check_no_kw,check_nb_args_no_kw=$B.check_nb_args_no_kw,NoneType=$B.NoneType={$factory:function(){return None},__bool__:function(){return False},__class__:_b_.type,__hash__:function(){return 0},__module__:"builtins",__mro__:[_b_.object],__name__:"NoneType",__qualname__:"NoneType",__repr__:function(){return"None"},__str__:function(){return"None"},$is_class:!0};NoneType.__setattr__=function(e,t){return no_set_attr(NoneType,t)};var None=_b_.None={__class__:NoneType};for(var $op in None.__doc__=None,NoneType.__doc__=None,$B.$comps){var key=$B.$comps[$op];switch(key){case"ge":case"gt":case"le":case"lt":NoneType["__"+key+"__"]=function(){return _b_.NotImplemented}}}for(var $func in None)"function"==typeof None[$func]&&(None[$func].__str__=function(e){return function(){return"<method-wrapper "+e+" of NoneType object>"}}($func));function $builtin_base_convert_helper(e,t){var r="";switch(t){case 2:r="0b";break;case 8:r="0o";break;case 16:r="0x";break;default:console.log("invalid base:"+t)}if(e.__class__===$B.long_int)return r+e.value.toString(t);var n=$B.$GetInt(e);if(void 0===n)throw _b_.TypeError.$factory("Error, argument must be an integer or contains an __index__ function");return n>=0?r+n.toString(t):"-"+r+(-n).toString(t)}function bin_hex_oct(e,t){if($B.$isinstance(t,_b_.int))return $builtin_base_convert_helper(t,e);try{var r=t.__class__||$B.get_class(t),n=$B.$getattr(r,"__index__")}catch(err){if(err.__class__===_b_.AttributeError)throw _b_.TypeError.$factory("'"+$B.class_name(t)+"' object cannot be interpreted as an integer");throw err}return $builtin_base_convert_helper($B.$call(n)(t),e)}$B.set_func_names(NoneType,"builtins"),_b_.__build_class__=function(){throw _b_.NotImplementedError.$factory("__build_class__")},_b_.abs=function(e){check_nb_args_no_kw("abs",1,arguments);var t=e.__class__||$B.get_class(e);try{var r=$B.$getattr(t,"__abs__")}catch(err){if(err.__class__===_b_.AttributeError)throw _b_.TypeError.$factory("Bad operand type for abs(): '"+$B.class_name(e)+"'");throw err}return $B.$call(r)(e)},_b_.aiter=function(e){return $B.$call($B.$getattr(e,"__aiter__"))()},_b_.all=function(e){check_nb_args_no_kw("all",1,arguments);for(var t=iter(e);;)try{var r=next(t);if(!$B.$bool(r))return!1}catch(err){return!0}},_b_.anext=function(){var e={},t=$B.args("anext",2,{async_iterator:null,_default:null},["async_iterator","_default"],arguments,{_default:e},null,null);return $B.$call($B.$getattr(t.async_iterator,"__anext__"))().catch((function(r){if($B.is_exc(r,[_b_.StopAsyncIteration])&&t._default!==e)return t._default;throw r}))},_b_.any=function(e){for(var t of(check_nb_args_no_kw("any",1,arguments),$B.make_js_iterator(e)))if($B.$bool(t))return!0;return!1},_b_.ascii=function(e){check_nb_args_no_kw("ascii",1,arguments);for(var t,r=repr(e),n="",a=0;a<r.length;a++)if((t=r.charCodeAt(a))<128)n+=r.charAt(a);else if(t<256)n+="\\x"+t.toString(16);else{var o=t.toString(16);o.length%2==1&&(o="0"+o),n+="\\u"+o}return n},_b_.bin=function(e){return check_nb_args_no_kw("bin",1,arguments),bin_hex_oct(2,e)},_b_.breakpoint=function(){$B.$import("sys",[]);var e={},t=$B.$getattr($B.imported.sys,"breakpointhook",e);if(t===e)throw _b_.RuntimeError.$factory("lost sys.breakpointhook");return $B.$call(t).apply(null,arguments)},_b_.callable=function(e){return check_nb_args_no_kw("callable",1,arguments),_b_.hasattr(e,"__call__")},_b_.chr=function(e){if(check_nb_args_no_kw("chr",1,arguments),(e=$B.PyNumber_Index(e))<0||e>1114111)throw _b_.ValueError.$factory("Outside valid range");if(e>=65536&&e<=1114111){var t=e-65536,r=String.fromCodePoint(55296|t>>10)+String.fromCodePoint(56320|1023&t);return $B.make_String(r,[0])}return String.fromCodePoint(e)};var code=_b_.code=$B.make_class("code");code.__repr__=code.__str__=function(e){return`<code object ${e.co_name}, file '${e.co_filename}', line ${e.co_firstlineno||1}>`},code.__getattribute__=function(e,t){return e[t]},$B.set_func_names(code,"builtins"),_b_.compile=function(){var e=$B.args("compile",7,{source:null,filename:null,mode:null,flags:null,dont_inherit:null,optimize:null,_feature_version:null},["source","filename","mode","flags","dont_inherit","optimize","_feature_version"],arguments,{flags:0,dont_inherit:!1,optimize:-1,_feature_version:0},null,null),t="$exec_"+$B.UUID();e.__class__=code,e.co_flags=e.flags,e.co_name="<module>";var r,n,a=e.co_filename=e.filename,o="single"==e.mode&&512&e.flags;if($B.file_cache[a]=e.source,$B.url2name[a]=t,$B.$isinstance(e.source,_b_.bytes)){var s,i,_="utf-8",l=e.source.source.indexOf(10);s=-1==l?e.source:_b_.bytes.$factory(e.source.source.slice(0,l));var c=/^[\t\f]*#.*?coding[:=][\t]*([-_.a-zA-Z0-9]+)/,u=(s=_b_.bytes.decode(s,"latin-1")).match(c);if(u)_=u[1];else if(l>-1){var f=e.source.source.slice(l+1);i=(l=f.indexOf(10))>-1?_b_.bytes.$factory(f.slice(0,l)):_b_.bytes.$factory(f),(u=(i=_b_.bytes.decode(i,"latin-1")).match(c))&&(_=u[1])}e.source=_b_.bytes.decode(e.source,_)}if($B.$isinstance(a,[_b_.bytes,_b_.str])||$B.warn(_b_.DeprecationWarning,`path should be string, bytes, or os.PathLike, not ${$B.class_name(a)}`),o&&!e.source.endsWith("\n")){var p=e.source.split("\n");if($B.last(p).startsWith(" "))throw _b_.SyntaxError.$factory("unexpected EOF while parsing")}if(e.source.__class__&&"ast"==e.source.__class__.__module__)return $B.imported._ast._validate(e.source),e._ast=e.source,delete e.source,e;if($B.parser_to_ast){try{var h="eval"==e.mode?"eval":"file";r=(n=new $B.Parser(e.source,a,h)).parse()}catch(err){if("single"==e.mode)try{n.tokens.next}catch(v){var d=n.tokens,m=d[d.length-2];("NEWLINE"==m.type&&16384&e.flags||"DEDENT"==m.type&&512&e.flags)&&(err.__class__=_b_.SyntaxError,err.args[0]="incomplete input")}throw err}if("single"==e.mode&&1==r.body.length&&r.body[0]instanceof $B.ast.Expr&&(r=(n=new $B.Parser(e.source,a,"eval")).parse(),e.single_expression=!0),e.flags==$B.PyCF_ONLY_AST){delete $B.url2name[a];let e=$B.ast_js_to_py(r);return e.$js_ast=r,e}}else{var g=$B.parser.create_root_node({src:e.source,filename:a},t,t);g.mode=e.mode,g.parent_block=$B.builtins_scope;try{$B.parser.dispatch_tokens(g,e.source),r=g.ast()}catch(err){if("single"==e.mode&&void 0===g.token_reader.read()){let r=g.token_reader.tokens,n=r[r.length-2];("NEWLINE"==n.type&&16384&e.flags||"DEDENT"==n.type&&512&e.flags)&&(err.__class__=_b_.SyntaxError,err.args[0]="incomplete input")}throw err}if("single"==e.mode&&1==r.body.length&&r.body[0]instanceof $B.ast.Expr&&((g=$B.parser.create_root_node({src:e.source,filename:a},t,t)).mode="eval",e.single_expression=!0,g.parent_block=$B.builtins_scope,$B.parser.dispatch_tokens(g,e.source),r=g.ast()),delete $B.url2name[a],e.flags==$B.PyCF_ONLY_AST){$B.create_python_ast_classes();let e=$B.ast_js_to_py(r);return e.$js_ast=r,e}}return delete $B.url2name[a],e._ast=$B.ast_js_to_py(r),e._ast.$js_ast=r,e},_b_.debug=$B.debug>0,_b_.delattr=function(e,t){if(check_nb_args_no_kw("delattr",2,arguments),"string"!=typeof t)throw _b_.TypeError.$factory("attribute name must be string, not '"+$B.class_name(t)+"'");return $B.$getattr(e,"__delattr__")(t)},$B.$delete=function(e,t){function r(e){e.__class__===$B.generator&&e.js_gen.return()}var n=!1,a=$B.frame_obj.frame;if(t?a[2]!=a[0]&&void 0!==a[3][e]&&(n=!0,r(a[3][e]),delete a[3][e]):void 0!==a[1][e]&&(n=!0,r(a[1][e]),delete a[1][e]),!n)throw $B.name_error(e)},_b_.dir=function(e){if(void 0===e){var t=_b_.locals();return _b_.sorted(t)}check_nb_args_no_kw("dir",1,arguments);var r=e.__class__||$B.get_class(e);if(e.$is_class){var n=$B.$getattr(e.__class__,"__dir__");return $B.$call(n)(e)}try{let t=$B.$call($B.$getattr(r,"__dir__"))(e);return t=_b_.list.$factory(t),t}catch(err){throw $B.get_option("debug")>2&&console.log("error in dir, obj",e,"klass",r,$B.$getattr(r,"__dir__"),err.message),err}},_b_.divmod=function(e,t){check_nb_args_no_kw("divmod",2,arguments);try{return $B.rich_op("__divmod__",e,t)}catch(err){if($B.is_exc(err,[_b_.TypeError]))return _b_.tuple.$factory([$B.rich_op("__floordiv__",e,t),$B.rich_op("__mod__",e,t)]);throw err}};var enumerate=_b_.enumerate=$B.make_class("enumerate",(function(){var e=$B.args("enumerate",2,{iterable:null,start:null},["iterable","start"],arguments,{start:0},null,null),t=iter(e.iterable),r=e.start;return{__class__:enumerate,__name__:"enumerate iterator",counter:r-1,iter:t,start:r}}));enumerate.__iter__=function(e){return e.counter=e.start-1,e},enumerate.__next__=function(e){return e.counter++,$B.fast_tuple([e.counter,next(e.iter)])},$B.set_func_names(enumerate,"builtins");var $$eval=_b_.eval=function(){var e=$B.args("eval",4,{src:null,globals:null,locals:null,mode:null},["src","globals","locals","mode"],arguments,{globals:_b_.None,locals:_b_.None,mode:"eval"},null,null,4),t=e.src,r=e.globals,n=e.locals,a=e.mode;e.src.mode&&"single"==e.src.mode&&["<console>","<stdin>"].indexOf(e.src.filename)>-1&&_b_.print(">",e.src.source.trim());var o="<string>";if(t.__class__===code)o=t.filename;else{if(!t.valueOf||"string"!=typeof t.valueOf())throw _b_.TypeError.$factory(`${a}() arg 1 must be a string, bytes or code object`);t=t.valueOf()}var s="exec";r!==_b_.None&&r.__class__==_b_.dict&&_b_.dict.$contains_string(r,"__name__")&&(s=_b_.dict.$getitem_string(r,"__name__")),$B.url2name[o]=s;var i=$B.frame_obj.frame;if($B.exec_scope=$B.exec_scope||{},"string"==typeof t&&t.endsWith("\\\n")){var _=_b_.SyntaxError.$factory("unexpected EOF while parsing"),l=t.split("\n"),c=l[l.length-2];throw _.args=["unexpected EOF while parsing",[o,l.length-1,1,c]],_.filename=o,_.text=c,_}var u="locals_"+s,f="globals_"+s,p={},h={};if(r===_b_.None)if(i[1]===i[3])f+="_globals",p=h=i[3];else if("exec"==a){for(var d in p=$B.clone(i[1]),i[3])p[d]=i[3][d];h=p}else p=i[1],h=i[3];else{if(r.__class__!==_b_.dict)throw _b_.TypeError.$factory(`${a}() globals must be a dict, not `+$B.class_name(r));if(h={},r.$jsobj)h=r.$jsobj;else{for(var m of(h=r.$jsobj={},_b_.dict.$keys_string(r)))r.$jsobj[m]=_b_.dict.$getitem_string(r,m),"__name__"==m&&(s=r.$jsobj[m]);r.$all_str=!1}if(void 0===h.__builtins__&&(h.__builtins__=_b_.__builtins__),n===_b_.None)p=h;else if(n===r)f+="_globals",p=h;else if(n.$jsobj)for(let e in n.$jsobj)h[e]=n.$jsobj[e];else if(n.$jsobj)p=n.$jsobj;else{var g=$B.get_class(n),v=$B.$call($B.$getattr(g,"__getitem__")),$=$B.$call($B.$getattr(g,"__setitem__"));p=new Proxy(n,{get(e,t){if("$target"==t)return e;try{return v(e,t)}catch(err){return}},set:(e,t,r)=>$(e,t,r)})}}var y,b=$B.frame_obj;(i=[s,p,s,h]).is_exec_top=!0,i.__file__=o,i.$f_trace=$B.enter_frame(i);var w=$B.frame_obj;i.$lineno=1,t.__class__===code&&(y=(y=t._ast).$js_ast?y.$js_ast:$B.ast_py_to_js(y));try{if($B.parser_to_ast){if(!y){var x="eval"==a?"eval":"file";y=new $B.Parser(t,o,x).parse()}}else if(!y){var k=$B.parser.create_root_node(t,"<module>",i[0],i[2],1);k.mode=a,k.filename=o,$B.parser.dispatch_tokens(k),y=k.ast()}var j=$B.future_features(y,o),B=$B._PySymtable_Build(y,o,j),E=$B.js_from_root({ast:y,symtable:B,filename:o,namespaces:{local_name:u,exec_locals:p,global_name:f,exec_globals:h}}).js}catch(err){throw err.args?err.args[1]&&(p.$lineno=err.args[1][1]):console.log("JS Error",err.message),$B.frame_obj=b,err}"eval"==a?E=`var __file__ = '${o}'\nvar locals = ${u}\nreturn ${E}`:t.single_expression&&(E=`var result = ${E}\nif(result !== _b_.None){\n_b_.print(result)\n}`);try{var N=new Function("$B","_b_",u,f,"frame","_frame_obj",E)}catch(err){throw $B.get_option("debug")>1&&(console.log("eval() error\n",$B.format_indent(E,0)),console.log("-- python source\n",t)),err}try{var S=N($B,_b_,p,h,i,w)}catch(err){throw $B.get_option("debug")>2&&console.log("Python code\n",t,"\nexec func",$B.format_indent(N+"",0),"\n    filename",o,"\n    name from filename",$B.url2name[o],"\n    local_name",u,"\n    exec_locals",p,"\n    global_name",f,"\n    exec_globals",h,"\n    frame",i,"\n    _ast",y,"\n    js",E),$B.frame_obj=b,err}if(r!==_b_.None&&!r.$jsobj)for(var T in h)T.startsWith("$")||_b_.dict.$setitem(r,T,h[T]);return $B.frame_obj=b,S};$$eval.$is_func=!0;var exec=_b_.exec=function(){var e=$B.args("exec",3,{src:null,globals:null,locals:null},["src","globals","locals"],arguments,{globals:_b_.None,locals:_b_.None},null,null,3),t=e.src,r=e.globals,n=e.locals;return $$eval(t,r,n,"exec"),_b_.None};exec.$is_func=!0;var exit=_b_.exit=function(){throw _b_.SystemExit};exit.__repr__=exit.__str__=function(){return"Use exit() or Ctrl-Z plus Return to exit"};var filter=_b_.filter=$B.make_class("filter",(function(e,t){return check_nb_args_no_kw("filter",2,arguments),t=iter(t),e===_b_.None&&(e=$B.$bool),{__class__:filter,func:e,iterable:t}}));function attr_error(e,t){var r=$B.get_class(t),n="bad operand type for unary #: '"+r+"'";switch(e){case"__neg__":throw _b_.TypeError.$factory(n.replace("#","-"));case"__pos__":throw _b_.TypeError.$factory(n.replace("#","+"));case"__invert__":throw _b_.TypeError.$factory(n.replace("#","~"));case"__call__":throw _b_.TypeError.$factory("'"+r+"' object is not callable");default:throw $B.attr_error(e,t)}}function in_mro(e,t){if(void 0===e)return!1;if(e.hasOwnProperty(t))return e[t];for(var r=e.__mro__,n=0,a=r.length;n<a;n++)if(r[n].hasOwnProperty(t))return r[n][t];return!1}function _get_builtins_doc(){if(void 0===$B.builtins_doc){var url=$B.brython_path;"/"==url.charAt(url.length-1)&&(url=url.substr(0,url.length-1)),url+="/builtins_docstrings.js";var f=_b_.open(url);for(var key in eval(f.$content),docs)_b_[key]&&(_b_[key].__doc__=docs[key]);$B.builtins_doc=docs}}filter.__iter__=function(e){return e},filter.__next__=function(e){for(;;){var t=next(e.iterable);if(e.func(t))return t}},$B.set_func_names(filter,"builtins"),_b_.format=function(){var e=$B.args("format",2,{value:null,format_spec:null},["value","format_spec"],arguments,{format_spec:""},null,null),t=e.value,r=t.__class__||$B.get_class(t);try{var n=$B.$getattr(r,"__format__")}catch(err){if(err.__class__===_b_.AttributeError)throw _b_.NotImplementedError("__format__ is not implemented for object '"+_b_.str.$factory(t)+"'");throw err}return $B.$call(n)(t,e.format_spec)},_b_.getattr=function(){var e={},t=$B.args("getattr",3,{obj:null,attr:null,_default:null},["obj","attr","_default"],arguments,{_default:e},null,null);if(!$B.$isinstance(t.attr,_b_.str))throw _b_.TypeError.$factory(`attribute name must be string, not '${$B.class_name(t.attr)}'`);return $B.$getattr(t.obj,_b_.str.$to_string(t.attr),t._default===e?void 0:t._default)},$B.$getattr=function(e,t,r){var n;if(void 0===e&&console.log("attr",t,"of obj undef"),e.$method_cache&&e.$method_cache[t]&&e.__class__&&e.__class__[t]==e.$method_cache[t][1])return e.$method_cache[t][0];var a=t;void 0===e&&console.log("get attr",t,"of undefined");var o,s=e.$is_class||e.$factory,i=e.__class__,_=!1;if(void 0===i&&void 0===(i=$B.get_class(e))){if(void 0!==(n=e[t])){if("function"==typeof n){var l=function(){return n.apply(e,arguments)};return l.$infos={__name__:t,__qualname__:t},l}return $B.$JS2Py(n)}if(void 0!==r)return r;throw $B.attr_error(a,e)}switch(t){case"__call__":if("function"==typeof e)return n=function(){return e.apply(null,arguments)},n.__class__=method_wrapper,n.$infos={__name__:"__call__"},n;break;case"__class__":if(i.__dict__){var c=_b_.None;if($B.$isinstance(i.__dict__,_b_.dict)&&(c=$B.$call($B.$getattr(i.__dict__,"get"))("__class__")),c!==_b_.None)return c.$is_property?c.fget(e):c}return i;case"__dict__":if(s){var u,f={};if(e.__dict__)for(u of _b_.dict.$keys_string(e.__dict__))f[u]=_b_.dict.$getitem_string(e.__dict__,u);else for(u in e)u.startsWith("$")||(f[u]=e[u]);return f.__dict__=$B.getset_descriptor.$factory(e,"__dict__"),{__class__:$B.mappingproxy,$jsobj:f,$version:0}}if(!i.$native){if(void 0!==e[t])return e[t];if(e.$infos){if(e.$infos.hasOwnProperty("__dict__"))return e.$infos.__dict__;if(e.$infos.hasOwnProperty("__func__"))return e.$infos.__func__.$infos.__dict__}return $B.obj_dict(e,(function(e){return["__class__"].indexOf(e)>-1}))}break;case"__mro__":if(e.__mro__)return _b_.tuple.$factory([e].concat(e.__mro__));if(e.__dict__&&_b_.dict.$contains_string(e.__dict__,"__mro__"))return _b_.dict.$getitem_string(e.__dict__,"__mro__");throw $B.attr_error(t,e);case"__subclasses__":if(i.$factory||i.$is_class){var p=e.$subclasses||[];return function(){return p}}}if("function"==typeof e){var h=e[t];if(void 0!==h&&"__module__"==t)return h}if(!s&&i.$native){if(e.$method_cache&&e.$method_cache[t])return e.$method_cache[t];if("__doc__"==t&&void 0===i[t]&&(_get_builtins_doc(),i[t]=$B.builtins_doc[i.__name__]),void 0===i[t]){var d=_b_.object[t];if(void 0===d){_;var m=e.__dict__;if(m&&_b_.dict.$contains_string(m,t))return _b_.dict.$getitem_string(m,t);if(void 0===r)throw $B.attr_error(t,e);return r}i[t]=d}if(i.$descriptors&&void 0!==i.$descriptors[t])return i[t](e);if("function"==typeof i[t]){var g=i[t];if("__new__"==t&&(g.$type="staticmethod"),"staticmethod"==g.$type)return g;var v=i[t].__class__==$B.method?i:e,$=i[t].bind(null,v);return $.__class__=$B.method,$.$infos={__func__:g,__name__:t,__self__:v,__qualname__:i.__qualname__+"."+t},"object"==typeof e&&(e.__class__=i,e.$method_cache=e.$method_cache||{},e.$method_cache&&(e.$method_cache[t]=$)),$}if(i[t].__class__===_b_.classmethod)return _b_.classmethod.__get__(i[t],e,i);if(void 0!==i[t])return i[t];attr_error(a,i)}if(s)o=i===_b_.type?_b_.type.__getattribute__:$B.$call($B.$getattr(i,"__getattribute__"));else if(void 0===(o=i.__getattribute__))for(var y of i.__mro__)if(void 0!==(o=y.__getattribute__))break;"function"!=typeof o&&console.log(t+" is not a function "+o,i);var b,w=_b_.object.__getattribute__;if(o===w)if(n=e[t],Array.isArray(e)&&void 0!==Array.prototype[t])n=void 0;else{if(null===n)return null;if(void 0!==n){if(n.$is_property)return _b_.property.__get__(n);if(void 0===n.__set__||n.$is_class)return n}}try{n=o(e,t)}catch(err){if(i===$B.module&&(b=e.__getattr__))try{return b(t)}catch(err){if(void 0!==r)return r;throw err}if(b=in_mro(i,"__getattr__")){_;try{return b(e,t)}catch(err){if(void 0!==r)return r;throw err}}if(void 0!==r)return r;throw err}return void 0!==n?n:void 0!==r?r:void attr_error(a,s?e:i)},_b_.globals=function(){check_nb_args_no_kw("globals",0,arguments);var e=$B.obj_dict($B.frame_obj.frame[3]);return e.$jsobj.__BRYTHON__=$B.JSObj.$factory($B),e.$is_namespace=!0,e},_b_.hasattr=function(e,t){check_nb_args_no_kw("hasattr",2,arguments);try{return $B.$getattr(e,t),!0}catch(err){return!1}},_b_.hash=function(e){return check_nb_args_no_kw("hash",1,arguments),$B.$hash(e)},$B.$hash=function(e){if(void 0!==e.__hashvalue__)return e.__hashvalue__;if("boolean"==typeof e)return e?1:0;if(e.$is_class||e.__class__===_b_.type||e.__class__===$B.function)return e.__hashvalue__=$B.$py_next_hash--;if("string"==typeof e)return _b_.str.__hash__(e);if("number"==typeof e)return e;if("boolean"==typeof e)return e?1:0;if(e.__class__===_b_.float)return _b_.float.$hash_func(e);var t=e.__class__||$B.get_class(e);if(void 0===t)throw _b_.TypeError.$factory("unhashable type: '"+_b_.str.$factory($B.JSObj.$factory(e))+"'");var r=_b_.type.__getattribute__(t,"__hash__",_b_.None);if(r===_b_.None)throw _b_.TypeError.$factory("unhashable type: '"+$B.class_name(e)+"'");if(r.$infos.__func__===_b_.object.__hash__){if(_b_.type.__getattribute__(t,"__eq__")!==_b_.object.__eq__)throw _b_.TypeError.$factory("unhashable type: '"+$B.class_name(e)+"'","hash");return e.__hashvalue__=_b_.object.__hash__(e)}return $B.$call(r)(e)};var help=_b_.help=function(e){if(void 0===e&&(e="help"),"string"==typeof e){for(var t,r,n="https://docs.python.org/3/library",a=e.split("."),o=[];a.length>0&&(o.push(a.shift()),$B.stdlib[o.join(".")]);)t=o.join(".");return t?(r=["browser","javascript","interpreter"].indexOf(e.split(".")[0])>-1?"/static_doc/"+("fr"==$B.language?"fr":"en"):n,void window.open(`${r}/${t}.html#`+e)):_b_[e]&&(e==e.toLowerCase()?t=n+`/functions.html#${e}`:["False","True","None","NotImplemented","Ellipsis","__debug__"].indexOf(e)>-1?t=n+`/constants.html#${e}`:_b_[e].$is_class&&_b_[e].__bases__.indexOf(_b_.Exception)>-1&&(t=n+`/exceptions.html#${e}`),t)?void window.open(t):($B.$import("pydoc"),$B.$call($B.$getattr($B.imported.pydoc,"help"))(e))}if(e.__class__===$B.module)return help(e.__name__);try{_b_.print($B.$getattr(e,"__doc__"))}catch(err){return""}};help.__repr__=help.__str__=function(){return"Type help() for interactive help, or help(object) for help about object."},_b_.hex=function(e){return check_nb_args_no_kw("hex",1,arguments),bin_hex_oct(16,e)},_b_.id=function(e){return check_nb_args_no_kw("id",1,arguments),void 0!==e.$id?e.$id:$B.$isinstance(e,[_b_.str,_b_.int,_b_.float])&&!$B.$isinstance(e,$B.long_int)?$B.$getattr(_b_.str.$factory(e),"__hash__")():e.$id=$B.UUID()},_b_.__import__=function(){var e=$B.args("__import__",5,{name:null,globals:null,locals:null,fromlist:null,level:null},["name","globals","locals","fromlist","level"],arguments,{globals:None,locals:None,fromlist:_b_.tuple.$factory(),level:0},null,null);return $B.$__import__(e.name,e.globals,e.locals,e.fromlist)},_b_.input=function(e){var t=prompt(e||"")||"";if($B.imported.sys&&$B.imported.sys.ps1){var r=$B.imported.sys.ps1,n=$B.imported.sys.ps2;e!=r&&e!=n||console.log(e,t)}return t},_b_.isinstance=function(e,t){return check_nb_args_no_kw("isinstance",2,arguments),$B.$isinstance(e,t)},$B.$isinstance=function(e,t){if(null===e)return t===$B.imported.javascript.NullType;if(void 0===e)return!1;var r;if(Array.isArray(t)){for(r of t)if($B.$isinstance(e,r))return!0;return!1}if(t.__class__===$B.UnionType){for(r of t.items)if($B.$isinstance(e,r))return!0;return!1}if(t.__class__===$B.GenericAlias)throw _b_.TypeError.$factory("isinstance() arg 2 cannot be a parameterized generic");if(!t.__class__&&!t.$is_class&&!$B.$getattr(t,"__instancecheck__",!1))throw _b_.TypeError.$factory("isinstance() arg 2 must be a type or tuple of types");if(t===_b_.int&&(e===True||e===False))return True;if(t===_b_.bool)switch(typeof e){case"string":case"number":return!1;case"boolean":return!0}var n=e.__class__;if(null==n){if("string"==typeof e){if(t==_b_.str)return!0;if($B.builtin_classes.indexOf(t)>-1)return!1}else if("number"==typeof e&&Number.isFinite(e)&&Number.isFinite(e)&&t==_b_.int)return!0;n=$B.get_class(e)}if(void 0===n)return!1;if(n===t)return!0;for(var a=n.__mro__,o=0;o<a.length;o++)if(a[o]===t)return!0;var s=$B.$getattr(t.__class__||$B.get_class(t),"__instancecheck__",_b_.None);return s!==_b_.None&&s(t,e)};var issubclass=_b_.issubclass=function(e,t){var r;if(check_nb_args_no_kw("issubclass",2,arguments),!e.__class__||void 0===e.$factory&&void 0===e.$is_class){if(null===$B.$getattr(e,"__class__",null))throw console.log("no class for",e),_b_.TypeError.$factory("issubclass() arg 1 must be a class");r=[_b_.object]}else r=e.__mro__;if($B.$isinstance(t,_b_.tuple)){for(var n=0;n<t.length;n++)if(issubclass(e,t[n]))return!0;return!1}if(t.__class__===$B.GenericAlias)throw _b_.TypeError.$factory("issubclass() arg 2 cannot be a parameterized generic");if(e===t||r.indexOf(t)>-1)return!0;var a=$B.$getattr(t.__class__||$B.get_class(t),"__subclasscheck__",_b_.None);return a!=_b_.None&&a(t,e)},iterator_class=$B.make_class("iterator",(function(e,t){return{__class__:iterator_class,getitem:e,len:t,counter:-1}}));iterator_class.__next__=function(e){if(e.counter++,null!==e.len&&e.counter==e.len)throw _b_.StopIteration.$factory("");try{return e.getitem(e.counter)}catch(err){throw _b_.StopIteration.$factory("")}},$B.set_func_names(iterator_class,"builtins");const callable_iterator=$B.make_class("callable_iterator",(function(e,t){return{__class__:callable_iterator,func:e,sentinel:t}}));callable_iterator.__iter__=function(e){return e},callable_iterator.__next__=function(e){var t=e.func();if($B.rich_comp("__eq__",t,e.sentinel))throw _b_.StopIteration.$factory();return t},$B.set_func_names(callable_iterator,"builtins"),$B.$iter=function(e,t){if(void 0===t){var r=e.__class__||$B.get_class(e);try{var n=$B.$call($B.$getattr(r,"__iter__"))}catch(err){if(err.__class__===_b_.AttributeError)try{var a,o=$B.$call($B.$getattr(r,"__getitem__"));try{a=a(e)}catch(err){throw _b_.TypeError.$factory("'"+$B.class_name(e)+"' object is not iterable")}return iterator_class.$factory((function(t){return o(e,t)}),a)}catch(err){throw _b_.TypeError.$factory("'"+$B.class_name(e)+"' object is not iterable")}throw err}var s=$B.$call(n)(e);try{$B.$getattr(s,"__next__")}catch(err){if($B.$isinstance(err,_b_.AttributeError))throw _b_.TypeError.$factory("iter() returned non-iterator of type '"+$B.class_name(s)+"'")}return s}return callable_iterator.$factory(e,t)};var iter=_b_.iter=function(){var e,t=$B.args("iter",1,{obj:null},["obj"],arguments,{},"args","kw");return t.args.length>0&&(e=t.args[0]),$B.$iter(t.obj,e)},len=_b_.len=function(e){check_nb_args_no_kw("len",1,arguments);var t=e.__class__||$B.get_class(e);try{var r=$B.$getattr(t,"__len__")}catch(err){throw _b_.TypeError.$factory("object of type '"+$B.class_name(e)+"' has no len()")}return $B.$call(r)(e)};_b_.locals=function(){check_nb_args("locals",0,arguments);var e=$B.frame_obj.frame[1],t=e.$target;if(t)return t;var r=$B.obj_dict($B.clone(e),(function(e){return e.startsWith("$")}));return r.$is_namespace=!0,r};var map=_b_.map=$B.make_class("map",(function(){var e=$B.args("map",2,{func:null,it1:null},["func","it1"],arguments,{},"args",null),t=$B.$call(e.func),r=[$B.make_js_iterator(e.it1)];for(var n of e.args)r.push($B.make_js_iterator(n));var a={__class__:map,args:r,func:t};return a[Symbol.iterator]=function(){for(var e of(this.iters=[],this.args))this.iters.push(e[Symbol.iterator]());return this},a.next=function(){var e=[];for(var t of this.iters){var r=t.next();if(r.done)return{done:!0,value:null};e.push(r.value)}return{done:!1,value:this.func.apply(null,e)}},a}));function $extreme(e,t){var r="min";"__gt__"===t&&(r="max");var n,a=$B.args(r,0,{},[],e,{},"args","kw"),o=!1,s=!1;for(var i in a.kw.$jsobj)switch(i){case"key":s=(s=a.kw.$jsobj[i])===_b_.None?s:$B.$call(s);break;case"default":var _=a.kw.$jsobj[i];o=!0;break;default:throw _b_.TypeError.$factory("'"+i+"' is an invalid keyword argument for this function")}if(s&&s!==_b_.None||(s=e=>e),0==a.args.length)throw _b_.TypeError.$factory(r+" expected 1 arguments, got 0");if(1==a.args.length){var l,c,u=$B.make_js_iterator(a.args[0]),f=null;for(var p of u)null===f?(c=s(p),f=p):(l=s(p),$B.rich_comp(t,l,c)&&(f=p,c=l));if(null===f){if(o)return _;throw _b_.ValueError.$factory(r+"() arg is an empty sequence")}return f}if(o)throw _b_.TypeError.$factory("Cannot specify a default for "+r+"() with multiple positional arguments");return n=$B.last(e).$kw?[a.args].concat($B.last(e)):[a.args],$extreme.call(null,n,t)}map.__iter__=function(e){return e[Symbol.iterator](),e},map.__next__=function(e){var t=[];for(var r of e.iters){var n=r.next();if(n.done)throw _b_.StopIteration.$factory("");t.push(n.value)}return e.func.apply(null,t)},$B.set_func_names(map,"builtins"),_b_.max=function(){return $extreme(arguments,"__gt__")};var memoryview=_b_.memoryview=$B.make_class("memoryview",(function(e){if(check_nb_args_no_kw("memoryview",1,arguments),e.__class__===memoryview)return e;if($B.get_class(e).$buffer_protocol)return{__class__:memoryview,obj:e,format:"B",itemsize:1,ndim:1,shape:_b_.tuple.$factory([_b_.len(e)]),strides:_b_.tuple.$factory([1]),suboffsets:_b_.tuple.$factory([]),c_contiguous:!0,f_contiguous:!0,contiguous:!0};throw _b_.TypeError.$factory("memoryview: a bytes-like object is required, not '"+$B.class_name(e)+"'")}));memoryview.$match_sequence_pattern=!0,memoryview.$buffer_protocol=!0,memoryview.$not_basetype=!0,memoryview.__eq__=function(e,t){return t.__class__===memoryview&&$B.$getattr(e.obj,"__eq__")(t.obj)},memoryview.__getitem__=function(e,t){var r;if($B.$isinstance(t,_b_.int)){var n=t*e.itemsize;if("I"==e.format){r=e.obj.source[n];for(var a=256,o=1;o<4;o++)r+=e.obj.source[n+o]*a,a*=256;return r}if("B".indexOf(e.format)>-1){if(t>e.obj.source.length-1)throw _b_.KeyError.$factory(t);return e.obj.source[t]}return e.obj.source[t]}if(r=e.obj.__class__.__getitem__(e.obj,t),t.__class__===_b_.slice)return memoryview.$factory(r)},memoryview.__len__=function(e){return len(e.obj)/e.itemsize},memoryview.__setitem__=function(e,t,r){try{$B.$setitem(e.obj,t,r)}catch(err){throw _b_.TypeError.$factory("cannot modify read-only memory")}},memoryview.cast=function(e,t){switch(t){case"B":return memoryview.$factory(e.obj);case"I":var r=memoryview.$factory(e.obj),n=len(e.obj);if(r.itemsize=4,r.format="I",n%4!=0)throw _b_.TypeError.$factory("memoryview: length is not a multiple of itemsize");return r}},memoryview.hex=function(e){var t="";return _b_.bytes.$factory(e).source.forEach((function(e){t+=e.toString(16)})),t},memoryview.tobytes=function(e){return{__class__:_b_.bytes,source:e.obj.source}},memoryview.tolist=function(e){if(1==e.itemsize)return _b_.list.$factory(_b_.bytes.$factory(e.obj));if(4==e.itemsize&&"I"==e.format){for(var t=[],r=0;r<e.obj.source.length;r+=4){for(var n=e.obj.source[r],a=256,o=1;o<4;o++)n+=a*e.obj.source[r+o],a*=256;t.push(n)}return t}},$B.set_func_names(memoryview,"builtins"),_b_.min=function(){return $extreme(arguments,"__lt__")};var next=_b_.next=function(e){check_no_kw("next",e);var t={},r=$B.args("next",2,{obj:null,def:null},["obj","def"],arguments,{def:t},null,null),n=e.__class__||$B.get_class(e),a=$B.$call($B.$getattr(n,"__next__"));if(void 0!==a)try{return $B.$call(a)(e)}catch(err){if(err.__class__===_b_.StopIteration&&r.def!==t)return r.def;throw err}throw _b_.TypeError.$factory("'"+$B.class_name(e)+"' object is not an iterator")},NotImplementedType=$B.NotImplementedType=$B.make_class("NotImplementedType",(function(){return NotImplemented}));NotImplementedType.__repr__=NotImplementedType.__str__=function(){return"NotImplemented"},$B.set_func_names(NotImplementedType,"builtins");var NotImplemented=_b_.NotImplemented={__class__:NotImplementedType};_b_.oct=function(e){return check_nb_args_no_kw("oct",1,arguments),bin_hex_oct(8,e)},_b_.ord=function(e){if(check_nb_args_no_kw("ord",1,arguments),"string"==typeof e.valueOf()){if(1==e.length)return e.charCodeAt(0);if(2==e.length){var t=e.codePointAt(0);if(t>=65536&&t<=131071||t>=131072&&t<=196607||t>=196608&&t<=262143||t>=851968&&t<=917503||t>=917504&&t<=1048575)return t}throw _b_.TypeError.$factory("ord() expected a character, but string of length "+e.length+" found")}switch($B.get_class(e)){case _b_.str:if(1==e.length)return e.charCodeAt(0);throw _b_.TypeError.$factory("ord() expected a character, but string of length "+e.length+" found");case _b_.bytes:case _b_.bytearray:if(1==e.source.length)return e.source[0];throw _b_.TypeError.$factory("ord() expected a character, but string of length "+e.source.length+" found");default:throw _b_.TypeError.$factory("ord() expected a character, but "+$B.class_name(e)+" was found")}};var complex_modulo=()=>_b_.ValueError.$factory("complex modulo"),all_ints=()=>_b_.TypeError.$factory("pow() 3rd argument not allowed unless all arguments are integers");_b_.pow=function(){var e=$B.args("pow",3,{x:null,y:null,mod:null},["x","y","mod"],arguments,{mod:None},null,null),t=e.x,r=e.y,n=e.mod;if(n===_b_.None)return $B.rich_op("__pow__",t,r);if($B.$isinstance(t,_b_.int)){if($B.$isinstance(r,_b_.float))throw all_ints();if($B.$isinstance(r,_b_.complex))throw complex_modulo();if($B.$isinstance(r,_b_.int)){if($B.$isinstance(n,_b_.complex))throw complex_modulo();if(!$B.$isinstance(n,_b_.int))throw all_ints()}return _b_.int.__pow__(t,r,n)}if($B.$isinstance(t,_b_.float))throw all_ints();if($B.$isinstance(t,_b_.complex))throw complex_modulo()};var $print=_b_.print=function(){for(var e=$B.args("print",0,{},[],arguments,{},"args","kw"),t=e.kw,r=$B.is_none(t.$jsobj.end)?"\n":t.$jsobj.end,n=$B.is_none(t.$jsobj.sep)?" ":t.$jsobj.sep,a=$B.is_none(t.$jsobj.file)?$B.get_stdout():t.$jsobj.file,o=e.args,s=$B.$getattr(a,"write"),i=0,_=o.length;i<_;i++){s(_b_.str.$factory(o[i])),i<_-1&&s(n)}s(r);var l=$B.$getattr(a,"flush",None);return l!==None&&$B.$call(l)(),None};$print.__name__="print",$print.is_func=!0;var quit=_b_.quit=function(){throw _b_.SystemExit};quit.__repr__=quit.__str__=function(){return"Use quit() or Ctrl-Z plus Return to exit"};var repr=_b_.repr=function(e){check_nb_args_no_kw("repr",1,arguments);var t=e.__class__||$B.get_class(e);return $B.$call($B.$getattr(t,"__repr__"))(e)},reversed=_b_.reversed=$B.make_class("reversed",(function(e){check_nb_args_no_kw("reversed",1,arguments);var t=e.__class__||$B.get_class(e),r=$B.$getattr(t,"__reversed__",null);if(null!==r)return $B.$call(r)(e);try{var n=$B.$getattr(t,"__getitem__")}catch(err){throw _b_.TypeError.$factory("argument to reversed() must be a sequence")}return{__class__:reversed,$counter:_b_.len(e),getter:function(t){return $B.$call(n)(e,t)}}}));reversed.__iter__=function(e){return e},reversed.__next__=function(e){if(e.$counter--,e.$counter<0)throw _b_.StopIteration.$factory("");return e.getter(e.$counter)},$B.set_func_names(reversed,"builtins"),_b_.round=function(){var e,t=$B.args("round",2,{number:null,ndigits:null},["number","ndigits"],arguments,{ndigits:None},null,null),r=t.number,n=t.ndigits===None?0:t.ndigits;if(!$B.$isinstance(r,[_b_.int,_b_.float])){e=r.__class__||$B.get_class(r);try{return $B.$call($B.$getattr(e,"__round__")).apply(null,arguments)}catch(err){throw err.__class__===_b_.AttributeError?_b_.TypeError.$factory("type "+$B.class_name(r)+" doesn't define __round__ method"):err}}if(!$B.$isinstance(n,_b_.int))throw _b_.TypeError.$factory("'"+$B.class_name(n)+"' object cannot be interpreted as an integer");if(e=$B.get_class(r),$B.$isinstance(r,_b_.float))return _b_.float.__round__(r,t.ndigits);var a,o=Math.pow(10,n),s=r*o,i=Math.floor(s);if(.5==Math.abs(s-i)?(i%2&&(i+=1),a=_b_.int.__truediv__(i,o)):a=_b_.int.__truediv__(Math.round(s),o),a.value===1/0||a.value===-1/0)throw _b_.OverflowError.$factory("rounded value too large to represent");return t.ndigits===None?Math.floor(a.value):$B.$call(e)(a)},_b_.setattr=function(){var e=$B.args("setattr",3,{obj:null,attr:null,value:null},["obj","attr","value"],arguments,{},null,null),t=e.obj,r=e.attr,n=e.value;if("string"!=typeof r)throw _b_.TypeError.$factory("setattr(): attribute name must be string");return $B.$setattr(t,r,n)},$B.$setattr=function(e,t,r){void 0===e&&console.log("obj undef",t,r);if("__dict__"==t){if(!$B.$isinstance(r,_b_.dict))throw _b_.TypeError.$factory("__dict__ must be set to a dictionary, not a '"+$B.class_name(r)+"'");return e.$infos?(e.$infos.__dict__=r,None):(e.__dict__=r,None)}if("__class__"==t){function n(e){throw _b_.TypeError.$factory(e)}if(r.__class__)if("builtins"==r.__module__)n("__class__ assignement only supported for heap types or ModuleType subclasses");else if(Array.isArray(r.__bases__))for(var a=0;a<r.__bases__.length;a++)r.__bases__[a]!==_b_.object&&"builtins"==r.__bases__[a].__module__&&n("__class__ assignment: '"+$B.class_name(e)+"' object layout differs from '"+$B.class_name(r)+"'");return e.__class__=r,None}if("__doc__"==t&&e.__class__===_b_.property&&(e[t]=r),e.$factory||e.$is_class){var o=e.__class__;return o===_b_.type?_b_.type.__setattr__(e,t,r):$B.$call($B.$getattr(o,"__setattr__"))(e,t,r)}var s=e[t],i=e.__class__||$B.get_class(e);if(void 0===s&&i&&void 0===(s=i[t]))for(var _ of i.__mro__)if(void 0!==(s=_[t]))break;if(null!=s){if(void 0!==s.__set__)return s.__set__(s,e,r),None;var l,c=s.__class__;if(void 0!==c&&void 0===(l=c.__set__))for(var u of c.__mro__)if(l=u.__set__)break;if(void 0!==l){var f=$B.$getattr(s,"__set__",null);if(f&&"function"==typeof f)return f.apply(s,[e,r]),None}else if(i&&void 0!==i.$descriptors&&void 0!==i[t]){var p=i[t].setter;if("function"==typeof p)return p(e,r),None;throw _b_.AttributeError.$factory("readonly attribute")}}var h=!1;if(void 0!==i&&void 0===(h=i.__setattr__))for(var d=0,m=i.__mro__.length-1;d<m&&!(h=i.__mro__[d].__setattr__);d++);if(i&&i.__slots__&&-1==["__module__"].indexOf(t)&&!h){var g=!0;for(var v of i.__mro__){if(v===_b_.object||v===_b_.type)break;if(!v.__slots__){g=!1;break}}if(g){function $(e){return e.__slots__?Array.isArray(e.__slots__)?e.__slots__.map((function(t){return t.startsWith("__")&&!t.endsWith("_")?"_"+e.__name__+t:t})):e.__slots__:[]}var y=!1;if($B.$is_member(t,$(i)))y=!0;else for(var b of i.__mro__)if($(b).indexOf(t)>-1){y=!0;break}if(!y)throw $B.attr_error(t,i)}}return h?h(e,t,r):void 0===e.__dict__?e[t]=r:_b_.dict.$setitem(e.__dict__,t,r),None},_b_.sorted=function(){var e=$B.args("sorted",1,{iterable:null},["iterable"],arguments,{},null,"kw"),t=_b_.list.$factory(e.iterable),r=[t].concat(Array.from(arguments).slice(1));return _b_.list.sort.apply(null,r),t},_b_.sum=function(){var e=$B.args("sum",2,{iterable:null,start:null},["iterable","start"],arguments,{start:0},null,null),t=e.iterable,r=e.start;if($B.$isinstance(r,[_b_.str,_b_.bytes]))throw _b_.TypeError.$factory("sum() can't sum bytes [use b''.join(seq) instead]");var n=r;for(t=iter(t);;)try{var a=next(t);n=$B.rich_op("__add__",n,a)}catch(err){if(err.__class__===_b_.StopIteration)break;throw err}return n},$B.missing_super2=function(e){return e.$missing=!0,e};var $$super=_b_.super=$B.make_class("super",(function(e,t){var r,n=void 0===t;if(void 0===e&&void 0===t){var a=$B.frame_obj.frame,o=$B.imported._sys._getframe(),s=$B.frame.f_code.__get__(o);if(!(s.co_varnames.length>0))throw _b_.RuntimeError.$factory("super(): no arguments");if(void 0===(e=a[1].__class__))throw _b_.RuntimeError.$factory("super(): no arguments");t=a[1][s.co_varnames[0]]}if(!n&&Array.isArray(t)&&(t=t[0]),void 0!==t)if(t===e||t.$is_class&&_b_.issubclass(t,e))r="type";else{if(!$B.$isinstance(t,e))throw _b_.TypeError.$factory("super(type, obj): obj must be an instance or subtype of type");r="object"}return{__class__:$$super,__thisclass__:e,__self_class__:t,$arg2:r}}));$$super.__get__=function(e,t){return $$super.$factory(e.__thisclass__,t)},$$super.__getattribute__=function(e,t){if(e.__thisclass__.$is_js_class&&"__init__"==t)return function(){o[0].$js_func.call(e.__self_class__,...arguments)};var r,n,a=e.__self_class__,o="type"==e.$arg2?a.__mro__:$B.get_class(a).__mro__,s=o.indexOf(e.__thisclass__)+1,i=o.slice(s),_="new"==t;for(var l of(_&&console.log("super.__ga__, self",e,"search classes",i),i))if(void 0===l&&(console.log("klass undef in super",e),console.log("mro",o)),void 0!==l[t]){r=l[t];break}if(void 0===r){if(void 0!==$$super[t])return n=e,function(){for(var e=[n],r=0,a=arguments.length;r<a;r++)e.push(arguments[r]);return $$super[t].apply(null,e)};throw _&&console.log("no attr",t,e,"mro",o),$B.attr_error(t,e)}if(_&&console.log("super",t,e,"mro",o,"found in mro[0]",o[0],r,r+""),"staticmethod"==r.$type||"__new__"==t)return r;if(r.__class__===_b_.classmethod)return r.__func__.bind(null,a);if(r.$is_property)return r.fget(a);if("function"!=typeof r)return r;r.__class__===$B.method&&(r=r.$infos.__func__);var c,u=$B.$call(r),f=function(){var n=u(e.__self_class__,...arguments);return _&&console.log("calling super",e.__self_class__,t,r,"res",n),n};return f.__class__=$B.method,void 0!==r.$infos?c=r.$infos.__module__:r.__class__===_b_.property?c=r.fget.$infos.__module:r.$is_class&&(c=r.__module__),f.$infos={__self__:e.__self_class__,__func__:r,__name__:t,__module__:c,__qualname__:l.__name__+"."+t},f},$$super.__init__=function(e){if(void 0===e)throw _b_.TypeError.$factory("descriptor '__init__' of 'super' object needs an argument");if(e.__class__!==$$super)throw _b_.TypeError.$factory("descriptor '__init__' requires a 'super' object but received a '"+$B.class_name(e)+"'")},$$super.__repr__=function(e){$B.builtins_repr_check($$super,arguments);var t="<super: <class '"+e.__thisclass__.__name__+"'>";return void 0!==e.__self_class__?t+=", <"+e.__self_class__.__class__.__name__+" object>":t+=", NULL",t+">"},$B.set_func_names($$super,"builtins"),_b_.vars=function(){var e={},t=$B.args("vars",1,{obj:null},["obj"],arguments,{obj:e},null,null);if(t.obj===e)return _b_.locals();try{return $B.$getattr(t.obj,"__dict__")}catch(err){if(err.__class__===_b_.AttributeError)throw _b_.TypeError.$factory("vars() argument must have __dict__ attribute");throw err}};var $Reader=$B.make_class("Reader");function make_lines(e){if(void 0===e.$lines)if(e.$binary){for(var t=[],r=0,n=e.$content.source;r<e.$length;){var a=n.indexOf(10,r);if(-1==a){t.push({__class__:_b_.bytes,source:n.slice(r)});break}t.push({__class__:_b_.bytes,source:n.slice(r,a+1)}),r=a+1}e.$lines=t}else e.$lines=e.$content.split("\n"),""==$B.last(e.$lines)&&e.$lines.pop(),e.$lines=e.$lines.map((e=>e+"\n"))}$Reader.__bool__=function(){return!0},$Reader.__enter__=function(e){return e},$Reader.__exit__=function(){return!1},$Reader.__init__=function(e,t=""){e.$content=t,e.$counter=0},$Reader.__iter__=function(e){return iter($Reader.readlines(e))},$Reader.__len__=function(e){return e.lines.length},$Reader.__new__=function(e){return{__class__:e}},$Reader.close=function(e){e.closed=!0},$Reader.flush=function(){return None},$Reader.read=function(){var e,t=$B.args("read",2,{self:null,size:null},["self","size"],arguments,{size:-1},null,null),r=t.self,n=$B.$GetInt(t.size);if(!0===r.closed)throw _b_.ValueError.$factory("I/O operation on closed file");return n<0&&(n=r.$length-r.$counter),e=r.$binary?_b_.bytes.$factory(r.$content.source.slice(r.$counter,r.$counter+n)):r.$content.substr(r.$counter,n),r.$counter+=n,e},$Reader.readable=function(){return!0},$Reader.readline=function(){var e,t,r,n=$B.args("readline",2,{self:null,size:null},["self","size"],arguments,{size:-1},null,null),a=n.self,o=n.size;if(o===_b_.None)o=-1;else{if(!_b_.isinstance(o,_b_.int))throw _b_.TypeError.$factory(`argument should be integer or None, not '${$B.class_name(o)}'`);o=_b_.int.$int_value(o)}if(a.$lc=void 0===a.$lc?-1:a.$lc,!0===a.closed)throw _b_.ValueError.$factory("I/O operation on closed file");if(a.$binary){if(-1==(r=a.$content.source.indexOf(10,a.$counter)))return t=a.$content.source.slice(a.$counter),o>-1&&(t=t.slice(0,o)),a.$counter=a.$content.source.length,_b_.bytes.$factory(t);var s=a.$content.source.slice(a.$counter,r+1);return o>-1&&(s=s.slice(0,o)),e={__class__:_b_.bytes,source:s},a.$counter=r+1,e}return a.$counter==a.$content.length?"":-1==(r=a.$content.indexOf("\n",a.$counter))?(t=a.$content.substr(a.$counter),o>-1&&(t=t.substr(0,o)),a.$counter=a.$content.length,t):(e=a.$content.substring(a.$counter,r+1),o>-1&&(e=e.substr(0,o)),a.$counter=r+1,a.$lc+=1,e)},$Reader.readlines=function(){var e,t=$B.args("readlines",2,{self:null,hint:null},["self","hint"],arguments,{hint:-1},null,null),r=t.self,n=$B.$GetInt(t.hint);if(!0===r.closed)throw _b_.ValueError.$factory("I/O operation on closed file");if(r.$lc=void 0===r.$lc?-1:r.$lc,make_lines(r),n<0)e=r.$lines.slice(r.$lc+1);else for(e=[];r.$lc<r.$lines.length&&0<n;)r.$lc++,e.push(r.$lines[r.$lc]);return e},$Reader.seek=function(e,t,r){if(e.closed===True)throw _b_.ValueError.$factory("I/O operation on closed file");return void 0===r&&(r=0),0===r?e.$counter=t:1===r?e.$counter+=t:2===r&&(e.$counter=e.$length+t),None},$Reader.seekable=function(){return!0},$Reader.tell=function(e){return e.$counter},$Reader.write=function(e,t){if(-1==e.mode.indexOf("w"))throw void 0===$B.$io.UnsupportedOperation&&($B.$io.UnsupportedOperation=$B.$class_constructor("UnsupportedOperation",{},[_b_.Exception],["Exception"])),$B.$call($B.$io.UnsupportedOperation)("not writable");if(-1==e.mode.indexOf("b")){if("string"!=typeof t)throw _b_.TypeError.$factory(`write() argument must be str, not ${$B.class_name(t)}`);e.$content+=t}else{if(!$B.$isinstance(t,[_b_.bytes,_b_.bytearray]))throw _b_.TypeError.$factory(`write() argument must be bytes, not ${$B.class_name(t)}`);e.$content.source=e.$content.source.concat(t.source)}$B.file_cache[e.name]=e.$content},$Reader.writable=function(){return!1},$B.set_func_names($Reader,"builtins");var $BufferedReader=$B.make_class("_io.BufferedReader",(function(e){return{__class__:$BufferedReader,$binary:!0,$content:e,$read_func:$B.$getattr(e,"read")}}));$BufferedReader.__mro__=[$Reader,_b_.object],$BufferedReader.read=function(e,t){return void 0===e.$read_func?$Reader.read(e,void 0===t?-1:t):e.$read_func(t||-1)};var $TextIOWrapper=$B.make_class("_io.TextIOWrapper",(function(){var e=$B.args("TextIOWrapper",6,{buffer:null,encoding:null,errors:null,newline:null,line_buffering:null,write_through:null},["buffer","encoding","errors","newline","line_buffering","write_through"],arguments,{encoding:"utf-8",errors:_b_.None,newline:_b_.None,line_buffering:_b_.False,write_through:_b_.False},null,null);return{__class__:$TextIOWrapper,$content:_b_.bytes.decode(e.buffer.$content,e.encoding),encoding:e.encoding,errors:e.errors,newline:e.newline}}));$TextIOWrapper.__mro__=[$Reader,_b_.object],$B.set_func_names($TextIOWrapper,"builtins"),$B.Reader=$Reader,$B.TextIOWrapper=$TextIOWrapper,$B.BufferedReader=$BufferedReader,_b_.open=function(){var e=$B.args("open",3,{file:null,mode:null,encoding:null},["file","mode","encoding"],arguments,{mode:"r",encoding:"utf-8"},"args","kw"),t=e.file,r=e.mode,n=e.encoding,a={};"locale"==n&&(n="utf-8");var o=r.search("b")>-1;if(r.search("w")>-1)return(a={$binary:o,$content:o?_b_.bytes.$factory():"",$encoding:n,closed:False,mode:r,name:t}).__class__=o?$BufferedReader:$TextIOWrapper,$B.file_cache[t]=a.$content,a;if(-1==["r","rb"].indexOf(r))throw _b_.ValueError.$factory("Invalid mode '"+r+"'");if($B.$isinstance(t,_b_.str)){if($B.file_cache.hasOwnProperty(e.file)){var s=$B.file_cache[e.file];a.content=s,o&&"string"==typeof s?a.content=_b_.str.encode(s,"utf-8"):s.__class__!==_b_.bytes||o||(a.content=_b_.bytes.decode(s,n))}else if($B.files&&$B.files.hasOwnProperty(e.file)){var i=atob($B.files[e.file].content),_=[];for(const e of i)_.push(e.charCodeAt(0));if(a.content=_b_.bytes.$factory(_),!o)try{a.content=_b_.bytes.decode(a.content,n)}catch(f){a.error=f}}else{if("file"==$B.protocol)throw _b_.FileNotFoundError.$factory("cannot use 'open()' with protocol 'file'");var l=new XMLHttpRequest;l.overrideMimeType("text/plain;charset=x-user-defined"),l.onreadystatechange=function(){if(4==this.readyState){var e=this.status;if(404==e)a.error=_b_.FileNotFoundError.$factory(t);else if(200!=e)a.error=_b_.IOError.$factory("Could not open file "+t+" : status "+e);else{for(var r=[],s=0,i=this.response.length;s<i;s++){var _=this.response.codePointAt(s);_>63232&&(_-=63232),r.push(_)}if(a.content=_b_.bytes.$factory(r),!o)try{a.content=_b_.bytes.decode(a.content,n)}catch(f){a.error=f}}}};var c=$B.get_option("cache")?"":"?foo="+(new Date).getTime();l.open("GET",encodeURI(t+c),!1),l.send()}if(void 0!==a.error)throw a.error;var u={$binary:o,$content:a.content,$counter:0,$encoding:n,$length:o?a.content.source.length:a.content.length,closed:False,mode:r,name:t};return u.__class__=o?$BufferedReader:$TextIOWrapper,u}throw _b_.TypeError.$factory("invalid argument for open(): "+_b_.str.$factory(t))};var zip=_b_.zip=$B.make_class("zip",(function(){if(0==arguments.length)return{__class__:zip,items:[]};var e=$B.args("zip",0,{},[],arguments,{},"args","kw"),t=e.args,r=$B.$bool(e.kw.$jsobj.strict||!1),n=[];for(var a of t)n.push($B.make_js_iterator(a));return{__class__:zip,iters:n,strict:r}}));function no_set_attr(e,t){throw void 0!==e[t]?_b_.AttributeError.$factory("'"+e.__name__+"' object attribute '"+t+"' is read-only"):$B.attr_error(t,e)}zip.__iter__=function(e){return e},zip.__next__=function(e){for(var t=[],r=e.iters.length,n=0;n<r;n++){var a=e.iters[n].next();if(a.done){if(e.strict){if(n>0)throw _b_.ValueError.$factory(`zip() argument ${n+1} is longer than argument ${n}`);for(var o=1;o<r;o++){if(!e.iters[o].next().done)throw _b_.ValueError.$factory(`zip() argument ${o+1} is longer than argument ${n+1}`)}}throw _b_.StopIteration.$factory("")}t.push(a.value)}return $B.fast_tuple(t)},$B.set_func_names(zip,"builtins");var True=_b_.True=!0,False=_b_.False=!1,ellipsis=$B.ellipsis=$B.make_class("ellipsis",(function(){return Ellipsis}));ellipsis.__repr__=function(){return"Ellipsis"};var Ellipsis=_b_.Ellipsis={__class__:ellipsis};for(var comp in $B.$comps)switch($B.$comps[comp]){case"ge":case"gt":case"le":case"lt":ellipsis["__"+$B.$comps[comp]+"__"]=function(){return _b_.NotImplemented}}$B.set_func_names(ellipsis);var FunctionCode=$B.make_class("function code"),FunctionGlobals=$B.make_class("function globals");$B.function={__class__:_b_.type,__code__:{__class__:FunctionCode,__name__:"function code"},__globals__:{__class__:FunctionGlobals,__name__:"function globals"},__mro__:[_b_.object],__name__:"function",__qualname__:"function",$is_class:!0},$B.function.__delattr__=function(e,t){if("__dict__"==t)throw _b_.TypeError.$factory("can't deleted function __dict__")},$B.function.__dir__=function(e){var t=e.$infos||{},r=e.$attrs||{};return Object.keys(t).concat(Object.keys(r)).filter((e=>!e.startsWith("$")))},$B.function.__get__=function(e,t){return t===_b_.None?e:$B.method.$factory(e,t)},$B.function.__getattribute__=function(e,t){if(!e.$infos||void 0===e.$infos[t]){if(e.$infos&&e.$infos.__dict__&&_b_.dict.$contains_string(e.$infos.__dict__,t))return _b_.dict.$getitem_string(e.$infos.__dict__,t);if("__closure__"==t){var r=e.$infos.__code__.co_freevars;if(0==r.length)return None;for(var n=[],a=0;a<r.length;a++)try{n.push($B.cell.$factory($B.$check_def_free(r[a])))}catch(err){n.push($B.cell.$factory(None))}return _b_.tuple.$factory(n)}return"__builtins__"==t?e.$infos&&e.$infos.__globals__?_b_.dict.$getitem(e.$infos.__globals__,"__builtins__"):$B.obj_dict(_b_):"__globals__"==t?$B.obj_dict($B.imported[e.$infos.__module__]):e.$attrs&&void 0!==e.$attrs[t]?e.$attrs[t]:_b_.object.__getattribute__(e,t)}if("__code__"==t){var o={__class__:code};for(var s in e.$infos.__code__)o[s]=e.$infos.__code__[s];return o.name=e.$infos.__name__,o.filename=e.$infos.__code__.co_filename,o.co_code=e+"",o}return"__annotations__"==t?$B.obj_dict(e.$infos[t]):e.$infos.hasOwnProperty(t)?e.$infos[t]:void 0},$B.function.__repr__=function(e){return void 0===e.$infos?"<function "+e.name+">":"<function "+e.$infos.__qualname__+">"},$B.function.__mro__=[_b_.object],$B.make_function_infos=function(e,t,r,n,a,o,s,i,_,l,c,u,f,p,h,d,m,g,v,$){e.$is_func=!0,e.$infos={__module__:t,__defaults__:r,__globals__:n,__kwdefaults__:a,__doc__:o,arg_names:s,vararg:i,kwarg:_},e.$infos.__name__=d,e.$infos.__qualname__=v,e.$infos.__code__={co_argcount:l,co_filename:c,co_firstlineno:u,co_flags:f,co_freevars:p,co_kwonlyargcount:h,co_name:d,co_nlocals:m,co_posonlyargcount:g,co_qualname:v,co_varnames:$}},$B.make_function_defaults=function(e){if(void 0===e.$infos||void 0===e.$infos.__code__)throw _b_.AttributeError.$factory(`cannot set defauts to ${_b_.str.$factory(e)}`);const t=e.$infos.__code__.co_varnames,r=e.$infos.__defaults__,n=(e.$infos.__code__.co_argcount,r.length,new Map);var a=e.$infos.__kwdefaults__===_b_.None?0:_b_.dict.__len__(e.$infos.__kwdefaults__);if(e.$infos.__kwdefaults__!==_b_.None){const t=e.$infos.__kwdefaults__;for(let e of $B.make_js_iterator(t))n.set(e,$B.$getitem(t,e))}e.$kwdefaults=n,e.$kwdefaults_values=[...n.values()],e.$hasParams=new Set;for(let d=e.$infos.__code__.co_posonlyargcount;d<t.length;++d)e.$hasParams.add(t[d]);const o=e.$infos,s=o.__code__,i=$B.getArgs0.DEFAULTS,_=s.co_kwonlyargcount,l=a;let c=i.NONE;l>0&&(c=l>=_?i.ALL:i.SOME);const u=s.co_posonlyargcount,f=s.co_argcount-u;let p=i.NONE;0!==f&&r.length>0&&(p=r.length>=f?i.ALL:i.SOME);let h=i.NONE;return r.length>f&&(h=r.length>=s.co_argcount?i.ALL:i.SOME),e.$args_parser=e.$infos.args_parser=$B.getArgs0(0!==u,h,0!==f,p,null!==o.vararg,0!==_,c,null!==o.kwarg),_b_.None},$B.function.__setattr__=function(e,t,r){if("__closure__"==t)throw _b_.AttributeError.$factory("readonly attribute");if("__defaults__"==t){if(r===_b_.None)r=[];else if(!$B.$isinstance(r,_b_.tuple))throw _b_.TypeError.$factory("__defaults__ must be set to a tuple object");if(!e.$infos)throw _b_.AttributeError.$factory("cannot set attribute "+t+" of "+_b_.str.$factory(e));e.$infos.__defaults__=r,$B.make_function_defaults(e)}else if("__kwdefaults__"==t){if(r===_b_.None)r=$B.empty_dict;else if(!$B.$isinstance(r,_b_.dict))throw _b_.TypeError.$factory("__kwdefaults__ must be set to a dict object");if(!e.$infos)throw _b_.AttributeError.$factory("cannot set attribute "+t+" of "+_b_.str.$factory(e));e.$infos.__kwdefaults__=r,$B.make_function_defaults(e)}void 0!==e.$infos[t]?e.$infos[t]=r:(e.$attrs=e.$attrs||{},e.$attrs[t]=r)},$B.function.$factory=function(){},$B.set_func_names($B.function,"builtins"),_b_.__BRYTHON__=__BRYTHON__,$B.builtin_funcs=["__build_class__","abs","aiter","all","anext","any","ascii","bin","breakpoint","callable","chr","compile","delattr","dir","divmod","eval","exec","exit","format","getattr","globals","hasattr","hash","help","hex","id","input","isinstance","issubclass","iter","len","locals","max","min","next","oct","open","ord","pow","print","quit","repr","round","setattr","sorted","sum","vars"];var builtin_function=$B.builtin_function_or_method=$B.make_class("builtin_function_or_method",(function(e){return e.__class__=builtin_function,e}));builtin_function.__getattribute__=$B.function.__getattribute__,builtin_function.__reduce_ex__=builtin_function.__reduce__=function(e){return e.$infos.__name__},builtin_function.__repr__=builtin_function.__str__=function(e){return"<built-in function "+e.$infos.__name__+">"},$B.set_func_names(builtin_function,"builtins");var method_wrapper=$B.make_class("method_wrapper");method_wrapper.__repr__=method_wrapper.__str__=function(e){return"<method wrapper '"+e.$infos.__name__+"' of function object>"},$B.set_func_names(method_wrapper,"builtins"),$B.builtin_classes=["bool","bytearray","bytes","classmethod","complex","dict","enumerate","filter","float","frozenset","int","list","map","memoryview","object","property","range","reversed","set","slice","staticmethod","str","super","tuple","type","zip"];var other_builtins=["Ellipsis","False","None","True","__debug__","__import__","copyright","credits","license","NotImplemented"],builtin_names=$B.builtin_funcs.concat($B.builtin_classes).concat(other_builtins);for(var name of builtin_names)try{$B.builtin_funcs.indexOf(name)>-1&&(_b_[name].__class__=builtin_function,_b_[name].$infos={__module__:"builtins",__name__:name,__qualname__:name})}catch(err){}_b_.object.__init__.__class__=$B.wrapper_descriptor,_b_.object.__new__.__class__=builtin_function}(__BRYTHON__),function(e){var t=e.builtins,r=32,n=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function a(e){return e<1e5?e<100?e<10?0:1:e<1e4?e<1e3?2:3:4:e<1e7?e<1e6?5:6:e<1e9?e<1e8?7:8:9}function o(e,t){if(e===t)return 0;if(~~e===e&&~~t===t){if(0===e||0===t)return e<t?-1:1;if(e<0||t<0){if(t>=0)return-1;if(e>=0)return 1;e=-e,t=-t}var r=a(e),o=a(t),s=0;return r<o?(e*=n[o-r-1],t/=10,s=-1):r>o&&(t*=n[r-o-1],e/=10,s=1),e===t?s:e<t?-1:1}var i=String(e),_=String(t);return i===_?0:i<_?-1:1}function s(e,t,r,n){var a=t+1;if(a===r)return 1;if(n(e[a++],e[t])<0){for(;a<r&&n(e[a],e[a-1])<0;)a++;!function(e,t,r){r--;for(;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}(e,t,a)}else for(;a<r&&n(e[a],e[a-1])>=0;)a++;return a-t}function i(e,t,r,n,a){for(n===t&&n++;n<r;n++){for(var o=e[n],s=t,i=n;s<i;){var _=s+i>>>1;a(o,e[_])<0?i=_:s=_+1}var l=n-s;switch(l){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;l>0;)e[s+l]=e[s+l-1],l--}e[s]=o}}function _(e,t,r,n,a,o){var s=0,i=0,_=1;if(o(e,t[r+a])>0){for(i=n-a;_<i&&o(e,t[r+a+_])>0;)s=_,(_=1+(_<<1))<=0&&(_=i);_>i&&(_=i),s+=a,_+=a}else{for(i=a+1;_<i&&o(e,t[r+a-_])<=0;)s=_,(_=1+(_<<1))<=0&&(_=i);_>i&&(_=i);var l=s;s=a-_,_=a-l}for(s++;s<_;){var c=s+(_-s>>>1);o(e,t[r+c])>0?s=c+1:_=c}return _}function l(e,t,r,n,a,o){var s=0,i=0,_=1;if(o(e,t[r+a])<0){for(i=a+1;_<i&&o(e,t[r+a-_])<0;)s=_,(_=1+(_<<1))<=0&&(_=i);_>i&&(_=i);var l=s;s=a-_,_=a-l}else{for(i=n-a;_<i&&o(e,t[r+a+_])>=0;)s=_,(_=1+(_<<1))<=0&&(_=i);_>i&&(_=i),s+=a,_+=a}for(s++;s<_;){var c=s+(_-s>>>1);o(e,t[r+c])<0?_=c:s=c+1}return _}var c="TimSortAssertion",u=function(e){this.name=c,this.message=e},f=function(e,t){var r={array:e,compare:t,minGallop:7,length:e.length,tmpStorageLength:256,stackLength:0,runStart:null,runLength:null,stackSize:0,pushRun:function(e,t){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=t,this.stackSize+=1},mergeRuns:function(){for(;this.stackSize>1;){var e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}},forceMergeRuns:function(){for(;this.stackSize>1;){var e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}},mergeAt:function(e){var t=this.compare,r=this.array,n=this.runStart[e],a=this.runLength[e],o=this.runStart[e+1],s=this.runLength[e+1];this.runLength[e]=a+s,e===this.stackSize-3&&(this.runStart[e+1]=this.runStart[e+2],this.runLength[e+1]=this.runLength[e+2]),this.stackSize--;var i=l(r[o],r,n,a,0,t);n+=i,0!==(a-=i)&&0!==(s=_(r[n+a-1],r,o,s,s-1,t))&&(a<=s?this.mergeLow(n,a,o,s):this.mergeHigh(n,a,o,s))},mergeLow:function(e,t,r,n){var a=this.compare,o=this.array,s=this.tmp,i=0;for(i=0;i<t;i++)s[i]=o[e+i];var c=0,f=r,p=e;if(o[p++]=o[f++],0!=--n)if(1!==t){for(var h=this.minGallop;;){var d=0,m=0,g=!1;do{if(a(o[f],s[c])<0){if(o[p++]=o[f++],m++,d=0,0==--n){g=!0;break}}else if(o[p++]=s[c++],d++,m=0,1==--t){g=!0;break}}while((d|m)<h);if(g)break;do{if(0!==(d=l(o[f],s,c,t,0,a))){for(i=0;i<d;i++)o[p+i]=s[c+i];if(p+=d,c+=d,(t-=d)<=1){g=!0;break}}if(o[p++]=o[f++],0==--n){g=!0;break}if(0!==(m=_(s[c],o,f,n,0,a))){for(i=0;i<m;i++)o[p+i]=o[f+i];if(p+=m,f+=m,0===(n-=m)){g=!0;break}}if(o[p++]=s[c++],1==--t){g=!0;break}h--}while(d>=7||m>=7);if(g)break;h<0&&(h=0),h+=2}if(this.minGallop=h,h<1&&(this.minGallop=1),1===t){for(i=0;i<n;i++)o[p+i]=o[f+i];o[p+n]=s[c]}else{if(0===t)throw new u("mergeLow preconditions were not respected");for(i=0;i<t;i++)o[p+i]=s[c+i]}}else{for(var i=0;i<n;i++)o[p+i]=o[f+i];o[p+n]=s[c]}else for(var i=0;i<t;i++)o[p+i]=s[c+i]},mergeHigh:function(e,t,r,n){var a=this.compare,o=this.array,s=this.tmp,i=0;for(i=0;i<n;i++)s[i]=o[r+i];var c=e+t-1,f=n-1,p=r+n-1,h=0,d=0;if(o[p--]=o[c--],0!=--t)if(1!==n){for(var m=this.minGallop;;){var g=0,v=0,$=!1;do{if(a(s[f],o[c])<0){if(o[p--]=o[c--],g++,v=0,0==--t){$=!0;break}}else if(o[p--]=s[f--],v++,g=0,1==--n){$=!0;break}}while((g|v)<m);if($)break;do{if(0!==(g=t-l(s[f],o,e,t,t-1,a))){t-=g,d=(p-=g)+1,h=(c-=g)+1;for(i=g-1;i>=0;i--)o[d+i]=o[h+i];if(0===t){$=!0;break}}if(o[p--]=s[f--],1==--n){$=!0;break}if(0!==(v=n-_(o[c],s,0,n,n-1,a))){n-=v,d=(p-=v)+1,h=(f-=v)+1;for(i=0;i<v;i++)o[d+i]=s[h+i];if(n<=1){$=!0;break}}if(o[p--]=o[c--],0==--t){$=!0;break}m--}while(g>=7||v>=7);if($)break;m<0&&(m=0),m+=2}if(this.minGallop=m,m<1&&(this.minGallop=1),1===n){d=(p-=t)+1,h=(c-=t)+1;for(i=t-1;i>=0;i--)o[d+i]=o[h+i];o[p]=s[f]}else{if(0==n)throw new u("mergeHigh preconditions were not respected");h=p-(n-1);for(i=0;i<n;i++)o[h+i]=s[i]}}else{d=(p-=t)+1,h=(c-=t)+1;for(var i=t-1;i>=0;i--)o[d+i]=o[h+i];o[p]=s[f]}else{h=p-(n-1);for(var i=0;i<n;i++)o[h+i]=s[i]}}};return r.length<512&&(r.tmpStorageLength=r.length>>>1),r.tmp=new Array(r.tmpStorageLength),r.stackLength=r.length<120?5:r.length<1542?10:r.length<119151?19:40,r.runStart=new Array(r.stackLength),r.runLength=new Array(r.stackLength),r};function p(e,n,a,_){if(!Array.isArray(e))throw t.TypeError.$factory("Can only sort arrays");n?"function"!=typeof n&&(_=a,a=n,n=o):n=o,a||(a=0),_||(_=e.length);var l=_-a;if(!(l<2)){var c=0;if(l<r)i(e,a,_,a+(c=s(e,a,_,n)),n);else{var u=new f(e,n),p=function(e){for(var t=0;e>=r;)t|=1&e,e>>=1;return e+t}(l);do{if((c=s(e,a,_,n))<p){var h=l;h>p&&(h=p),i(e,a,a+h,a+c,n),c=h}u.pushRun(a,c),u.mergeRuns(),l-=c,a+=c}while(0!==l);u.forceMergeRuns()}}}e.$TimSort=function(e,t){try{p(e,t,0,e.length)}catch(r){if(r.name!=c)throw r;e.sort(t)}},e.$AlphabeticalCompare=o}(__BRYTHON__),function(e){var t=e.builtins;e.del_exc=function(e){delete e[1].$current_exception},e.set_exc=function(r,n){if(void 0===n){var a="Internal error: no frame for exception "+t.repr(r);throw console.error(["Traceback (most recent call last):",e.print_stack(r.$frame_obj),a].join("\n")),e.get_option("debug",r)>1&&(console.log(r.args),console.log(r.stack)),Error(a)}n[1].$current_exception=e.exception(r)},e.get_exc=function(){return e.frame_obj.frame[1].$current_exception},e.set_exception_offsets=function(t,r){return t.$positions=t.$positions||{},t.$positions[e.frame_obj.count-1]=r,t},e.$raise=function(r,n){var a=e.get_exc();if(void 0===r){if(void 0!==a)throw a;throw t.RuntimeError.$factory("No active exception to reraise")}if(e.$isinstance(r,t.BaseException))throw r.__class__===t.StopIteration&&e.frame_obj.frame.$is_generator&&(r=t.RuntimeError.$factory("generator raised StopIteration")),r.__context__=void 0===a?t.None:a,r.__cause__=n||t.None,r.__suppress_context__=void 0!==n,r;if(r.$is_class&&t.issubclass(r,t.BaseException)){if(r===t.StopIteration&&e.frame_obj.frame[1].$is_generator)throw t.RuntimeError.$factory("generator raised StopIteration");var o=e.$call(r)();throw o.__context__=void 0===a?t.None:a,o.__cause__=n||t.None,o.__suppress_context__=void 0!==n,o}throw t.TypeError.$factory("exceptions must derive from BaseException")},e.print_stack=function(t){var r=a(t||e.frame_obj),n=[];for(var o of r){var s=o.$lineno,i=o.__file__;if(void 0!==s){var _=o[0]==o[2]?"<module>":o[0];n.push(`  File "${i}" line ${s}, in ${_}`);var l=e.file_cache[i];if(l){var c=l.split("\n")[s-1];n.push("    "+c.trim())}}}return n.join("\n")},e.last_frame=function(){var t=e.frame_obj.frame;return`file ${t.__file__} line ${t.$lineno}`};var r=e.traceback=e.make_class("traceback",(function(n){var o=n.$frame_obj;if(null===o)return t.None;e.$isinstance(n,t.SyntaxError)&&(o=o.prev);var s=e.make_linenums(o);return{__class__:r,$stack:a(o),$linenums:s,pos:0}}));r.__getattribute__=function(e,r){switch(r){case"tb_frame":return e.$stack[e.pos];case"tb_lineno":return e.$linenums[e.pos];case"tb_lasti":return-1;case"tb_next":return e.pos<e.$stack.length-1?(e.pos++,e):t.None;case"stack":return e.$stack;default:return t.object.__getattribute__(e,r)}},e.set_func_names(r,"builtins");var n=e.frame=e.make_class("frame",(function(e){return e.__class__=n,e}));n.__delattr__=function(e,r){"f_trace"==r&&(e.$f_trace=t.None)},n.__dir__=function(e){return t.object.__dir__(n).concat(["clear","f_back","f_builtins","f_code","f_globals","f_lasti","f_lineno","f_locals","f_trace","f_trace_lines","f_trace_opcodes"])},n.__getattr__=function(r,a){if("f_back"==a){for(var o=e.frame_obj;null!==o&&o.frame!==r;)o=o.prev;return null!==o.prev?n.$factory(o.prev.frame):t.None}if("clear"==a)return function(){};if("f_trace"==a){r[1];return void 0===r.$f_trace?t.None:r.$f_trace}throw console.log("no attr",a,"for frame",r),e.attr_error(a,r)},n.__setattr__=function(e,t,r){"f_trace"==t&&(e.$f_trace=r)},n.__str__=n.__repr__=function(e){return"<frame object, file "+e.__file__+", line "+e.$lineno+", code "+n.f_code.__get__(e).co_name+">"},n.f_builtins={__get__:function(t){return e.$getattr(t[3].__builtins__,"__dict__")}},n.f_code={__get__:function(r){var n;return r[4]?n=r[4].$infos.__code__:r.f_code?n=r.f_code:(n={co_name:r[0]==r[2]?"<module>":r[0],co_filename:r.__file__,co_varnames:e.fast_tuple([])}).co_qualname=n.co_name,n.__class__=t.code,n}},n.f_globals={__get__:function(t){return t.f_globals?t.f_globals:t.f_locals&&t[1]==t[3]?t.f_globals=t.f_locals:t.f_globals=e.obj_dict(t[3])}},n.f_lineno={__get__:function(e){return e.$lineno}},n.f_locals={__get__:function(t){return t.f_locals?t.f_locals:t.f_globals&&t[1]==t[3]?t.f_locals=t.f_globals:t.f_locals=e.obj_dict(t[1])}},n.f_trace={__get__:function(e){return e.$f_trace}},e.set_func_names(n,"builtins"),e._frame=n,e.deep_copy=function(e){var t=[];for(const a of e){var r=[a[0],{},a[2],{}];void 0!==a[4]&&r.push(a[4]);for(const e of[1,3])for(var n in a[e])r[e][n]=a[e][n];t.push(r)}return t},e.restore_frame_obj=function(t,r){e.frame_obj=t,e.frame_obj.frame[1]=r},e.make_linenums=function(t){var r=[];for(t=t||e.frame_obj;null!==t;)r.push(t.frame.$lineno),t=t.prev;return r.reverse()};var a=e.make_frames_stack=function(e){for(var t=[];null!==e;)t[t.length]=e.frame,e=e.prev;return t.reverse(),t};function o(r,n,a){if(Array.isArray(r))for(var s of r)o(s,n,a);else{var i=e.make_class(r,(function(){var r=Error();return r.args=e.fast_tuple(Array.from(arguments)),r.__class__=i,r.__traceback__=t.None,r.$py_error=!0,r.$frame_obj=e.frame_obj,r.$linenums=e.make_linenums(),a&&(r[a]=arguments[0]||t.None),r.__cause__=t.None,r.__context__=t.None,r.__suppress_context__=!1,r}));i.__bases__=[n],i.__mro__=t.type.mro(i).slice(1),e.set_func_names(i,"builtins"),t[r]=i}}e.freeze=function(t){void 0===t.$frame_obj&&(t.$frame_obj=e.frame_obj,t.$linenums=e.make_linenums()),t.__traceback__=r.$factory(t)},e.exception=function(r,n){if(r.__class__){a=r;e.freeze(a)}else{if(r.$py_exc)return r.$py_exc;var a;if((a=t.JavascriptError.$factory(r.__name__||r.name)).$js_exc=r,e.is_recursion_error(r))return t.RecursionError.$factory("too much recursion");a.__cause__=t.None,a.__context__=t.None,a.__suppress_context__=!1;var o=r.message||"<"+r+">";a.args=t.tuple.$factory([o]),a.$py_error=!0,r.$py_exc=a,e.freeze(a)}return a},e.is_exc=function(r,n){void 0===r.__class__&&(r=e.exception(r));for(var a=r.$is_class?r:r.__class__,o=0;o<n.length;o++){var s=n[o];if(void 0===a&&console.log("exc class undefined",r),t.issubclass(a,s))return!0}return!1},e.is_recursion_error=function(e){var t=(e+"").split(":"),r=t[0].trim(),n=t[1].trim();return"InternalError"==r&&"too much recursion"==n||"Error"==r&&"Out of stack space"==n||"RangeError"==r&&"Maximum call stack size exceeded"==n},o("BaseException",t.object),t.BaseException.__init__=function(e){var r=void 0===arguments[1]?[]:[arguments[1]];e.args=t.tuple.$factory(r)},t.BaseException.__repr__=function(r){var n=r.__class__.__name__+"(";return void 0!==r.args[0]&&(n+=t.repr(r.args[0])),r.args.length>1&&(n+=", "+t.repr(e.fast_tuple(r.args.slice(1)))),n+")"},t.BaseException.__str__=function(e){return e.args.length>0&&e.args[0]!==t.None?t.str.$factory(e.args[0]):""},t.BaseException.__new__=function(r){var n=t.BaseException.$factory();return n.__class__=r,n.__dict__=e.empty_dict(),n},t.BaseException.__getattr__=function(r,n){if("__context__"==n)return e.frame_obj.frame[1].$current_exception||t.None;throw e.attr_error(n,r)},t.BaseException.add_note=function(r,n){if(!e.$isinstance(n,t.str))throw t.TypeError.$factory(`note must be a str, not '${e.class_name(n)}'`);void 0!==r.__notes__?r.__notes__.push(n):r.__notes__=[n]},t.BaseException.with_traceback=function(e,t){return e.__traceback__=t,e},e.set_func_names(t.BaseException,"builtins"),o(["SystemExit","KeyboardInterrupt","GeneratorExit","Exception"],t.BaseException),o("JavascriptError",t.Exception),o(["ArithmeticError","AssertionError","BufferError","EOFError","LookupError","MemoryError","OSError","ReferenceError","RuntimeError","SystemError","TypeError","ValueError","Warning"],t.Exception),o("StopIteration",t.Exception,"value"),o("StopAsyncIteration",t.Exception,"value"),o("ImportError",t.Exception,"name"),o("SyntaxError",t.Exception,"msg"),o(["FloatingPointError","OverflowError","ZeroDivisionError"],t.ArithmeticError),o("ModuleNotFoundError",t.ImportError,"name"),o(["IndexError","KeyError"],t.LookupError),o(["BlockingIOError","ChildProcessError","ConnectionError","FileExistsError","FileNotFoundError","InterruptedError","IsADirectoryError","NotADirectoryError","PermissionError","ProcessLookupError","TimeoutError"],t.OSError),o(["BrokenPipeError","ConnectionAbortedError","ConnectionRefusedError","ConnectionResetError"],t.ConnectionError),o(["NotImplementedError","RecursionError"],t.RuntimeError),o("IndentationError",t.SyntaxError,"msg"),o("TabError",t.IndentationError),o("UnicodeError",t.ValueError),o(["UnicodeDecodeError","UnicodeEncodeError","UnicodeTranslateError"],t.UnicodeError),o(["DeprecationWarning","PendingDeprecationWarning","RuntimeWarning","SyntaxWarning","UserWarning","FutureWarning","ImportWarning","UnicodeWarning","BytesWarning","ResourceWarning","EncodingWarning"],t.Warning),o(["EnvironmentError","IOError","VMSError","WindowsError"],t.OSError),t.AttributeError=e.make_class("AttributeError",(function(){var r=e.args("AttributeError",3,{msg:null,name:null,obj:null},["msg","name","obj"],arguments,{msg:t.None,name:t.None,obj:t.None},"*",null),n=Error();return n.__class__=t.AttributeError,n.__traceback__=t.None,n.$py_error=!0,n.$frame_obj=e.frame_obj,n.$linenums=e.make_linenums(),n.args=e.fast_tuple(r.msg===t.None?[]:[r.msg]),n.name=r.name,n.obj=r.obj,void 0===n.obj&&console.log("pas de obj",r),n.__cause__=t.None,n.__context__=t.None,n.__suppress_context__=!1,n})),t.AttributeError.__bases__=[t.Exception],t.AttributeError.__mro__=t.type.mro(t.AttributeError),t.AttributeError.__str__=function(e){return e.args[0]},e.set_func_names(t.AttributeError,"builtins"),e.attr_error=function(r,n){if(n.$is_class)var a=`type object '${n.__name__}'`;else a=`'${e.class_name(n)}' object`;return a+=` has no attribute '${r}'`,t.AttributeError.$factory({$kw:[{name:r,obj:n,msg:a}]})},t.NameError=e.make_class("NameError",(function(){var r=e.args("NameError",2,{message:null,name:null},["message","name"],arguments,{message:t.None,name:t.None},"*",null,1),n=Error();return n.__class__=t.NameError,n.__traceback__=t.None,n.$py_error=!0,n.$frame_obj=e.frame_obj,n.$linenums=e.make_linenums(),n.args=e.fast_tuple(r.message===t.None?[]:[r.message]),n.name=r.name,n.__cause__=t.None,n.__context__=t.None,n.__suppress_context__=!1,n})),t.NameError.__bases__=[t.Exception],t.NameError.__mro__=t.type.mro(t.NameError).slice(1),t.NameError.__str__=function(e){return e.args[0]},e.set_func_names(t.NameError,"builtins"),o("UnboundLocalError",t.NameError),t.UnboundLocalError.__str__=function(e){return e.args[0]},e.set_func_names(t.UnboundLocalError,"builtins"),e.name_error=function(r){var n=t.NameError.$factory(`name '${r}' is not defined`);return n.name=r,n.$frame_obj=e.frame_obj,n},e.recursion_error=function(r){var n=t.RecursionError.$factory("maximum recursion depth exceeded");return e.set_exc(n,r),n};var s=2,i=1,_=65535;function l(e){return 31&e}function c(e,t,r){if(e==t)return 0;for(e.length<t.length&&([e,t]=[t,e]);e.length&&e[0]==t[0];)e=e.substr(1),t=t.substr(1);for(;e.length&&e[e.length-1]==t[t.length-1];)e=e.substr(0,e.length-1),t=t.substr(0,t.length-1);if(0==t.length)return e.length*s;if((t.length-e.length)*s>r)return r+1;for(var n=[],a=0;a<e.length;a++)n[a]=(a+1)*s;for(var o=0,i=0;i<t.length;i++){for(var l=t[i],c=o=i*s,f=_,p=0;p<e.length;p++){var h=c+u(l,e[p]);c=n[p];var d=Math.min(o,c)+s;o=Math.min(d,h),n[p]=o,o<f&&(f=o)}if(f>r)return r+1}return o}function u(e,t){return l(e)!=l(t)?s:e==t?0:e.toLowerCase()==t.toLowerCase()?i:s}function f(e,t){if(e.length>=750)return null;var r=2**52,n=null;for(var a of e){var o=(t.length+a.length+3)*s/6,i=c(t,a,o=Math.min(o,r-1));i>o||(!n||i<r)&&(n=a,r=i)}return n}function p(t){function r(e,t){if(t>0){for(var r=i.length,n=0;n<2&&(e?(i.push(i[r-2]),i.push(i[r-1])):i.push(i[r-1]),0!=--t);n++);t>0&&i.push(`[Previous line repeated ${t} more time${t>1?"s":""}]`)}}for(var n,o,s,i=[],_=0,l=void 0===t.$frame_obj?[]:a(t.$frame_obj),c=t.$linenums,u=0,f=l.length;u<f;u++){var p=l[u],h=c[u],d=p.__file__,m=p[0]==p[2]?"<module>":p[0];if(d!=n||m!=s||h!=o){r(g,_),n=d,o=h,s=m,_=0;var g=e.file_cache[d];if(i.push(`  File "${d}", line ${h}, in `+(p[0]==p[2]?"<module>":p[0])),g){var v=g.split("\n")[h-1];if(v?i.push("    "+v.trim()):console.log("no line",v),void 0!==t.$positions){var $=t.$positions[u],y="";if($&&($[1]!=$[0]||$[2]-$[1]!=v.trim().length||$[3])){var b=v.length-v.trimLeft().length,w=[$[0]-b,$[1]-$[0],$[2]-$[1]];for(var x in w)x<0&&(console.log("wrong values, position",$,"indent",b),w[w.indexOf(x)]=0);y+="    "+" ".repeat(w[0])+"~".repeat(w[1])+"^".repeat(w[2]),void 0!==$[3]&&(y+="~".repeat($[3]-$[2])),i.push(y)}}}else console.log("no src for filename",d),console.log("in file_cache",Object.keys(e.file_cache).join("\n"))}else _++}if(_>0){f=i.length;for(var k=0;k<2;k++)g?(i.push(i[f-2]),i.push(i[f-1])):i.push(i[f-1]);i.push(`[Previous line repeated ${_-2} more times]`)}return i.join("\n")+"\n"}e.offer_suggestions_for_attribute_error=function(e){var r=e.name,n=e.obj;return r===t.None?t.None:f(t.dir(n),r)||t.None},e.offer_suggestions_for_name_error=function(e,r){var n,a=e.name;r=r||e.$frame_obj.frame;if("string"!=typeof a)return t.None;if(n=f(Object.keys(r[1]).filter((e=>!e.startsWith("$"))),a))return n;if(r[2]!=r[0]&&(n=f(Object.keys(r[3]).filter((e=>!e.startsWith("$"))),a)))return n;if(r[4]&&r[4].$is_method){var o=r[4].$infos.__code__.co_varnames[0],s=r[1][o];if(t.hasattr(s,a))return`self.${a}`}return t.None},t.BaseExceptionGroup=e.make_class("BaseExceptionGFroup",(function(){var r={},n=e.args("BaseExceptionGroup",2,{message:null,exceptions:null},["message","exceptions"],arguments,{exceptions:r},null,null),a=Error();if(a.args=e.fast_tuple(Array.from(arguments)),a.__class__=t.BaseExceptionGroup,a.__traceback__=t.None,a.$py_error=!0,a.$frame_obj=e.frame_obj,a.$linenums=e.make_linenums(),a.message=n.message,a.exceptions=n.exceptions===r?[]:n.exceptions,a.exceptions!==t.None){var o=t.list.$factory(a.exceptions),s=!0;for(var i of o)if(!e.$isinstance(i,t.Exception)){s=!1;break}s&&(a.__class__=t.ExceptionGroup)}return a.__cause__=t.None,a.__context__=t.None,a.__suppress_context__=!1,a})),t.BaseExceptionGroup.__bases__=[t.BaseException],t.BaseExceptionGroup.__mro__=t.type.mro(t.BaseExceptionGroup),t.BaseExceptionGroup.__str__=function(e){return`${e.message} (${e.exceptions.length} sub-exception`+(e.exceptions.length>1?"s":"")+")"},t.BaseExceptionGroup.split=function(r,n){var a=[],o=[];for(var s of r.exceptions)if(e.$isinstance(s,t.BaseExceptionGroup)){var i=t.BaseExceptionGroup.split(s,n),_=i[0],l=i[1];_===t.None?o.push(s):_.exceptions.length==s.exceptions.length?a.push(s):(_.exceptions.length>0&&(a=a.concat(_)),l.exceptions.length>0&&(o=o.concat(l)))}else n(s)?a.push(s):o.push(s);0==a.length&&(a=t.None),0==o.length&&(o=t.None);var c=[];for(var u of[a,o]){var f=t.BaseExceptionGroup.$factory(r.message,u);f.__cause__=r.__cause__,f.__context__=r.__context__,f.__traceback__=r.__traceback__,c.push(f)}return e.fast_tuple(c)},t.BaseExceptionGroup.subgroup=function(e,r){return t.BaseExceptionGroup.split(e,r)[0]},e.set_func_names(t.BaseExceptionGroup,"builtins"),t.ExceptionGroup=e.make_class("ExceptionGFroup",(function(){var r={},n=e.args("ExceptionGroup",2,{message:null,exceptions:null},["message","exceptions"],arguments,{exceptions:r},null,null),a=Error();if(a.args=e.fast_tuple(Array.from(arguments)),a.__class__=t.ExceptionGroup,a.__traceback__=t.None,a.$py_error=!0,a.$frame_obj=e.frame_obj,a.$linenums=e.make_linenums(),a.message=n.message,a.exceptions=n.exceptions===r?[]:n.exceptions,a.exceptions!==t.None){var o=t.list.$factory(a.exceptions);for(var s of o)if(!e.$isinstance(s,t.Exception))throw t.TypeError.$factory("Cannot nest BaseExceptions in an ExceptionGroup")}return a.__cause__=t.None,a.__context__=t.None,a.__suppress_context__=!1,a})),t.ExceptionGroup.__bases__=[t.BaseExceptionGroup,t.Exception],t.ExceptionGroup.__mro__=t.type.mro(t.ExceptionGroup),e.set_func_names(t.ExceptionGroup,"builtins"),e.error_trace=function(r){var n="",o=void 0===r.$frame_obj?[]:a(r.$frame_obj);if(e.get_option("debug",r)>1&&(console.log("handle error",r.__class__,r.args),console.log("stack",o),console.log(r.stack)),o.length>0&&(n="Traceback (most recent call last):\n"),r.__class__===t.SyntaxError||r.__class__===t.IndentationError){r.$frame_obj=null===r.$frame_obj?null:r.$frame_obj.prev,n+=p(r);var s=r.filename,i=r.text,_=i.length-i.trimLeft().length;if(n+=`  File "${s}", line ${r.args[1][1]}\n    ${i.trim()}\n`,r.__class__!==t.IndentationError&&r.text){e.get_option("debug",r)>1&&(console.log("error args",r.args[1]),console.log("err line",i),console.log("indent",_));var l=r.offset-_-1,c=r.end_offset-1+(r.end_offset==r.offset?1:0),u="    "+" ".repeat(l),f=1;r.end_lineno&&0==(f=r.end_lineno>r.lineno?i.length-l-_:c-l-_)&&r.end_offset==i.substr(_).length&&(f=1),n+=u+="^".repeat(f)+"\n"}n+=`${r.__class__.__name__}: ${r.args[0]}`}else if(void 0!==r.__class__){var h=e.class_name(r);n+=p(r);var d=t.str.$factory(r);n+=h+(d?": "+d:"");var m=e.frame_obj;if(e.frame_obj=r.$frame_obj,r.__class__===t.NameError)(g=e.offer_suggestions_for_name_error(r))!==t.None&&(n+=`. Did you mean '${g}'?`),e.stdlib_module_names.indexOf(r.name)>-1&&(n+=`. Did you forget to import '${r.name}'?`);else if(r.__class__===t.AttributeError){var g;(g=e.offer_suggestions_for_attribute_error(r))!==t.None&&(n+=`. Did you mean: '${g}'?`)}else r.__class__===t.ImportError&&r.$suggestion!==t.None&&(n+=`. Did you mean: '${r.$suggestion}'?`);e.frame_obj=m}else n=r+"";return r.$js_exc&&(n+="\n\nJavascript error\n"+r.$js_exc+"\n"+r.$js_exc.stack),n},e.get_stderr=function(){return e.imported.sys?e.imported.sys.stderr:e.imported._sys.stderr},e.get_stdout=function(){return e.imported.sys?e.imported.sys.stdout:e.imported._sys.stdout},e.show_error=function(r){var n=e.error_trace(e.exception(r));try{var a=e.get_stderr();e.$getattr(a,"write")(n);var o=e.$getattr(a,"flush",t.None);o!==t.None&&o()}catch(s){console.debug(n)}},e.handle_error=function(t){if(!t.$handled)throw t.$handled=!0,e.show_error(t),t}}(__BRYTHON__),function(e){var t=e.builtins,r=t.None,n={__class__:t.type,__mro__:[t.object],__qualname__:"range",$is_class:!0,$native:!0,$match_sequence_pattern:!0,$not_basetype:!0,$descriptors:{start:!0,step:!0,stop:!0}};function a(t,r){var a=n.__len__(t);return 0==a?t.start:r>a?t.stop:e.rich_op("__add__",t.start,e.rich_op("__mul__",t.step,r))}n.__contains__=function(r,a){if(0==n.__len__(r))return!1;try{a=e.int_or_bool(a)}catch(err){try{return n.index(r,a),!0}catch(err){return!1}}var o=t.int.$to_bigint(r.start),s=t.int.$to_bigint(r.stop),i=t.int.$to_bigint(r.step),_=(a=t.int.$to_bigint(a))-o;return i*(_/i)==_&&(s>o?a>=o&&s>a:o>=a&&a>s)},n.__delattr__=function(e,r,n){throw t.AttributeError.$factory("readonly attribute")},n.__eq__=function(t,r){if(e.$isinstance(r,n)){var a=n.__len__(t);return!!e.rich_comp("__eq__",a,n.__len__(r))&&(0==a||!!e.rich_comp("__eq__",t.start,r.start)&&(1==a||e.rich_comp("__eq__",t.step,r.step)))}return!1},n.__getitem__=function(r,o){if(e.$isinstance(o,t.slice)){var s=t.slice.$conv_for_seq(o,n.__len__(r)),i=e.rich_op("__mul__",r.step,s.step),_=a(r,s.start),l=a(r,s.stop);return n.$factory(_,l,i)}"number"!=typeof o&&(o=e.$GetInt(o)),e.rich_comp("__gt__",0,o)&&(o=e.rich_op("__add__",o,n.__len__(r)));var c=e.rich_op("__add__",r.start,e.rich_op("__mul__",o,r.step));if(e.rich_comp("__gt__",r.step,0)&&(e.rich_comp("__ge__",c,r.stop)||e.rich_comp("__gt__",r.start,c))||e.rich_comp("__gt__",0,r.step)&&(e.rich_comp("__ge__",r.stop,c)||e.rich_comp("__gt__",c,r.start)))throw t.IndexError.$factory("range object index out of range");return c},n.__hash__=function(e){var a=n.__len__(e);return 0==a?t.hash(t.tuple.$factory([0,r,r])):1==a?t.hash(t.tuple.$factory([1,e.start,r])):t.hash(t.tuple.$factory([a,e.start,e.step]))};var o=e.make_class("range_iterator",(function(e){return{__class__:o,obj:e}}));o.__iter__=function(e){return e},o.__next__=function(e){return t.next(e.obj)},e.set_func_names(o,"builtins"),n.__iter__=function(t){var r={__class__:n,start:t.start,stop:t.stop,step:t.step};return t.$safe?r.$counter=t.start-t.step:r.$counter=e.rich_op("__sub__",t.start,t.step),o.$factory(r)},n.__len__=function(e){var r,n=t.int.$to_bigint(e.start),a=t.int.$to_bigint(e.stop),o=t.int.$to_bigint(e.step);if(e.step>0){if(e.start>=e.stop)return 0;r=1n+(a-n-1n)/o}else{if(e.stop>=e.start)return 0;r=1n+(n-a-1n)/-o}return t.int.$int_or_long(r)},n.__next__=function(r){if(r.$safe){if(r.$counter+=r.step,r.step>0&&r.$counter>=r.stop||r.step<0&&r.$counter<=r.stop)throw t.StopIteration.$factory("")}else if(r.$counter=e.rich_op("__add__",r.$counter,r.step),e.rich_comp("__gt__",r.step,0)&&e.rich_comp("__ge__",r.$counter,r.stop)||e.rich_comp("__gt__",0,r.step)&&e.rich_comp("__ge__",r.stop,r.$counter))throw t.StopIteration.$factory("");return r.$counter},n.__reversed__=function(t){var r=e.rich_op("__sub__",n.__len__(t),1);return n.$factory(e.rich_op("__add__",t.start,e.rich_op("__mul__",r,t.step)),e.rich_op("__sub__",t.start,t.step),e.rich_op("__mul__",-1,t.step))},n.__repr__=function(r){e.builtins_repr_check(n,arguments);var a="range("+t.str.$factory(r.start)+", "+t.str.$factory(r.stop);return 1!=r.step&&(a+=", "+t.str.$factory(r.step)),a+")"},n.__setattr__=function(e,r,n){throw t.AttributeError.$factory("readonly attribute")},n.start=function(e){return e.start},n.step=function(e){return e.step},n.stop=function(e){return e.stop},n.count=function(r,a){if(e.$isinstance(a,[t.int,t.float,t.bool]))return t.int.$factory(n.__contains__(r,a));for(var s=n.__iter__(r),i=o.__next__,_=0;;)try{l=i(s),e.rich_comp("__eq__",a,l)&&_++}catch(err){if(e.$isinstance(err,t.StopIteration))return _;throw err}var l},n.index=function(r,a){var s,i=e.args("index",2,{self:null,other:null},["self","other"],arguments,{},null,null);r=i.self,a=i.other;try{a=e.int_or_bool(a)}catch(err){for(var _=n.__iter__(r),l=o.__next__,c=0;;)try{if(s=l(_),e.rich_comp("__eq__",a,s))return c;c++}catch(err){if(e.$isinstance(err,t.StopIteration))throw t.ValueError.$factory(t.str.$factory(a)+" not in range");throw err}}var u=e.rich_op("__sub__",a,r.start),f=e.rich_op("__floordiv__",u,r.step),p=e.rich_op("__mul__",r.step,f);if(e.rich_comp("__eq__",p,u)){if(e.rich_comp("__gt__",r.stop,r.start)&&e.rich_comp("__ge__",a,r.start)&&e.rich_comp("__gt__",r.stop,a)||e.rich_comp("__ge__",r.start,r.stop)&&e.rich_comp("__ge__",r.start,a)&&e.rich_comp("__gt__",a,r.stop))return f;throw t.ValueError.$factory(t.str.$factory(a)+" not in range")}throw t.ValueError.$factory(t.str.$factory(a)+" not in range")},n.$factory=function(){var r=e.args("range",3,{start:null,stop:null,step:null},["start","stop","step"],arguments,{start:null,stop:null,step:null},null,null),a=r.start,o=r.stop,s=r.step;if(null===o&&null===s){if(null==a)throw t.TypeError.$factory("range expected 1 arguments, got 0");return o=e.PyNumber_Index(a),{__class__:n,start:0,stop:o,step:1,$is_range:!0,$safe:"number"==typeof o}}if(null===s&&(s=1),a=e.PyNumber_Index(a),o=e.PyNumber_Index(o),0==(s=e.PyNumber_Index(s)))throw t.ValueError.$factory("range arg 3 must not be zero");return{__class__:n,start:a,stop:o,step:s,$is_range:!0,$safe:"number"==typeof a&&"number"==typeof o&&"number"==typeof s}},e.set_func_names(n,"builtins");var s={__class__:t.type,__mro__:[t.object],__qualname__:"slice",$is_class:!0,$native:!0,$not_basetype:!0,$descriptors:{start:!0,step:!0,stop:!0}};function i(r){for(var n=["start","stop","step"],a=[],o=0;o<n.length;o++){var s=r[n[o]];if(s===t.None)a.push(s);else try{a.push(e.PyNumber_Index(s))}catch(err){throw t.TypeError.$factory("slice indices must be integers or None or have an __index__ method")}}return a}s.__eq__=function(e,t){var r=i(e),n=i(t);return r[0]==n[0]&&r[1]==n[1]&&r[2]==n[2]},s.__repr__=function(r){return e.builtins_repr_check(s,arguments),"slice("+t.str.$factory(r.start)+", "+t.str.$factory(r.stop)+", "+t.str.$factory(r.step)+")"},s.__setattr__=function(e,r,n){throw t.AttributeError.$factory("readonly attribute")},s.$conv_for_seq=function(n,a){var o,s,i=n.step===r?1:e.PyNumber_Index(n.step),_=e.rich_comp("__gt__",0,i),l=e.rich_op("__sub__",a,1);if(0==i)throw t.ValueError.$factory("slice step cannot be zero");return n.start===r?o=_?l:0:(o=e.PyNumber_Index(n.start),e.rich_comp("__gt__",0,o)&&(o=e.rich_op("__add__",o,a),e.rich_comp("__gt__",0,o)&&(o=0)),e.rich_comp("__ge__",o,a)&&(o=i<0?l:a)),n.stop===r?s=_?-1:a:(s=e.PyNumber_Index(n.stop),e.rich_comp("__gt__",0,s)&&(s=e.rich_op("__add__",s,a)),e.rich_comp("__ge__",s,a)&&(s=_?l:a)),{start:o,stop:s,step:i}},s.start=function(e){return e.start},s.step=function(e){return e.step},s.stop=function(e){return e.stop},s.indices=function(r,n){var a=e.args("indices",2,{self:null,length:null},["self","length"],arguments,{},null,null),o=e.$GetInt(a.length);o<0&&t.ValueError.$factory("length should not be negative");var s=r.step==t.None?1:r.step;if(s<0){var i=r.start,_=r.stop;i=i==t.None?o-1:i<0?t.max(-1,i+o):t.min(o-1,r.start),_=r.stop==t.None?-1:_<0?t.max(-1,_+o):t.min(o-1,r.stop)}else{i=r.start==t.None?0:t.min(o,r.start),_=r.stop==t.None?o:t.min(o,r.stop);i<0&&(i=t.max(0,i+o)),_<0&&(_=t.max(0,_+o))}return t.tuple.$factory([i,_,s])},s.$fast_slice=function(e,r,n){return{__class__:t.slice,start:e,stop:r,step:n}},s.$factory=function(){var t=e.args("slice",3,{start:null,stop:null,step:null},["start","stop","step"],arguments,{stop:null,step:null},null,null);return s.$fast_slice(t.start,t.stop,t.step)},s.$fast_slice=function(e,r,n){null===r&&null===n?(r=e,e=t.None,n=t.None):n=null===n?t.None:n;var a={__class__:s,start:e,stop:r,step:n};return i(a),a},e.set_func_names(s,"builtins"),t.range=n,t.slice=s}(__BRYTHON__),function(e){var t=e.builtins,r={},n={};function a(r,n,a){if(void 0===n){n=[];for(var o="\r\n \t",s=0,i=4;s<i;s++)n.push(o.charCodeAt(s))}else{if(!e.$isinstance(n,l))throw t.TypeError.$factory("Type str doesn't support the buffer API");n=n.source}if("l"==a){for(s=0,i=r.source.length;s<i&&-1!=n.indexOf(r.source[s]);s++);return l.$factory(r.source.slice(s))}for(s=r.source.length-1;s>=0&&-1!=n.indexOf(r.source[s]);s--);return l.$factory(r.source.slice(0,s+1))}function o(t){return!e.$isinstance(t,[l,s])}e.to_bytes=function(r){var n;if(e.$isinstance(r,[l,s]))n=r.source;else{var a=e.$getattr(r,"tobytes",null);if(null===a)throw t.TypeError.$factory("object doesn't support the buffer protocol");n=e.$call(a)().source}return n};var s={__class__:t.type,__mro__:[t.object],__qualname__:"bytearray",$buffer_protocol:!0,$is_class:!0};for(var i of["__delitem__","clear","copy","count","index","pop","remove","reverse"])s[i]=function(e){return function(r){for(var n=[r.source],a=1,o=1,s=arguments.length;o<s;o++)n[a++]=arguments[o];return t.list[e].apply(null,n)}}(i);s.__hash__=t.None;var _=e.make_iterator_class("bytearray_iterator");s.__iter__=function(e){return _.$factory(e.source)},s.__mro__=[t.object],s.__repr__=s.__str__=function(e){return"bytearray("+l.__repr__(e)+")"},s.__setitem__=function(r,n,a){if(e.$isinstance(n,t.int)){if(!e.$isinstance(a,t.int))throw t.TypeError.$factory("an integer is required");if(a>255)throw t.ValueError.$factory("byte must be in range(0, 256)");var o=n;if(n<0&&(o=r.source.length+o),!(o>=0&&o<r.source.length))throw t.IndexError.$factory("list index out of range");r.source[o]=a}else{if(!e.$isinstance(n,t.slice))throw t.TypeError.$factory("list indices must be integer, not "+e.class_name(n));var s=n.start===t.None?0:n.start,i=n.stop===t.None?r.source.length:n.stop;s<0&&(s=r.source.length+s),i<0&&(i=r.source.length+i),r.source.splice(s,i-s);try{for(var _=t.list.$factory(a),l=_.length-1;l>=0;l--){if(!e.$isinstance(_[l],t.int))throw t.TypeError.$factory("an integer is required");if(_[l]>255)throw t.ValueError.$factory("byte must be in range(0, 256)");r.source.splice(s,0,_[l])}}catch(err){throw t.TypeError.$factory("can only assign an iterable")}}},s.append=function(r,n){if(2!=arguments.length)throw t.TypeError.$factory("append takes exactly one argument ("+(arguments.length-1)+" given)");if(!e.$isinstance(n,t.int))throw t.TypeError.$factory("an integer is required");if(n>255)throw t.ValueError.$factory("byte must be in range(0, 256)");r.source[r.source.length]=n},s.extend=function(r,n){if(r.in_iteration)throw t.BufferError.$factory("Existing exports of data: object cannot be re-sized");if(n.__class__===s||n.__class__===l)return r.source=r.source.concat(n.source),t.None;for(var a of e.make_js_iterator(n))s.append(r,e.PyNumber_Index(a));return t.None},s.insert=function(r,n,a){if(3!=arguments.length)throw t.TypeError.$factory("insert takes exactly 2 arguments ("+(arguments.length-1)+" given)");if(!e.$isinstance(a,t.int))throw t.TypeError.$factory("an integer is required");if(a>255)throw t.ValueError.$factory("byte must be in range(0, 256)");t.list.insert(r.source,n,a)},s.$factory=function(){for(var e=[s],t=0,r=arguments.length;t<r;t++)e.push(arguments[t]);return s.__new__.apply(null,e)};var l={__class__:t.type,__mro__:[t.object],__qualname__:"bytes",$buffer_protocol:!0,$is_class:!0,__add__:function(r,n){var a;if(e.$isinstance(n,[l,s])?a=n.source:e.$isinstance(n,t.memoryview)&&(a=t.memoryview.tobytes(n).source),void 0!==a)return{__class__:r.__class__,source:r.source.concat(a)};throw t.TypeError.$factory("can't concat bytes to "+t.str.$factory(n))},__bytes__:function(e){return e},__contains__:function(e,t){if("number"==typeof t)return e.source.indexOf(t)>-1;if(e.source.length<t.source.length)return!1;for(var r=t.source.length,n=0;n<e.source.length-t.source.length+1;n++){for(var a=!0,o=0;o<r;o++)if(t.source[n+o]!=e.source[o]){a=!1;break}if(a)return!0}return!1}},c=e.make_iterator_class("bytes_iterator");l.__iter__=function(e){return c.$factory(e.source)},l.__eq__=function(t,r){return!o(r)&&e.$getattr(t.source,"__eq__")(r.source)},l.__ge__=function(e,r){return o(r)?t.NotImplemented:t.list.__ge__(e.source,r.source)},l.__getitem__=function(r,n){if(e.$isinstance(n,t.int)){var a=n;if(n<0&&(a=r.source.length+a),a>=0&&a<r.source.length)return r.source[a];throw t.IndexError.$factory("index out of range")}if(e.$isinstance(n,t.slice)){var o=t.slice.$conv_for_seq(n,r.source.length),s=o.start,i=o.stop,_=o.step,c=[],u=null;a=0;if(_>0){if((i=Math.min(i,r.source.length))<=s)return l.$factory([]);for(u=s;u<i;u+=_)c[a++]=r.source[u]}else{if(i>=s)return l.$factory([]);i=Math.max(0,i);for(u=s;u>=i;u+=_)c[a++]=r.source[u]}return l.$factory(c)}if(e.$isinstance(n,t.bool))return r.source.__getitem__(t.int.$factory(n))},l.$getnewargs=function(t){return e.fast_tuple([(r=t,r.__class__===l?r:y(r.source))]);var r},l.__getnewargs__=function(){return l.$getnewargs(e.single_arg("__getnewargs__","self",arguments))},l.__gt__=function(e,r){return o(r)?t.NotImplemented:t.list.__gt__(e.source,r.source)},l.__hash__=function(t){if(void 0===t)return l.__hashvalue__||e.$py_next_hash--;for(var r=1,n=0,a=t.source.length;n<a;n++)r=101*r+t.source[n]&4294967295;return r},l.__init__=function(){return t.None},l.__le__=function(e,r){return o(r)?t.NotImplemented:t.list.__le__(e.source,r.source)},l.__len__=function(e){return e.source.length},l.__lt__=function(e,r){return o(r)?t.NotImplemented:t.list.__lt__(e.source,r.source)},l.__mod__=function(r,n){var a=v(r,"latin-1","strict"),o=e.printf_format(a,"bytes",n);return t.str.encode(o,"ascii")},l.__mul__=function(){for(var t=e.args("__mul__",2,{self:null,other:null},["self","other"],arguments,{},null,null),r=e.PyNumber_Index(t.other),n=[],a=t.self.source,o=a.length,s=0;s<r;s++)for(var i=0;i<o;i++)n.push(a[i]);var _=l.$factory();return _.source=n,_},l.__ne__=function(e,t){return!l.__eq__(e,t)},l.__new__=function(r,n,a,o){var s={},i=e.args("__new__",4,{cls:null,source:null,encoding:null,errors:null},["cls","source","encoding","errors"],arguments,{source:s,encoding:s,errors:s},null,null);if(i.source===s)return{__class__:i.cls,source:[]};if("string"==typeof i.source||e.$isinstance(i.source,t.str)){if(i.encoding===s)throw t.TypeError.$factory("string argument without an encoding");i.errors=i.errors===s?"strict":i.errors;var _=$(i.source,i.encoding,i.errors);if(!e.$isinstance(_,l))throw t.TypeError.$factory(`'${i.encoding}' codec returns ${e.class_name(_)}, not bytes`);return _.__class__=i.cls,_}if(i.encoding!==s)throw t.TypeError.$factory("encoding without a string argument");if("number"==typeof i.source||e.$isinstance(i.source,t.int)){var c=e.PyNumber_Index(i.source);n=[];for(var u=0;u<c;u++)n[u]=0}else if(e.$isinstance(i.source,[t.bytes,t.bytearray]))n=i.source.source;else if(e.$isinstance(i.source,t.memoryview))n=i.source.obj.source;else{if(Array.isArray(i.source))var f=i.source;else try{f=t.list.$factory(i.source)}catch(err){var p=e.$getattr(n,"__bytes__",t.None);if(p===t.None)throw t.TypeError.$factory(`cannot convert '${e.class_name(n)}' object to bytes`);_=e.$call(p)();if(!e.$isinstance(_,t.bytes))throw t.TypeError.$factory(`__bytes__ returned non-bytes (type ${e.class_name(_)})`);return _}for(var h of(n=[],f)){if(!((h=e.PyNumber_Index(h))>=0&&h<256))throw t.ValueError.$factory("bytes must be in range (0, 256)");n.push(h)}}return{__class__:i.cls,source:n}},l.$new=function(r,n,a,o){var s={__class__:r},i=[],_=0;if(void 0===n);else if("number"==typeof n||e.$isinstance(n,t.int))for(var l=n;l--;)i[_++]=0;else if("string"==typeof n||e.$isinstance(n,t.str)){if(void 0===a)throw t.TypeError.$factory("string argument without an encoding");i=$(n,a||"utf-8",o||"strict")}else{if(void 0!==a)throw console.log("encoding",a),t.TypeError.$factory("encoding without a string argument");if(Array.isArray(n))i=n;else{try{i=t.list.$factory(n)}catch(err){var c=e.$getattr(n,"__bytes__",t.None);if(c===t.None)throw t.TypeError.$factory(`cannot convert '${e.class_name(n)}' object to bytes`);var u=e.$call(c)();if(!e.$isinstance(u,t.bytes))throw t.TypeError.$factory(`__bytes__ returned non-bytes (type ${e.class_name(u)})`);return u}for(l=0;l<i.length;l++){try{var f=t.int.$factory(i[l])}catch(err){throw t.TypeError.$factory("'"+e.class_name(i[l])+"' object cannot be interpreted as an integer")}if(f<0||f>255)throw t.ValueError.$factory("bytes must be in range(0, 256)")}}}return s.source=i,s.encoding=a,s.errors=o,s},l.__repr__=l.__str__=function(t){for(var r=e.special_string_repr,n="",a=0,o=t.source.length;a<o;a++){var s=t.source[a];if(void 0!==r[s])n+=r[s];else if(s<32||s>=128){var i=s.toString(16);n+="\\x"+(i=(1==i.length?"0":"")+i)}else s=="\\".charCodeAt(0)?n+="\\\\":n+=String.fromCharCode(s)}return n.indexOf("'")>-1&&-1==n.indexOf('"')?'b"'+n+'"':"b'"+n.replace(new RegExp("'","g"),"\\'")+"'"},l.capitalize=function(e){var t=e.source,r=t.length,n=t.slice();n[0]>96&&n[0]<123&&(n[0]-=32);for(var a=1;a<r;++a)n[a]>64&&n[a]<91&&(n[a]+=32);return l.$factory(n)},l.center=function(){var t=e.args("center",3,{self:null,width:null,fillbyte:null},["self","width","fillbyte"],arguments,{fillbyte:l.$factory([32])},null,null),r=t.width-t.self.source.length;if(r<=0)return l.$factory(t.self.source);var n=l.ljust(t.self,t.self.source.length+Math.floor(r/2),t.fillbyte);return l.rjust(n,t.width,t.fillbyte)},l.count=function(){var r=e.args("count",4,{self:null,sub:null,start:null,end:null},["self","sub","start","end"],arguments,{start:0,end:-1},null,null),n=0,a=-1,o=0;if("number"==typeof r.sub){if(r.sub<0||r.sub>255)throw t.ValueError.$factory("byte must be in range(0, 256)");o=1}else{if(!r.sub.__class__)throw t.TypeError.$factory("first argument must be a bytes-like object, not '"+e.class_name(r.sub)+"'");if(!r.sub.__class__.$buffer_protocol)throw t.TypeError.$factory("first argument must be a bytes-like object, not '"+e.class_name(r.sub)+"'");o=r.sub.source.length}do{-1!=(a=l.find(r.self,r.sub,Math.max(a+o,r.start),r.end))&&n++}while(-1!=a);return n},l.decode=function(t,r,n){var a=e.args("decode",3,{self:null,encoding:null,errors:null},["self","encoding","errors"],arguments,{encoding:"utf-8",errors:"strict"},null,null);switch(a.errors){case"strict":case"ignore":case"replace":case"surrogateescape":case"surrogatepass":case"xmlcharrefreplace":case"backslashreplace":return v(a.self,a.encoding,a.errors)}},l.endswith=function(){var r=e.args("endswith",4,{self:null,suffix:null,start:null,end:null},["self","suffix","start","end"],arguments,{start:-1,end:-1},null,null);if(e.$isinstance(r.suffix,l)){-1==r.start?(r.self.source.length,r.suffix.source.length):Math.min(r.self.source.length-r.suffix.source.length,r.start);for(var n=-1==r.end?r.self.source.length:r.end,a=!0,o=r.suffix.source.length-1,s=r.suffix.source.length;o>=0&&a;--o)a=r.self.source[n-s+o]==r.suffix.source[o];return a}if(e.$isinstance(r.suffix,t.tuple)){for(o=0;o<r.suffix.length;++o){if(!e.$isinstance(r.suffix[o],l))throw t.TypeError.$factory("endswith first arg must be bytes or a tuple of bytes, not "+e.class_name(r.suffix));if(l.endswith(r.self,r.suffix[o],r.start,r.end))return!0}return!1}throw t.TypeError.$factory("endswith first arg must be bytes or a tuple of bytes, not "+e.class_name(r.suffix))},l.expandtabs=function(){var r=e.args("expandtabs",2,{self:null,tabsize:null},["self","tabsize"],arguments,{tabsize:8},null,null),n=[];for(let e=0;e<r.tabsize;++e)n.push(32);var a=r.self.source.slice();for(let e=0;e<a.length;++e)if(9===a[e]){var o=r.tabsize-e%r.tabsize,s=new Array(o);s.fill(32),a.splice.apply(a,[e,1].concat(s))}return t.bytes.$factory(a)},l.find=function(r,n){if(2!=arguments.length)var a=e.args("find",4,{self:null,sub:null,start:null,end:null},["self","sub","start","end"],arguments,{start:0,end:-1},null,null),o=(n=a.sub,a.start),s=a.end;else o=0,s=-1;if("number"==typeof n){if(n<0||n>255)throw t.ValueError.$factory("byte must be in range(0, 256)");return r.source.slice(0,-1==s?void 0:s).indexOf(n,o)}if(!n.__class__)throw t.TypeError.$factory("first argument must be a bytes-like object, not '"+e.class_name(n)+"'");if(!n.__class__.$buffer_protocol)throw t.TypeError.$factory("first argument must be a bytes-like object, not '"+e.class_name(n)+"'");s=-1==s?r.source.length:Math.min(r.source.length,s);for(var i=n.source.length,_=o;_<=s-i;_++){for(var l=r.source.slice(_,_+i),c=!0,u=0;u<i;u++)if(l[u]!=n.source[u]){c=!1;break}if(c)return _}return-1},l.fromhex=function(){for(var r=e.args("fromhex",2,{cls:null,string:null},["cls","string"],arguments,{},null,null),n=r.string.replace(/\s/g,""),a=[],o=0;o<n.length;o+=2){if(o+2>n.length)throw t.ValueError.$factory("non-hexadecimal number found in fromhex() arg");a.push(t.int.$factory(n.substr(o,2),16))}return r.cls.$factory(a)},l.hex=function(){var t=e.args("hex",3,{self:null,sep:null,bytes_per_sep:null},["self","sep","bytes_per_sep"],arguments,{sep:"",bytes_per_sep:1},null,null),r=t.self,n=t.sep,a=t.bytes_per_sep,o="",s="0123456789abcdef",i=a,_=i,l=r.source.length;a<0?_=i=-a:0==a?n="":0==(_=l%i)&&(_=i);for(var c=0,u=_;c<l;c++){var f=r.source[c];0==u&&(o+=n,u=i),u--,o+=s[f>>4],o+=s[15&f]}return o},l.index=function(){var r=e.args("index",4,{self:null,sub:null,start:null,end:null},["self","sub","start","end"],arguments,{start:0,end:-1},null,null),n=l.find(r.self,r.sub,r.start,r.end);if(console.log("index",n),-1==n)throw t.ValueError.$factory("subsection not found");return n},l.isalnum=function(){for(var t=e.args("isalnum",1,{self:null},["self"],arguments,{},null,null).self.source,r=t.length,n=r>0,a=0;a<r&&n;++a)n=t[a]>96&&t[a]<123||t[a]>64&&t[a]<91||t[a]>47&&t[a]<58;return n},l.isalpha=function(){for(var t=e.args("isalpha",1,{self:null},["self"],arguments,{},null,null).self.source,r=t.length,n=r>0,a=0;a<r&&n;++a)n=t[a]>96&&t[a]<123||t[a]>64&&t[a]<91;return n},l.isdigit=function(){var t=e.args("isdigit",1,{self:null},["self"],arguments,{},null,null).self.source,r=t.length,n=r>0;for(let e=0;e<r&&n;++e)n=t[e]>47&&t[e]<58;return n},l.islower=function(){var t=e.args("islower",1,{self:null},["self"],arguments,{},null,null).self.source,r=t.length,n=!1;for(let e=0;e<r;++e)if(n=n||t[e]>96&&t[e]<123,t[e]>64&&t[e]<91)return!1;return n},l.isspace=function(){var t=e.args("isspace",1,{self:null},["self"],arguments,{},null,null).self.source,r=t.length;for(let e=0;e<r;++e)switch(t[e]){case 9:case 10:case 11:case 12:case 13:case 32:break;default:return!1}return!0},l.isupper=function(){var t=e.args("isupper",1,{self:null},["self"],arguments,{},null,null).self.source,r=t.length,n=!1;for(let e=0;e<r;++e)if(n=n||t[e]>64&&t[e]<91,t[e]>96&&t[e]<123)return!1;return n},l.istitle=function(){for(var t=e.args("istitle",1,{self:null},["self"],arguments,{},null,null).self.source,r=t.length,n=!1,a=!1,o=!1,s=!1,i=0;i<r;++i){if(s=t[i]>96&&t[i]<123,o=t[i]>64&&t[i]<91,(n=s||o)&&a&&o||!a&&s)return!1;a=n}return!0},l.join=function(){for(var r=e.args("join",2,{self:null,iterable:null},["self","iterable"],arguments,{}),n=r.self,a=r.iterable,o=e.$getattr(t.iter(a),"__next__"),s=n.__class__.$factory(),i=!0;;)try{var _=o();i?i=!1:s=l.__add__(s,n),s=l.__add__(s,_)}catch(err){if(e.$isinstance(err,t.StopIteration))break;throw err}return s};l.lower=function(e){for(var t,r=[],n=0,a=0,o=e.source.length;a<o;a++)e.source[a]&&(r[n++]=(t=e.source[a])>=65&&t<=90?t+32:t);return l.$factory(r)},l.ljust=function(){var r=e.args("ljust",3,{self:null,width:null,fillbyte:null},["self","width","fillbyte"],arguments,{fillbyte:l.$factory([32])},null,null);if(!r.fillbyte.__class__)throw t.TypeError.$factory("argument 2 must be a byte string of length 1, not '"+e.class_name(r.fillbyte)+"'");if(!r.fillbyte.__class__.$buffer_protocol)throw t.TypeError.$factory("argument 2 must be a byte string of length 1, not '"+e.class_name(r.fillbyte)+"'");for(var n=[],a=r.width-r.self.source.length,o=0;o<a;++o)n.push(r.fillbyte.source[0]);return l.$factory(r.self.source.concat(n))},l.lstrip=function(e,t){return a(e,t,"l")},l.maketrans=function(t,r){for(var n=[],a=(r=e.to_bytes(r),0);a<256;a++)n[a]=a;a=0;for(var o=t.source.length;a<o;a++){n[t.source[a]]=r[a]}return l.$factory(n)},l.partition=function(){var r=e.args("partition",2,{self:null,sep:null},["self","sep"],arguments,{},null,null);if(!r.sep.__class__)throw t.TypeError.$factory("a bytes-like object is required, not '"+e.class_name(r.sep)+"'");if(!r.sep.__class__.$buffer_protocol)throw t.TypeError.$factory("a bytes-like object is required, not '"+e.class_name(r.sep)+"'");var n=r.sep.source.length,a=r.self.source,o=l.find(r.self,r.sep);return t.tuple.$factory([l.$factory(a.slice(0,o)),l.$factory(a.slice(o,o+n)),l.$factory(a.slice(o+n))])},l.removeprefix=function(){var r=e.args("removeprefix",2,{self:null,prefix:null},["self","prefix"],arguments,{},null,null);if(!e.$isinstance(r.prefix,[l,s]))throw t.ValueError.$factory(`prefix should be bytes, not '${e.class_name(r.prefix)}'`);return l.startswith(r.self,r.prefix)?l.__getitem__(r.self,t.slice.$factory(r.prefix.source.length,t.None)):l.__getitem__(r.self,t.slice.$factory(0,t.None))},l.removesuffix=function(){var r=e.args("removesuffix",2,{self:null,suffix:null},["self","suffix"],arguments,{},null,null);if(!e.$isinstance(r.suffix,[l,s]))throw t.ValueError.$factory(`suffix should be bytes, not '${e.class_name(r.suffix)}'`);return l.endswith(r.self,r.suffix)?l.__getitem__(r.self,t.slice.$factory(0,r.suffix.source.length+1)):l.__getitem__(r.self,t.slice.$factory(0,t.None))},l.replace=function(){var r=e.args("replace",4,{self:null,old:null,new:null,count:null},["self","old","new","count"],arguments,{count:-1},null,null),n=[],a=r.self,o=a.source,s=o.length,i=r.old,_=r.new,c=r.count>=0?r.count:o.length;if(!r.old.__class__)throw t.TypeError.$factory("first argument must be a bytes-like object, not '"+e.class_name(r.old)+"'");if(!r.old.__class__.$buffer_protocol)throw t.TypeError.$factory("first argument must be a bytes-like object, not '"+e.class_name(r.sep)+"'");if(!r.new.__class__)throw t.TypeError.$factory("second argument must be a bytes-like object, not '"+e.class_name(r.old)+"'");if(!r.new.__class__.$buffer_protocol)throw t.TypeError.$factory("second argument must be a bytes-like object, not '"+e.class_name(r.sep)+"'");for(var u=0;u<s;u++)if(l.startswith(a,i,u)&&c){for(var f=0;f<_.source.length;f++)n.push(_.source[f]);u+=i.source.length-1,c--}else n.push(o[u]);return l.$factory(n)},l.rfind=function(r,n){if(2==arguments.length&&n.__class__===l)var a=n,o=0,s=-1;else{var i=e.args("rfind",4,{self:null,sub:null,start:null,end:null},["self","sub","start","end"],arguments,{start:0,end:-1},null,null);r=i.self,a=i.sub,o=i.start,s=i.end}if("number"==typeof a){if(a<0||a>255)throw t.ValueError.$factory("byte must be in range(0, 256)");return i.self.source.slice(o,-1==i.end?void 0:i.end).lastIndexOf(a)+o}if(!a.__class__)throw t.TypeError.$factory("first argument must be a bytes-like object, not '"+e.class_name(i.sub)+"'");if(!a.__class__.$buffer_protocol)throw t.TypeError.$factory("first argument must be a bytes-like object, not '"+e.class_name(a)+"'");s=-1==s?r.source.length:Math.min(r.source.length,s);for(var _=a.source.length,c=s-_;c>=o;--c){for(var u=r.source.slice(c,c+_),f=!0,p=0;p<_;p++)if(u[p]!=a.source[p]){f=!1;break}if(f)return c}return-1},l.rindex=function(){var r=e.args("rfind",4,{self:null,sub:null,start:null,end:null},["self","sub","start","end"],arguments,{start:0,end:-1},null,null),n=l.rfind(r.self,r.sub,r.start,r.end);if(-1==n)throw t.ValueError.$factory("subsection not found");return n},l.rjust=function(){var r=e.args("rjust",3,{self:null,width:null,fillbyte:null},["self","width","fillbyte"],arguments,{fillbyte:l.$factory([32])},null,null);if(!r.fillbyte.__class__)throw t.TypeError.$factory("argument 2 must be a byte string of length 1, not '"+e.class_name(r.fillbyte)+"'");if(!r.fillbyte.__class__.$buffer_protocol)throw t.TypeError.$factory("argument 2 must be a byte string of length 1, not '"+e.class_name(r.fillbyte)+"'");for(var n=[],a=r.width-r.self.source.length,o=0;o<a;++o)n.push(r.fillbyte.source[0]);return l.$factory(n.concat(r.self.source))},l.rpartition=function(){var r=e.args("rpartition",2,{self:null,sep:null},["self","sep"],arguments,{},null,null);if(!r.sep.__class__)throw t.TypeError.$factory("a bytes-like object is required, not '"+e.class_name(r.sep)+"'");if(!r.sep.__class__.$buffer_protocol)throw t.TypeError.$factory("a bytes-like object is required, not '"+e.class_name(r.sep)+"'");var n=r.sep.source.length,a=r.self.source,o=l.rfind(r.self,r.sep);return t.tuple.$factory([l.$factory(a.slice(0,o)),l.$factory(a.slice(o,o+n)),l.$factory(a.slice(o+n))])},l.rstrip=function(e,t){return a(e,t,"r")},l.split=function(){var r=e.args("split",2,{self:null,sep:null},["self","sep"],arguments,{sep:l.$factory([32])},null,null),n=[],a=0,o=0;if(!r.sep.__class__)throw t.TypeError.$factory("a bytes-like object is required, not '"+e.class_name(r.sep)+"'");if(!r.sep.__class__.$buffer_protocol)throw t.TypeError.$factory("a bytes-like object is required, not '"+e.class_name(r.sep)+"'");for(var s=r.sep.source,i=s.length,_=r.self.source,c=_.length;o<c;){for(var u=!0,f=0;f<i&&u;f++)_[o+f]!=s[f]&&(u=!1);u?(n.push(l.$factory(_.slice(a,o))),o=a=o+i):o++}return(u||o>a)&&n.push(l.$factory(_.slice(a,o))),n},l.splitlines=function(r){var n=e.args("splitlines",2,{self:null,keepends:null},["self","keepends"],arguments,{keepends:!1},null,null);if(!e.$isinstance(n.keepends,[t.bool,t.int]))throw t.TypeError("integer argument expected, got "+e.get_class(n.keepends).__name);var a=t.int.$factory(n.keepends),o=[],s=n.self.source,i=0,_=0;if(!s.length)return o;for(;_<s.length;)_<s.length-1&&13==s[_]&&10==s[_+1]?(o.push(l.$factory(s.slice(i,a?_+2:_))),i=_+=2):13==s[_]||10==s[_]?(o.push(l.$factory(s.slice(i,a?_+1:_))),i=_+=1):_++;return i<s.length&&o.push(l.$factory(s.slice(i))),o},l.startswith=function(){var r=e.args("startswith",3,{self:null,prefix:null,start:null},["self","prefix","start"],arguments,{start:0},null,null),n=r.start;if(e.$isinstance(r.prefix,l)){for(var a=!0,o=0;o<r.prefix.source.length&&a;o++)a=r.self.source[n+o]==r.prefix.source[o];return a}if(e.$isinstance(r.prefix,t.tuple)){var s=[];for(o=0;o<r.prefix.length;o++){if(!e.$isinstance(r.prefix[o],l))throw t.TypeError.$factory("startswith first arg must be bytes or a tuple of bytes, not "+e.class_name(r.prefix));s=s.concat(r.prefix[o].source)}var i=l.$factory(s);return l.startswith(r.self,i,n)}throw t.TypeError.$factory("startswith first arg must be bytes or a tuple of bytes, not "+e.class_name(r.prefix))},l.strip=function(e,t){var r=l.lstrip(e,t);return l.rstrip(r,t)},l.swapcase=function(e){for(var t=e.source,r=t.length,n=t.slice(),a=0;a<r;++a)n[a]>96&&n[a]<123?n[a]-=32:n[a]>64&&n[a]<91&&(n[a]+=32);return l.$factory(n)},l.title=function(e){for(var t=e.source,r=t.length,n=t.slice(),a=!1,o=!1,s=!1,i=!1,_=0;_<r;++_)i=n[_]>96&&n[_]<123,s=n[_]>64&&n[_]<91,(a=i||s)&&(o&&s?n[_]+=32:!o&&i&&(n[_]-=32)),o=a;return l.$factory(n)},l.translate=function(r,n,a){if(void 0===a)a=[];else{if(!e.$isinstance(a,l))throw t.TypeError.$factory("Type "+e.get_class(a).__name+" doesn't support the buffer API");a=a.source}var o=[],s=0;if(e.$isinstance(n,l)&&256==n.source.length)for(var i=0,_=r.source.length;i<_;i++)a.indexOf(r.source[i])>-1||(o[s++]=n.source[r.source[i]]);return l.$factory(o)};function u(e,r,n){throw t.UnicodeEncodeError.$factory("'"+e+"' codec can't encode character "+t.hex(r)+" in position "+n)}function f(e){var t=e.toString(16);return"0x"+"0".repeat(2-t.length)+t}l.upper=function(e){for(var t,r=[],n=0,a=0,o=e.source.length;a<o;a++)e.source[a]&&(r[n++]=(t=e.source[a])>=97&&t<=122?t-32:t);return l.$factory(r)},l.zfill=function(e,t){for(var r=e.source.slice(),n=43==r[0]||45==r[0]?1:0,a=t-e.source.length,o=[],s=0;s<a;++s)o.push(48);return r.splice.apply(r,[n,0].concat(o)),l.$factory(r)};var p={ascii:["646","us-ascii"],big5:["big5-tw","csbig5"],big5hkscs:["big5-hkscs","hkscs"],cp037:["IBM037","IBM039"],cp273:["273","IBM273","csIBM273"],cp424:["EBCDIC-CP-HE","IBM424"],cp437:["437","IBM437"],cp500:["EBCDIC-CP-BE","EBCDIC-CP-CH","IBM500"],cp775:["IBM775"],cp850:["850","IBM850"],cp852:["852","IBM852"],cp855:["855","IBM855"],cp857:["857","IBM857"],cp858:["858","IBM858"],cp860:["860","IBM860"],cp861:["861","CP-IS","IBM861"],cp862:["862","IBM862"],cp863:["863","IBM863"],cp864:["IBM864"],cp865:["865","IBM865"],cp866:["866","IBM866"],cp869:["869","CP-GR","IBM869"],cp932:["932","ms932","mskanji","ms-kanji"],cp949:["949","ms949","uhc"],cp950:["950","ms950"],cp1026:["ibm1026"],cp1125:["1125","ibm1125","cp866u","ruscii"],cp1140:["ibm1140"],cp1250:["windows-1250"],cp1251:["windows-1251"],cp1252:["windows-1252"],cp1253:["windows-1253"],cp1254:["windows-1254"],cp1255:["windows-1255"],cp1256:["windows-1256"],cp1257:["windows-1257"],cp1258:["windows-1258"],euc_jp:["eucjp","ujis","u-jis"],euc_jis_2004:["jisx0213","eucjis2004"],euc_jisx0213:["eucjisx0213"],euc_kr:["euckr","korean","ksc5601","ks_c-5601","ks_c-5601-1987","ksx1001","ks_x-1001"],gb2312:["chinese","csiso58gb231280","euc-cn","euccn","eucgb2312-cn","gb2312-1980","gb2312-80","iso-ir-58"],gbk:["936","cp936","ms936"],gb18030:["gb18030-2000"],hz:["hzgb","hz-gb","hz-gb-2312"],iso2022_jp:["csiso2022jp","iso2022jp","iso-2022-jp"],iso2022_jp_1:["iso2022jp-1","iso-2022-jp-1"],iso2022_jp_2:["iso2022jp-2","iso-2022-jp-2"],iso2022_jp_2004:["iso2022jp-2004","iso-2022-jp-2004"],iso2022_jp_3:["iso2022jp-3","iso-2022-jp-3"],iso2022_jp_ext:["iso2022jp-ext","iso-2022-jp-ext"],iso2022_kr:["csiso2022kr","iso2022kr","iso-2022-kr"],latin_1:["iso-8859-1","iso8859-1","8859","cp819","latin","latin1","L1"],iso8859_2:["iso-8859-2","latin2","L2"],iso8859_3:["iso-8859-3","latin3","L3"],iso8859_4:["iso-8859-4","latin4","L4"],iso8859_5:["iso-8859-5","cyrillic"],iso8859_6:["iso-8859-6","arabic"],iso8859_7:["iso-8859-7","greek","greek8"],iso8859_8:["iso-8859-8","hebrew"],iso8859_9:["iso-8859-9","latin5","L5"],iso8859_10:["iso-8859-10","latin6","L6"],iso8859_11:["iso-8859-11","thai"],iso8859_13:["iso-8859-13","latin7","L7"],iso8859_14:["iso-8859-14","latin8","L8"],iso8859_15:["iso-8859-15","latin9","L9"],iso8859_16:["iso-8859-16","latin10","L10"],johab:["cp1361","ms1361"],kz1048:["kz_1048","strk1048_2002","rk1048"],mac_cyrillic:["maccyrillic"],mac_greek:["macgreek"],mac_iceland:["maciceland"],mac_latin2:["maclatin2","maccentraleurope","mac_centeuro"],mac_roman:["macroman","macintosh"],mac_turkish:["macturkish"],ptcp154:["csptcp154","pt154","cp154","cyrillic-asian"],shift_jis:["csshiftjis","shiftjis","sjis","s_jis"],shift_jis_2004:["shiftjis2004","sjis_2004","sjis2004"],shift_jisx0213:["shiftjisx0213","sjisx0213","s_jisx0213"],utf_32:["U32","utf32"],utf_32_be:["UTF-32BE"],utf_32_le:["UTF-32LE"],utf_16:["U16","utf16"],utf_16_be:["UTF-16BE"],utf_16_le:["UTF-16LE"],utf_7:["U7","unicode-1-1-utf-7"],utf_8:["U8","UTF","utf8","cp65001"],mbcs:["ansi","dbcs"],bz2_codec:["bz2"],hex_codec:["hex"],quopri_codec:["quopri","quotedprintable","quoted_printable"],uu_codec:["uu"],zlib_codec:["zip","zlib"],rot_13:["rot13"]},h={};for(var d in p)for(var m of p[d])h[m.toLowerCase().replace(/-/g,"_")]=d;function g(e){var t=e.toLowerCase().replace(/ /g,"_").replace(/-/g,"_");return void 0!==h[t]&&(t=h[t]),t}var v=e.decode=function(r,a,o){var i="",_=r.source,c=g(a);switch(c){case"utf_8":case"utf-8":case"utf8":case"U8":case"UTF":var u,p=0;for(i="";p<_.length;){var h=_[p];if(u=null,128&h)if(h>>5==6)if(void 0===_[p+1]?u=[h,p,"end"]:128!=(192&_[p+1])&&(u=[h,p,"continuation"]),null!==u){if("ignore"!=o)throw t.UnicodeDecodeError.$factory("'utf-8' codec can't decode byte 0x"+u[0].toString(16)+"  in position "+u[1]+("end"==u[2]?": unexpected end of data":": invalid continuation byte"));p++}else{var d=31&h;d<<=6,d+=63&_[p+1],i+=String.fromCodePoint(d),p+=2}else if(h>>4==14)if(void 0===_[p+1]?u=[h,p,"end",p+1]:128!=(192&_[p+1])?u=[h,p,"continuation",p+2]:void 0===_[p+2]?u=[h,p+"-"+(p+1),"end",p+2]:128!=(192&_[p+2])&&(u=[h,p,"continuation",p+3]),null!==u)if("ignore"==o)p=u[3];else{if("surrogateescape"!=o)throw t.UnicodeDecodeError.$factory("'utf-8' codec can't decode byte 0x"+u[0].toString(16)+"  in position "+u[1]+("end"==u[2]?": unexpected end of data":": invalid continuation byte"));for(var m=p;m<u[3];m++)i+=String.fromCodePoint(56448+_[m]-128);p=u[3]}else{d=15&h;d<<=12,d+=(63&_[p+1])<<6,d+=63&_[p+2],i+=String.fromCodePoint(d),p+=3}else if(h>>3==30)if(void 0===_[p+1]?u=[h,p,"end",p+1]:128!=(192&_[p+1])?u=[h,p,"continuation",p+2]:void 0===_[p+2]?u=[h,p+"-"+(p+1),"end",p+2]:128!=(192&_[p+2])?u=[h,p,"continuation",p+3]:void 0===_[p+3]?u=[h,p+"-"+(p+1)+"-"+(p+2),"end",p+3]:128!=(192&_[p+2])&&(u=[h,p,"continuation",p+3]),null!==u)if("ignore"==o)p=u[3];else{if("surrogateescape"!=o)throw t.UnicodeDecodeError.$factory("'utf-8' codec can't decode byte 0x"+u[0].toString(16)+"  in position "+u[1]+("end"==u[2]?": unexpected end of data":": invalid continuation byte"));for(m=p;m<u[3];m++)i+=String.fromCodePoint(56448+_[m]-128);p=u[3]}else{d=15&h;d<<=18,d+=(63&_[p+1])<<12,d+=(63&_[p+2])<<6,d+=63&_[p+3],i+=String.fromCodePoint(d),p+=4}else if("ignore"==o)p++;else{if("surrogateescape"!=o)throw t.UnicodeDecodeError.$factory("'utf-8' codec can't decode byte 0x"+h.toString(16)+" in position "+p+": invalid start byte");i+=String.fromCodePoint(56448+_[p]-128),p++}else i+=String.fromCodePoint(h),p++}return i;case"latin_1":case"windows1252":case"iso-8859-1":case"iso8859-1":case"8859":case"cp819":case"latin":case"latin1":case"L1":_.forEach((function(e){i+=String.fromCharCode(e)}));break;case"unicode_escape":return r.__class__!==l&&r.__class__!==s||(r=v(r,"latin-1","strict")),r.replace(/\\n/g,"\n").replace(/\\a/g,"\x07").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\t/g,"\t").replace(/\\'/g,"'").replace(/\\"/g,'"');case"raw_unicode_escape":return r.__class__!==l&&r.__class__!==s||(r=v(r,"latin-1","strict")),r.replace(/\\u([a-fA-F0-9]{4})/g,(function(e){var t=parseInt(e.substr(2),16);return String.fromCharCode(t)}));case"ascii":m=0;for(var $=_.length;m<$;m++){if((d=_[m])<=127)i+=String.fromCharCode(d);else if("ignore"==o);else{if("backslashreplace"!=o){var y="'ascii' codec can't decode byte 0x"+d.toString(16)+" in position "+m+": ordinal not in range(128)";throw t.UnicodeDecodeError.$factory(y)}i+="\\x"+d.toString(16)}}break;default:try{!function(r){if(void 0===n[r]){var a=t.__import__("encodings."+r);a[r].getregentry&&(n[r]=e.$getattr(a[r].getregentry(),"decode"))}}(c)}catch(err){throw t.LookupError.$factory("unknown encoding: "+c)}var b=n[c](r)[0];for(m=0,$=b.length;m<$;m++)if(65534==b.codePointAt(m))throw t.UnicodeDecodeError.$factory(`'charmap' codec can't decode byte ${f(_[m])} in position ${m}: character maps to <undefined>`);return b}return i},$=e.encode=function(){var n=e.args("encode",3,{s:null,encoding:null,errors:null},["s","encoding","errors"],arguments,{encoding:"utf-8",errors:"strict"},null,null),a=n.s,o=n.encoding,s=n.errors,i=[],_=0,l=g(o);switch(l){case"utf-8":case"utf_8":case"utf8":for(var c=0,f=a.length;c<f;c++){(p=a.charCodeAt(c))<=127?i.push(p):p<=2047?i.push(192+(p>>6),128+(63&p)):p<=65535?i.push(224+(p>>12),128+((4095&p)>>6),128+(63&p)):console.log("4 bytes")}break;case"latin":case"latin1":case"latin-1":case"latin_1":case"L1":case"iso8859_1":case"iso_8859_1":case"8859":case"cp819":case"windows1252":for(c=0,f=a.length;c<f;c++){(p=a.charCodeAt(c))<=255?i[_++]=p:"ignore"!=s&&u(o,c)}break;case"ascii":for(c=0,f=t.str.__len__(a);c<f;c++){var p=a.charCodeAt(c),h=t.str.__getitem__(a,c);if(p<=127)i[_++]=p;else if("backslashreplace"==s){var d=t.hex(t.ord(h));for(var h of d=d.length<5?"\\x"+"0".repeat(4-d.length)+d.substr(2):d.length<7?"\\u"+"0".repeat(6-d.length)+d.substr(2):"\\U"+"0".repeat(10-d.length)+d.substr(2))i[_++]=h.charCodeAt(0)}else"ignore"!==s&&u(o,c)}break;case"raw_unicode_escape":for(c=0,f=a.length;c<f;c++){if((p=a.charCodeAt(c))<256)i[_++]=p;else{var m=p.toString(16);m.length%2&&(m="0"+m),m="\\u"+m;for(var v=0;v<m.length;v++)i[_++]=m.charCodeAt(v)}}break;default:try{!function(n){if(void 0===r[n]){var a=t.__import__("encodings."+n);a[n].getregentry&&(r[n]=e.$getattr(a[n].getregentry(),"encode"))}}(l)}catch(err){throw t.LookupError.$factory("unknown encoding: "+o)}return r[l](a)[0]}return y(i)};function y(e){return{__class__:t.bytes,source:e}}for(var b in l.$factory=function(e,t,r){return l.__new__.bind(null,l).apply(null,arguments)},l.__class__=t.type,l.$is_class=!0,e.set_func_names(l,"builtins"),l.fromhex=t.classmethod.$factory(l.fromhex),l)void 0===s[b]&&"function"==typeof l[b]&&(s[b]=function(e){return function(){return l[e].apply(null,arguments)}}(b));e.set_func_names(s,"builtins"),s.fromhex=l.fromhex,t.bytes=l,t.bytearray=s}(__BRYTHON__),function(e){var t=e.builtins,r=(t.object,t.None);function n(e){var r={__class__:e,$store:Object.create(null),$version:0,$used:0};return r[Symbol.iterator]=function*(){var e=r.$version;for(var n of h(r))if(yield n,r.$version!=e)throw t.RuntimeError.$factory("Set changed size during iteration")},r}function a(t){return e.$isinstance(t,_)?_.$factory():x.$factory()}function o(t,r,n){s(t,r,n=void 0===n?e.$hash(r):n)||(t.$store[n]=t.$store[n]||[],t.$store[n].push(r),t.$used++,t.$version++)}function s(e,t,r){return!!v(e,t,r)}function i(e){var t=a(e);for(var r in e.$store)t.$store[r]=e.$store[r].slice();return t.$used=e.$used,t}var _=e.make_class("set");function l(e,t){var r=i(e);return c(r,t),r}function c(r,n){if(r===n)return _.clear(r);if(e.$isinstance(n,[_,x]))for(var a of d(n))f(r,a.item,a.hash);else if(e.$isinstance(n,t.dict))for(var a of t.dict.$iter_items_with_hash(n))f(r,a.key,a.hash);else{var o=e.make_js_iterator(n);for(var s of o)p(r,s)}}_.$native=!0;const u=0;function f(e,t,r){var n=v(e,t,r);if(!n)return u;void 0!==e.$store[n.hash]&&function(e,t,r){e.$store[t].splice(r,1),0==e.$store[t].length&&delete e.$store[t];e.$used--}(e,n.hash,n.index)}function p(e,t){return f(e,t)}function*h(e){var t=Object.keys(e.$store).sort();for(var r of t)if(void 0!==e.$store[r])for(var n of e.$store[r])yield n}function*d(e){for(var t in e.$store)if(void 0!==e.$store[t])for(var r of e.$store[t])yield{item:r,hash:t}}function m(r,n){if(r===n)return i(r);var l=a(r);if(e.$isinstance(n,[_,x])){if(n.$used>r.$used){var c=r;r=n,n=c}for(var u of d(n))s(r,u.item,u.hash)&&o(l,u.item,u.hash)}else if(e.$isinstance(n,t.dict))for(var u of t.dict.$iter_items_with_hash(n))s(r,u.key,u.hash)&&o(l,u.key,u.hash);else{var f=e.make_js_iterator(n);for(var p of f){s(r,p)&&o(l,p)}}return l}function g(e,t){var r=i(e);if(0==t.length)return r;for(var n of t)r=m(r,n);return r}function v(t,r,n){if(void 0===n)try{n=e.$hash(r)}catch(err){if(!e.$isinstance(r,_))throw err;n=e.$hash(x.$factory(r))}var a=t.$store[n];if(void 0===a)return!1;for(var o=0,s=t.$store[n].length;o<s;o++)if(e.is_or_equals(r,a[o]))return{hash:n,index:o};return!1}function $(r,n){if(r==n)return _.clear(r);if(e.$isinstance(n,t.dict))for(var a of t.dict.$iter_items_with_hash(n))f(r,a.key,a.hash)==u&&o(r,a.key,a.hash);else{if(!e.$isinstance(n,[_,x]))return $(r,_.$factory(n));for(var a of d(n))f(r,a.item,a.hash)==u&&o(r,a.item,a.hash)}return t.None}_.__and__=function(r,n){return e.$isinstance(n,[_,x])?m(r,n):t.NotImplemented},_.__class_getitem__=function(t,r){return Array.isArray(r)||(r=[r]),e.GenericAlias.$factory(t,r)},_.__contains__=function(e,t){return s(e,t)},_.__eq__=function(r,n){if(e.$isinstance(n,[t.set,t.frozenset])){if(r.$used!=n.$used)return!1;for(var a in r.$store){if(void 0===n.$store[a])return!1;var o=r.$store[a],s=n.$store[a];if(void 0===o||void 0===s)return!1;if(o.length!=s.length)return!1;if(1==o.length){if(!e.is_or_equals(o[0],s[0]))return!1}else for(var i of(o=o.slice(),s=s.slice(),o)){for(var _=!1,l=0,c=s.length;l<c;l++)if(e.is_or_equals(i,s[l])){s.splice(l,1),_=!0;break}if(!_)return!1}}return!0}return t.NotImplemented},_.__format__=function(e,t){return _.__repr__(e)},_.__ge__=function(r,n){return e.$isinstance(n,[_,x])?_.__le__(n,r):t.NotImplemented},_.__gt__=function(r,n){return e.$isinstance(n,[_,x])?_.__lt__(n,r):t.NotImplemented},_.__hash__=t.None,_.__init__=function(r,n){return void 0===n||(e.check_nb_args_no_kw("set",2,arguments),Object.keys(r.$store).length>0&&_.clear(r),_.update(r,n)),t.None};var y=e.make_class("set_iterator",(function(e){return{__class__:y,so:e,it:h(e),version:e.$version}}));function b(e){var t=[];for(var r in e.$store)t=t.concat(e.$store[r]);return t}function w(r){var n=e.class_name(r);if(0===r.$used)return n+"()";var a=n+"({",o="})";"set({"==a&&(a="{",o="}");var s=[];if(e.repr.enter(r))return n+"(...)";for(var i of h(r)){var _=t.repr(i);_===r||_===i?s.push("{...}"):s.push(_)}return s=s.join(", "),e.repr.leave(r),a+s+o}y.__iter__=function(e){return e},y.__length_hint__=function(e){return e.so.$used},y.__next__=function(e){var r=e.it.next();if(r.done)throw t.StopIteration.$factory();if(e.so.$version!=e.version)throw t.RuntimeError.$factory("Set changed size during iteration");return r.value},y.__reduce_ex__=function(r,n){return e.fast_tuple([t.iter,e.fast_tuple([b(r.so)])])},e.set_func_names(y,"builtins"),_.__iter__=function(e){return y.$factory(e)},_.__le__=function(r,n){return e.$isinstance(n,[_,x])?_.issubset(r,n):t.NotImplemented},_.__len__=function(e){return e.$used},_.__lt__=function(r,n){return e.$isinstance(n,[_,x])?_.__le__(r,n)&&_.__len__(r)<_.__len__(n):t.NotImplemented},_.__mro__=[t.object],_.__new__=function(r,a){if(void 0===r)throw t.TypeError.$factory("set.__new__(): not enough arguments");var o=n(r);return void 0===a||r===_&&e.check_nb_args_no_kw("__new__",2,arguments),o},_.__or__=function(r,n){return e.$isinstance(n,[_,x])?_.union(r,n):t.NotImplemented},_.__rand__=function(e,t){return _.__and__(e,t)},_.__reduce__=function(r){return e.fast_tuple([r.__class__,e.fast_tuple([b(r)]),t.None])},_.__reduce_ex__=function(e,t){return _.__reduce__(e)},_.__repr__=function(t){return e.builtins_repr_check(_,arguments),w(t)},_.__ror__=function(e,t){return _.__or__(e,t)},_.__rsub__=function(e,t){return _.__sub__(e,t)},_.__rxor__=function(e,t){return _.__xor__(e,t)},_.__sub__=function(r,a,i){return e.$isinstance(a,[_,x])?function(r,a){var i,c;if(e.$isinstance(a,[_,x]))i=_.__len__(a);else{if(!e.$isinstance(a,t.dict))return l(r,a);i=t.dict.__len__(a),c=!0}if(_.__len__(r)>>2>i)return l(r,a);var u=n();if(c){for(var f of d(r))t.dict.$lookup_by_key(a,f.item,f.hash).found||o(u,f.item,f.hash);return u}for(var f of d(r))s(a,f.item,f.hash)||o(u,f.item,f.hash);return u.__class__=r.__class__,u}(r,a):t.NotImplemented},_.__xor__=function(r,a,i){if(!e.$isinstance(a,[_,x]))return t.NotImplemented;var l=n();for(var c of d(r))s(a,c.item,c.hash)||o(l,c.item,c.hash);for(var c of d(a))s(r,c.item,c.hash)||o(l,c.item,c.hash);return l.__class__=r.__class__,l},e.make_rmethods(_),_.add=function(){var r=e.args("add",2,{self:null,item:null},["self","item"],arguments,{},null,null);return o(r.self,r.item),t.None},_.clear=function(){var t=e.args("clear",1,{self:null},["self"],arguments,{},null,null);return t.self.$used=0,t.self.$store=Object.create(null),t.self.$version++,r},_.copy=function(t){return e.check_nb_args_no_kw("copy",1,arguments),i(t)},_.difference_update=function(r){var n=e.args("difference_update",1,{self:null},["self"],arguments,{},"args",null);for(var a of n.args)c(r,a);return r.$version++,t.None},_.discard=function(){var r=e.args("discard",2,{self:null,item:null},["self","item"],arguments,{},null,null);return f(r.self,r.item)!=u&&self.$version++,t.None},_.intersection_update=function(){var r=e.args("intersection_update",1,{self:null},["self"],arguments,{},"args",null),n=r.self;return function(e,t){var r=i(e);_.clear(e),e.$used=t.$used,e.$store=t.$store,t.$used=r.$used,t.$store=r.$store}(n,g(n,r.args)),n.$version++,t.None},_.isdisjoint=function(){var t=e.args("isdisjoint",2,{self:null,other:null},["self","other"],arguments,{},null,null);return 0==m(t.self,t.other).$used},_.pop=function(e){for(var r in e.$store);if(void 0===r)throw t.KeyError.$factory("pop from an empty set");var n;return n=e.$store[r].pop(),0==e.$store[r].length&&delete e.$store[r],e.$used--,e.$version++,n},_.remove=function(r,n){var a=e.args("remove",2,{self:null,item:null},["self","item"],arguments,{},null,null);if(f(r=a.self,n=a.item)==u)throw t.KeyError.$factory(n);return r.$version++,t.None},_.symmetric_difference_update=function(t,r){var n=e.args("symmetric_difference_update",2,{self:null,s:null},["self","s"],arguments,{},null,null);return $(n.self,n.s)},_.update=function(r){var n=e.args("update",1,{self:null},["self"],arguments,{},"args",null);for(var a of n.args)if(Array.isArray(a))for(var s=0;s<a.length;s++)o(r,a[s]);else if(e.$isinstance(a,[_,x]))for(var i of d(a))o(r,i.item,i.hash);else if(e.$isinstance(a,t.dict))for(var i of t.dict.$iter_items_with_hash(a))o(r,i.key,i.hash);else{var l=e.make_js_iterator(a);for(var c of l)o(r,c)}return r.$version++,t.None},_.difference=function(){var t=e.args("difference",1,{self:null},["self"],arguments,{},"args",null);if(0==t.args.length)return _.copy(t.self);var r=i(t.self);for(var n of t.args)if(e.$isinstance(n,[_,x]))for(var a of d(n))f(r,a.item,a.hash);else{var o=_.$factory(n);r=_.difference(r,o)}return r},_.intersection=function(){var t=e.args("difference",1,{self:null},["self"],arguments,{},"args",null);return 0==t.args.length?_.copy(t.self):g(t.self,t.args)},_.symmetric_difference=function(t,r){e.args("symmetric_difference",2,{self:null,other:null},["self","other"],arguments,{},null,null);var n=i(t);return $(n,r),n},_.union=function(r){var n=e.args("union",1,{self:null},["self"],arguments,{},"args",null),a=i(n.self);if(0==n.args.length)return a;for(var s of n.args)if(e.$isinstance(s,[_,x]))for(var l of d(s))o(a,l.item,l.hash);else if(s.__class__===t.dict)for(var l of t.dict.$iter_items_with_hash(s))o(a,l.key,l.hash);else{var c=_.$factory(s);a=_.union(a,c)}return a},_.issubset=function(){var r=e.args("issubset",2,{self:null,other:null},["self","other"],arguments,{},"args",null),n=r.self,a=r.other;if(e.$isinstance(a,[_,x])){if(_.__len__(n)>_.__len__(a))return!1;for(var o of d(n))if(!v(a,o.item,o.hash))return!1;return!0}if(e.$isinstance(a,t.dict)){for(var o of t.dict.$iter_items_with_hash(n))if(!v(a,o.key,o.hash))return!1;return!0}var s=e.member_func(a);for(var o of d(n))if(!s(o.item))return!1;return!0},_.issuperset=function(){var t=e.args("issuperset",2,{self:null,other:null},["self","other"],arguments,{},"args",null),r=t.self,n=t.other;return e.$isinstance(n,[_,x])?_.issubset(n,r):_.issubset(_.$factory(n),r)},_.__iand__=function(r,n){return e.$isinstance(n,[_,x])?(_.intersection_update(r,n),r):t.NotImplemented},_.__isub__=function(r,n){return e.$isinstance(n,[_,x])?(c(r,n),r):t.NotImplemented},_.__ixor__=function(r,n){return e.$isinstance(n,[_,x])?(_.symmetric_difference_update(r,n),r):t.NotImplemented},_.__ior__=function(r,n){return e.$isinstance(n,[_,x])?(_.update(r,n),r):t.NotImplemented},_.$literal=function(t){var r=n(_);for(var a of t)if(a.constant)o(r,a.constant[0],a.constant[1]);else if(a.starred)for(var a of e.make_js_iterator(a.starred))o(r,a);else o(r,a.item);return r},_.$factory=function(){var e=[_].concat(Array.from(arguments)),t=_.__new__.apply(null,e);return _.__init__(t,...arguments),t},e.set_func_names(_,"builtins"),_.__class_getitem__=t.classmethod.$factory(_.__class_getitem__);var x=e.make_class("frozenset");for(var k in x.$native=!0,_)switch(k){case"add":case"clear":case"discard":case"pop":case"remove":case"update":break;default:null==x[k]&&("function"==typeof _[k]?x[k]=function(e){return function(){return _[e].apply(null,arguments)}}(k):x[k]=_[k])}x.__hash__=function(t){if(void 0===t)return x.__hashvalue__||e.$py_next_hash--;if(void 0!==t.__hashvalue__)return t.__hashvalue__;var r=1927868237;for(var n of(r*=t.$used,d(t))){var a=n.hash;r^=3644798167*(89869747^a^a<<16)}return-1==(r=69069*r+907133923)&&(r=590923713),t.__hashvalue__=r},x.__init__=function(){return t.None},x.__new__=function(r,a){if(void 0===r)throw t.TypeError.$factory("frozenset.__new__(): not enough arguments");var o=n(r);return void 0===a?o:(e.check_nb_args_no_kw("__new__",2,arguments),r===x&&a.__class__===x?a:(_.update(o,a),o))},x.__repr__=function(t){return e.builtins_repr_check(x,arguments),w(t)},x.copy=function(e){return e.__class__===x?e:i(e)};Math.floor(Math.random()*Math.pow(2,40));x.$factory=function(){var e=[x].concat(Array.from(arguments)),t=x.__new__.apply(null,e);return x.__init__(t,...arguments),t},e.set_func_names(x,"builtins"),t.set=_,t.frozenset=x}(__BRYTHON__),function($B){var _b_=$B.builtins,_window=globalThis,Module=$B.module=$B.make_class("module",(function(e,t,r){return{$tp_class:Module,__builtins__:_b_.__builtins__,__name__:e,__doc__:t||_b_.None,__package__:r||_b_.None}}));function $download_module(e,t,r){var n=new XMLHttpRequest,a="?v="+(new Date).getTime(),o=null,s=e.__name__,i=_window.setTimeout((function(){n.abort()}),5e3);if($B.get_option("cache")?n.open("GET",t,!1):n.open("GET",t+a,!1),n.send(),$B.$CORS?o=200==n.status||0==n.status?n.responseText:_b_.ModuleNotFoundError.$factory("No module named '"+s+"'"):4==n.readyState&&(200==n.status?(o=n.responseText,e.$last_modified=n.getResponseHeader("Last-Modified")):(console.info("Error "+n.status+" means that Python module "+s+" was not found at url "+t),o=_b_.ModuleNotFoundError.$factory("No module named '"+s+"'"))),_window.clearTimeout(i),null==o)throw _b_.ModuleNotFoundError.$factory("No module named '"+s+"' (res is null)");if(o.constructor===Error)throw o;return o}function import_js(e,t){try{var r=$download_module(e,t,void 0)}catch(err){return null}return run_js(r,t,e),!0}function run_js(e,t,r){r.__name__.replace(/\./g,"_");try{new Function(e)()}catch(err){throw $B.exception(err)}var n=$B.imported[r.__name__];if(void 0===n)throw _b_.ImportError.$factory("imported not set by module");for(var a in n.__class__=Module,n.__name__=r.__name__,n)"function"==typeof n[a]?(n[a].$infos={__module__:r.__name__,__name__:a,__qualname__:a},n[a].$in_js_module=!0):$B.$isinstance(n[a],_b_.type)&&!n[a].hasOwnProperty("__module__")&&(n[a].__module__=r.__name__);return!0}function show_ns(){for(var kk=Object.keys(_window),i=0,len=kk.length;i<len;i++)console.log(kk[i]),"$"==kk[i].charAt(0)&&console.log(eval(kk[i]));console.log("---")}function run_py(e,t,r,n){$B.file_cache[t]=e,$B.url2name[t]=r.__name__;var a,o,s=r.__name__;if(!n){$B.$Node,$B.$NodeJSCtx;var i={src:e,filename:t,imported:!0};try{a=$B.py2js(i,r,r.__name__,$B.builtins_scope)}catch(err){throw err.$frame_obj=$B.frame_obj,$B.get_option("debug",err)>1&&(console.log("error in imported module",r),console.log("stack",$B.make_frames_stack(err.$frame_obj))),err}}try{o=n?e:a.to_js(),10==$B.get_option("debug")&&(console.log("code for module "+r.__name__),console.log($B.format_indent(o,0)));i=o;o="var $module = (function(){\n"+o;var _="locals_";o+="return "+_,o+=r.__name__.replace(/\./g,"_")+"})(__BRYTHON__)\nreturn $module";var l=_+r.__name__.replace(/\./g,"_"),c=new Function(l,o)(r)}catch(err){if(err.$frame_obj=err.$frame_obj||$B.frame_obj,$B.get_option("debug",err)>2){for(var u in console.log(err+" for module "+r.__name__),console.log("module",r),console.log(a),$B.get_option("debug",err)>1&&console.log($B.format_indent(o,0)),err)console.log(u,err[u]);console.log("message: "+err.$message),console.log("filename: "+err.fileName),console.log("linenum: "+err.lineNumber),console.log(o.split("\n").slice(err.lineNumber-3,err.lineNumber+3).join("\n")),console.log(err.stack)}throw err}try{for(var u in c)r[u]=c[u];return r.__initializing__=!1,$B.imported[r.__name__]=r,{content:i,name:s,imports:Object.keys(a.imports).join(",")}}catch(err){for(var u in console.log(err+"  for module "+r.__name__),err)console.log(u+" "+err[u]);throw $B.get_option("debug")>0&&console.log("line info "+__BRYTHON__.line_info),err}}Module.__dir__=function(e){if(e.__dir__)return $B.$call(e.__dir__)();var t=[];for(var r in e)r.startsWith("$")||"__class__"==r||(t[t.length]=r);return t.sort()},Module.__new__=function(e,t,r,n){return{__class__:e,__builtins__:_b_.__builtins__,__name__:t,__doc__:r||_b_.None,__package__:n||_b_.None}},Module.__repr__=Module.__str__=function(e){var t="<module "+e.__name__;return(t+=void 0===e.__file__?" (built-in)":" at "+e.__file__)+">"},Module.__setattr__=function(e,t,r){"__builtins__"==e.__name__?$B.builtins[t]=r:e[t]=r},$B.set_func_names(Module,"builtins"),$B.make_import_paths=function(e){var t=e.split("/");t.pop();var r=t.join("/"),n=[$B.brython_path+"Lib",$B.brython_path+"libs",r,$B.brython_path+"Lib/site-packages"],a=[],o=[];$B.use_VFS&&a.push($B.finders.VFS),!1!==$B.get_option_from_filename("static_stdlib_import",e)&&"file"!=$B.protocol&&(a.push($B.finders.stdlib_static),n.length>3&&(n.shift(),n.shift()));var s=$B.get_option_from_filename("pythonpath",e);if(s){var i=n.indexOf($B.script_dir);-1===i?console.log("bizarre",n,$B.script_dir):n.splice(i,1,...s)}"file"!==$B.protocol&&(a.push($B.finders.path),o.push($B.url_hook)),$B.import_info[e]={meta_path:a,path_hooks:o,path:n}},$B.$download_module=$download_module,$B.addToImported=function(e,t){if($B.imported[e]=t,void 0===t)throw _b_.ImportError.$factory("imported not set by module");for(var r in t.__class__=Module,t.__name__=e,t)"function"==typeof t[r]?(t[r].$infos={__module__:e,__name__:r,__qualname__:r},t[r].$in_js_module=!0):$B.$isinstance(t[r],_b_.type)&&!t[r].hasOwnProperty("__module__")&&(t[r].__module__=e)},$B.run_py=run_py,$B.run_js=run_js;var ModuleSpec=$B.make_class("ModuleSpec",(function(e){return e.__class__=ModuleSpec,e}));function parent_package(e){var t=e.split(".");return t.pop(),t.join(".")}ModuleSpec.__str__=ModuleSpec.__repr__=function(e){var t=`ModuleSpec(name='${e.name}', loader=${_b_.str.$factory(e.loader)}, origin='${e.origin}'`;return e.submodule_search_locations!==_b_.None&&(t+=`, submodule_search_locations=${_b_.str.$factory(e.submodule_search_locations)}`),t+")"},$B.set_func_names(ModuleSpec,"builtins");var VFSFinder=$B.make_class("VFSFinder",(function(){return{__class__:VFSFinder}}));for(var method in VFSFinder.find_spec=function(e,t,r){var n,a,o;if(!$B.use_VFS)return _b_.None;if(void 0===(n=$B.VFS[t]))return _b_.None;if(a=n[3]||!1,o=n.timestamp,n){var s=$B.builtin_module_names.indexOf(t)>-1;return ModuleSpec.$factory({name:t,loader:VFSLoader.$factory(),origin:s?"built-in":"brython_stdlib",submodule_search_locations:a?[]:_b_.None,loader_state:{stored:n,timestamp:o},cached:_b_.None,parent:a?t:parent_package(t),has_location:_b_.False})}},$B.set_func_names(VFSFinder,"<import>"),VFSFinder)"function"==typeof VFSFinder[method]&&(VFSFinder[method]=_b_.classmethod.$factory(VFSFinder[method]));const VFSLoader=$B.make_class("VFSLoader",(function(){return{__class__:VFSLoader}}));VFSLoader.create_module=function(e,t){return _b_.None},VFSLoader.exec_module=function(e,t){var r=t.__spec__.loader_state.stored,n=t.__spec__.loader_state.timestamp,a=r[0],o=r[1],s=r[2];t.$is_package=r[3]||!1;var i="VFS."+t.__name__;if(i+=t.$is_package?"/__init__.py":a,t.__file__=i,$B.file_cache[t.__file__]=$B.VFS[t.__name__][1],$B.url2name[t.__file__]=t.__name__,".js"==a)run_js(o,t.__path__,t);else{if($B.precompiled.hasOwnProperty(t.__name__)){$B.get_option("debug")>1&&console.info("load",t.__name__,"from precompiled");for(var _=t.__name__.split("."),l=0;l<_.length;l++){var c=_.slice(0,l+1).join(".");if(!$B.imported.hasOwnProperty(c)||!$B.imported[c].__initialized__){var u=$B.precompiled[c],f=t.$is_package;if(void 0!==u){Array.isArray(u)&&(u=u[0]);var p=$B.imported[c]=Module.$factory(c,void 0,f);if(p.__initialized__=!0,p.__spec__=t.__spec__,f)p.__path__="<stdlib>",p.__package__=c,p.$is_package=!0;else(y=c.split(".")).pop(),p.__package__=y.join(".");p.__file__=i;try{var h=c.replace(/\./g,"_"),d="locals_";u+="return "+d+h;var m=new Function(d+h,u)(p)}catch(err){if($B.get_option("debug")>1){for(var g in console.log("error in module",p),console.log(err),err)console.log(g,err[g]);console.log(Object.keys($B.imported)),console.log(t,"mod_js",u)}throw err}for(var v in m)p[v]=m[v];m.__file__=i,l>0&&$B.builtins.setattr($B.imported[_.slice(0,l).join(".")],_[l],m)}}}return m}var $=t.__name__;$B.get_option("debug")>1&&console.log("run Python code from VFS",$);var y,b=run_py(o,t.__file__,t);b.imports=s.join(","),b.is_package=t.$is_package,b.timestamp=$B.timestamp,b.source_ts=n,$B.precompiled[$]=b.is_package?[b.content]:b.content,(y=$.split(".")).length>1&&y.pop(),$B.$options.indexedDB&&$B.indexedDB&&$B.idb_name&&(indexedDB.open($B.idb_name).onsuccess=function(e){var r=e.target.result.transaction("modules","readwrite").objectStore("modules"),n=(r.openCursor(),r.put(b));n.onsuccess=function(){$B.get_option("debug")>1&&console.info(t.__name__,"stored in db")},n.onerror=function(){console.info("could not store "+t.__name__)}})}},$B.set_func_names(VFSLoader,"builtins");var finder_cpython={__class__:_b_.type,__mro__:[_b_.object],__qualname__:"CPythonFinder",$infos:{__module__:"builtins",__name__:"CPythonFinder"},create_module:function(e,t){return _b_.None},exec_module:function(e,t){console.log("exec PYthon module",t);var r=t.__spec__.loader_state,n=r.content;delete t.__spec__.loader_state,t.$is_package=r.is_package,t.__file__=r.__file__,$B.file_cache[t.__file__]=n,$B.url2file[t.__file__]=t.__name__;var a=t.__name__;$B.get_option("debug")>1&&console.log("run Python code from CPython",a),run_py(n,t.__path__,t)},find_module:function(e,t,r){return{__class__:Loader,load_module:function(t,r){var n=e.find_spec(e,t,r),a=Module.$factory(t);$B.imported[t]=a,a.__spec__=n,e.exec_module(e,a)}}},find_spec:function(e,t,r){console.log("finder cpython",t);var n,a=new XMLHttpRequest,o="/cpython_import?module="+t;return a.open("GET",o,!1),a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var r=JSON.parse(this.responseText);n=ModuleSpec.$factory({name:t,loader:e,origin:"CPython",submodule_search_locations:r.is_package?[]:_b_.None,loader_state:{content:r.content},cached:_b_.None,parent:r.is_package?t:parent_package(t),has_location:_b_.False})}},a.send(),n}};for(var method in $B.set_func_names(finder_cpython,"<import>"),finder_cpython)"function"==typeof finder_cpython[method]&&(finder_cpython[method]=_b_.classmethod.$factory(finder_cpython[method]));finder_cpython.$factory=function(){return{__class__:finder_cpython}};var StdlibStaticFinder=$B.make_class("StdlibStaticFinder",(function(){return{__class__:StdlibStaticFinder}}));for(var method in StdlibStaticFinder.find_spec=function(e,t,r){if($B.stdlib&&$B.get_option("static_stdlib_import")){var n=$B.stdlib[t];if(void 0===n){var a=t.split(".");if(a.length>1){a.pop();var o=$B.stdlib[a.join(".")];o&&o[1]&&(n=["py"])}}if(void 0!==n){var s=n[0],i=void 0!==n[1],_={ext:s,is_package:i,path:(r=$B.brython_path+("py"==s?"Lib/":"libs/")+t.replace(/\./g,"/"))+(i?"/__init__.py":"py"==s?".py":".js"),address:n},l=Module.$factory(t);return _.code=$download_module(l,_.path),ModuleSpec.$factory({name:t,loader:PathLoader.$factory(),origin:_.path,submodule_search_locations:i?[r]:_b_.None,loader_state:_,cached:_b_.None,parent:i?t:parent_package(t),has_location:_b_.True})}}return _b_.None},$B.set_func_names(StdlibStaticFinder,"<import>"),StdlibStaticFinder)"function"==typeof StdlibStaticFinder[method]&&(StdlibStaticFinder[method]=_b_.classmethod.$factory(StdlibStaticFinder[method]));StdlibStaticFinder.$factory=function(){return{__class__:StdlibStaticFinder}};var PathFinder=$B.make_class("PathFinder",(function(){return{__class__:PathFinder}}));for(var method in PathFinder.find_spec=function(e,t,r){if($B.VFS&&$B.VFS[t])return _b_.None;$B.is_none(r)&&(r=get_info("path"));for(var n=0,a=r.length;n<a;++n){var o=r[n];"/"!=o[o.length-1]&&(o+="/");var s=$B.path_importer_cache[o];if(void 0===s)for(var i=get_info("path_hooks"),_=0,l=i.length;_<l;++_){var c=i[_];try{s=$B.$call(c)(o),$B.path_importer_cache[o]=s;break}catch(p){if(p.__class__!==_b_.ImportError)throw p}}if(!$B.is_none(s)){var u=$B.$getattr(s,"find_spec"),f=$B.$call(u)(t);if(!$B.is_none(f))return f}}return _b_.None},$B.set_func_names(PathFinder,"<import>"),PathFinder)"function"==typeof PathFinder[method]&&(PathFinder[method]=_b_.classmethod.$factory(PathFinder[method]));var PathEntryFinder=$B.make_class("PathEntryFinder",(function(e,t){return{__class__:PathEntryFinder,path_entry:e,hint:t}}));PathEntryFinder.find_spec=function(e,t){var r={},n=!0,a=e.hint,o=e.path_entry+t.match(/[^.]+$/g)[0],s=[],i=$B.get_option("python_extension");(void 0===a||"py"==a)&&(s=s.concat([[o+i,"py",!1],[o+"/__init__"+i,"py",!0]]));for(var _=0;n&&_<s.length;++_)try{var l=s[_],c={__name__:t,$is_package:!1};r.code=$download_module(c,l[0],void 0),n=!1,r.ext=l[1],r.is_package=l[2],void 0===a&&(e.hint=l[1],$B.path_importer_cache[e.path_entry]=e),r.is_package&&($B.path_importer_cache[o+"/"]=$B.$call(url_hook)(o+"/",e.hint)),r.path=l[0]}catch(err){if(err.__class__!==_b_.ModuleNotFoundError)throw err}return n?_b_.None:ModuleSpec.$factory({name:t,loader:PathLoader.$factory(),origin:r.path,submodule_search_locations:r.is_package?[o]:_b_.None,loader_state:r,cached:_b_.None,parent:r.is_package?t:parent_package(t),has_location:_b_.True})},$B.set_func_names(PathEntryFinder,"builtins");var PathLoader=$B.make_class("PathLoader",(function(){return{__class__:PathLoader}}));PathLoader.create_module=function(e,t){return _b_.None},PathLoader.exec_module=function(e,t){var r=t.__spec__.loader_state;t.$is_package=r.is_package,"py"==r.ext?run_py(r.code,r.path,t):run_js(r.code,r.path,t)};var url_hook=$B.url_hook=function(e){return e=e.endsWith("/")?e:e+"/",PathEntryFinder.$factory(e)};function get_info(e){var t=$B.get_filename();return void 0===$B.import_info[t]&&"meta_path"==e&&$B.make_import_paths(t),$B.import_info[t][e]}function import_engine(e,t,r){var n,a,o=get_info("meta_path").slice(),s=$B.imported;if(r){var i=o.indexOf($B.finders.path);i>-1&&o.splice(i,1)}for(var _=0,l=o.length;_<l;_++){var c=o[_],u=$B.$getattr(c,"find_spec",_b_.None);if(u==_b_.None){var f=$B.$getattr(c,"find_module",_b_.None);if(f!==_b_.None&&(n=f(e,t))!==_b_.None){var p=$B.$getattr(n,"load_module"),h=$B.$call(p)(e);return s[e]=h,h}}else if(a=u(e,t),!$B.is_none(a)){if(void 0!==(h=$B.imported[a.name]))return s[a.name]=h;n=$B.$getattr(a,"loader",_b_.None);break}}if(void 0===n){var d=e;"file"==$B.protocol&&(d+=" (warning: cannot import local files with protocol 'file')");var m=_b_.ModuleNotFoundError.$factory(d);throw m.name=e,m}if($B.is_none(h)){if(a===_b_.None)throw _b_.ModuleNotFoundError.$factory(e);var g=$B.$getattr(a,"name");if(!$B.is_none(n)){var v=$B.$getattr(n,"create_module",_b_.None);$B.is_none(v)||(h=$B.$call(v)(a))}if(void 0===h)throw _b_.ImportError.$factory(e);if($B.is_none(h)){h=$B.module.$factory(e);var $=$B.$getattr(a,"origin");$=$B.$getattr(a,"has_location")?"from '"+$+"'":"("+$+")"}}h.__name__=g,h.__loader__=n,h.__package__=$B.$getattr(a,"parent",""),h.__spec__=a;var y=$B.$getattr(a,"submodule_search_locations");(h.$is_package=!$B.is_none(y))&&(h.__path__=y),$B.$getattr(a,"has_location")&&(h.__file__=$B.$getattr(a,"origin"));var b=$B.$getattr(a,"cached");if($B.is_none(b)||(h.__cached__=b),$B.is_none(n)){if($B.is_none(y))throw _b_.ImportError.$factory(e);s[g]=h}else{var w=$B.$getattr(n,"exec_module",_b_.None);if($B.is_none(w))h=$B.$getattr(n,"load_module")(g);else{s[g]=h;try{w(h)}catch(x){throw delete s[g],x}}}return s[g]}function import_error(e){var t=_b_.ImportError.$factory(e);throw t.name=e,t}function optimize_import_for_path(e,t){"/"!=e.slice(-1)&&(e+="/");var r="none"==t?_b_.None:url_hook(e,t);$B.path_importer_cache[e]=r}$B.path_importer_cache={},$B.$__import__=function(e,t,r,n,a){var o=!1;if(t.$jsobj&&t.$jsobj.__file__){var s=t.$jsobj.__file__;(s.startsWith($B.brython_path+"Lib/")&&!s.startsWith($B.brython_path+"Lib/site-packages/")||s.startsWith($B.brython_path+"libs/")||s.startsWith("VFS."))&&(o=!0)}var i=$B.imported[e],_=e.split("."),l=n.length>0;if(i==_b_.None&&import_error(e),void 0===i){$B.is_none(n)&&(n=[]);for(var c=0,u="",f="",p=_.length-1,h=_b_.None;c<=p;++c){var d=f;if(f+=u+_[c],u=".",(i=$B.imported[f])==_b_.None)import_error(f);else if(void 0===i){try{import_engine(f,h,o)}catch(err){throw delete $B.imported[f],err}$B.is_none($B.imported[f])?import_error(f):d&&_b_.setattr($B.imported[d],_[c],$B.imported[f])}else $B.imported[d]&&void 0===$B.imported[d][_[c]]&&_b_.setattr($B.imported[d],_[c],$B.imported[f]);if(c<p)try{h=$B.$getattr($B.imported[f],"__path__")}catch(v){if(c==p-1&&$B.imported[f][_[p]]&&$B.imported[f][_[p]].__class__===$B.module)return $B.imported[f][_[p]];if(!l){var m=_b_.ModuleNotFoundError.$factory();throw m.msg="No module named '"+e+"'; '"+f+"' is not a package",m.args=$B.fast_tuple([m.msg]),m.name=e,m.path=_b_.None,m}import_error(e)}}}else if($B.imported[_[0]]&&2==_.length)try{void 0===$B.imported[_[0]][_[1]]&&$B.$setattr($B.imported[_[0]],_[1],i)}catch(err){throw console.log("error",_,i),err}if(n.length>0)return $B.imported[e];{let n=e;for(;_.length>1;){var g=_.pop();n=_.join("."),void 0===$B.imported[n]&&($B.$import(n,t,r,[]),$B.imported[n][g]=$B.imported[e],e=g)}return $B.imported[n]}},$B.$import=function(e,t,r,n){var a=!1;if("_frozen_importlib_external"!=e){for(var o=0,s=$B.frame_obj.frame[2],i=s.split(".");e.length>0&&e.startsWith(".");){if(o++,e=e.substr(1),0==i.length)throw _b_.ImportError.$factory("Parent module '' not loaded, cannot perform relative import");s=i.join("."),i.pop()}o>0&&(e=s+(e.length>0?"."+e:""));i=e.split(".");"."==e[e.length-1]&&i.pop();for(var _=[],l=!0,c=0,u=i.length;c<u;c++){var f=i[c];if(l&&""==f){if(void 0===_.pop())throw _b_.ImportError.$factory("Parent module '' not loaded, cannot perform relative import")}else l=!1,_.push(f)}e=_.join(".");t=void 0===t?[]:t,r=void 0===r?{}:r,n=void 0===n?{}:n,10==$B.get_option("debug")&&(console.log("$import "+e),console.log("use VFS ? "+$B.use_VFS),console.log("use static stdlib paths ? "+$B.get_option("static_stdlib_import")));var p=$B.frame_obj.frame[3],h=p.__import__,d=$B.obj_dict(p);void 0===h&&(h=$B.$__import__);var m="function"==typeof h?h:$B.$getattr(h,"__call__");a;var g=m(e,d,void 0,t,0);if(t&&0!=t.length){var v=t,$={};if(t&&"*"==t[0]&&(v=$B.$getattr(g,"__all__",$))!==$&&(r={}),v===$)for(var y in g)"_"!==y[0]&&(n[y]=g[y]);else{c=0;for(var b=v.length;c<b;++c){var w=v[c];j=r[w]||w;try{n[j]=$B.$getattr(g,w)}catch(S){if(!$B.is_exc(S,[_b_.AttributeError]))throw S;try{$B.$getattr(h,"__call__")(e+"."+w,d,void 0,[],0),n[j]=$B.$getattr(g,w)}catch(T){if("__future__"===e)throw _b_.SyntaxError.$factory("future feature "+w+" is not defined");var x=[e,g,e,g],k=$B.offer_suggestions_for_name_error({name:w},x);if(T.$py_error)throw T.__class__=_b_.ImportError,T.args[0]=`cannot import name '${w}' from '${e}'`,g.__file__&&(T.args[0]+=` (${g.__file__})`),T.$suggestion=k,T;throw $B.get_option("debug")>1&&(console.log(T),console.log($B.frame_obj.frame)),_b_.ImportError.$factory("cannot import name '"+w+"'")}}}}return n}(j=r[e])?n[j]=$B.imported[e]:n[_[0]]=g}else{var j=r[e]||e,B=($B.$import_from("importlib",["_bootstrap_external"],{_bootstrap_external:j},0,n),$B.imported.importlib._bootstrap),E=$B.imported.importlib._bootstrap_external;E._set_bootstrap_module(B),B._bootstap_external=E;var N=$B.imported._frozen_importlib;N&&(N._bootstrap_external=E)}},$B.$import_from=function(e,t,r,n,a){var o=$B.frame_obj.frame[2].split(".");if(n>0){if(void 0===(s=$B.imported[o.join(".")]))throw _b_.ImportError.$factory("attempted relative import with no known parent package");if(!s.$is_package){if(1==o.length)throw _b_.ImportError.$factory("attempted relative import with no known parent package");o.pop(),s=$B.imported[o.join(".")]}for(;n>0;){var s;if(!(s=$B.imported[o.join(".")]).$is_package)throw _b_.ImportError.$factory("attempted relative import with no known parent package");n--,o.pop()}if(e){var i=s.__name__+"."+e;$B.$import(i,[],{},{}),s=$B.imported[i]}if(t.length>0&&"*"==t[0])for(var _ in s)_.startsWith("$")||_.startsWith("_")||(a[_]=s[_]);else for(var l of t){var c=r[l]||l;if(void 0!==s[l])a[c]=s[l];else{var u=s.__name__+"."+l;$B.$import(u,[],{},{}),a[c]=$B.imported[u]}}}else $B.$import(e,t,r,a)},$B.import_all=function(e,t){for(var r in t)-1=="_$".indexOf(r.charAt(0))&&(e[r]=t[r])},$B.$meta_path=[VFSFinder,StdlibStaticFinder,PathFinder],$B.finders={VFS:VFSFinder,stdlib_static:StdlibStaticFinder,path:PathFinder,CPython:finder_cpython};var Loader={__class__:$B.$type,__mro__:[_b_.object],__name__:"Loader"},_importlib_module={__class__:Module,__name__:"_importlib",Loader:Loader,VFSFinder:VFSFinder,StdlibStatic:StdlibStaticFinder,ImporterPath:PathFinder,UrlPathFinder:url_hook,optimize_import_for_path:optimize_import_for_path};_importlib_module.__repr__=_importlib_module.__str__=function(){return"<module '_importlib' (built-in)>"},$B.imported._importlib=_importlib_module}(__BRYTHON__),function(e){var t=e.builtins;e.unicode_tables;e.has_surrogate=function(e){for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r>=55296&&r<=56319)return!0}return!1};var r={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v"};function n(e,t){if(void 0===e.surrogates)return t;for(var r=0;e.surrogates[r]<t;)r++;return t+r}function a(e,t){if(void 0===e.surrogates)return t;for(var r=0;e.surrogates[r]+r<t;)r++;return t-r}function o(e){if("string"==typeof e)return e;if(Array.isArray(e)){for(var t=0,r=e.length;t<r;t++)e[t]=o(e[t]);return e}return!e.__class__||e instanceof String?e:e.$brython_value}e.surrogates=function(e){var t="",n=!1;for(var a of e)if(n){var o=r[a];t+=void 0!==o?o:"\\"+a,n=!1}else"\\"==a?n=!0:t+=a;for(var s=[],i=0,_=0,l=t.length;_<l;_++){t.codePointAt(_)>=65536&&(s.push(i),_++),i++}return s},e.String=function(t){var r=e.surrogates(t);return 0==r.length?t:e.make_String(t,r)},e.make_String=function(e,t){if(!Array.isArray(t))throw Error("not list");var r=new String(e);return r.__class__=s,r.surrogates=t,r};var s={__class__:t.type,__dir__:t.object.__dir__,__qualname__:"str",$is_class:!0,$native:!0};function i(r){var a;if(a="string"==typeof r.self?r.self.length:s.__len__(r.self),null===r.start||r.start===t.None?r.start=0:r.start<0&&(r.start+=a,r.start=Math.max(0,r.start)),null===r.end||r.end===t.None?r.end=a:r.end<0&&(r.end+=a,r.end=Math.max(0,r.end)),!e.$isinstance(r.start,t.int)||!e.$isinstance(r.end,t.int))throw t.TypeError.$factory("slice indices must be integers or None or have an __index__ method");r.self.surrogates&&(r.js_start=n(r.self,r.start),r.js_end=n(r.self,r.end))}function _(e){return e.split("").reverse().join("")}function l(r,n){if(!(r instanceof String||"string"==typeof r||e.$isinstance(r,s)))throw t.TypeError.$factory((n||"")+"must be str, not "+e.class_name(r))}function c(e){return e=o(e),Array.from(e)}s.$to_string=o,s.__add__=function(r,n){if(!e.$isinstance(n,s))try{return e.$getattr(n,"__radd__")(r)}catch(err){throw t.TypeError.$factory("Can't convert "+e.class_name(n)+" to str implicitly")}return[r,n]=o([r,n]),e.String(r+n)},s.__contains__=function(r,n){if(!e.$isinstance(n,s))throw t.TypeError.$factory("'in <string>' requires string as left operand, not "+e.class_name(n));if([r,n]=o([r,n]),n.__class__===s||e.$isinstance(n,s))var a=n.length;else a=t.len(n);if(0==a)return!0;if(0==(_=r.length))return 0==a;for(var i=0,_=r.length;i<_;i++)if(r.substr(i,a)==n)return!0;return!1},s.__delitem__=function(){throw t.TypeError.$factory("'str' object doesn't support item deletion")},s.__dir__=t.object.__dir__,s.__eq__=function(r,n){if(e.$isinstance(n,s)){if([r,n]=o([r,n]),"string"==typeof r&&"string"==typeof n)return r==n;if(r.length!=n.length)return!1;for(var a=0,i=r.length;a<i;a++)if(r[a]!=n[a])return!1;return!0}return t.NotImplemented},s.__format__=function(r,n){[r,n]=o([r,n]);var a=new e.parse_format_spec(n,r);if(void 0!==a.sign)throw t.ValueError.$factory("Sign not allowed in string format specifier");return a.precision&&(r=r.substr(0,a.precision)),a.align=a.align||"<",e.format_width(function(e,r){if(r.empty)return t.str.$factory(e);if(r.type&&"s"!=r.type)throw t.ValueError.$factory("Unknown format code '"+r.type+"' for object of type 'str'");return e}(r,a),a)},s.__getitem__=function(r,a){if(r=o(r),e.$isinstance(a,t.int)){var i=s.__len__(r),_=a;if(a<0&&(_+=i),_>=0&&_<i){var l=n(r,_);return r.codePointAt(l)>=65536?e.String(r.substr(l,2)):r[l]}throw t.IndexError.$factory("string index out of range")}if(e.$isinstance(a,t.slice))return t.str.$getitem_slice(r,a);if(e.$isinstance(a,t.bool))return r.__getitem__(t.int.$factory(a));throw t.TypeError.$factory("string indices must be integers")},s.$getitem_slice=function(r,a){var o=s.__len__(r),i=t.slice.$conv_for_seq(a,o),_=n(r,i.start),l=n(r,i.stop),c=i.step,u="",f=null;if(c>0){if(l<=_)return"";for(f=_;f<l;f+=c)u+=r[f]}else{if(l>=_)return"";for(f=_;f>l;f+=c)u+=r[f]}return e.String(u)};var u=2,f=3;s.$nb_str_hash_cache=0,s.$getnewargs=function(t){return e.fast_tuple([o(t)])},s.__getnewargs__=function(){return s.$getnewargs(e.single_arg("__getnewargs__","self",arguments))},s.__hash__=function(e){for(var t=o(e),r=0,n=0,a=t.length;r<a;r++)n=Math.imul(31,n)+t.charCodeAt(r)|0;return n},s.__init__=function(e,r){return t.None};var p=e.make_class("str_iterator",(function(e){return{__class__:p,it:e[Symbol.iterator]()}}));p.__iter__=function(e){return e},p.__next__=function(e){var r=e.it.next();if(r.done)throw t.StopIteration.$factory("");return r.value},e.set_func_names(p,"builtins"),s.__iter__=function(e){return p.$factory(e)},s.__len__=function(e){return void 0===(e=o(e)).surrogates?e.length:void 0!==e.len?e.len:e.len=e.length-e.surrogates.length};new RegExp("([^\\)]*)\\)");var h=function(r,n){if(!e.$isinstance(r,[t.int,t.float])){var a=n.conversion_type;throw t.TypeError.$factory(`%${a} format: a real number is required, not ${e.class_name(r)}`)}},d=function(e,t){return e<=0?"":new Array(e+1).join(t)},m=function(e,t,r){var n=t.padding;return n?(e=e.toString(),n=parseInt(n,10),r&&(n-=1),t.left?e+d(n-e.length,t.pad_char):d(n-e.length,t.pad_char)+e):e};var g=function(r,n){var a,o=n.precision;if(!o)return t.str.$factory(r);if((o=parseInt(o,10))>2147483644)throw t.OverflowError.$factory("precision too large");if(o-(a=r.__class__===e.long_int?e.long_int.to_base(r,10):r.toString()).length>1073741823)throw t.OverflowError.$factory("precision too large");return"-"===a[0]?"-"+"0".repeat(Math.max(0,o-a.length+1))+a.slice(1):"0".repeat(Math.max(0,o-a.length))+a},v=function(e,t,r,n){var a=r.precision;return isFinite(e)?n(e,a,r,t):(e=e===1/0?"inf":e===-1/0?"-inf":"nan",t?e.toUpperCase():e)},$=function(e,t){if(t.sign){if(e>=0||isNaN(e)||e===Number.POSITIVE_INFINITY)return"+"}else if(t.space&&(e>=0||isNaN(e)))return" ";return""},y=function(r,n){h(r,n),e.$isinstance(r,t.float)?r=parseInt(r.value):e.$isinstance(r,t.int)||(r=parseInt(r));var a=g(r,n);if("0"===n.pad_char){if(r<0)return a=a.substring(1),"-"+m(a,n,!0);var o=$(r,n);if(""!==o)return o+m(a,n,!0)}return m($(r,n)+a,n)},b=function(r,n){return h(r,n),void 0===n.precision?n.decimal_point?n.precision=0:n.precision=6:(n.precision=parseInt(n.precision,10),w(n.precision)),e.$isinstance(r,t.int)?r:r.value},w=function(e){e>20&&(e=20)};var x=function(e,t,r){var n=function(e,t){var r;return isNaN(e)?r=t?"NAN":"nan":e==Number.POSITIVE_INFINITY?r=t?"INF":"inf":e==Number.NEGATIVE_INFINITY&&(r=t?"-INF":"-inf"),r}(e=b(e,r),t);if(n)return m($(e,r)+n,r);var a=r.precision;0==a&&(a=1);var o,s=e.toExponential(a-1),i=s.indexOf("e"),_=parseInt(s.substr(i+1));function l(e){if(r.alternate)return e;if(e.indexOf(".")>-1){for(;e.endsWith("0");)e=e.substr(0,e.length-1);e.endsWith(".")&&(e=e.substr(0,e.length-1))}return e}if(-4<=_&&_<a)r.precision=Math.max(0,a-1-_),o=l(o=j(e,t,r));else{r.precision=Math.max(0,a-1);var c=t?"E":"e",u=E(e,t,r).split(c);u[0]=l(u[0]),o=u.join(c)}return m($(e,r)+o,r)},k=e.roundDownToFixed=function(e,t){if(0==t&&e.toString().indexOf("e")>-1)return BigInt(e).toString();const r=Math.pow(10,t);var n=e<0;n&&(e=-e);var a,o=(Math.floor(e*r)/r).toFixed(t),s=(Math.ceil(e*r)/r).toFixed(t);e-o==s-e?a=o[o.length-1].match(/[02468]/)?o:s:a=e-o<s-e?o:s;return n?"-"+a:a},j=function(e,t,r){e=b(e,r);var n=v(e,t,r,(function(e,t,r){var n=k(e,t);return 0===t&&r.alternate&&(n+="."),Object.is(e,-0)&&(n="-"+n),n}));return m($(e,r)+n,r)},B=function(e,t,r,n){var a=!1,o=e.toString();e<0?(a=!0,o=o.substr(1)):Object.is(e,-0)&&(a=!0);var s,i=o.split("."),_=0,l="+";if("0"==i[0])if(i[1]){l="-",_++;for(var c=0;"0"==i[1][c];)c++;_+=c,s=i[1][c],i[1][c+1]&&(s+="."+i[1].substr(c+1))}else s="0";else _=i[0].length-1,s=i[0][0],i[0].length>1?s+="."+i[0].substr(1)+(i[1]||""):i[1]&&(s+="."+i[1]);return s=parseFloat(s),s=k(parseFloat(s),t),10==parseFloat(s)&&((i=s.split("."))[0]="1",s=i.join("."),_=parseInt(_)+1),r.alternate&&-1==s.indexOf(".")&&(s+="."),1==_.toString().length&&(_="0"+_),`${a?"-":""}${s}${n?"E":"e"}${l}${_}`},E=function(e,t,r){return e=b(e,r),m($(e,r)+v(e,t,r,B),r)};e.formatters={floating_point_format:x,floating_point_decimal_format:j,floating_point_exponential_format:E};var N=function(r,n,a){var o;if(!e.$isinstance(r,t.int))throw t.TypeError.$factory(`%X format: an integer is required, not ${e.class_name(r)}`);if(o=r.__class__===e.long_int?r.value.toString(16):(o=parseInt(r)).toString(16),o=g(o,a),n&&(o=o.toUpperCase()),"0"===a.pad_char){r<0&&(o=o.substring(1),o="-"+m(o,a,!0));var s=$(r,a);""!==s&&(o=s+m(o,a,!0))}return a.alternate&&(o="-"===o.charAt(0)?n?"-0X"+o.slice(1):"-0x"+o.slice(1):n?"0X"+o:"0x"+o),m($(r,a)+o,a)};var S=function(e,t){"0"!==e||t.padding||t.decimal_point||t.left?t.decimal_point?t.precision=(t.precision||"")+e:t.padding=(t.padding||"")+e:t.pad_char="0"},T={b:function(r,n){if(r.__class__&&r.__class__.$buffer_protocol)for(var a=t.iter(r),o=[];;)try{o.push(t.next(a))}catch(err){if(err.__class__===t.StopIteration){var s=t.bytes.$factory(o);return m(t.bytes.decode(s,"ascii"),n)}throw err}else try{var i=e.$getattr(r,"__bytes__")();return m(t.bytes.decode(i),n)}catch(err){if(err.__class__===t.AttributeError)throw t.TypeError.$factory("%b does not accept '"+e.class_name(r)+"'");throw err}},s:function(e,t){return t.pad_char=" ",m(s.$factory(e),t)},d:y,i:y,u:y,o:function(t,r){var n;if(h(t,r),n=t.__class__===e.long_int?e.long_int.to_base(8):(n=parseInt(t)).toString(8),n=g(n,r),"0"===r.pad_char){t<0&&(n=n.substring(1),n="-"+m(n,r,!0));var a=$(t,r);""!==a&&(n=a+m(n,r,!0))}return r.alternate&&(n="-"===n.charAt(0)?"-0o"+n.slice(1):"0o"+n),m(n,r)},r:function(e,r){return r.pad_char=" ",m(t.repr(e),r)},a:function(e,r,n){var a;if(r.pad_char=" ","bytes"==n){var o=t.repr(e);a=t.str.encode(o,"ascii","backslashreplace"),a=t.bytes.decode(a,"ascii")}else a=t.ascii(e);return m(a,r)},g:function(e,t){return x(e,!1,t)},G:function(e,t){return x(e,!0,t)},f:function(e,t){return j(e,!1,t)},F:function(e,t){return j(e,!0,t)},e:function(e,t){return E(e,!1,t)},E:function(e,t){return E(e,!0,t)},x:function(e,t){return N(e,!1,t)},X:function(e,t){return N(e,!0,t)},c:function(r,n,a){if("bytes"==a){if(e.$isinstance(r,t.int)){if(r.__class__===e.long_int||r<0||r>255)throw t.OverflowError.$factory("%c arg not in range(256)")}else if(e.$isinstance(r,[t.bytes,t.bytearray])){if(r.source.length>1)throw t.TypeError.$factory("%c requires an integer in range(256) or a single byte");r=r.source[0]}}else{if(e.$isinstance(r,t.str)){if(1==t.str.__len__(r))return r;throw t.TypeError.$factory("%c requires int or char")}if(!e.$isinstance(r,t.int))throw t.TypeError.$factory("%c requires int or char");if(r.__class__===e.long_int&&(r.value<0||r.value>=1114112)||r<0||r>=1114112)throw t.OverflowError.$factory("%c arg not in range(0x110000)")}return m(t.chr(r),n)},0:function(e,t){return S("0",t)},1:function(e,t){return S("1",t)},2:function(e,t){return S("2",t)},3:function(e,t){return S("3",t)},4:function(e,t){return S("4",t)},5:function(e,t){return S("5",t)},6:function(e,t){return S("6",t)},7:function(e,t){return S("7",t)},8:function(e,t){return S("8",t)},9:function(e,t){return S("9",t)},"-":function(e,t){t.pad_char=" ",t.left=!0}," ":function(e,t){t.space=!0},"+":function(e,t){t.sign=!0},".":function(e,t){if(t.decimal_point)throw new O;t.decimal_point=!0},"#":function(e,t){t.alternate=!0}},O=function(){this.name="UnsupportedChar"};function A(e,r,n){var a,o={pad_char:" "},s=e.length,i=n;for(n++;n<s;){var _=e[n];if("("==_){var l=e.substr(n).indexOf(")");if(-1==l)throw t.ValueError.$factory("incomplete format key");o.mapping_key=e.substr(n+1,l-1),n+=l+1}else if("#0- +".indexOf(_)>-1)o.conversion_flag=_,"#"==_?o.alternate=!0:"-"==_?o.left=!0:"+"==_?o.sign="+":"0"==_?o.pad_char="0":" "==_&&(o.space=!0),n++;else if("*"==_)o.padding="*",n++;else if(a=/^\d+/.exec(e.substr(n)))o.padding=a[0],n+=a[0].length;else if("."==_)"*"==e[++n]?(o.precision="*",n++):(a=/^\d+/.exec(e.substr(n)))?(o.precision=a[0],n+=a[0].length):o.precision="0";else{if(!("hlL".indexOf(_)>-1)){if("diouxXeEfFgGcrsa".indexOf(_)>-1||"b"==_&&"bytes"==r)return"bytes"==r&&("s"==_?_="b":"r"==_&&(_="a")),o.conversion_type=_,o.end=n,o.string=e.substring(i,n+1),o.left&&"0"==o.pad_char&&(o.pad_char=" "),o;throw t.ValueError.$factory(`invalid character in format: ${_}`)}o.length_modifier=_,n++}}throw t.ValueError.$factory("invalid format")}e.printf_format=function(r,n,a){r.length;var o,s=0,i=null;e.$isinstance(a,t.tuple)?i=0:o=e.$getattr(a,"__getitem__",t.None);for(var _,l="",c=0,u=(s=0,r.length);s<u;){var f=r.indexOf("%",s);if(f<0){l+=r.substring(s);break}if(l+=r.substring(s,f),"%"==r[(s=f)+1])l+="%",s+=2;else{if(++c>1&&!e.$isinstance(a,t.tuple)&&(_=a,!t.hasattr(_,"keys")||!t.hasattr(_,"__getitem__")))throw t.TypeError.$factory("not enough arguments for format string");var p=A(r,n,s);if(s=p.end+1,"*"==p.padding){if(void 0===a[i])throw t.ValueError.$factory("no value for field width *");p.padding=a[i],i++}if("*"==p.precision){if(void 0===a[i])throw t.ValueError.$factory("no value for precision *");p.precision=a[i],i++}var h,d=T[p.conversion_type];if(void 0!==p.mapping_key)h=o(p.mapping_key);else if(null===i)h=a;else{if(void 0===(h=a[i]))throw t.TypeError.$factory("not enough arguments for format string");i++}l+=d(h,p,n)}}if(null!==i){if(a.length>i)throw t.TypeError.$factory("not enough arguments for format string");if(a.length<i)throw t.TypeError.$factory("not all arguments converted during string formatting")}else if(0==c)throw t.TypeError.$factory("not all arguments converted during string formatting");return l},s.__mod__=function(t,r){t=o(t);var n=e.printf_format(t,"str",r);return e.String(n)},s.__mro__=[t.object],s.__mul__=function(){var r=e.args("__mul__",2,{self:null,other:null},["self","other"],arguments,{},null,null),n=o(r.self);if(!e.$isinstance(r.other,t.int))throw t.TypeError.$factory("Can't multiply sequence by non-int of type '"+e.class_name(r.other)+"'");return n.repeat(r.other<0?0:r.other)},s.__ne__=function(e,r){var n=s.__eq__(e,r);return n===t.NotImplemented?n:!n},s.__new__=function(r,n){if(void 0===r)throw t.TypeError.$factory("str.__new__(): not enough arguments");return r===t.str?n:{__class__:r,$brython_value:s.$factory(n),__dict__:e.empty_dict()}},s.__repr__=function(r){r=o(r);for(var n=e.special_string_repr,a="",s=c(r),i=0;i<s.length;i++){var _=t.ord(s[i]);if(void 0!==n[_])a+=n[_];else if(/\p{Cn}/u.test(s[i])){for(var l=_.toString(16);l.length<4;)l="0"+l;a+="\\u"+l}else _<32||_>=127&&_<160?((_=_.toString(16)).length<2&&(_="0"+_),a+="\\x"+_):_>=768&&_<=879?a+="\u200b"+s[i]+" ":"feff"==_.toString(16)?a+="\\ufeff":a+=s[i]}var u=a;if(-1==u.search('"')&&-1==u.search("'"))return"'"+u+"'";if(-1==r.search('"'))return'"'+u+'"';var f=new RegExp("'","g");return u="'"+u.replace(f,"\\'")+"'"},s.__rmod__=function(){var r=e.args("__rmod__",2,{self:null,other:null},["self","other"],arguments,{},null,null);return e.$isinstance(r.other,s)?s.__mod__(r.other,r.self):t.NotImplemented},s.__rmul__=function(r,n){if(r=o(r),e.$isinstance(n,t.int)){n=t.int.numerator(n);for(var a="";n>0;)a+=r,n--;return a}return t.NotImplemented},s.__setattr__=function(e,r,n){if("string"==typeof e)throw s.hasOwnProperty(r)?t.AttributeError.$factory("'str' object attribute '"+r+"' is read-only"):t.AttributeError.$factory("'str' object has no attribute '"+r+"'");return t.dict.$setitem(e.__dict__,r,n),t.None},s.__setitem__=function(e,r,n){throw t.TypeError.$factory("'str' object does not support item assignment")};for(var I=[],C=768;C<=879;C++)I.push(String.fromCharCode(C));var M=new RegExp("("+I.join("|")+")","g");s.__str__=function(e){var r="",n=c(e=o(e));if(n.length==e.length)return e.replace(M,"\u200b$1");for(var a=0;a<n.length;a++){var s=t.ord(n[a]);r+=s>=768&&s<=879?"\u200b"+n[a]:n[a]}return r};var R='var _b_ = __BRYTHON__.builtins\nif(typeof other !== typeof _self){\n    return _b_.NotImplemented}else if(typeof _self == "string"){\n    return _self > other}else{\n    return _self.$brython_value > other.$brython_value}',F={">":"gt",">=":"ge","<":"lt","<=":"le"};for(var P in F)s[`__${F[P]}__`]=Function("_self","other",R.replace(/>/gm,P));s.capitalize=function(){var t=o(e.args("capitalize",1,{self:self},["self"],arguments,{},null,null).self);return 0==t.length?"":t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()},s.casefold=function(){for(var t,r,n=e.args("casefold",1,{self:self},["self"],arguments,{},null,null),a="",s=c(o(n.self)),i=0,_=s.length;i<_;i++)t=s[i],(r=e.unicode_casefold[t])?r.forEach((function(e){a+=String.fromCharCode(e)})):a+=t.toLowerCase();return a},s.center=function(){var t=e.args("center",3,{self:null,width:null,fillchar:null},["self","width","fillchar"],arguments,{fillchar:" "},null,null),r=o(t.self);if(t.width<=r.length)return r;var n=parseInt((t.width-r.length)/2),a=t.fillchar.repeat(n);return(a+=r+a).length<t.width&&(a+=t.fillchar),a},s.count=function(){var r,n,a=e.args("count",4,{self:null,sub:null,start:null,stop:null},["self","sub","start","stop"],arguments,{start:null,stop:null},null,null);if(!e.$isinstance(a.sub,s))throw t.TypeError.$factory("Can't convert '"+e.class_name(a.sub)+"' object to str implicitly");[r,n]=o([a.self,a.sub]);var i,_=r;if(null!==a.start)i=null!==a.stop?t.slice.$factory(a.start,a.stop):t.slice.$factory(a.start,r.length),_=s.__getitem__.apply(null,[r].concat(i));else if(r.length+n.length==0)return 1;if(0==n.length)return a.start==r.length?1:0==_.length?0:_.length+1;for(var l=0,c=0;c<_.length&&(c=_.indexOf(n,c))>=0;)l++,c+=n.length;return l},s.encode=function(){var r=e.args("encode",3,{self:null,encoding:null,errors:null},["self","encoding","errors"],arguments,{encoding:"utf-8",errors:"strict"},null,null),n=o(r.self);if("rot13"==r.encoding||"rot_13"==r.encoding){for(var a="",s=0,i=n.length;s<i;s++){var _=n.charAt(s);console.log("char",_),a+="a"<=_&&_<="m"||"A"<=_&&_<="M"?String.fromCharCode(_.charCodeAt(0)+13):"m"<_&&_<="z"||"M"<_&&_<="Z"?String.fromCharCode(_.charCodeAt(0)-13):_}return a}return t.bytes.__new__(t.bytes,r.self,r.encoding,r.errors)},s.endswith=function(){var r,n=e.args("endswith",4,{self:null,suffix:null,start:null,end:null},["self","suffix","start","end"],arguments,{start:0,end:null},null,null);i(n),r=o(n.self);var a=n.suffix;e.$isinstance(a,t.tuple)||(a=[a]);for(var _=c(r).slice(n.start,n.end),l=0,u=a.length;l<u;l++){var f=a[l];if(!e.$isinstance(f,s))throw t.TypeError.$factory("endswith first arg must be str or a tuple of str, not int");if((f=f.__class__?f.$brython_value:f).length<=_.length&&_.slice(_.length-f.length).join("")==f)return!0}return!1},s.expandtabs=function(){var t=e.args("expandtabs",2,{self:null,tabsize:null},["self","tabsize"],arguments,{tabsize:8},null,null),r=o(t.self),n=e.$GetInt(t.tabsize),a=0,s=0,i="",_=c(r);if(1==n)return r.replace(/\t/g," ");for(;s<_.length;){var l=_[s];switch(l){case"\t":for(;a%n>0;)i+=" ",a++;break;case"\r":case"\n":i+=l,a=0;break;default:i+=l,a++}s++}return i},s.find=function(){var t,r,_=e.args("str.find",4,{self:null,sub:null,start:null,end:null},["self","sub","start","end"],arguments,{start:0,end:null},null,null);l(_.sub),i(_),[t,r]=o([_.self,_.sub]);var c=s.__len__(t),u=s.__len__(r);if(0==u&&_.start==c)return c;if(c+u==0)return-1;var f=n(t,_.start),p=n(t,_.end),h=t.slice(f,p).indexOf(r);return-1==h?-1:a(t,f+h)},e.parse_format=function(e){var t,r,n,a=e.split(":"),o=[];if(1==a.length?t=e:(t=a[0],n=a.splice(1).join(":")),(a=t.split("!")).length>1&&(t=a[0],r=a[1]),void 0!==t){t=t.replace(/\.[_a-zA-Z][_a-zA-Z0-9]*|\[[_a-zA-Z][_a-zA-Z0-9]*\]|\[[0-9]+\]/g,(function(e){return o.push(e),""}))}return{name:t,name_ext:o,conv:r,spec:n||"",string:e}},e.split_format=function(r){for(var n,a=0,o=r.length,s="",i=[],_=0;a<o;)if("{"==(n=r.charAt(a))&&"{"==r.charAt(a+1))s+="{",a+=2;else if("}"==n&&"}"==r.charAt(a+1))s+="}",a+=2;else if("{"==n){i.push(s);for(var l=a+1,c=1;l<o;)if("{"==r.charAt(l))c++,l++;else if("}"==r.charAt(l)){if(l++,0==--c){var u=r.substring(a+1,l-1),f=e.parse_format(u);if(f.raw_name=f.name,f.raw_spec=f.spec,f.name||(f.name=_+"",_++),void 0!==f.spec){function p(e,t){return""==t?"{"+_+++"}":"{"+t+"}"}f.spec=f.spec.replace(/\{(.*?)\}/g,p)}i.push(f),s="";break}}else l++;if(c>0)throw t.ValueError.$factory("wrong format "+r);a=l}else s+=n,a++;return s&&i.push(s),i},s.format=function(r){var n=e.last(arguments);if("mapping"==n.$nat){for(var a=n.mapping,s=e.$getattr(a,"__getitem__"),i=[],_=0,l=arguments.length-1;_<l;_++)i.push(arguments[_]);var c=e.args("format",1,{self:null},["self"],i,{},"$args",null)}else a=(c=e.args("format",1,{self:null},["self"],arguments,{},"$args","$kw")).$kw,s=function(e){return t.dict.$getitem(a,e)};r=o(c.self);var u,f=e.split_format(r),p="";for(_=0;_<f.length;_++)if("string"!=typeof f[_]){if(void 0!==(u=f[_]).spec){function h(e,r){return/\d+/.exec(r)?t.tuple.__getitem__(c.$args,parseInt(r)):t.dict.__getitem__(c.$kw,r)}u.spec=u.spec.replace(/\{(.*?)\}/g,h)}if(u.name.charAt(0).search(/\d/)>-1)var d=parseInt(u.name),m=t.tuple.__getitem__(c.$args,d);else m=s(u.name);for(var g=0;g<u.name_ext.length;g++){var v=u.name_ext[g];if("."==v.charAt(0))m=e.$getattr(m,v.substr(1));else{var $=v.substr(1,v.length-2);$.charAt(0).search(/\d/)>-1&&($=parseInt($)),m=e.$getattr(m,"__getitem__")($)}}"a"==u.conv?m=t.ascii(m):"r"==u.conv?m=t.repr(m):"s"==u.conv&&(m=t.str.$factory(m)),m.$is_class||m.$factory?p+=m.__class__.__format__(m,u.spec):p+=e.$getattr(m,"__format__")(u.spec)}else p+=f[_];return p},s.format_map=function(){var t=e.args("format_map",2,{self:null,mapping:null},["self","mapping"],arguments,{},null,null),r=o(t.self);return s.format(r,{$nat:"mapping",mapping:t.mapping})},s.index=function(e){var r=s.find.apply(null,arguments);if(-1===r)throw t.ValueError.$factory("substring not found");return r},s.isascii=function(){for(var t=o(e.args("isascii",1,{self:null},["self"],arguments,{},null,null).self),r=0,n=t.length;r<n;r++)if(t.charCodeAt(r)>127)return!1;return!0},s.isalnum=function(){var r,n=o(e.args("isalnum",1,{self:null},["self"],arguments,{},null,null).self);for(var a of n)for(var s of(r=t.ord(a),["Ll","Lu","Lm","Lt","Lo","Nd","digits","numeric"]))if(!e.in_unicode_category(s,r))return!1;return!0},s.isalpha=function(){var r,n=o(e.args("isalpha",1,{self:null},["self"],arguments,{},null,null).self);for(var a of n)for(var s of(r=t.ord(a),["Ll","Lu","Lm","Lt","Lo"]))if(!e.in_unicode_category(s,r))return!1;return!0},s.isdecimal=function(){var r,n=o(e.args("isdecimal",1,{self:null},["self"],arguments,{},null,null).self);for(var a of n)if(r=t.ord(a),!e.in_unicode_category("Nd",r))return!1;return n.length>0},s.isdigit=function(){var r,n=o(e.args("isdigit",1,{self:null},["self"],arguments,{},null,null).self);for(var a of n)if(!/\p{Nd}/u.test(a)&&(r=t.ord(a),!e.in_unicode_category("No_digits",r)))return!1;return n.length>0},s.isidentifier=function(){var r=o(e.args("isidentifier",1,{self:null},["self"],arguments,{},null,null).self);if(0==r.length)return!1;var n=c(r);if(!e.is_XID_Start(t.ord(n[0])))return!1;for(var a of n){var s=t.ord(a);if(!e.is_XID_Continue(s))return!1}return!0},s.islower=function(){var r,n=!1,a=o(e.args("islower",1,{self:null},["self"],arguments,{},null,null).self);for(var s of a)if(r=t.ord(s),e.in_unicode_category("Ll",r))n=!0;else if(e.in_unicode_category("Lu",r)||e.in_unicode_category("Lt",r))return!1;return n};const L=/\p{Nd}|\p{Nl}|\p{No}/u;s.isnumeric=function(){var r=o(e.args("isnumeric",1,{self:null},["self"],arguments,{},null,null).self);for(var n of r)if(!L.test(n)&&!e.in_unicode_category("Lo_numeric",t.ord(n)))return!1;return r.length>0};var D=/\p{Cc}|\p{Cf}|\p{Co}|\p{Cs}|\p{Zl}|\p{Zp}|\p{Zs}/u;function q(e){this.type="expression",this.start=e,this.expression="",this.conversion=null,this.fmt=null}function U(e,t){var r=Error(e);throw r.position=t,r}s.isprintable=function(){var t=o(e.args("isprintable",1,{self:null},["self"],arguments,{},null,null).self);for(var r of t)if(" "!=r&&D.test(r))return!1;return!0},s.isspace=function(r){var n,a=o(e.args("isspace",1,{self:null},["self"],arguments,{},null,null).self);for(var s of a)if(n=t.ord(s),!e.in_unicode_category("Zs",n)&&-1==e.unicode_bidi_whitespace.indexOf(n))return!1;return a.length>0},s.istitle=function(t){var r=o(e.args("istitle",1,{self:null},["self"],arguments,{},null,null).self);return r.length>0&&s.title(r)==r},s.isupper=function(r){e.args("islower",1,{self:null},["self"],arguments,{},null,null);var n,a=!1,s=o(r);for(var i of s)if(n=t.ord(i),e.in_unicode_category("Lu",n))a=!0;else if(e.in_unicode_category("Ll",n)||e.in_unicode_category("Lt",n))return!1;return a},s.join=function(){for(var r=e.args("join",2,{self:null,iterable:null},["self","iterable"],arguments,{},null,null),n=o(r.self),a=t.iter(r.iterable),i=[];;)try{var _=t.next(a);if(!e.$isinstance(_,s))throw t.TypeError.$factory("sequence item 0: expected str instance, "+e.class_name(_)+" found");i.push(_)}catch(err){if(e.$isinstance(err,t.StopIteration))break;throw err}return i.join(n)},s.ljust=function(t){var r=e.args("ljust",3,{self:null,width:null,fillchar:null},["self","width","fillchar"],arguments,{fillchar:" "},null,null),n=o(r.self),a=s.__len__(n);return r.width<=a?n:n+r.fillchar.repeat(r.width-a)},s.lower=function(t){return o(e.args("lower",1,{self:null},["self"],arguments,{},null,null).self).toLowerCase()},s.lstrip=function(r,n){var a=e.args("lstrip",2,{self:null,chars:null},["self","chars"],arguments,{chars:t.None},null,null),s=a.self,i=a.chars;if(i===t.None)return r.trimStart();for([s,i]=o([s,i]);s.length>0;){var _=!1;for(var l of i)if(s.startsWith(l)){s=s.substr(l.length),_=!0;break}if(!_)return a.self.surrogates?e.String(s):s}return""},s.maketrans=function(){var r=e.args("maketrans",3,{x:null,y:null,z:null},["x","y","z"],arguments,{y:null,z:null},null,null),n=e.empty_dict();if(null===r.y&&null===r.z){if(!e.$isinstance(r.x,t.dict))throw t.TypeError.$factory("maketrans only argument must be a dict");for(var a=t.list.$factory(t.dict.items(r.x)),o=0,s=a.length;o<s;o++){var i=a[o][0],_=a[o][1];if(!e.$isinstance(i,t.int)){if(!e.$isinstance(i,t.str)||1!=i.length)throw t.TypeError.$factory("dictionary key "+i+" is not int or 1-char string");i=t.ord(i)}if(_!==t.None&&!e.$isinstance(_,[t.int,t.str]))throw t.TypeError.$factory("dictionary value "+_+" is not None, integer or string");t.dict.$setitem(n,i,_)}return n}if(e.$isinstance(r.x,t.str)&&e.$isinstance(r.y,t.str)){if(r.x.length!==r.y.length)throw t.TypeError.$factory("maketrans arguments must be strings or same length");var l={};if(null!==r.z){if(!e.$isinstance(r.z,t.str))throw t.TypeError.$factory("maketrans third argument must be a string");for(o=0,s=r.z.length;o<s;o++)l[t.ord(r.z.charAt(o))]=!0}for(o=0,s=r.x.length;o<s;o++){var c=t.ord(r.x.charAt(o)),u=r.y.charCodeAt(o);t.dict.$setitem(n,c,u)}for(var i in l)t.dict.$setitem(n,parseInt(i),t.None);return n}throw t.TypeError.$factory("maketrans arguments must be strings")},s.maketrans.$type="staticmethod",s.partition=function(){var r,n,a=e.args("partition",2,{self:null,sep:null},["self","sep"],arguments,{},null,null);if(""==a.sep)throw t.ValueError.$factory("empty separator");l(a.sep),[r,n]=o([a.self,a.sep]);var s=c(r),i=r.indexOf(n);return-1==i?t.tuple.$factory([r,"",""]):t.tuple.$factory([s.slice(0,i).join(""),n,s.slice(i+n.length).join("")])},s.removeprefix=function(){var r,n=e.args("removeprefix",2,{self:null,prefix:null},["self","prefix"],arguments,{},null,null);if(!e.$isinstance(n.prefix,s))throw t.ValueError.$factory(`prefix should be str, not '${e.class_name(n.prefix)}'`);return[r,u]=o([n.self,n.prefix]),s.startswith(r,u)?r.substr(u.length):r.substr(0)},s.removesuffix=function(){var r,n=e.args("removesuffix",2,{self:null,suffix:null},["self","suffix"],arguments,{},null,null);if(!e.$isinstance(n.suffix,s))throw t.ValueError.$factory(`suffix should be str, not '${e.class_name(n.prefix)}'`);return[r,f]=o([n.self,n.suffix]),f.length>0&&s.endswith(r,f)?r.substr(0,r.length-f.length):r.substr(0)},s.replace=function(r,n,a,i){var _=e.args("replace",4,{self:null,old:null,new:null,count:null},["self","old","new","count"],arguments,{count:-1},null,null),c=(i=_.count,_.self);n=_.old,a=_.new;if(l(n,"replace() argument 1 "),l(a,"replace() argument 2 "),!e.$isinstance(i,[t.int,t.float]))throw t.TypeError.$factory("'"+e.class_name(i)+"' object cannot be interpreted as an integer");if(e.$isinstance(i,t.float))throw t.TypeError.$factory("integer argument expected, got float");if(0==i)return r;if(i.__class__==e.long_int&&(i=parseInt(i.value)),[n,a]=o([n,a]),""==n){if(""==a)return c;if(""==c)return a;var u=c.split("");if(i>-1&&u.length>=i){var f=u.slice(i).join("");return a+u.slice(0,i).join(a)+f}return a+u.join(a)+a}u=s.split(c,n,i);var p=c,h=-1;if(0==n.length){p=a;for(var d=0;d<u.length;d++)p+=u[d]+a;return p+f}for(i<0&&(i=p.length);i>0&&!((h=p.indexOf(n,h))<0);)p=p.substr(0,h)+a+p.substr(h+n.length),h+=a.length,i--;return p},s.rfind=function(t,r){var _,c,u=e.args("rfind",4,{self:null,sub:null,start:null,end:null},["self","sub","start","end"],arguments,{start:0,end:null},null,null);i(u),l(u.sub),[_,c]=o([u.self,u.sub]);var f=s.__len__(_);if(0==s.__len__(c))return u.js_start>f?-1:s.__len__(_);var p=n(_,u.start),h=n(_,u.end),d=_.substring(p,h).lastIndexOf(c);return-1==d?-1:a(_,p+d)-u.start},s.rindex=function(){var e=s.rfind.apply(null,arguments);if(-1==e)throw t.ValueError.$factory("substring not found");return e},s.rjust=function(t){var r=e.args("rjust",3,{self:null,width:null,fillchar:null},["self","width","fillchar"],arguments,{fillchar:" "},null,null),n=o(r.self),a=s.__len__(n);return r.width<=a?n:e.String(r.fillchar.repeat(r.width-a)+n)},s.rpartition=function(t,r){var n,a=e.args("rpartition",2,{self:null,sep:null},["self","sep"],arguments,{},null,null);l(a.sep),[n,r]=[a.self,a.sep],n=_(n),r=_(r);for(var o=s.partition(n,r).reverse(),i=0;i<o.length;i++)o[i]=o[i].split("").reverse().join("");return o},s.rsplit=function(r){var n,a=e.args("rsplit",3,{self:null,sep:null,maxsplit:null},["self","sep","maxsplit"],arguments,{sep:t.None,maxsplit:-1},null,null),i=a.sep;[n,i]=o([a.self,a.sep]);var l=_(n),c=i===t.None?i:_(i),u=s.split(l,c,a.maxsplit);u.reverse();for(var f=0;f<u.length;f++)u[f]=_(u[f]);return u},s.rstrip=function(){var r=e.args("rstrip",2,{self:null,chars:null},["self","chars"],arguments,{chars:t.None},null,null),n=r.chars,a=o(r.self);if(n===t.None)return a.trimEnd();for(n=o(n);a.length>0;){var s=!1;for(var i of n)if(a.endsWith(i)){a=a.substr(0,a.length-i.length),s=!0;break}if(!s)return a.surrogates?e.String(a):a}return""},s.split=function(){var r=e.args("split",3,{self:null,sep:null,maxsplit:null},["self","sep","maxsplit"],arguments,{sep:t.None,maxsplit:-1},null,null),n=r.maxsplit,a=r.sep,s=0,i=o(r.self);if(n.__class__===e.long_int&&(n=parseInt(n.value)),""==a)throw t.ValueError.$factory("empty separator");if(a===t.None){for(var _=[];s<i.length&&i.charAt(s).search(/\s/)>-1;)s++;if(s===i.length-1)return[i];for(var l="";;){if(-1==i.charAt(s).search(/\s/))""==l?l=i.charAt(s):l+=i.charAt(s);else if(""!==l){if(_.push(l),-1!==n&&_.length==n+1)return _.pop(),_.push(l+i.substr(s)),_;l=""}if(++s>i.length-1){l&&_.push(l);break}}return _.map(e.String)}_=[];var c="",u=(a=o(a)).length;if(0==n)return[r.self];for(;s<i.length;)if(i.substr(s,u)==a){if(_.push(c),s+=u,n>-1&&_.length>=n)return _.push(i.substr(s)),_.map(e.String);c=""}else c+=i.charAt(s),s++;return _.push(c),_.map(e.String)},s.splitlines=function(r){var n=e.args("splitlines",2,{self:null,keepends:null},["self","keepends"],arguments,{keepends:!1},null,null);if(!e.$isinstance(n.keepends,[t.bool,t.int]))throw t.TypeError("integer argument expected, got "+e.get_class(n.keepends).__name);var a=t.int.$factory(n.keepends),s=[],i=0,_=0,l=o(n.self);if(!l.length)return s;for(;_<l.length;)"\r\n"==l.substr(_,2)?(s.push(l.slice(i,a?_+2:_)),i=_+=2):"\r"==l[_]||"\n"==l[_]?(s.push(l.slice(i,a?_+1:_)),i=_+=1):_++;return i<l.length&&s.push(l.slice(i)),s.map(e.String)},s.startswith=function(){var r,n=e.args("startswith",4,{self:null,prefix:null,start:null,end:null},["self","prefix","start","end"],arguments,{start:0,end:null},null,null);i(n);var a=n.prefix;e.$isinstance(a,t.tuple)||(a=[a]),r=o(n.self),a=o(a);var _=r.substring(n.start,n.end);for(var l of a){if(!e.$isinstance(l,s))throw t.TypeError.$factory("endswith first arg must be str or a tuple of str, not int");if(_.substr(0,l.length)==l)return!0}return!1},s.strip=function(){var r=e.args("strip",2,{self:null,chars:null},["self","chars"],arguments,{chars:t.None},null,null);return r.chars===t.None?r.self.trim():s.rstrip(s.lstrip(r.self,r.chars),r.chars)},s.swapcase=function(r){var n,a="",s=o(e.args("swapcase",1,{self:r},["self"],arguments,{},null,null).self);for(var i of s)n=t.ord(i),e.in_unicode_category("Ll",n)?a+=i.toUpperCase():e.in_unicode_category("Lu",n)?a+=i.toLowerCase():a+=i;return a},s.title=function(r){var n,a,s="",i=o(e.args("title",1,{self:r},["self"],arguments,{},null,null).self);for(var _ of i)a=t.ord(_),e.in_unicode_category("Ll",a)?n?s+=_:(s+=_.toUpperCase(),n="word"):e.in_unicode_category("Lu",a)||e.in_unicode_category("Lt",a)?(s+=n?_.toLowerCase():_,n="word"):(n=null,s+=_);return s},s.translate=function(){var r,n=e.args("translate",2,{self:null,table:null},["self","table"],arguments,{},null,null),a=n.table,s=[],i=e.$getattr(a,"__getitem__"),_=o(n.self);for(var l of _){r=t.ord(l);try{var c=i(r);c!==t.None&&("string"==typeof c?s.push(c):"number"==typeof c&&s.push(String.fromCharCode(c)))}catch(err){s.push(l)}}return s.join("")},s.upper=function(t){return o(e.args("upper",1,{self:null},["self"],arguments,{},null,null).self).toUpperCase()},s.zfill=function(t,r){var n=e.args("zfill",2,{self:null,width:null},["self","width"],arguments,{},null,null),a=o(n.self),i=s.__len__(a);if(n.width<=i)return a;switch(a.charAt(0)){case"+":case"-":return a.charAt(0)+"0".repeat(n.width-i)+a.substr(1);default:return"0".repeat(n.width-i)+a}},s.$factory=function(r,n,a){if(0==arguments.length)return"";if(void 0===r)return e.UndefinedType.__str__();if(null===r)return"<Javascript null>";if(void 0!==n){var o=e.args("str",3,{arg:null,encoding:null,errors:null},["arg","encoding","errors"],arguments,{encoding:"utf-8",errors:"strict"},null,null);n=o.encoding,a=o.errors}if("string"==typeof r||r instanceof String)return r.toString();if("number"==typeof r&&Number.isInteger(r))return r.toString();try{if(r.__class__&&r.__class__===t.bytes&&void 0!==n)return t.bytes.decode(r,o.encoding,o.errors);var i=r.__class__||e.get_class(r);if(void 0===i)return e.JSObj.__str__(e.JSObj.$factory(r));var _=e.$getattr(i,"__str__",null);null===_&&(_=e.$getattr(i,"__repr__"))}catch(err){throw console.log("no __str__ for",r),console.log("err ",err),e.get_option("debug")>1&&console.log(err),console.log("Warning - no method __str__ or __repr__, default to toString",r),err}var l=e.$call(_)(r);if("string"==typeof l||e.$isinstance(l,s))return l;throw t.TypeError.$factory(`__str__ returned non-string (type ${e.class_name(l)})`)},e.set_func_names(s,"builtins"),t.str=s,e.parse_format_spec=function(r,n){if(""==r)this.empty=!0;else{var a=0,o="<>=^",s="0123456789",i=o.indexOf(r.charAt(0));-1!=i?r.charAt(1)&&-1!=o.indexOf(r.charAt(1))?(this.fill=r.charAt(0),this.align=r.charAt(1),a=2):(this.align=o[i],this.fill=" ",a++):(i=o.indexOf(r.charAt(1)),r.charAt(1)&&-1!=i&&(this.align=o[i],this.fill=r.charAt(0),a=2));var _=r.charAt(a);for("+"!=_&&"-"!=_&&" "!=_||(this.sign=_,a++,_=r.charAt(a)),"z"==_&&(this.z=!0,a++,_=r.charAt(a)),"#"==_&&(this.alternate=!0,a++,_=r.charAt(a)),"0"==_&&(this.fill="0",-1==i&&(this.align="="),a++,_=r.charAt(a));_&&s.indexOf(_)>-1;)void 0===this.width?this.width=_:this.width+=_,a++,_=r.charAt(a);if(void 0!==this.width&&(this.width=parseInt(this.width)),void 0===this.width&&"{"==_){var l=r.substr(a).search("}");this.width=r.substring(a,l),a+=l+1}if((","==_||"_"==_)&&(this.comma=!0,this.grouping_option=_,a++,","==(_=r.charAt(a))||"_"==_))throw _==this.grouping_option?t.ValueError.$factory(`Cannot specify '${_}' with '${_}'.`):t.ValueError.$factory("Cannot specify both ',' and '_'.");if("."==_){if(-1==s.indexOf(r.charAt(a+1)))throw t.ValueError.$factory("Missing precision in format spec");for(this.precision=r.charAt(a+1),a+=2,_=r.charAt(a);_&&s.indexOf(_)>-1;)this.precision+=_,a++,_=r.charAt(a);this.precision=parseInt(this.precision)}if(_&&"bcdeEfFgGnosxX%".indexOf(_)>-1&&(this.type=_,a++,_=r.charAt(a)),a!==r.length){var c=`Invalid format specifier '${r}'`;throw n&&(c+=` for object of type '${e.class_name(n)}'`),t.ValueError.$factory(c)}}this.toString=function(){return(void 0===this.fill?"":t.str.$factory(this.fill))+(this.align||"")+(this.sign||"")+(this.alternate?"#":"")+(this.sign_aware?"0":"")+(this.width||"")+(this.comma?",":"")+(this.precision?"."+this.precision:"")+(this.type||"")}},e.format_width=function(e,t){if(t.width&&e.length<t.width){var r=t.fill||" ",n=t.align||"<",a=t.width-e.length;switch(n){case"<":return e+r.repeat(a);case">":return r.repeat(a)+e;case"=":return"+-".indexOf(e.charAt(0))>-1?e.charAt(0)+r.repeat(a)+e.substr(1):r.repeat(a)+e;case"^":var o=parseInt(a/2);return r.repeat(o)+e+r.repeat(a-o)}}return e},e.parse_fstring=function(t){for(var r,n,a=[],o=0,s="",i=null,_=0;o<t.length;)if(null===i)"{"==(n=t.charAt(o))?"{"==t.charAt(o+1)?(i="string",s="{",o+=2):(i="expression",r=o+1,_=1,o++):"}"==n?t.charAt(o+1)==n?(i="string",s="}",o+=2):U(" f-string: single '}' is not allowed",o):(i="string",s=n,o++);else if("string"==i){for(var l=o;l<t.length;)if("{"==(n=t.charAt(l))){if("{"!=t.charAt(l+1)){a.push(s),i="expression",r=l+1,o=l+1;break}s+="{",l+=2}else"}"==n?t.charAt(l+1)==n?(s+=n,l+=2):U(" f-string: single '}' is not allowed",o):(s+=n,l++);o=l+1}else if("debug"==i){for(;" "==t.charAt(l);)l++;"}"==t.charAt(l)&&(a.push(s),i=null,s="",o=l+1)}else{l=o,_=1;var c=0;for(s=new q(r);l<t.length;)if("{"==(n=t.charAt(l))&&0==c)_++,s.expression+=n,l++;else if("}"==n&&0==c){if(0==(_-=1)){""==s.expression&&U("f-string: empty expression not allowed",o),a.push(s),i=null,s="",o=l+1;break}s.expression+=n,l++}else{if("\\"==n)throw Error("f-string expression part cannot include a backslash");if(0==c&&"!"==n&&null===s.fmt&&":}".indexOf(t.charAt(l+2))>-1){if(0==s.expression.length)throw Error("f-string: empty expression not allowed");if(-1=="ars".indexOf(t.charAt(l+1)))throw Error("f-string: invalid conversion character: expected 's', 'r', or 'a'");s.conversion=t.charAt(l+1),l+=2}else if("("==n||"["==n)c++,s.expression+=n,l++;else if(")"==n||"]"==n)c--,s.expression+=n,l++;else if('"'==n){var u;if('"""'==t.substr(l,3))if(-1==(u=t.indexOf('"""',l+3)))U("f-string: unterminated string",o);else{var f=t.substring(l,u+3);f=f.replace("\n","\\n\\"),s.expression+=f,l=u+3}else-1==(u=t.indexOf('"',l+1))?U("f-string: unterminated string",o):(s.expression+=t.substring(l,u+1),l=u+1)}else if(0==c&&":"==n){s.fmt=!0;for(var p=0,h=!1,d=l+1;d<t.length;d++)if("{"==t[d])"{"==t[d+1]?d+=2:p++;else if("}"==t[d])if("}"==t[d+1])d+=2;else{if(0==p){h=!0;var m=t.substring(l+1,d);s.format=e.parse_fstring(m),l=d;break}p--}h||U("invalid format",o)}else if("="==n){var g=s.expression,v=g.charAt(g.length-1),$=("()".indexOf(v)>-1?"\\":"")+v;if(0==g.length||c>0||"="==t.charAt(l+1)||"=!<>:".search($)>-1)s.expression+=n,l+=1;else{for(var y=n;t.charAt(l+1).match(/\s/);)y+=t.charAt(l+1),l++;for(a.push(s.expression+y);g.match(/\s$/);)g=g.substr(0,g.length-1);s.expression=g,i="debug",l++}}else s.expression+=n,l++}_>0&&U("f-string: expected '}'",o)}for(var b of(s.length>0&&a.push(s),a))if("object"==typeof b&&void 0!==b.fmt_pos&&":"!=b.expression.charAt(b.fmt_pos))throw Error();return a};e.codepoint2jsstring=function(e){if(e>=65536&&e<=1114111){var t=e-65536;return String.fromCodePoint(55296|t>>10)+String.fromCodePoint(56320|1023&t)}return String.fromCodePoint(e)},e.jsstring2codepoint=function(e){if(1==e.length)return e.charCodeAt(0);var t=65536;return t+=(1023&e.charCodeAt(0))<<10,t+=1023&e.charCodeAt(1)}}(__BRYTHON__),function(e){var t=e.builtins;function r(e){return"boolean"==typeof e?e?1:0:void 0!==e.$brython_value?e.$brython_value:e}function n(r){return"boolean"==typeof r?r?1n:0n:"number"==typeof r?BigInt(r):r.__class__===e.long_int?r.value:e.$isinstance(r,t.int)?n(r.$brython_value):void 0}var a={__class__:t.type,__dir__:t.object.__dir__,__mro__:[t.object],__qualname__:"int",$is_class:!0,$native:!0,$descriptors:{numerator:!0,denominator:!0,imag:!0,real:!0},$is_int_subclass:!0},o=a.$int_or_long=function(t){var r=Number(t);return Number.isSafeInteger(r)?r:e.fast_long_int(t)};a.$to_js_number=function(r){return"number"==typeof r?r:r.__class__===e.long_int?Number(r.value):e.$isinstance(r,t.int)?a.$to_js_value(r.$brython_value):null},a.$to_bigint=n,a.$int_value=r,a.as_integer_ratio=function(){var t=e.args("as_integer_ratio",1,{self:null},["self"],arguments,{},null,null);return e.fast_tuple([t.self,1])},a.from_bytes=function(){var r,n,a=e.args("from_bytes",3,{bytes:null,byteorder:null,signed:null},["bytes","byteorder","signed"],arguments,{byteorder:"big",signed:!1},null,null),s=a.bytes,i=a.byteorder,_=a.signed;if(e.$isinstance(s,[t.bytes,t.bytearray]))r=s.source,n=s.source.length;else{n=(r=t.list.$factory(s)).length;for(var l=0;l<n;l++)t.bytes.$factory([r[l]])}if("big"==i)r.reverse();else if("little"!=i)throw t.ValueError.$factory("byteorder must be either 'little' or 'big'");var c=r[0];_&&c>=128&&(c-=256),c=BigInt(c);var u=256n;for(l=1;l<n;l++)c+=u*BigInt(r[l]),u*=256n;return _?r[n-1]<128?o(c):o(c-u):o(c)},a.to_bytes=function(){var r=e.args("to_bytes",3,{self:null,len:null,byteorder:null,signed:null},["self","len","byteorder","signed"],arguments,{len:1,byteorder:"big",signed:!1},null,null),n=r.self,a=r.len,o=r.byteorder,s=r.signed;if(!e.$isinstance(a,t.int))throw t.TypeError.$factory("integer argument expected, got "+e.class_name(a));if(-1==["little","big"].indexOf(o))throw t.ValueError.$factory("byteorder must be either 'little' or 'big'");if(e.$isinstance(n,e.long_int))return e.long_int.to_bytes(n,a,o,s);if(n<0){if(!s)throw t.OverflowError.$factory("can't convert negative int to unsigned");n=Math.pow(256,a)+n}for(var i=[],_=n;_>0;){var l=Math.floor(_/256),c=_-256*l;if(i.push(c),i.length>a)throw t.OverflowError.$factory("int too big to convert");_=l}for(;i.length<a;)i.push(0);return"big"==o&&i.reverse(),{__class__:t.bytes,source:i}},a.__abs__=function(e){return Math.abs(r(e))};var s='var _b_ = __BRYTHON__.builtins\nif(typeof other == "number"){\n    return _b_.int.$int_or_long(BigInt(self) + BigInt(other))}else if(other.__class__ === $B.long_int){\n    return _b_.int.$int_or_long(BigInt(self) + other.value)}else if(typeof other == "boolean"){\n    return _b_.int.$int_or_long(BigInt(self) + (other ? 1n : 0n))}else if($B.$isinstance(other, _b_.int)){\n    return _b_.int.__add__(self, other.$brython_value)}\nreturn _b_.NotImplemented\n';function i(e,t){var r,n,a;return 0==t?[e,1n,0n]:([r,n,a]=i(t,e%t),[r,a,n-e/t*a])}for(var _ of(a.__add__=Function("self","other",s),a.__bool__=function(e){return 0!=r(e).valueOf()},a.__ceil__=function(e){return Math.ceil(r(e))},a.__divmod__=function(r,n){return e.$isinstance(n,a)?e.fast_tuple([a.__floordiv__(r,n),a.__mod__(r,n)]):t.NotImplemented},a.__eq__=function(n,o){var s=r(n);return s.__class__===e.long_int?e.long_int.__eq__(s,o):e.$isinstance(o,a)?r(n)==r(o):t.NotImplemented},a.__float__=function(t){return e.fast_float(r(t))},a.__format__=function(r,n){var a=new e.parse_format_spec(n,r);if(a.type&&-1!="eEfFgG%".indexOf(a.type))return t.float.__format__(e.fast_float(r),n);a.align=a.align||">";var o=function(e,r){if(r.empty)return t.str.$factory(e);if(r.type&&-1=="bcdoxXn".indexOf(r.type))throw t.ValueError.$factory("Unknown format code '"+r.type+"' for object of type 'int'");var n;switch(r.type){case void 0:case"d":n=e.toString();break;case"b":n=(r.alternate?"0b":"")+e.toString(2);break;case"c":n=t.chr(e);break;case"o":n=(r.alternate?"0o":"")+e.toString(8);break;case"x":n=(r.alternate?"0x":"")+e.toString(16);break;case"X":n=(r.alternate?"0X":"")+e.toString(16).toUpperCase();break;case"n":return e}return void 0!==r.sign&&(" "==r.sign||"+"==r.sign)&&e>=0&&(n=r.sign+n),n}(r,a);if(a.comma){for(var s="-"==o[0]?"-":"",i=o.substr(s.length),_=i.length,l=Math.ceil(i.length/3),c=[],u=0;u<l;u++)c.push(i.substring(_-3*u-3,_-3*u));c.reverse(),o=s+c.join(",")}return e.format_width(o,a)},a.__floordiv__=function(r,n){if("number"==typeof n){if(0==n)throw t.ZeroDivisionError.$factory("division by zero");return Math.floor(r/n)}if("boolean"==typeof n){if(!1===n)throw t.ZeroDivisionError.$factory("division by zero");return r}return null!==n&&n.__class__===e.long_int?Math.floor(r/Number(n.value)):e.$isinstance(n,t.int)?a.__floordiv__(r,n.$brython_value):t.NotImplemented},a.$getnewargs=function(t){return e.fast_tuple([r(t)])},a.__getnewargs__=function(){return a.$getnewargs(e.single_arg("__getnewargs__","self",arguments))},a.__hash__=function(t){return void 0!==t.$brython_value?void 0!==t.__hashvalue__?t.__hashvalue__:"number"==typeof t.$brython_value?t.__hashvalue__=t.$brython_value:t.__hashvalue__=e.long_int.__hash__(t.$brython_value):t.valueOf()},a.__index__=function(e){return r(e)},a.__init__=function(e){return t.None},a.__int__=function(e){return e},a.__invert__=function(e){return~e},a.__mod__=function(n,s){if(e.$isinstance(s,t.tuple)&&1==s.length&&(s=s[0]),s.__class__===e.long_int){if(n=BigInt(n),0==(s=s.value))throw t.ZeroDivisionError.$factory("integer division or modulo by zero");return o((n%s+s)%s)}if(e.$isinstance(s,a)){if(!1===(s=r(s))?s=0:!0===s&&(s=1),0==s)throw t.ZeroDivisionError.$factory("integer division or modulo by zero");return(n%s+s)%s}return t.NotImplemented},a.__mul__=Function("self","other",s.replace(/\+/g,"*").replace(/add/g,"mul")),a.__ne__=function(e,r){var n=a.__eq__(e,r);return n===t.NotImplemented?n:!n},a.__neg__=function(t){var n=r(t);return n.__class__===e.long_int?e.long_int.__neg__(n):-t},a.__new__=function(r,n,o){if(void 0===r)throw t.TypeError.$factory("int.__new__(): not enough arguments");if(!e.$isinstance(r,t.type))throw t.TypeError.$factory("int.__new__(X): X is not a type object");return r===a?a.$factory(n,o):{__class__:r,__dict__:e.empty_dict(),$brython_value:a.$factory(n,o),toString:function(){return n}}},a.__pos__=function(e){return e},a.__pow__=function(r,s,_){if(!e.$isinstance(s,a))return t.NotImplemented;if("boolean"==typeof s&&(s=s?1:0),"number"==typeof s||e.$isinstance(s,a)){if(void 0!==_&&_!==t.None){if(r=n(r),s=n(s),1==(_=n(_)))return 0;var l=1n,c=r%_,u=s;if(u<0){var f,p,h;if([f,p,h]=i(r,_),1!=f)throw t.ValueError.$factory("not relative primes: "+r+" and "+_);return a.__pow__(o(p),o(-u),o(_))}for(;u>0;)u%2n==1n&&(l=l*c%_),u>>=1n,c=c*c%_;return o(l)}return"number"==typeof s?s>=0?o(BigInt(r)**BigInt(s)):e.fast_float(Math.pow(r,s)):s.__class__===e.long_int?s.value>=0?o(BigInt(r)**s.value):e.fast_float(Math.pow(r,s)):e.$isinstance(s,t.int)?o(a.__pow__(r,s.$brython_value)):t.NotImplemented}if(e.$isinstance(s,t.float))return s=t.float.numerator(s),r>=0?e.fast_float(Math.pow(r,s)):t.complex.__pow__(e.make_complex(r,0),s);if(e.$isinstance(s,t.complex)){var d=Math.pow(r,s.$real),m=Math.log(r);return e.make_complex(d*Math.cos(m),d*Math.sin(m))}var g=e.$getattr(s,"__rpow__",t.None);if(g!==t.None)return g(r);!function(r,n){var a="unsupported operand type(s) for "+r+" : 'int' and '"+e.class_name(n)+"'";throw t.TypeError.$factory(a)}("**",s)},a.__repr__=function(n){e.builtins_repr_check(a,arguments);var o=r(n),s=o.__class__===e.long_int?o.value:o;if(0!=e.int_max_str_digits&&s>=10n**BigInt(e.int_max_str_digits))throw t.ValueError.$factory(`Exceeds the limit (${e.int_max_str_digits}) for integer string conversion`);return s.toString()},a.__setattr__=function(r,n,a){if("number"==typeof r||"boolean"==typeof r){var o=e.class_name(r);throw t.dir(r).indexOf(n)>-1?t.AttributeError.$factory("attribute '"+n+`' of '${o}' objects is not writable`):t.AttributeError.$factory(`'${o}' object has no attribute '${n}'`)}return t.dict.$setitem(r.__dict__,n,a),t.None},a.__sub__=Function("self","other",s.replace(/\+/g,"-").replace(/__add__/g,"__sub__")),a.__truediv__=function(n,o){if(e.$isinstance(o,a)){if(0==(o=r(o)))throw t.ZeroDivisionError.$factory("division by zero");return o.__class__===e.long_int?e.fast_float(n/parseInt(o.value)):e.fast_float(n/o)}return t.NotImplemented},a.bit_count=function(e){var r=t.bin(t.abs(e)),n=0;for(var a of r)"1"==a&&n++;return n},a.bit_length=function(r){var n=t.bin(r);return(n=e.$getattr(n,"lstrip")("-0b")).length},a.numerator=function(e){return r(e)},a.denominator=function(e){return a.$factory(1)},a.imag=function(e){return a.$factory(0)},a.real=function(e){return e},["numerator","denominator","imag","real"]))a[_].setter=function(r){return function(n,a){throw t.AttributeError.$factory(`attribute '${r}' of '${e.class_name(n)}' objects is not writable`)}}(_);var l='var _b_ = __BRYTHON__.builtins\nif(typeof other == "number"){\n    // transform into BigInt: JS converts numbers to 32 bits\n    return _b_.int.$int_or_long(BigInt(self) & BigInt(other))}else if(typeof other == "boolean"){\n    return self & (other ? 1 : 0)}else if(other.__class__ === $B.long_int){\n    return _b_.int.$int_or_long(BigInt(self) & other.value)}else if($B.$isinstance(other, _b_.int)){\n    // int subclass\n    return _b_.int.__and__(self, other.$brython_value)}\nreturn _b_.NotImplemented';a.__and__=Function("self","other",l),a.__lshift__=Function("self","other",l.replace(/&/g,"<<").replace(/__and__/g,"__lshift__")),a.__rshift__=Function("self","other",l.replace(/&/g,">>").replace(/__and__/g,"__rshift__")),a.__or__=Function("self","other",l.replace(/&/g,"|").replace(/__and__/g,"__or__")),a.__xor__=Function("self","other",l.replace(/&/g,"^").replace(/__and__/g,"__xor__")),a.__ge__=function(n,a){return n=r(n),"number"==typeof a?n>=a:null!==a&&a.__class__===e.long_int?n>=a.value:"boolean"==typeof a?n>=a?1:0:e.$isinstance(a,t.int)?n>=a.$brython_value:t.NotImplemented},a.__gt__=function(e,r){var n=a.__le__(e,r);return n===t.NotImplemented?n:!n},a.__le__=function(n,a){return n=r(n),"number"==typeof a?n<=a:null!==a&&a.__class__===e.long_int?n<=a.value:"boolean"==typeof a?n<=a?1:0:e.$isinstance(a,t.int)?n<=a.$brython_value:t.NotImplemented},a.__lt__=function(e,r){var n=a.__ge__(e,r);return n===t.NotImplemented?n:!n};for(var c of["add","sub","mul","truediv","floordiv","mod","pow","lshift","rshift","and","xor","or","divmod"])void 0===a["__r"+c+"__"]&&a["__"+c+"__"]&&(a["__r"+c+"__"]=function(n){return function(o,s){return e.$isinstance(s,a)?(s=r(s),a["__"+n+"__"](s,o)):t.NotImplemented}}(c));a.$factory=function(n,a){var s={},i=e.args("int",2,{x:null,base:null},["x","base"],arguments,{x:s,base:s},null,null,1),_=(n=i.x,a=void 0===i.base?s:i.base,n),l=a!==s;if(n===s||void 0===n){if(a!==s)throw t.TypeError.$factory("int() missing string argument");return 0}if(e.$isinstance(n,[t.bytes,t.bytearray]))n=e.$getattr(n,"decode")("latin-1");else{if(l&&!e.$isinstance(n,t.str))throw t.TypeError.$factory("int() can't convert non-string with explicit base");e.$isinstance(n,t.memoryview)&&(n=e.$getattr(t.memoryview.tobytes(n),"decode")("latin-1"))}if(!e.$isinstance(n,t.str)){if(a!==s)throw t.TypeError.$factory("int() can't convert non-string with explicit base");for(var c of["__int__","__index__","__trunc__"]){var u=e.$getattr(e.get_class(n),c,t.None);if(u!==t.None){var f=e.$call(u)(n);if("__trunc__"==c){if(e.warn(t.DeprecationWarning,"The delegation of int() to __trunc__ is deprecated."),null===(p=e.$getattr(f,"__index__",null)))throw t.TypeError.$factory(`__trunc__ returned non-Integral (type ${e.class_name(f)})`);f=e.$call(p)()}if(e.$isinstance(f,t.int))return"number"!=typeof f&&f.__class__!==e.long_int&&e.warn(t.DeprecationWarning,c+" returned non-int (type "+e.class_name(f)+").  The ability to return an instance of a strict subclass of int is deprecated, and may be removed in a future version of Python."),r(f);var p,h=e.get_class(f);if(null===(p=e.$getattr(h,"__index__",null)))throw t.TypeError.$factory(c+`returned non-int (type ${e.class_name(f)})`);return r(f)}}throw t.TypeError.$factory(`int() argument must be a string, a bytes-like object or a real number, not '${e.class_name(n)}'`)}if(!((a=a===s?10:e.PyNumber_Index(a))>=2&&a<=36)&&0!=a)throw t.ValueError.$factory("invalid base");function d(e){throw t.ValueError.$factory("invalid literal for int() with base "+e+": "+t.repr(_))}"string"!=typeof n&&(n=t.str.$to_string(n));var m=n.trim(),g="";if(m.startsWith("+")||m.startsWith("-")){g=m[0];m=m.substr(1)}if(2==m.length&&0==a&&("0b"==m||"0o"==m||"0x"==m))throw t.ValueError.$factory("invalid value");if(m.endsWith("_")&&d(a),n.indexOf("__")>-1&&d(a),m.length>2){var v=m.substr(0,2).toUpperCase();if(0==a){if("0B"==v)a=2;else if("0O"==v)a=8;else if("0X"==v)a=16;else if(m.startsWith("0")){if((m=m.replace(/_/g,"")).match(/^0+$/))return 0;d(a)}}else("0X"==v&&16!=a||"0O"==v&&8!=a)&&d(a);("0B"==v&&2==a||"0O"==v||"0X"==v)&&(m=m.substr(2)).startsWith("_")&&(m=m.substr(1))}0==a&&(a=10);var $=function(e){var t="";if(0===e)return"0";if(e<10){for(var r=0;r<e;r++)t+=String.fromCharCode(r+48);return t}for(t="0123456789",r=10;r<e;r++)t+=String.fromCharCode(r+55);return t}(a);if(null===new RegExp("^[+-]?["+$+"]["+$+"_]*$","i").exec(m)){f=0;var y,b=1;for(var w of m){if(/\p{Nd}/u.test(w)){var x=w.codePointAt(0);for(var k of e.digits_starts)if(x-k<10){y=x-k;break}}else a>10&&$.indexOf(w.toUpperCase())>-1?y=w.toUpperCase().charCodeAt(0)-55:d(a);y<a?(f=e.rich_op("__mul__",f,a),f=e.rich_op("__add__",f,y)):d(a)}return f}if(m=m.replace(/_/g,""),2==a)f=BigInt("0b"+m);else if(8==a)f=BigInt("0o"+m);else if(16==a)f=BigInt("0x"+m);else{if(0!=e.int_max_str_digits&&m.length>e.int_max_str_digits)throw t.ValueError.$factory(`Exceeds the limit (${e.int_max_str_digits}) for integer string conversion: value has ${n.length} digits; use sys.set_int_max_str_digits() to increase the limit.`);if(10==a)f=BigInt(m);else{a=BigInt(a);f=0n,b=1n;for(var j=m.length-1;j>=0;j--)w=m[j].toUpperCase(),f+=b*BigInt($.indexOf(w)),b*=a}}return"-"==g&&(f=-f),o(f)},e.set_func_names(a,"builtins"),t.int=a,e.$bool=function(r,n){if(null==r)return!1;switch(typeof r){case"boolean":return r;case"number":case"string":return!!r;default:if(r.$is_class)return!0;var a=e.get_class(r),o={},s=n?e.$getattr(a,"__bool__",o):e.$getattr(r,"__bool__",o);if(s===o){var i=e.$getattr(a,"__len__",o);return i===o||i(r)>0}try{var _=n?e.$call(s)(r):e.$call(s)()}catch(err){throw err}if(!0!==_&&!1!==_)throw t.TypeError.$factory("__bool__ should return bool, returned "+e.class_name(_));return _}};var u={__bases__:[a],__class__:t.type,__mro__:[a,t.object],__qualname__:"bool",$is_class:!0,$not_basetype:!0,$native:!0,$descriptors:{numerator:!0,denominator:!0,imag:!0,real:!0},__and__:function(r,n){return e.$isinstance(n,u)?r&&n:e.$isinstance(n,a)?a.__and__(u.__index__(r),a.__index__(n)):t.NotImplemented},__float__:function(t){return t?e.fast_float(1):e.fast_float(0)}};u.__hash__=u.__index__=u.__int__=function(e){return e.valueOf()?1:0},u.__neg__=function(t){return-e.int_or_bool(t)},u.__or__=function(r,n){return e.$isinstance(n,u)?r||n:e.$isinstance(n,a)?a.__or__(u.__index__(r),a.__index__(n)):t.NotImplemented},u.__pos__=e.int_or_bool,u.__repr__=function(t){return e.builtins_repr_check(u,arguments),t?"True":"False"},u.__xor__=function(r,n){return e.$isinstance(n,u)?!!(r^n):e.$isinstance(n,a)?a.__xor__(u.__index__(r),a.__index__(n)):t.NotImplemented},u.$factory=function(){var t=e.args("bool",1,{x:null},["x"],arguments,{x:!1},null,null);return e.$bool(t.x,!0)},u.numerator=a.numerator,u.denominator=a.denominator,u.real=a.real,u.imag=a.imag,t.bool=u,e.set_func_names(u,"builtins")}(__BRYTHON__),function(e){var t=e.builtins;if(e.isWebWorker)self;var r={__class__:t.type,__mro__:[t.int,t.object],__qualname__:"int",$infos:{__module__:"builtins",__name__:"int"},$is_class:!0,$native:!0,$descriptors:{numerator:!0,denominator:!0,imag:!0,real:!0}},n=(e.max_int,t.int.$int_or_long);Math.pow(2,53);r.$to_js_number=function(e){return Number(e.value)},r.__format__=function(r,n){var a=new e.parse_format_spec(n,r);if(a.type&&-1!="eEfFgG%".indexOf(a.type))return t.float.__format__(r,n);a.align=a.align||">";var o=function(e,r){if(r.empty)return t.str.$factory(e);if(r.type&&-1=="bcdoxXn".indexOf(r.type))throw t.ValueError.$factory("Unknown format code '"+r.type+"' for object of type 'int'");var n;switch(r.type){case void 0:case"d":n=e.toString();break;case"b":n=(r.alternate?"0b":"")+BigInt(e.value).toString(2);break;case"c":n=t.chr(e);break;case"o":n=(r.alternate?"0o":"")+BigInt(e.value).toString(8);break;case"x":n=(r.alternate?"0x":"")+BigInt(e.value).toString(16);break;case"X":n=(r.alternate?"0X":"")+BigInt(e.value).toString(16).toUpperCase();break;case"n":return e}return void 0!==r.sign&&(" "==r.sign||"+"==r.sign)&&e>=0&&(n=r.sign+n),n}(r,a);if(a.comma){for(var s="-"==o[0]?"-":"",i=o.substr(s.length),_=i.length,l=Math.ceil(i.length/3),c=[],u=0;u<l;u++)c.push(i.substring(_-3*u-3,_-3*u));c.reverse(),o=s+c.join(",")}return e.format_width(o,a)},r.__abs__=function(t){return e.fast_long_int(t.value>0?t.value:-t.value)},r.__add__=function(a,o){return"number"==typeof o?n(a.value+BigInt(o)):o.__class__===e.long_int?n(a.value+o.value):"boolean"==typeof o?n(a.value+(o?1n:0n)):e.$isinstance(o,t.int)?r.__add__(a,o.$brython_value):t.NotImplemented},r.__divmod__=function(r,a){var o,s=r.value,i=t.int.$to_bigint(a),_=s-(o=s>=0&&i>0||s<=0&&i<0?s/i:s/i-1n)*i;return e.fast_tuple([n(o),n(_)])},r.__eq__=function(n,a){return a.__class__===e.long_int?n.value==a.value:"number"!=typeof a&&"boolean"!=typeof a&&(e.$isinstance(a,t.int)?r.__eq__(n,a.$brython_value):t.NotImplemented)},r.__float__=function(r){if(!isFinite(Number(r.value)))throw t.OverflowError.$factory("int too large to convert to float");return e.fast_float(Number(r.value))},r.__floordiv__=function(r,a){return"number"==typeof a?n(r.value/BigInt(a)):a.__class__===e.long_int?n(r.value/a.value):"boolean"==typeof a?n(r.value/(a?1n:0n)):e.$isinstance(a,t.int)?n(r.value/a.$brython_value):t.NotImplemented},r.__ge__=function(r,n){return"number"==typeof n?r.value>=n:n.__class__===e.long_int?r.value>=n.value:"boolean"==typeof n?r.value>=(n?1:0):e.$isinstance(n,t.int)?r.value>=n.$brython_value:t.NotImplemented},r.__gt__=function(e,n){var a=r.__le__(e,n);return a===t.NotImplemented?a:!a},r.__hash__=function(e){var t=e.value>=0?1n:-1n,r=t*(e.value*t%2305843009213693951n);return e.__hashvalue__=n(r)},r.__index__=function(e){return e},r.__invert__=function(e){return n(-1n-e.value)},r.__le__=function(r,n){return"number"==typeof n?r.value<=n:n.__class__===e.long_int?r.value<=n.value:"boolean"==typeof n?r.value<=(n?1:0):e.$isinstance(n,t.int)?r.value<=n.$brython_value:t.NotImplemented},r.__lt__=function(e,n){var a=r.__ge__(e,n);return a===t.NotImplemented?a:!a},r.__lshift__=function(a,o){return"number"==typeof o?n(a.value<<BigInt(o)):o.__class__===e.long_int?n(a.value<<o.value):"boolean"==typeof o?n(a.value<<(o?1n:0n)):e.$isinstance(o,t.int)?r.__lshift__(a,o.$brython_value):t.NotImplemented},r.__mod__=function(a,o){if("number"==typeof o)return n(a.value%BigInt(o));if(o.__class__===e.long_int){var s=a.value,i=o.value;return n((s%i+i)%i)}return"boolean"==typeof o?n(a.value%(o?1n:0n)):e.$isinstance(o,t.int)?r.__mod__(a,o.$brython_value):t.NotImplemented},r.__mro__=[t.int,t.object],r.__mul__=function(a,o){return"number"==typeof o?n(a.value*BigInt(o)):"boolean"==typeof o?n(a.value*(o?1n:0n)):o.__class__===e.long_int?n(a.value*o.value):e.$isinstance(o,t.int)?r.__mul__(a,o.$brython_value):t.NotImplemented},r.__ne__=function(e,n){var a=r.__eq__(e,n);return a===t.NotImplemented?a:!a},r.__neg__=function(t){return e.fast_long_int(-t.value)},r.__pos__=function(e){return e},r.__pow__=function(a,o,s){return void 0!==s?t.int.__pow__(a,o,s):"number"==typeof o?n(a.value**BigInt(o)):"boolean"==typeof o?n(a.value**o?1n:0n):o.__class__===e.long_int?n(a.value**o.value):e.$isinstance(o,t.int)?r.__pow__(a,o.$brython_value):t.NotImplemented},r.__rshift__=function(a,o){return"number"==typeof o?n(a.value>>BigInt(o)):o.__class__===e.long_int?n(a.value>>o.value):"boolean"==typeof o?n(a.value>>(o?1n:0n)):e.$isinstance(o,t.int)?r.__rshift__(a,o.$brython_value):t.NotImplemented},r.__repr__=function(r){if(e.builtins_repr_check(e.long_int,arguments),0!=e.int_max_str_digits&&r.value>=10n**BigInt(e.int_max_str_digits))throw t.ValueError.$factory(`Exceeds the limit (${e.int_max_str_digits}) for integer string conversion`);return r.value.toString()},r.__sub__=function(a,o){return"number"==typeof o?n(a.value-BigInt(o)):"boolean"==typeof o?n(a.value-(o?1n:0n)):o.__class__===e.long_int?n(a.value-o.value):e.$isinstance(o,t.int)?r.__sub__(a,o.$brython_value):t.NotImplemented},r.__truediv__=function(n,a){return"number"==typeof a?e.fast_float(Number(n.value)/a):"boolean"==typeof a?e.fast_float(Number(n.value)*(a?1:0)):a.__class__===e.long_int?e.fast_float(Number(n.value)/Number(a.value)):e.$isinstance(a,t.int)?r.__truediv__(n,a.$brython_value):t.NotImplemented},r.bit_count=function(e){var t=e.value.toString(2),r=0;for(var n of t)"1"==n&&r++;return r},r.bit_length=function(e){return e.value.toString(2).length},r.$log2=function(r){if(r.value<0)throw t.ValueError.$factory("math domain error");var n=function(t){var r=e.long_int.bit_length(t),n=2n**BigInt(r-1),a=BigInt(t.value)-n;return{nbits:r,pow2:n,rest:a,relative_rest:new Number(a/n)}}(r);return t.float.$factory(n.nbits-1+Math.log(1+n.relative_rest/Math.LN2))},r.$log10=function(e){if(e.value<0)throw t.ValueError.$factory("math domain error");var r=e.value.toString(),n=r.length-1,a=parseFloat(r[0]+"."+r.substr(1));return t.float.$factory(n+Math.log10(a))},r.numerator=function(e){return e},r.denominator=function(e){return t.int.$factory(1)},r.imag=function(e){return t.int.$factory(0)},r.real=function(e){return e};var a='var $B = __BRYTHON__,\n    _b_ = $B.builtins\nif(typeof other == "number"){\n    return _b_.int.$int_or_long(self.value & BigInt(other))}else if(typeof other == "boolean"){\n    return _b_.int.$int_or_long(self.value & (other ? 1n : 0n))}else if(other.__class__ === $B.long_int){\n    return _b_.int.$int_or_long(self.value & other.value)}else if($B.$isinstance(other, _b_.int)){\n    // int subclass\n    return $B.long_int.__and__(self, other.$brython_value)}\nreturn _b_.NotImplemented';r.__and__=Function("self","other",a),r.__or__=Function("self","other",a.replace(/&/g,"|").replace(/__and__/g,"__or__")),r.__xor__=Function("self","other",a.replace(/&/g,"^").replace(/__and__/g,"__xor__")),r.to_bytes=function(r,n,a,o){var s=[],i=r.value;if(!e.$bool(o)&&i<0)throw t.OverflowError.$factory("can't convert negative int to unsigned");for(;i>0;){var _=i/256n,l=i-256n*_;if(i=_,s.push(Number(l)),s.length>n)throw t.OverflowError.$factory("int too big to convert")}for(;s.length<n;)s.push(0);return"big"==a&&s.reverse(),t.bytes.$factory(s)};Math.pow(2,53);r.$from_int=function(e){return{__class__:r,value:e.toString(),pos:e>0}},r.$factory=function(r,n){for(var a=function(e){for(var t={},r=0;r<e&&10!=r;r++)t[r]=r;if(e>10)for(r=0;r<e-10;r++)t[String.fromCharCode(65+r)]=10+r,t[String.fromCharCode(97+r)]=10+r;return t}(n),o=0;o<r.length;o++)if(void 0===a[r.charAt(o)])throw t.ValueError.$factory('int argument is not a valid number: "'+r+'"');if(10==n)i=BigInt(r);else if(16==n)i=BigInt("0x"+r);else if(8==n)i=BigInt("0o"+r);else{n=BigInt(n);var s,i=0n,_=1n;for(o=r.length-1;o>=0;o--)s=r[o].toUpperCase(),i+=_*BigInt(a[s]),_*=n}return{__class__:e.long_int,value:i}},e.inverse_of=function(t,r){var n,a,o;if([n,a,o]=function(t,r){for(var n,a,o=0,s=1,i=1,_=0,l=r,c=t;e.rich_comp("__ne__",l,0);)n=e.rich_op("__floordiv__",c,l),a=e.rich_op("__sub__",c,e.rich_op("__mul__",n,l)),c=l,l=a,a=e.rich_op("__sub__",s,e.rich_op("__mul__",n,o)),s=o,o=a,a=e.rich_op("__sub__",_,e.rich_op("__mul__",n,i)),_=i,i=a;return[c,s,_]}(t,r),e.rich_comp("__ne__",n,1))throw Error(`${t} has no multiplicative inverse '\n            'modulo ${r}`);return e.rich_op("__mod__",a,r)},e.set_func_names(r,"builtins"),e.long_int=r,e.fast_long_int=function(t){if("bigint"!=typeof t)throw console.log("expected bigint, got",t),Error("not a big int");return{__class__:e.long_int,value:t}}}(__BRYTHON__),function(e){var t=e.builtins,r=t.object;function n(e){return e.__class__===a?e:B(e.value)}var a={__class__:t.type,__dir__:r.__dir__,__qualname__:"float",$is_class:!0,$native:!0,$descriptors:{numerator:!0,denominator:!0,imag:!0,real:!0}};function o(r,n){if(r.__class__===t.float||e.$isinstance(r,t.float))return!0;throw t.TypeError.$factory(`descriptor '${n}' requires a 'float' object but received a '${e.class_name(r)}'`)}a.$float_value=n,a.$to_js_number=function(e){return e.__class__===a?e.value:a.$to_js_number(e.value)},a.numerator=function(e){return e},a.denominator=function(e){return 1},a.imag=function(e){return 0},a.real=function(e){return e},a.__float__=function(e){return e},e.shift1_cache={},a.as_integer_ratio=function(r){if(d(r))throw t.OverflowError.$factory("Cannot pass infinity to float.as_integer_ratio.");if(m(r))throw t.ValueError.$factory("Cannot pass NaN to float.as_integer_ratio.");for(var n=v(r),a=n[0],o=n[1],s=0;s<300&&a!=Math.floor(a);s++)a*=2,o--;var i,_=t.int.$factory(a),l=t.abs(o),c=1;return void 0!==e.shift1_cache[l]?i=e.shift1_cache[l]:(i=e.$getattr(1,"__lshift__")(l),e.shift1_cache[l]=i),l=i,o>0?_=e.rich_op("__mul__",_,l):c=l,e.fast_tuple([t.int.$factory(_),t.int.$factory(c)])},a.__abs__=function(e){return o(e,"__abs__"),B(Math.abs(e.value))},a.__bool__=function(e){return o(e,"__bool__"),t.bool.$factory(e.value)},a.__ceil__=function(e){if(o(e,"__ceil__"),m(e))throw t.ValueError.$factory("cannot convert float NaN to integer");if(d(e))throw t.OverflowError.$factory("cannot convert float infinity to integer");return Math.ceil(e.value)},a.__divmod__=function(r,n){return o(r,"__divmod__"),e.$isinstance(n,[t.int,a])?e.fast_tuple([a.__floordiv__(r,n),a.__mod__(r,n)]):t.NotImplemented},a.__eq__=function(r,n){return o(r,"__eq__"),!(isNaN(r.value)&&e.$isinstance(n,a)&&isNaN(n.value))&&(e.$isinstance(n,t.int)?r.value==n:e.$isinstance(n,a)?r.value==n.value:e.$isinstance(n,t.complex)?!!e.rich_comp("__eq__",0,n.$imag)&&a.__eq__(r,n.$real):t.NotImplemented)},a.__floor__=function(e){if(o(e,"__floor__"),m(e))throw t.ValueError.$factory("cannot convert float NaN to integer");if(d(e))throw t.OverflowError.$factory("cannot convert float infinity to integer");return Math.floor(e.value)},a.__floordiv__=function(r,n){if(o(r,"__floordiv__"),e.$isinstance(n,a)){if(0==n.value)throw t.ZeroDivisionError.$factory("division by zero");return B(Math.floor(r.value/n.value))}if(e.$isinstance(n,t.int)){if(0==n.valueOf())throw t.ZeroDivisionError.$factory("division by zero");return B(Math.floor(r.value/n))}return t.NotImplemented};const s=53,i=__BRYTHON__.MAX_VALUE,_=1024,l=__BRYTHON__.MIN_VALUE,c=-1021;a.fromhex=function(r,n){function o(e){return parseInt(e,16)}function u(){for(;n[d]&&n[d].match(/\s/);)d++;if(d!=n.length)throw p();return h&&(A=a.__neg__(A)),r===t.float?A:e.$call(r)(A)}function f(){throw t.OverflowError.$factory("hexadecimal value too large to represent as a float")}function p(){throw t.ValueError.$factory("invalid hexadecimal floating-point string")}n=n.trim();new RegExp([/^(?<sign>[+-])?(0x)?/,/(?<integer>[0-9a-fA-F]+)?/,/(?<fraction>\.(?<fvalue>[0-9a-fA-F]+))?/,/(?<exponent>p(?<esign>[+-])?(?<evalue>\d+))?$/].map((e=>e.source)).join("")).exec(n);if(n.match(/^\+?inf(inity)?$/i))return N;if(n.match(/^-inf(inity)?$/i))return E;if(n.match(/^[+-]?nan$/i))return S;var h,d=0,m=t.float.$funcs.ldexp;"-"==n[d]?(d++,h=1):"+"==n[d]&&d++,"0x"==n.substr(d,2).toLowerCase()&&(d+=2);for(var g,v=d;o(n[d])>=0;)d++;var $=d;if("."==n[d]){for(d++;o(n[d])>=0;)d++;g=d-1}else g=d;var y,b=g-v,w=g-$;if(0==b)throw p();if(b>Math.min(-1074-l/2,i/2+1-_)/4)throw function(){throw t.ValueError.$factory("hexadecimal string too long to convert")}();if("p"==n[d]||"P"==n[d]){var x=++d;if("-"!=n[d]&&"+"!=n[d]||d++,!("0"<=n[d]&&n[d]<="9"))throw p();for(d++;"0"<=n[d]&&n[d]<="9";)d++;y=parseInt(n.substr(x))}else y=0;function k(e){if(!Number.isInteger(e))throw Error("j pas entier");return o(n[e<w?g-e:g-1-e])}for(;b>0&&0==k(b-1);)b--;if(0==b||y<l/2)return A=T,u();if(y>i/2)throw console.log("overflow, exp",y),f();for(var j=(y-=4*w)+4*(b-1),B=BigInt(k(b-1));0!=B;B/=2n)j++;if(j<-1074)return A=T,u();if(j>_)throw f();var O=Math.max(j,c)-s,A=0;if(y>=O){for(var I=b-1;I>=0;I--)A=16*A+k(I);return A=m(e.fast_float(A),y),u()}var C=1<<(O-y-1)%4,M=parseInt((O-y-1)/4);for(I=b-1;I>M;I--)A=16*A+k(I);B=k(M);if(A=16*A+(B&16-2*C),0!=(B&C)){var R=0;if(0!=(B&3*C-1)||8==C&&M+1<b&&0!=(1&k(M+1)))R=1;else for(I=M-1;I>=0;I--)if(0!=k(I)){R=1;break}if(R&&(A+=2*C,j==_&&A==m(2*C,s).value))throw f()}return A=m(A,y+4*M),u()},a.__getformat__=function(r){if("double"==r||"float"==r)return"IEEE, little-endian";if("string"!=typeof r)throw t.TypeError.$factory(" __getformat__() argument must be str, not "+e.class_name(r));throw t.ValueError.$factory("__getformat__() argument 1 must be 'double' or 'float'")};function u(r,n){var a,o=r.value;if(n.empty)return t.str.$factory(r);if(n.type&&-1=="eEfFgGn%".indexOf(n.type))throw t.ValueError.$factory("Unknown format code '"+n.type+"' for object of type 'float'");if(isNaN(o)?a="efg".indexOf(n.type)>-1?"nan":"NAN":o==Number.POSITIVE_INFINITY?a="efg".indexOf(n.type)>-1?"inf":"INF":o==Number.NEGATIVE_INFINITY&&(a="efg".indexOf(n.type)>-1?"-inf":"-INF"),a)return function(e,t){switch(t.sign){case"+":return e>=0||isNaN(e)?"+":"";case"-":return"";case" ":return e>=0||isNaN(e)?" ":""}return t.space&&e>=0?" ":""}(o,n)+a;if(void 0===n.precision&&void 0!==n.type&&(n.precision=6),"%"==n.type&&(o*=100),"e"==n.type){var s=o.toExponential(n.precision),i=parseInt(s.substr(s.search("e")+1));return Math.abs(i)<10&&(s=s.substr(0,s.length-1)+"0"+s.charAt(s.length-1)),s}if(void 0!==n.precision){var _=n.precision;if(0==_)return Math.round(o)+"";var l=(s=e.roundDownToFixed(o,_)).indexOf(".");if(void 0===n.type||"%"!=n.type&&"f"!=n.type.toLowerCase()){if(n.type&&"g"==n.type.toLowerCase()){var c=u(r,{type:"e"}).split("e"),f=(s=-4<=(i=parseInt(c[1]))&&i<n.precision?u(r,{type:"f",precision:n.precision-1-i}):u(r,{type:"e",precision:n.precision-1})).split("e");if(n.alternate)-1==f[0].search(/\./)&&(f[0]+=".");else{var p=f[0];if(p.indexOf(".")>0)for(;p.endsWith("0");)p=p.substr(0,p.length-1);p.endsWith(".")&&(p=p.substr(0,p.length-1)),f[0]=p}return s=f.join("e"),"G"==n.type&&(s=s.toUpperCase()),s}if(void 0===n.type){if(n.type="g",-1==(s=u(r,n)).indexOf(".")){i=(i=s.length-1)<10?"0"+i:i;var h=s.startsWith("-")?2:1;return`${s.substr(0,h)+"."+s.substr(h)}e+${i}`}n.type=void 0}else{var d=o.toExponential(n.precision-1);if((i=parseInt(d.substr(d.search("e")+1)))<-4||i>=n.precision-1){for(var m=d.split("e");m[0].endsWith("0");)m[0]=m[0].substr(0,m[0].length-1);s=m.join("e")}}}else if(-1==l)s+="."+"0".repeat(n.precision);else{var g=n.precision-s.length+l+1;g>0&&(s+="0".repeat(g))}}else s=t.str.$factory(r);if(void 0===n.type||-1!="gGn".indexOf(n.type)){if(-1==s.search("e"))for(;"0"==s.charAt(s.length-1);)s=s.substr(0,s.length-1);"."==s.charAt(s.length-1)&&(void 0===n.type?s+="0":s=s.substr(0,s.length-1))}return void 0!==n.sign&&(" "==n.sign||"+"==n.sign)&&o>0&&(s=n.sign+s),"%"==n.type&&(s+="%"),s}a.__format__=function(t,r){o(t,"__format__");var n=new e.parse_format_spec(r,t);return a.$format(t,n)},a.$format=function(t,r){r.align=r.align||">";var n=u(t,r);r.z&&Object.is(parseFloat(n),-0)&&(n=n.substr(1));var a=n.split("."),o=a[0];if(r.comma){for(var s=o.length,i=Math.ceil(o.length/3),_=[],l=0;l<i;l++)_.push(o.substring(s-3*l-3,s-3*l));_.reverse(),a[0]=_.join(",")}return e.format_width(a.join("."),r)},a.$getnewargs=function(t){return e.fast_tuple([n(t)])},a.__getnewargs__=function(){return a.$getnewargs(e.single_arg("__getnewargs__","self",arguments))};var f=e.$py_next_hash--,p=Math.pow(2,31);function h(e){var t=n(e).value;return t==-1/0||t==Number.NEGATIVE_INFINITY}function d(e){var t=n(e).value;return t==1/0||t==-1/0||t==Number.POSITIVE_INFINITY||t==Number.NEGATIVE_INFINITY}function m(e){var t=n(e).value;return isNaN(t)}function g(e){return 0==e?B(0):e>0?a.$factory(e):a.$factory(-e)}function v(t){var r=t;if(e.$isinstance(t,a)){if(m(t)||d(t))return[t,0];r=n(t).value}else if(e.$isinstance(t,e.long_int)){var o=t.value.toString(2).length,s=2n**BigInt(o);return[e.fast_float(Number(t.value)/Number(s)),o]}if(0==r)return[0,0];var i=1,_=0,l=r;for(l<0&&(i=-i,l=-l);l<.5;)l*=2,_--;for(;l>=1;)l*=.5,_++;return[l*=i,_]}function $(r,n){if(h(r))return E;if(d(r))return N;if(e.$isinstance(r,t.float)&&(r=r.value),0==r)return T;if(isNaN(r))return S;if(e.$isinstance(n,e.long_int)){if(n.value<0)return T;throw t.OverflowError.$factory("overflow")}if(!isFinite(r*Math.pow(2,n)))throw t.OverflowError.$factory("overflow");for(var a=Math.min(3,Math.ceil(Math.abs(n)/1023)),o=r,s=0;s<a;s++)o*=Math.pow(2,Math.floor((n+s)/a));return B(o)}e.float_hash_cache=new Map,a.__hash__=function(e){return o(e,"__hash__"),a.$hash_func(e)},a.$hash_func=function(r){if(void 0!==r.__hashvalue__)return r.__hashvalue__;var n=r.value,a=e.float_hash_cache.get(n);if(void 0!==a)return a;if(n===1/0)return 314159;if(n===-1/0)return-314159;if(isNaN(n))return r.__hashvalue__=f;if(n===Number.MAX_VALUE)return r.__hashvalue__=e.fast_long_int(2234066890152476671n);if(Number.isInteger(n))return t.int.__hash__(n);var o=v(r);o[0]*=p;var s=parseInt(o[0]);o[0]=(o[0]-s)*p;var i=s+parseInt(o[0])+(o[1]<<15);return i&=4294967295,e.float_hash_cache.set(n,i),r.__hashvalue__=i},a.$funcs={isinf:d,isninf:h,isnan:m,fabs:g,frexp:v,ldexp:$},a.hex=function(e){e=n(e);if(isNaN(e.value)||!isFinite(e.value))return t.repr(e);if(0==e.value)return Object.is(e.value,0)?"0x0.0p0":"-0x0.0p0";var r=v(g(e.value)),a=r[0],o=r[1],s=1-Math.max(-1021-o,0);a=$(B(a),s).value,o-=s;var i="0123456789ABCDEF".split(""),_=i[Math.floor(a)];_+=".",a-=Math.floor(a);for(var l=0;l<13;l++)a*=16,_+=i[Math.floor(a)],a-=Math.floor(a);var c="+";return o<0&&(c="-",o=-o),e.value<0?"-0x"+_+"p"+c+o:"0x"+_+"p"+c+o},a.__init__=function(e,r){return t.None},a.__int__=function(t){if(o(t,"__int__"),Number.isInteger(t.value)){var r=BigInt(t.value),n=Number(r);return Number.isSafeInteger(n)?n:e.fast_long_int(r)}return Math.trunc(t.value)},a.is_integer=function(e){return Number.isInteger(e.value)},a.__mod__=function(r,n){if(o(r,"__mod__"),0==n)throw t.ZeroDivisionError.$factory("float modulo");if(e.$isinstance(n,t.int))return n=t.int.numerator(n),B((r.value%n+n)%n);if(e.$isinstance(n,a)){var s=Math.floor(r.value/n.value),i=r.value-n.value*s;return 0==i&&n.value<0?B(-0):B(i)}return t.NotImplemented},a.__mro__=[r],a.__mul__=function(r,n){return e.$isinstance(n,t.int)?n.__class__==e.long_int?B(r.value*parseFloat(n.value)):(n=t.int.numerator(n),B(r.value*n)):e.$isinstance(n,a)?B(r.value*n.value):t.NotImplemented},a.__ne__=function(e,r){var n=a.__eq__(e,r);return n===t.NotImplemented?n:!n},a.__neg__=function(e){return B(-e.value)},a.__new__=function(r,n){if(void 0===r)throw t.TypeError.$factory("float.__new__(): not enough arguments");if(!e.$isinstance(r,t.type))throw t.TypeError.$factory("float.__new__(X): X is not a type object");return{__class__:r,value:a.$factory(n).value}},a.__pos__=function(e){return B(+e.value)},a.__pow__=function(r,n){var o=e.$isinstance(n,t.int);if(o||e.$isinstance(n,a)){if(o||(n=n.value),1==r.value)return B(1);if(0==n)return B(1);if(isNaN(n))return B(Number.NaN);if(isNaN(r.value))return B(Number.NaN);if(-1==r.value&&!isFinite(n))return B(1);if(0==r.value&&isFinite(n)&&n<0)throw t.ZeroDivisionError.$factory("0.0 cannot be raised to a negative power");return 0==r.value&&isFinite(n)&&n>=0?Number.isInteger(n)&&n%2==1?r:B(0):r.value!=Number.NEGATIVE_INFINITY||isNaN(n)?r.value!=Number.POSITIVE_INFINITY||isNaN(n)?n!=Number.NEGATIVE_INFINITY||isNaN(r.value)?n!=Number.POSITIVE_INFINITY||isNaN(r.value)?r.value<0&&!Number.isInteger(n)?t.complex.__pow__(e.make_complex(r.value,0),B(n)):B(Math.pow(r.value,n)):Math.abs(r.value)<1?B(0):B(Number.POSITIVE_INFINITY):Math.abs(r.value)<1?B(Number.POSITIVE_INFINITY):B(0):n>0?r:B(0):B(n%2==-1?-0:n<0?0:n%2==1?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY)}return t.NotImplemented},a.__repr__=function(r){if(e.builtins_repr_check(a,arguments),(r=r.value)==1/0)return"inf";if(r==-1/0)return"-inf";if(isNaN(r))return"nan";if(0===r)return 1/r==-1/0?"-0.0":"0.0";var n=r+"";-1==n.search(/[.eE]/)&&(n+=".0");var o,s,i=n.split(/e/i);if(2==i.length){var _=i[0];if((u=i[1]).startsWith("-")){var l=parseInt(u.substr(1))+"";return l.length<2&&(l="0"+l),_+"e-"+l}}[o,s]=n.split(".");var c="";if("-"==o[0]&&(o=o.substr(1),c="-"),o.length>16){for(var u=o.length-1,f=o[0],p=o.substr(1)+s;p.endsWith("0");)p=p.substr(0,p.length-1);_=f;return p.length>0&&(_+="."+p),c+_+"e+"+u}if("0"==o){for(u=0;u<s.length&&"0"==s.charAt(u);)u++;if(u>3){var h=s.substr(u);for(u=(u+1).toString();h.endsWith("0");)h=h.substr(0,n.length-1);_=h[0];return h.length>1&&(_+="."+h.substr(1)),1==u.length&&(u="0"+u),c+_+"e-"+u}}return t.str.$factory(n)},a.__round__=function(){var r=e.args("__round__",2,{self:null,ndigits:null},["self","ndigits"],arguments,{ndigits:t.None},null,null);return a.$round(r.self,r.ndigits)},a.$round=function(r,a){function o(){throw t.OverflowError.$factory("cannot convert float infinity to integer")}var s,i,_,l,c=a===t.None;if(m(r)){if(a===t.None)throw t.ValueError.$factory("cannot convert float NaN to integer");return S}if(h(r))return a===t.None?o():E;if(d(r))return a===t.None?o():N;if(r=n(r),0==(a=a===t.None?0:a)){var u=Math.round(r.value);return.5==Math.abs(r.value-u)&&u%2?u-1:c?u:e.fast_float(u)}if(a.__class__===e.long_int&&(a=Number(a.value)),a>=0){if(a>22?(s=10**(a-22),i=1e22):(s=10**a,i=1),_=r.value*s*i,!isFinite(_))return r}else{if(s=10**-a,i=1,!isFinite(s))return T;_=r.value/s}if(.5==g(_-(l=Math.round(_))).value&&(l=2*Math.round(_/2)),a>=0?l=l/i/s:l*=s,!isFinite(l))throw t.OverflowError.$factory("overflow occurred during round");return B(l)},a.__setattr__=function(e,r,n){if(e.__class__===a)throw void 0===a[r]?t.AttributeError.$factory("'float' object has no attribute '"+r+"'"):t.AttributeError.$factory("'float' object attribute '"+r+"' is read-only");return e[r]=n,t.None},a.__truediv__=function(r,n){if(e.$isinstance(n,t.int)){if(0==n.valueOf())throw t.ZeroDivisionError.$factory("division by zero");return e.$isinstance(n,e.long_int)?a.$factory(r.value/Number(n.value)):a.$factory(r.value/n)}if(e.$isinstance(n,a)){if(0==n.value)throw t.ZeroDivisionError.$factory("division by zero");return a.$factory(r.value/n.value)}return t.NotImplemented};var y='var $B = __BRYTHON__,\n        _b_ = __BRYTHON__.builtins\n    if($B.$isinstance(other, _b_.int)){\n        if(typeof other == "boolean"){\n            return other ? $B.fast_float(self.value - 1) : self\n        }else if(other.__class__ === $B.long_int){\n            return _b_.float.$factory(self.value - parseInt(other.value))\n        }else{\n            return $B.fast_float(self.value - other)\n        }\n    }\n    if($B.$isinstance(other, _b_.float)){\n        return $B.fast_float(self.value - other.value)\n    }\n    return _b_.NotImplemented',b={"+":"add","-":"sub"};for(var w in b){var x=y.replace(/-/gm,w);a[`__${b[w]}__`]=Function("self","other",x)}var k='\nvar $B = __BRYTHON__,\n    _b_ = $B.builtins\nif($B.$isinstance(other, _b_.int)){\n    if(other.__class__ === $B.long_int){\n        return self.value > parseInt(other.value)\n    }\n    return self.value > other.valueOf()}\nif($B.$isinstance(other, _b_.float)){\n    return self.value > other.value}\nif($B.$isinstance(other, _b_.bool)) {\n    return self.value > _b_.bool.__hash__(other)}\nif(_b_.hasattr(other, "__int__") || _b_.hasattr(other, "__index__")) {\n   return _b_.int.__gt__(self.value, $B.$GetInt(other))}\n// See if other has the opposite operator, eg <= for >\nvar inv_op = $B.$getattr(other, "__le__", _b_.None)\nif(inv_op !== _b_.None){\n    return inv_op(self)}\nthrow _b_.TypeError.$factory(\n    "unorderable types: float() > " + $B.class_name(other) + "()")\n';for(var w in e.$comps){x=k.replace(/>/gm,w).replace(/__gt__/gm,`__${e.$comps[w]}__`).replace(/__le__/,`__${e.$inv_comps[w]}__`);a[`__${e.$comps[w]}__`]=Function("self","other",x)}for(var j of["add","sub","mul","truediv","floordiv","mod","pow","lshift","rshift","and","xor","or","divmod"])void 0===a["__r"+j+"__"]&&a["__"+j+"__"]&&(a["__r"+j+"__"]=function(r){return function(n,o){var s=t.int.$to_js_number(o);if(null!==s){var i=e.fast_float(s);return a["__"+r+"__"](i,n)}return t.NotImplemented}}(j));const B=e.fast_float=function(e){return{__class__:t.float,value:e}};a.$factory=function(r){if(void 0===r)return B(0);switch(e.check_nb_args_no_kw("float",1,arguments),r){case!0:return B(1);case!1:return B(0)}var n=r;if("number"==typeof r)return B(r);if(r.__class__===a)return r;if(e.$isinstance(r,t.memoryview)&&(r=t.memoryview.tobytes(r)),e.$isinstance(r,t.bytes))try{r=e.$getattr(r,"decode")("utf-8")}catch(err){throw t.ValueError.$factory("could not convert string to float: "+t.repr(n))}if("string"==typeof r){if(0==r.trim().length)throw t.ValueError.$factory(`could not convert string to float: ${t.repr(r)}`);switch((r=r.trim()).toLowerCase()){case"+inf":case"inf":case"+infinity":case"infinity":return B(Number.POSITIVE_INFINITY);case"-inf":case"-infinity":return B(Number.NEGATIVE_INFINITY);case"+nan":case"nan":return B(Number.NaN);case"-nan":return B(-Number.NaN);default:var o=r.split("e");for(var s of(o[1]&&(o[1].startsWith("+")||o[1].startsWith("-"))&&(o[1]=o[1].substr(1)),o=o[0].split(".").concat(o.splice(1))))if(s.startsWith("_")||s.endsWith("_"))throw t.ValueError.$factory("invalid float literal "+r);if(r.indexOf("__")>-1)throw t.ValueError.$factory("invalid float literal "+r);if(r=function(e){for(var t="",r=0;r<e.length;r++){var n="\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669".indexOf(e[r]);t+=n>-1?n:e[r]}return t}(r=r.charAt(0)+r.substr(1).replace(/_/g,"")),isFinite(r))return B(parseFloat(r));throw t.TypeError.$factory("could not convert string to float: "+t.repr(n))}}var i=r.__class__,_=e.$getattr(i,"__float__",null);if(null===_){var l=e.$getattr(i,"__index__",null);if(null===l)throw t.TypeError.$factory("float() argument must be a string or a number, not '"+e.class_name(r)+"'");var c=e.$call(l)(r);if((i=e.get_class(c))===t.int)return B(c);if(i===e.long_int)return e.long_int.__float__(c);if(i.__mro__.indexOf(t.int)>-1){var u=`${e.class_name(r)}.__index__ returned non-int (type ${e.class_name(c)}).  The ability to return an instance of a strict subclass of int is deprecated, and may be removed in a future version of Python.`;return e.warn(t.DeprecationWarning,u),B(c)}throw t.TypeError.$factory(`__index__ returned non-int (type ${e.class_name(c)})`)}c=e.$call(_)(r);if((i=e.get_class(c))!==t.float){if(i.__mro__.indexOf(t.float)>-1){u=`${e.class_name(r)}.__float__ returned non-float (type ${e.class_name(c)}).  The ability to return an instance of a strict subclass of float is deprecated, and may be removed in a future version of Python.`;return e.warn(t.DeprecationWarning,u),a.$factory(c.value)}throw t.TypeError.$factory(`__float__ returned non-float (type ${e.class_name(c)})`)}return c},e.$FloatClass=function(e){return new Number(e)},e.set_func_names(a,"builtins"),a.fromhex=t.classmethod.$factory(a.fromhex),t.float=a,e.MAX_VALUE=B(Number.MAX_VALUE),e.MIN_VALUE=B(22250738585072014e-324);const E=B(Number.NEGATIVE_INFINITY),N=B(Number.POSITIVE_INFINITY),S=B(Number.NaN),T=B(0);B(-0)}(__BRYTHON__),function(e){var t=e.builtins;function r(e,r,n){throw t.TypeError.$factory("unsupported operand type(s) for "+e+": '"+r+"' and '"+n+"'")}var n={__class__:t.type,__dir__:t.object.__dir__,__qualname__:"complex",$is_class:!0,$native:!0,$descriptors:{real:!0,imag:!0},__abs__:function(r){var n=isFinite(r.$real.value),a=isFinite(r.$imag.value);if(n&&isNaN(r.$imag.value)||a&&isNaN(r.$real.value)||isNaN(r.$imag.value)&&isNaN(r.$real.value))return e.fast_float(NaN);if(!n||!a)return e.fast_float(1/0);var o=Math.sqrt(Math.pow(r.$real.value,2)+Math.pow(r.$imag.value,2));if(!isFinite(o)&&n&&a)throw t.OverflowError.$factory("absolute value too large");return e.fast_float(o)},__add__:function(r,a){return e.$isinstance(a,n)?m(r.$real.value+a.$real.value,r.$imag.value+a.$imag.value):e.$isinstance(a,t.int)?(a=t.int.numerator(a),m(e.rich_op("__add__",r.$real.value,a.valueOf()),r.$imag.value)):e.$isinstance(a,t.float)?m(r.$real.value+a.value,r.$imag.value):t.NotImplemented},__bool__:function(t){return!e.rich_comp("__eq__",t.$real,0)||!e.rich_comp("__eq__",t.$imag,0)},__complex__:function(t){return t.__class__===n?t:e.make_complex(t.$real,t.$imag)},__eq__:function(r,a){return e.$isinstance(a,n)?r.$real.value==a.$real.value&&r.$imag.value==a.$imag.value:e.$isinstance(a,t.int)?0==r.$imag.value&&r.$real.value==a.valueOf():e.$isinstance(a,t.float)?!!e.rich_comp("__eq__",0,r.$imag)&&r.$real.value==a.value:t.NotImplemented}};function a(r,n){return n>0?o(r,n):function(r,n){var a=Math.abs(n.$real.value),o=Math.abs(n.$imag.value);if(e.rich_comp("__ge__",a,o)){if(0==a)throw t.ZeroDivisionError.$factory();var s=n.$imag.value/n.$real.value,i=n.$real.value+n.$imag.value*s;return m((r.$real.value+r.$imag.value*s)/i,(r.$imag.value-r.$real.value*s)/i)}if(o>=a){s=n.$real.value/n.$imag.value,i=n.$real.value*s+n.$imag.value;if(0==n.$imag.value)throw t.ZeroDivisionError.$factory();return m((r.$real.value*s+r.$imag.value)/i,(r.$imag.value*s-r.$real.value)/i)}return e.make_complex("nan","nan")}(g,o(r,-n))}function o(e,t){for(var r=1,n=g,a=e;r>0&&t>=r;)t&r&&(n=s(n,a)),r<<=1,a=s(a,a);return n}function s(e,t){return m(e.$real.value*t.$real.value-e.$imag.value*t.$imag.value,e.$real.value*t.$imag.value+e.$imag.value*t.$real.value)}n.__format__=function(r,n){if(0==n.length)return t.str.$factory(r);var a,o,s=new e.parse_format_spec(n,r),i=s.conversion_type;if(void 0===i||"eEfFgGn".indexOf(i)>-1){if(s.precision>2147483644)throw t.ValueError.$factory("precision too big");if("0"==s.fill_char)throw t.ValueError.$factory("Zero padding is not allowed in complex format specifier");if("="==s.align)throw t.ValueError.$factory("'=' alignment flag is not allowed in complex format specifier");var _=r.$real.value,l=(r.$imag.value,parseInt(s.precision,10));void 0===i?(i="r",0,0==_&&Object.is(_,0)?a=1:o=1):"n"==i&&(i="g"),l<0?l=6:"r"==i&&(i="g");var c=e.clone(s);c.conversion_type=i,c.precision=l;var u="";a||(u+=t.float.$format(r.$real,c),r.$imag.value>=0&&(u+="+"));var f,p=t.float.$format(r.$imag,c),h=-1;for(var d of p)h++,d.match(/\d/)&&(f=h);return u+=p=p.substr(0,f+1)+"j"+p.substr(f+1),o&&(u="("+u+")"),u}throw t.ValueError.$factory(`invalid type for complex: ${i}`)},n.$getnewargs=function(t){return e.fast_tuple([t.$real,t.$imag])},n.__getnewargs__=function(){return n.$getnewargs(e.single_arg("__getnewargs__","self",arguments))},n.__hash__=function(t){return e.$hash(t.$real)+1000003*e.$hash(t.$imag)},n.__init__=function(){return t.None},n.__invert__=function(e){return~e},n.__mro__=[t.object],n.__mul__=function(a,o){return e.$isinstance(o,n)?m(a.$real.value*o.$real.value-a.$imag.value*o.$imag.value,a.$imag.value*o.$real.value+a.$real.value*o.$imag.value):e.$isinstance(o,t.int)?m(a.$real.value*o.valueOf(),a.$imag.value*o.valueOf()):e.$isinstance(o,t.float)?m(a.$real.value*o.value,a.$imag.value*o.value):e.$isinstance(o,t.bool)?o.valueOf()?a:m(0,0):void r("*",n,o)},n.__ne__=function(e,r){var a=n.__eq__(e,r);return a===t.NotImplemented?a:!a},n.__neg__=function(e){return m(-e.$real.value,-e.$imag.value)},n.__new__=function(r){if(void 0===r)throw t.TypeError.$factory("complex.__new__(): not enough arguments");var a={},o=e.args("complex",3,{cls:null,real:null,imag:null},["cls","real","imag"],arguments,{real:0,imag:a},null,null),s=(r=o.cls,o.real),i=o.imag;if("string"==typeof s){if(i!==a)throw t.TypeError.$factory("complex() can't take second arg if first is a string");{var _=s;(s=s.trim()).startsWith("(")&&s.endsWith(")")&&(s=(s=s.substr(1)).substr(0,s.length-1));var l=/^\s*([\+\-]*[0-9_]*\.?[0-9_]*(e[\+\-]*[0-9_]*)?)([\+\-]?)([0-9_]*\.?[0-9_]*(e[\+\-]*[0-9_]*)?)(j?)\s*$/i.exec(s);function h(e){var r=parseFloat(e.charAt(0)+e.substr(1).replace(/_/g,""));if(isNaN(r))throw t.ValueError.$factory("could not convert string to complex: '"+_+"'");return r}if(null===l)throw t.ValueError.$factory("complex() arg is a malformed string");if(l[c]&&l[f].startsWith(".")&&""==l[u])throw t.ValueError.$factory("complex() arg is a malformed string");if("."==l[c]||"."==l[f]||".e"==l[c]||".e"==l[f]||"e"==l[c]||"e"==l[f])throw t.ValueError.$factory("complex() arg is a malformed string");if(""!=l[p])""==l[u]?(s=0,i="+"==l[c]||""==l[c]?1:"-"==l[c]?-1:h(l[c])):(s=h(l[c]),i=""==l[f]?1:h(l[f]),i="-"==l[u]?-i:i);else{if(l[u]&&""==l[f])throw t.ValueError.$factory("complex() arg is a malformed string");s=h(l[c]),i=0}return(y=m(s,i)).__class__=r,y.__dict__=e.empty_dict(),y}}if(s.__class__===n&&r===n&&i===a)return s;var g,v,$=d(s);if(null===$)throw t.TypeError.$factory(`complex() first argument must be a string or a number, not '${e.class_name(s)}'`);if("string"==typeof i)throw t.TypeError.$factory("complex() second arg can't be a string");var y,b=d(i===a?0:i);if(null===b)throw t.TypeError.$factory(`complex() second argument must be a number, not '${e.class_name(i)}'`);return"__complex__"==$.method?"__complex__"==b.method?(g=e.rich_op("__sub__",$.result.$real,b.result.$imag),v=e.rich_op("__add__",$.result.$imag,b.result.$real)):(g=$.result.$real,v=e.rich_op("__add__",$.result.$imag,b.result)):"__complex__"==b.method?(g=e.rich_op("__sub__",$.result,b.result.$imag),v=b.result.$real):(g=$.result,v=b.result),(y=m(g,v)).__class__=r,y.__dict__=e.empty_dict(),y},n.__pos__=function(e){return e},n.__pow__=function(r,o,s){if(void 0!==s&&s!==t.None)throw t.ValueError.$factory("complex modulo");if(e.rich_comp("__eq__",o,1)){var i=t.float.$funcs;if(i.isinf(r.$real)||i.isninf(r.$real)||i.isinf(r.$imag)||i.isninf(r.$imag))throw t.OverflowError.$factory("complex exponentiation");return r}var _=null;if(e.$isinstance(o,t.int)&&t.abs(o)<100?_=o:e.$isinstance(o,t.float)&&Number.isInteger(o.value)&&Math.abs(o.value<100)?_=o.value:e.$isinstance(o,n)&&0==o.$imag.value&&Number.isInteger(o.$real.value)&&Math.abs(o.$real.value)<100&&(_=o.$real.value),null!==_)return a(r,_);if(e.$isinstance(o,t.float)&&(o=t.float.$to_js_number(o)),0==r.$real.value&&0==r.$imag.value){if(e.$isinstance(o,n)&&(0!=o.$imag.value||o.$real.value<0))throw t.ZeroDivisionError.$factory("0.0 to a negative or complex power");return e.make_complex(0,0)}var l,c,u,f,p=(l=r,c=Math.sqrt(l.$real.value*l.$real.value+l.$imag.value*l.$imag.value),u=l.$imag.value/c,f=l.$real.value/c,{norm:c,angle:0==f?1==u?Math.PI/2:3*Math.PI/2:0==u?1==f?0:Math.PI:Math.atan(u/f)}),h=p.angle,d=Math.pow(p.norm,o);if(e.$isinstance(o,t.int))return m(d*Math.cos(h*o),d*Math.sin(h*o));if(e.$isinstance(o,t.float))return m(d*Math.cos(h*o.value),d*Math.sin(h*o.value));if(e.$isinstance(o,n)){var g=o.$real.value,v=o.$imag.value,$=Math.pow(p.norm,g)*Math.pow(Math.E,-v*h),y=v*Math.log(p.norm)-g*h;if($==Number.POSITIVE_INFINITY||$===Number.NEGATIVE_INFINITY)throw t.OverflowError.$factory("complex exponentiation");return m($*Math.cos(y),$*Math.sin(y))}throw t.TypeError.$factory("unsupported operand type(s) for ** or pow(): 'complex' and '"+e.class_name(o)+"'")},n.__radd__=function(r,n){return e.$isinstance(n,t.bool)&&(n=n?1:0),e.$isinstance(n,t.int)?m(n+r.$real.value,r.$imag.value):e.$isinstance(n,t.float)?m(n.value+r.$real.value,r.$imag.value):t.NotImplemented},n.__repr__=function(r){e.builtins_repr_check(n,arguments);var a=Number.isInteger(r.$real.value)?r.$real.value+"":t.str.$factory(r.$real),o=Number.isInteger(r.$imag.value)?r.$imag.value+"":t.str.$factory(r.$imag);o.endsWith(".0")&&(o=o.substr(0,o.length-2)),Object.is(r.$imag.value,-0)&&(o="-0");var s=o.startsWith("-")?"":"+";return 0==r.$real.value?Object.is(r.$real.value,-0)?"(-0"+s+o+"j)":o+"j":r.$imag.value>0||isNaN(r.$imag.value)?"("+a+"+"+o+"j)":0==r.$imag.value?1/r.$imag.value<0?"("+a+"-0j)":"("+a+"+0j)":"("+a+s+o+"j)"},n.__rmul__=function(r,n){return e.$isinstance(n,t.bool)&&(n=n?1:0),e.$isinstance(n,t.int)?m(n*r.$real.value,n*r.$imag.value):e.$isinstance(n,t.float)?m(n.value*r.$real.value,n.value*r.$imag.value):t.NotImplemented},n.__sub__=function(r,a){return e.$isinstance(a,n)?m(r.$real.value-a.$real.value,r.$imag.value-a.$imag.value):e.$isinstance(a,t.int)?(a=t.int.numerator(a),m(r.$real.value-a.valueOf(),r.$imag.value)):e.$isinstance(a,t.float)?m(r.$real.value-a.value,r.$imag.value):t.NotImplemented},n.__truediv__=function(a,o){if(e.$isinstance(o,n)){if(0==o.$real.value&&0==o.$imag.value)throw t.ZeroDivisionError.$factory("division by zero");var s=a.$real.value*o.$real.value+a.$imag.value*o.$imag.value,i=o.$real.value*o.$real.value+o.$imag.value*o.$imag.value,_=a.$imag.value*o.$real.value-a.$real.value*o.$imag.value;return m(s/i,_/i)}if(e.$isinstance(o,t.int)){if(!o.valueOf())throw t.ZeroDivisionError.$factory("division by zero");return n.__truediv__(a,n.$factory(o.valueOf()))}if(e.$isinstance(o,t.float)){if(!o.value)throw t.ZeroDivisionError.$factory("division by zero");return n.__truediv__(a,n.$factory(o.value))}r("//","complex",o.__class__)},n.conjugate=function(e){return m(e.$real.value,-e.$imag.value)},n.__ior__=n.__or__;for(var i of["add","sub","mul","truediv","floordiv","mod","pow","lshift","rshift","and","xor","or"])void 0===n["__r"+i+"__"]&&n["__"+i+"__"]&&(n["__r"+i+"__"]=function(r){return function(a,o){return e.$isinstance(o,t.int)?(o=m(o,0),n["__"+r+"__"](o,a)):e.$isinstance(o,t.float)?(o=m(o.value,0),n["__"+r+"__"](o,a)):e.$isinstance(o,n)?n["__"+r+"__"](o,a):t.NotImplemented}}(i));var _='\n    var _b_ = __BRYTHON__.builtins\n    if(other === undefined || other == _b_.None){\n        return _b_.NotImplemented\n    }\n    throw _b_.TypeError.$factory("no ordering relation " +\n        "is defined for complex numbers")';for(var l in e.$comps)n["__"+e.$comps[l]+"__"]=Function("self","other",_.replace(/>/gm,l));n.real=function(e){return e.$real},n.real.setter=function(){throw t.AttributeError.$factory("readonly attribute")},n.imag=function(e){return e.$imag},n.imag.setter=function(){throw t.AttributeError.$factory("readonly attribute")};var c=1,u=3,f=4,p=6,h={__complex__:n,__float__:t.float,__index__:t.int};function d(r){var a=r.__class__||e.get_class(r);for(var o in h){var s={},i=e.$getattr(a,o,s);if(i!==s){var _=i(r);if(!e.$isinstance(_,h[o]))throw t.TypeError.$factory(o+"returned non-"+h[o].__name__+"(type "+e.get_class(_)+")");if("__index__"==o&&e.rich_comp("__gt__",_,__BRYTHON__.MAX_VALUE))throw t.OverflowError.$factory("int too large to convert to float");return"__complex__"==o&&_.__class__!==n&&e.warn(t.DeprecationWarning,`__complex__ returned non-complex (type ${e.class_name(_)}). The ability to return an instance of a strict subclass of complex is deprecated, and may be removed in a future version of Python.`),{result:_,method:o}}}return null}var m=e.make_complex=function(e,r){return{__class__:n,$real:t.float.$factory(e),$imag:t.float.$factory(r)}},g=m(1,0);n.$factory=function(){return n.__new__(n,...arguments)},e.set_func_names(n,"builtins"),t.complex=n}(__BRYTHON__),function(e){var t=e.builtins,r=(t.str.__hash__,t.None),n=["eq","le","lt","ge","gt","sub","rsub","and","rand","or","ror","xor","rxor"];function a(t,r){for(var n=0,a=t.length;n<a;n++){for(var o=t[n],s=!1,i=0,_=r.length;i<_;i++)if(e.rich_comp("__eq__",o,r[i])){r.splice(i,1),s=!0;break}if(!s)return!1}return!0}const o={__eq__:function(e,t){return e.length==t.length&&a(e,t)},__ne__:function(e,t){return!o.__eq__(e,t)},__lt__:function(e,t){return e.length<t.length&&a(e,t)},__gt__:function(e,t){return o.__lt__(t,e)},__le__:function(e,t){return e.length<=t.length&&a(e,t)},__ge__:function(e,t){return o.__le__(t,e)},__and__:function(t,r){for(var n=[],a=0,o=t.length;a<o;a++)for(var s=t[a],i=0,_=r.length;i<_;i++)if(e.rich_comp("__eq__",s,r[i])){r.splice(i,1),n.push(s);break}return n},__or__:function(t,r){for(var n=t,a=0,o=r.length;a<o;a++){for(var s=r[a],i=!1,_=0,l=t.length;_<l;_++)if(e.rich_comp("__eq__",s,t[_])){r.splice(a,1),i=!0;break}i||n.push(s)}return n}};function s(e){for(var r=0,a=n.length;r<a;r++){var s="__"+n[r]+"__";e[s]=function(r){return function(n,a){if("dict_keys"==n.__class__.__name__||"dict_items"==n.__class__.__name__&&_.$set_like(n.dict))return t.set[r](t.set.$factory(n),t.set.$factory(a));if(a.__class__!==e)return!1;var s=t.list.$factory(a);return o[r](n.items,s)}}(s)}}e.str_dict=function(){};var i=e.make_class("mappingproxy"),_={__class__:t.type,__mro__:[t.object],__qualname__:"dict",$is_class:!0,$native:!0,$match_mapping_pattern:!0,$to_obj:function(e){var t={};for(var r of _.$iter_items_with_hash(e))t[r.key]=r.value;return t},$iter_keys_check:function*(e){for(var t of _.$iter_items_with_hash(e))yield t.key},$iter_values_check:function*(e){for(var t of _.$iter_items_with_hash(e))yield t.value},$set_like:function(e){for(var r of e._values)if(void 0!==r&&"string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r&&!([t.tuple,t.float,t.complex].indexOf(r.__class__)>-1||t.hasattr(r.__class__,"__hash__")))return!1;return!0},$iter_items_with_hash:function*(r){if(r.$all_str)for(var n in r.$strings)"$dict_strings"!=n&&(yield{key:n,value:r.$strings[n]});if(r.$jsobj)for(var n in r.$jsobj)r.$exclude&&r.$exclude(n)||(yield{key:n,value:r.$jsobj[n]});else if(r.__class__===e.jsobj_as_pydict)for(var n in r.obj)yield{key:n,value:r.obj[n]};else{for(var a=r.$version,o=0,s=r._keys.length;o<s;o++)if(void 0!==r._keys[o]&&(yield{key:r._keys[o],value:r._values[o],hash:r._hashes[o]},r.$version!==a))throw t.RuntimeError.$factory("changed in iteration");if(r.$version!==a)throw t.RuntimeError.$factory("changed in iteration")}},$iter_items_check:function*(e){if(e.$jsobj)for(var r in e.$jsobj)yield[r,e.$jsobj[r]];else{for(var n=e.$version,a=0,o=e._keys.length;a<o;a++)if(void 0!==e._keys[a]&&(yield[e._keys[a],e._values[a]],e.$version!==n))throw t.RuntimeError.$factory("changed in iteration");if(e.$version!==n)throw t.RuntimeError.$factory("changed in iteration")}}},l=function(e,r){r.$version=r.$version||0;var n=r.$version;if(r.$all_str)if(e.$all_str)for(var a in r.$strings)e.$strings[a]=r.$strings[a];else for(var a in r.$strings)_.$setitem(e,a,r.$strings[a]);else for(var o of _.$iter_items_with_hash(r))if(_.$setitem(e,o.key,o.value,o.hash),r.$version!=n)throw t.RuntimeError.$factory("dict mutated during update")};function c(e,r){var n=0;for(var a of r){if(2!=a.length)throw t.ValueError.$factory(`dictionary update sequence element #${n} has length ${a.length}; 2 is required`);_.$setitem(e,a[0],a[1]),n++}}function u(r,n){var a=e.make_class(r,(function(e){return{__class__:a,d:e,iter:n(e),make_iter:function(){return n(e)}}}));return a.__iter__=function(e){return e[Symbol.iterator]=e.make_iter,e},a.__next__=function(e){var r=e.iter.next();if(r.done)throw t.StopIteration.$factory("");return r.value},a.__reduce_ex__=function(r,n){return e.fast_tuple([t.iter,e.fast_tuple([Array.from(r.make_iter())])])},e.set_func_names(a,"builtins"),a}_.__bool__=function(){var t=e.args("__bool__",1,{self:null},["self"],arguments,{},null,null);return _.__len__(t.self)>0},_.__class_getitem__=function(t,r){return Array.isArray(r)||(r=[r]),e.GenericAlias.$factory(t,r)},_.$lookup_by_key=function(r,n,a){a=void 0===a?t.hash(n):a;var o,s=r.table[a];if(void 0!==s)for(var i=0,_=s.length;i<_;i++)if(o=s[i],void 0!==r._keys[o]){if(e.is_or_equals(r._keys[o],n))return{found:!0,key:r._keys[o],value:r._values[o],hash:a,rank:i,index:o}}else if(r.table[a].splice(i,1),0==r.table[a].length)return delete r.table[a],{found:!1,hash:a};return{found:!1,hash:a}},_.__contains__=function(){var r=e.args("__contains__",2,{self:null,key:null},["self","key"],arguments,{},null,null),n=r.self,a=r.key;if(n.$all_str){if("string"==typeof a)return n.$strings.hasOwnProperty(a);if(e.$getattr(e.get_class(a),"__hash__")===t.object.__hash__)return!1;p(n)}return n.$jsobj?void 0!==n.$jsobj[a]:_.$lookup_by_key(n,a).found},_.__delitem__=function(){var n=e.args("__eq__",2,{self:null,key:null},["self","key"],arguments,{},null,null),a=n.self,o=n.key;if(a.$all_str){if("string"==typeof o){if(a.$strings.hasOwnProperty(o))return _.$delete_string(a,o),t.None;throw t.KeyError.$factory(o)}if(!_.__contains__(a,o))throw t.KeyError.$factory(t.str.$factory(o))}if(a.$jsobj){if(void 0===a.$jsobj[o])throw t.KeyError.$factory(o);return delete a.$jsobj[o],r}var s=_.$lookup_by_key(a,o);if(s.found)return a.table[s.hash].splice(s.rank,1),0==a.table[s.hash].length&&delete a.table[s.hash],delete a._values[s.index],delete a._keys[s.index],delete a._hashes[s.index],a.$version++,t.None;throw t.KeyError.$factory(t.str.$factory(o))},_.__eq__=function(){var t=e.args("__eq__",2,{self:null,other:null},["self","other"],arguments,{},null,null),r=t.self,n=t.other;return _.$eq(r,n)},_.$eq=function(r,n){if(!e.$isinstance(n,_))return t.NotImplemented;if(r.$all_str&&n.$all_str){if(_.__len__(r)!==_.__len__(n))return!1;for(var a in r.$strings){if(!n.$strings.hasOwnProperty(a))return!1;if(!e.is_or_equals(r.$strings[a],n.$strings[a]))return!1}return!0}if(r.$jsobj&&n.$jsobj){if(_.__len__(r)!==_.__len__(n))return!1;for(var a in r.$jsobj){if(!n.$jsobj.hasOwnProperty(a))return!1;if(!e.is_or_equals(r.$jsobj[a],n.$jsobj[a]))return!1}return!0}var o;if(r.$all_str)return p(o=_.copy(r)),_.$eq(o,n);if(n.$all_str)return p(o=_.copy(n)),_.$eq(r,o);if(r.$jsobj)return _.$eq(x(r.$jsobj),n);if(n.$jsobj)return _.$eq(r,x(n.$jsobj));if(_.__len__(r)!=_.__len__(n))return!1;for(var s in r.table){var i=[];for(var l of r.table[s])i.push([r._keys[l],r._values[l]]);var c=[];if(void 0!==n.table[s])for(var l of n.table[s])c.push([n._keys[l],n._values[l]]);for(var u of i){var f=!1,h=u[0],d=u[1];for(var m of c)if(e.is_or_equals(h,m[0])&&e.is_or_equals(d,m[1])){f=!0;break}if(!f)return!1}}return!0},_.__getitem__=function(){var t=e.args("__getitem__",2,{self:null,arg:null},["self","arg"],arguments,{},null,null),r=t.self,n=t.arg;return _.$getitem(r,n)},_.$contains_string=function(e,r){return e.$all_str?e.$strings.hasOwnProperty(r):!(!e.$jsobj||!e.$jsobj.hasOwnProperty(r))||!(!e.table||void 0===e.table[t.hash(r)])},_.$delete_string=function(e,r){e.$all_str&&(void 0!==e.$strings[r]&&delete e.$strings[r]);e.$jsobj&&delete e.$jsobj[r],e.table&&delete e.table[t.hash(r)]},_.$missing={},_.$get_string=function(e,r){if(e.$all_str&&e.$strings.hasOwnProperty(r))return e.$strings[r];if(e.$jsobj&&e.$jsobj.hasOwnProperty(r))return e.$jsobj[r];if(e.table&&_.__len__(e)){var n=e.table[t.hash(r)];if(void 0!==n)return e._values[n[0]]}return t.dict.$missing},_.$getitem_string=function(e,r){if(e.$all_str&&e.$strings.hasOwnProperty(r))return e.$strings[r];if(e.$jsobj&&e.$jsobj.hasOwnProperty(r))return e.$jsobj[r];if(e.table){var n=e.table[t.hash(r)];if(void 0!==n)return e._values[n[0]]}throw t.KeyError.$factory(r)},_.$keys_string=function(e){var t=[];return e.$all_str?Object.keys(e.$strings):(e.$jsobj&&(t=t.concat(Object.keys(e.$jsobj))),e.table&&(t=t.concat(e._keys.filter((e=>void 0!==e)))),t)},_.$setitem_string=function(e,r,n){if(e.$all_str)return e.$strings[r]=n,t.None;var a=t.hash(r),o=e.table[a];if(void 0!==o)return e._values[o[0]]=n,t.None;var s=e._keys.length;return e.$strings[r]=s,e._keys.push(r),e._values.push(n),e.$version++,t.None},_.$getitem=function(r,n,a){if(r.$all_str){if("string"==typeof n){if(r.$strings.hasOwnProperty(n))return r.$strings[n]}else if(e.$getattr(e.get_class(n),"__hash__")!==t.object.__hash__&&(p(r),(o=_.$lookup_by_key(r,n)).found))return o.value}else if(r.$jsobj){if(r.$exclude&&r.$exclude(n))throw t.KeyError.$factory(n);if(r.$jsobj.hasOwnProperty(n))return r.$jsobj[n];if(!r.table)throw t.KeyError.$factory(n)}else{var o;if((o=_.$lookup_by_key(r,n)).found)return o.value}if(!a&&r.__class__!==_&&!a){try{var s=e.$getattr(r.__class__,"__missing__",t.None)}catch(err){console.log(err)}if(s!==t.None)return s(r,n)}throw t.KeyError.$factory(n)},_.__hash__=t.None,_.__init__=function(n,a,o){if(void 0===a)return t.None;if(void 0===o){if(!a.$kw&&e.$isinstance(a,e.JSObj)){for(var s in a)_.$setitem(n,s,a[s]);return t.None}if(a.$jsobj){for(var i in n.$jsobj={},a.$jsobj)n.$jsobj[i]=a.$jsobj[i];return n.$all_str=!1,r}if(a[Symbol.iterator])return c(n,a),r;if(a.__class__===e.generator)return c(n,a.js_gen),r}var l=e.args("dict",1,{self:null},["self"],arguments,{},"first","second"),u=l.first;if(u.length>1)throw t.TypeError.$factory("dict expected at most 1 argument, got 2");if(1==u.length)if((u=u[0]).__class__===_)for(var f of _.$iter_items_with_hash(u))_.$setitem(n,f.key,f.value,f.hash);else{var p=e.$getattr(u,"keys",null);if(null!==p){var h=e.$getattr(u,"__getitem__",null);if(null!==h){h=e.$call(h);for(var d=t.iter(e.$call(p)());;)try{var m=h(s=t.next(d));_.__setitem__(n,s,m)}catch(err){if(err.__class__===t.StopIteration)break;throw err}return r}}Array.isArray(u)||(u=t.list.$factory(u)),c(n,u)}for(var s in l.second.$jsobj)_.$setitem(n,s,l.second.$jsobj[s]);return t.None},_.__iter__=function(e){return t.iter(_.keys(e))},_.__ior__=function(e,t){return _.update(e,t),e},_.__len__=function(e){var t=0;if(e.$all_str)return Object.keys(e.$strings).length;if(e.$jsobj){for(var r in e.$jsobj)"$"==r.charAt(0)||e.$exclude&&e.$exclude(r)||t++;return t}for(var n of e._keys)void 0!==n&&t++;return t},_.__ne__=function(e,r){var n=_.__eq__(e,r);return n===t.NotImplemented?n:!n},_.__new__=function(r){if(void 0===r)throw t.TypeError.$factory("int.__new__(): not enough arguments");var n=e.empty_dict();return n.__class__=r,r!==_&&(n.__dict__=e.empty_dict()),n},_.__or__=function(r,n){if(!e.$isinstance(n,_))return t.NotImplemented;var a=_.copy(r);return _.update(a,n),a},_.__repr__=function(r){if(e.builtins_repr_check(_,arguments),r.$jsobj)return _.__repr__(x(r.$jsobj,r.$exclude));if(e.repr.enter(r))return"{...}";var n=[];for(var a of _.$iter_items_with_hash(r))n.push(t.repr(a.key)+": "+t.repr(a.value));return e.repr.leave(r),"{"+n.join(", ")+"}"},_.$iter_items_reversed=function*(r){var n=r.$version;if(r.$all_str){for(var a of Object.entries(r.$strings).reverse())if(yield e.fast_tuple(a),r.$version!==n)throw t.RuntimeError.$factory("changed in iteration")}else for(var o=r._keys.length-1;o>=0;o--){var s=r._keys[o];if(void 0!==s&&(yield e.fast_tuple([s,r._values[o]]),r.$version!==n))throw t.RuntimeError.$factory("changed in iteration")}if(r.$version!==n)throw t.RuntimeError.$factory("changed in iteration")},_.$iter_keys_reversed=function*(e){for(var t of _.$iter_items_reversed(e))yield t[0]},_.$iter_values_reversed=function*(e){for(var t of _.$iter_items_reversed(e))yield t[1]};const f=u("dict_reversekeyiterator",_.$iter_keys_reversed);function p(e){for(var t in e.$all_str=!1,e.$strings)_.$setitem(e,t,e.$strings[t])}_.__reversed__=function(e){return f.$factory(e)},_.__ror__=function(r,n){if(!e.$isinstance(n,_))return t.NotImplemented;var a=_.copy(n);return _.update(a,r),a},_.__setitem__=function(t,r,n){var a=e.args("__setitem__",3,{self:null,key:null,value:null},["self","key","value"],arguments,{},null,null);return _.$setitem(a.self,a.key,a.value)},_.$setitem=function(n,a,o,s,i){if(n.$all_str)if("string"==typeof a){var l=parseInt(a);if(isNaN(l)||l>=0)return n.$strings[a]=o,t.None;p(n)}else p(n);if(n.$jsobj)return n.$from_js&&(o=e.pyobj2jsobj(o)),n.$jsobj.__class__===t.type?(n.$jsobj[a]=o,"__init__"!=a&&"__new__"!=a||(n.$jsobj.$factory=e.$instance_creator(n.$jsobj))):n.$jsobj[a]=o,r;if(n.__class__===e.jsobj_as_pydict)return e.jsobj_as_pydict.__setitem__(n,a,o);a instanceof String&&(a=a.valueOf());var c,u=void 0!==s?s:e.$hash(a);if(void 0===n.table[u])c=n._keys.length,n.table[u]=[c];else{if(!i){var f=_.$lookup_by_key(n,a,u);if(f.found)return n._values[f.index]=o,t.None}c=n._keys.length,void 0===n.table[u]?n.table[u]=[c]:n.table[u].push(c)}return n._keys.push(a),n._values.push(o),n._hashes.push(u),n.$version++,t.None},e.make_rmethods(_),_.clear=function(){var t=e.args("clear",1,{self:null},["self"],arguments,{},null,null).self;if(t.table=Object.create(null),t._keys=[],t._values=[],t.$all_str=!0,t.$strings=new e.str_dict,t.$jsobj)for(var n in t.$jsobj)"$"!==n.charAt(0)&&"__class__"!==n&&delete t.$jsobj[n];return t.$version++,r},_.copy=function(r){r=e.args("copy",1,{self:null},["self"],arguments,{},null,null).self;var n=e.empty_dict();if(r.__class__===t.dict)return l(n,r),n;var a=e.make_js_iterator(r);for(var o of a)console.log("iteration yields key",o);return n},_.fromkeys=function(){for(var r=e.args("fromkeys",3,{cls:null,keys:null,value:null},["cls","keys","value"],arguments,{value:t.None},null,null),n=r.keys,a=r.value,o=r.cls,s=e.$call(o)(),i=e.get_class(s),l=e.$iter(n),c=i===_?_.$setitem:e.$getattr(i,"__setitem__");;)try{c(s,t.next(l),a)}catch(err){if(e.is_exc(err,[t.StopIteration]))return s;throw err}},_.get=function(){var n=e.args("get",3,{self:null,key:null,_default:null},["self","key","_default"],arguments,{_default:r},null,null);try{return _.$getitem(n.self,n.key,!0)}catch(err){if(e.$isinstance(err,t.KeyError))return n._default;throw err}};var h=e.make_class("dict_items",(function(t){return{__class__:h,dict:t,make_iter:function*(){for(var r of _.$iter_items_with_hash(t))yield e.fast_tuple([r.key,r.value])}}}));h.__iter__=function(e){return m.$factory(e.make_iter)},h.__len__=function(e){return _.__len__(e.dict)},h.__reduce__=function(r){var n=Array.from(r.make_iter());return e.fast_tuple([t.iter,e.fast_tuple([n])])},h.__repr__=function(r){var n=Array.from(r.make_iter());return n=n.map(e.fast_tuple),"dict_items("+t.repr(n)+")"};const d=u("dict_reverseitemiterator",_.$iter_items_reversed);h.__reversed__=function(e){return d.$factory(e.dict)},s(h),e.set_func_names(h,"builtins");var m=e.make_class("dict_itemiterator",(function(e){return{__class__:m,iter:e(),make_iter:e}}));m.__iter__=function(e){return e[Symbol.iterator]=function(){return e.iter},e},m.__next__=function(r){var n=r.iter.next();if(n.done)throw t.StopIteration.$factory("");return e.fast_tuple(n.value)},m.__reduce_ex__=function(r,n){return e.fast_tuple([t.iter,e.fast_tuple([Array.from(r.make_iter())])])},e.set_func_names(m,"builtins"),_.items=function(t){e.args("items",1,{self:null},["self"],arguments,{},null,null);return h.$factory(t)};var g=e.make_class("dict_keys",(function(e){return{__class__:g,dict:e,make_iter:function(){return _.$iter_keys_check(e)}}}));g.__iter__=function(e){return v.$factory(e.make_iter)},g.__len__=function(e){return _.__len__(e.dict)},g.__reduce__=function(r){var n=Array.from(r.make_iter());return e.fast_tuple([t.iter,e.fast_tuple([n])])},g.__repr__=function(e){var r=Array.from(e.make_iter());return"dict_keys("+t.repr(r)+")"},g.__reversed__=function(e){return f.$factory(e.dict)},s(g),e.set_func_names(g,"builtins");var v=e.make_class("dict_keyiterator",(function(e){return{__class__:v,iter:e(),make_iter:e}}));v.__iter__=function(e){return e[Symbol.iterator]=function(){return e.iter},e},v.__next__=function(e){var r=e.iter.next();if(r.done)throw t.StopIteration.$factory("");return r.value},v.__reduce_ex__=function(r,n){return e.fast_tuple([t.iter,e.fast_tuple([Array.from(r.make_iter())])])},e.set_func_names(v,"builtins"),_.keys=function(t){e.args("keys",1,{self:null},["self"],arguments,{},null,null);return g.$factory(t)},_.pop=function(){var r={},n=e.args("pop",3,{self:null,key:null,_default:null},["self","key","_default"],arguments,{_default:r},null,null),a=n.self,o=n.key,s=n._default;try{var i=_.__getitem__(a,o);return _.__delitem__(a,o),i}catch(err){if(err.__class__===t.KeyError){if(s!==r)return s;throw err}throw err}},_.popitem=function(r){if(e.check_nb_args_no_kw("popitem",1,arguments),0==_.__len__(r))throw t.KeyError.$factory("'popitem(): dictionary is empty'");if(r.$all_str){for(var n in r.$strings);var a=e.fast_tuple([n,r.$strings[n]]);return delete r.$strings[n],r.$version++,a}for(var o=r._keys.length-1;o>=0;){if(void 0!==r._keys[o]){a=e.fast_tuple([r._keys[o],r._values[o]]);return delete r._keys[o],delete r._values[o],r.$version++,a}o--}},_.setdefault=function(){var n=e.args("setdefault",3,{self:null,key:null,_default:null},["self","key","_default"],arguments,{_default:r},null,null),a=n.self,o=n.key,s=n._default;if(s=void 0===s?t.None:s,a.$all_str)return a.$strings.hasOwnProperty(o)||(a.$strings[o]=s),a.$strings[o];if(a.$jsobj)return a.$jsobj.hasOwnProperty(o)||(a.$jsobj[o]=s),a.$jsobj[o];var i=_.$lookup_by_key(a,o);if(i.found)return i.value;var l=i.hash;return _.$setitem(a,o,s,l,!0),s},_.update=function(n){var a=e.args("update",1,{self:null},["self"],arguments,{},"args","kw"),o=(n=a.self,a.args),s=a.kw;if(o.length>0){var i=o[0];if(e.$isinstance(i,_))i.$jsobj&&(i=x(i.$jsobj)),l(n,i);else if(t.hasattr(i,"keys"))for(var c=t.list.$factory(e.$call(e.$getattr(i,"keys"))()),u=0,f=c.length;u<f;u++){var p=e.$getattr(i,"__getitem__")(c[u]);_.$setitem(n,c[u],p)}else{var h,d=t.iter(i);for(u=0;;){try{var m=t.next(d)}catch(err){if(err.__class__===t.StopIteration)break;throw err}try{h=t.list.$factory(m)}catch(err){throw t.TypeError.$factory("cannot convert dictionary update sequence element #"+u+" to a sequence")}if(2!==h.length)throw t.ValueError.$factory("dictionary update sequence element #"+u+" has length "+h.length+"; 2 is required");_.$setitem(n,h[0],h[1]),u++}}}return l(n,s),r};var $=e.make_class("dict_values",(function(e){return{__class__:$,dict:e,make_iter:function(){return _.$iter_values_check(e)}}}));$.__iter__=function(e){return b.$factory(e.make_iter)},$.__len__=function(e){return _.__len__(e.dict)},$.__reduce__=function(r){var n=Array.from(r.make_iter());return e.fast_tuple([t.iter,e.fast_tuple([n])])},$.__repr__=function(e){var r=Array.from(e.make_iter());return"dict_values("+t.repr(r)+")"};const y=u("dict_reversevalueiterator",_.$iter_values_reversed);$.__reversed__=function(e){return y.$factory(e.dict)},s($),e.set_func_names($,"builtins");var b=e.make_class("dict_valueiterator",(function(e){return{__class__:b,iter:e(),make_iter:e}}));b.__iter__=function(e){return e[Symbol.iterator]=function(){return e.iter},e},b.__next__=function(e){var r=e.iter.next();if(r.done)throw t.StopIteration.$factory("");return r.value},b.__reduce_ex__=function(r,n){return e.fast_tuple([t.iter,e.fast_tuple([Array.from(r.make_iter())])])},e.set_func_names(b,"builtins"),_.values=function(t){e.args("values",1,{self:null},["self"],arguments,{},null,null);return $.$factory(t)},_.$literal=function(t){var r=e.empty_dict();for(var n of t)_.$setitem(r,n[0],n[1],n[2]);return r},_.$factory=function(){var e=_.__new__(_),t=[e];for(var r of arguments)t.push(r);return _.__init__.apply(null,t),e},t.dict=_,e.set_func_names(_,"builtins"),_.__class_getitem__=t.classmethod.$factory(_.__class_getitem__),e.empty_dict=function(){return{__class__:_,table:Object.create(null),_keys:[],_values:[],_hashes:[],$strings:new e.str_dict,$version:0,$order:0,$all_str:!0}},_.fromkeys=t.classmethod.$factory(_.fromkeys);i=e.mappingproxy=e.make_class("mappingproxy",(function(t){if(e.$isinstance(t,_))var r=e.obj_dict(_.$to_obj(t));else r=e.obj_dict(t);return r.__class__=i,r.$version=0,r}));for(var w in i.$match_mapping_pattern=!0,i.__repr__=function(t){var r=e.empty_dict();for(var n in t.$jsobj)_.$setitem(r,n,t.$jsobj[n]);return _.__repr__(r)},i.__setitem__=function(){throw t.TypeError.$factory("'mappingproxy' object does not support item assignment")},_)void 0!==i[w]||["__class__","__mro__","__new__","__init__","__delitem__","clear","fromkeys","pop","popitem","setdefault","update"].indexOf(w)>-1||("function"==typeof _[w]?i[w]=function(e){return function(){return _[e].apply(null,arguments)}}(w):i[w]=_[w]);function x(r,n){n=n||function(){return!1};var a=e.empty_dict();for(var o in r)if("$"!=o.charAt(0)&&!n(o))if(null===r[o])_.$setitem(a,o,t.None);else{if(void 0===r[o])continue;r[o].$jsobj===r?_.$setitem(a,o,a):_.$setitem(a,o,e.$JS2Py(r[o]))}return a}e.set_func_names(i,"builtins"),e.obj_dict=function(t,r){var n=t.__class__||e.get_class(t);if(void 0!==n&&n.$native)throw e.attr_error("__dict__",t);return{__class__:_,$jsobj:t,$exclude:r||function(){return!1}}};var k=e.jsobj_as_pydict=e.make_class("jsobj_as_pydict",(function(e){return{__class__:k,obj:e||{},new_keys:[],$version:0}}));k.__contains__=function(e,t){return e.new_keys.indexOf(t)>-1||void 0!==e.obj[t]},k.__delitem__=function(e,t){k.__getitem__(e,t),delete e.obj[t];var r=e.new_keys.indexOf(t);r>-1&&e.new_keys.splice(r,1)},k.__eq__=function(r,n){if(n.__class__!==k&&!e.$isinstance(n,t.dict))return t.NotImplemented;var a=e.empty_dict(),o=e.empty_dict();return _.__init__(a,k.items(r)),_.__init__(o,e.get_class(n).items(n)),_.__eq__(a,o)},k.__ne__=function(e,r){var n=k.__eq__(e,r);return n===t.NotImplemented?n:!n},k.__getitem__=function(e,r){if(e.obj.hasOwnProperty(r))return e.obj[r];throw t.KeyError.$factory(r)},k.__iter__=function(e){return t.iter(k.keys(e))},k.__len__=function(e){var t=0;for(var r in e.obj)t++;return t+e.new_keys.length},k.__or__=function(r,n){if(!e.$isinstance(n,[_,k]))return t.NotImplemented;var a=k.copy(r);return k.update(a,n),a},k.__repr__=function(r){if(e.repr.enter(r))return"{...}";var n=[],a=t.list.$factory(k.items(r));for(var o of a)n.push(t.repr(o[0])+": "+t.repr(o[1]));return e.repr.leave(r),"{"+n.join(", ")+"}"},k.__setitem__=function(e,t,r){e.obj[t]=r},k.clear=function(e){return e.obj={},t.None},k.copy=function(e){var t=k.$factory();for(var r in e.obj)t.obj[r]=e.obj[r];return t},k.get=function(e,r,n){return n=void 0===n?t.None:n,e.obj.hasOwnProperty(r)?e.obj[r]:n},k.$iter_items=function*(t){for(var r in t.obj)yield e.fast_tuple([r,t.obj[r]])},k.items=function(e){var r=Array.from(k.$iter_items(e));return t.iter(r)},k.keys=function(e){var r=Array.from(k.$iter_items(e)).map((e=>e[0]));return t.iter(r)},k.pop=function(){var r={},n=e.args("pop",3,{self:null,key:null,_default:null},["self","key","_default"],arguments,{_default:r},null,null),a=n.self,o=n.key,s=n._default;if(a.obj.hasOwnProperty(o)){var i=a.obj[o];return delete a.obj[o],i}if(s!==r)return s;throw t.KeyError.$factory(o)},k.popitem=function(r){for(var n in e.check_nb_args_no_kw("popitem",1,arguments),r.obj){var a=e.fast_tuple([n,r.obj[n]]);return delete r.obj[n],a}throw t.KeyError.$factory("'popitem(): dictionary is empty'")},k.update=function(r,n){var a,o=e.get_class(n),s=e.$call(e.$getattr(o,"keys"));for(var i of e.make_js_iterator(s(n)))a||(a=e.$call(e.$getattr(o,"__getitem__"))),r.obj[i]=a(n,i);return t.None},k.values=function(e){var r=Array.from(k.$iter_items(e)).map((e=>e[1]));return t.iter(r)},e.set_func_names(k,"builtins")}(__BRYTHON__),function(e){var t=e.builtins,r=t.object,n=(e.$getattr,e.$isinstance);function a(t,r){if(t.__class__===f)throw e.attr_error(r,t)}var o={__class__:t.type,__qualname__:"list",__mro__:[r],$is_class:!0,$native:!0,$match_sequence_pattern:!0,__dir__:r.__dir__,__add__:function(r,a){if(e.get_class(r)!==e.get_class(a)){var o=e.class_name(r);if(null===e.$getattr(a,"__radd__",null))throw t.TypeError.$factory("can only concatenate "+o+' (not "'+e.class_name(a)+'") to '+o);return t.NotImplemented}var s=r.slice(),i="js"==a.$brython_class;for(const t of a)s.push(i?e.$JS2Py(t):t);return s.__brython__=!0,n(r,f)&&(s=f.$factory(s)),s},__bool__:function(e){return o.__len__(e)>0},__class_getitem__:function(t,r){return Array.isArray(r)||(r=[r]),e.GenericAlias.$factory(t,r)},__contains__:function(t,r){var n=e.args("__contains__",2,{self:null,item:null},["self","item"],arguments,{},null,null);t=n.self,r=n.item;for(var a of t)if(e.is_or_equals(a,r))return!0;return!1},__delitem__:function(r,a){if(n(a,t.int)){var s=a;if(a<0&&(s=r.length+s),s>=0&&s<r.length)return r.splice(s,1),t.None;throw t.IndexError.$factory(e.class_name(r)+" index out of range")}if(n(a,t.slice)){var i=a.step;i===t.None&&(i=1);var _=a.start;_===t.None&&(_=i>0?0:r.length);var l=a.stop;l===t.None&&(l=i>0?r.length:0),_<0&&(_=r.length+_),l<0&&(l=r.length+l);var c=[],u=null;s=0;if(i>0){if(l>_)for(u=_;u<l;u+=i)void 0!==r[u]&&(c[s++]=u)}else if(l<_){for(u=_;u>l;u+=i)void 0!==r[u]&&(c[s++]=u);c.reverse()}for(u=c.length;u--;)r.splice(c[u],1);return t.None}if(t.hasattr(a,"__int__")||t.hasattr(a,"__index__"))return o.__delitem__(r,t.int.$factory(a)),t.None;throw t.TypeError.$factory(e.class_name(r)+" indices must be integer, not "+e.class_name(a))},__eq__:function(r,a){var s=n(r,o)?o:f;if(n(a,s)){if(a.length==r.length){for(var i=r.length;i--;)if(!e.is_or_equals(r[i],a[i]))return!1;return!0}return!1}return t.NotImplemented},__getitem__:function(t,r){return e.check_nb_args_no_kw("__getitem__",2,arguments),o.$getitem(t,r)},$getitem:function(r,a){var o,s=r.__class__||e.get_class(r),i=function(e){return e.__class__=s,e};try{o=e.PyNumber_Index(a)}catch(err){}if(void 0!==o){var _=r.valueOf(),l=o;if(o<0&&(l=_.length+l),l>=0&&l<_.length)return _[l];throw t.IndexError.$factory(e.class_name(r)+" index out of range")}if(a.__class__===t.slice||n(a,t.slice)){if(a.start===t.None&&a.stop===t.None&&a.step===t.None)return r.slice();var c=t.slice.$conv_for_seq(a,r.length),u=[],f=null,p=(_=r.valueOf(),l=0,c.start),h=c.stop,d=c.step;if(d>0){if(h<=p)return i(u);for(f=p;f<h;f+=d)u[l++]=_[f];return i(u)}if(h>p)return i(u);for(f=p;f>h;f+=d)u[l++]=_[f];return i(u)}throw t.TypeError.$factory(e.class_name(r)+" indices must be integer, not "+e.class_name(a))},__ge__:function(e,r){if(!n(r,o))return t.NotImplemented;var a=o.__le__(r,e);return t.NotImplemented,a},__gt__:function(e,r){if(!n(r,o))return t.NotImplemented;var a=o.__lt__(r,e);return t.NotImplemented,a}};o.__hash__=t.None,o.__iadd__=function(){for(var t=e.args("__iadd__",2,{self:null,x:null},["self","x"],arguments,{},null,null),r=o.$factory(e.$iter(t.x)),n=0;n<r.length;n++)t.self.push(r[n]);return t.self},o.__imul__=function(){var t=e.args("__imul__",2,{self:null,x:null},["self","x"],arguments,{},null,null),r=e.$GetInt(t.x),n=t.self.length,a=n;if(0==r)return o.clear(t.self),t.self;for(var s=1;s<r;s++)for(var i=0;i<n;i++)t.self[a++]=t.self[i];return t.self},o.__init__=function(){var r=e.args("__init__",1,{self:null},["self"],arguments,{},"args","kw"),n=r.self,a=r.args,o=r.kw;if(a.length>1)throw t.TypeError.$factory("expected at most 1 argument, got "+a.length);if(t.dict.__len__(o)>0)throw t.TypeError.$factory("list() takes no keyword arguments");for(;n.length>0;)n.pop();var s=a[0];if(void 0===s)return t.None;var i=0;for(var _ of e.make_js_iterator(s))n[i++]=_;return t.None};var s=e.make_iterator_class("list_iterator");function i(r){if(e.repr.enter(r))return"[...]";for(var a,o=[],s=0;s<r.length;s++)o.push(t.repr(r[s]));return a=n(r,f)?1==r.length?"("+o[0]+",)":"("+o.join(", ")+")":"["+o.join(", ")+"]",e.repr.leave(r),a}s.__reduce__=s.__reduce_ex__=function(r){return e.fast_tuple([t.iter,e.fast_tuple([o.$factory(r)]),0])},o.__iter__=function(e){return s.$factory(e)},o.__le__=function(r,a){if(!n(a,[o,t.tuple]))return t.NotImplemented;for(var s=0;s<r.length&&s<a.length&&e.is_or_equals(r[s],a[s]);)s++;return s==r.length?r.length<=a.length:s!=a.length&&e.rich_comp("__le__",r[s],a[s])},o.__len__=function(e){return e.length},o.__lt__=function(r,a){if(!n(a,[o,t.tuple]))return t.NotImplemented;for(var s=0;s<r.length&&s<a.length&&e.is_or_equals(r[s],a[s]);)s++;return s==r.length?r.length<a.length:s!=a.length&&e.rich_comp("__lt__",r[s],a[s])},o.__mul__=function(r,a){try{a=e.PyNumber_Index(a)}catch(err){throw t.TypeError.$factory(`can't multiply sequence by non-int of type '${e.class_name(a)}'`)}if(0==r.length)return o.__new__(o);if("number"==typeof a){if(a<0)return o.__new__(o);if(r.length>e.max_array_size/a)throw t.OverflowError.$factory(`cannot fit '${e.class_name(a)}' into an index-sized integer`);for(var s=[],i=r.slice(),_=i.length,l=0;l<a;l++)for(var c=0;c<_;c++)s.push(i[c]);return s.__class__=r.__class__,r.__brython__&&(s.__brython__=r.__brython__),s}if(n(a,e.long_int))throw t.OverflowError.$factory(`cannot fit '${e.class_name(a)}' into an index-sized integer`)},o.__new__=function(r,...n){if(void 0===r)throw t.TypeError.$factory("list.__new__(): not enough arguments");var a=[];return a.__class__=r,a.__brython__=!0,a.__dict__=e.empty_dict(),a},o.__repr__=function(t){return e.builtins_repr_check(o,arguments),i(t)},o.__rmul__=function(e,t){return o.__mul__(e,t)},o.__setattr__=function(r,n,a){if(r.__class__===o||r.__class__===f){var s=e.class_name(r);throw o.hasOwnProperty(n)?t.AttributeError.$factory("'"+s+"' object attribute '"+n+"' is read-only"):t.AttributeError.$factory("'"+s+" object has no attribute '"+n+"'")}return t.dict.$setitem(r.__dict__,n,a),t.None},o.__setitem__=function(){var t=e.args("__setitem__",3,{self:null,key:null,value:null},["self","key","value"],arguments,{},null,null),r=t.self,n=t.key,a=t.value;o.$setitem(r,n,a)},o.$setitem=function(r,a,s){if("number"==typeof a||n(a,t.int)){var i=a;if(a<0&&(i=r.length+i),!(i>=0&&i<r.length))throw t.IndexError.$factory("list index out of range");return r[i]=s,t.None}if(n(a,t.slice)){var _=t.slice.$conv_for_seq(a,r.length);return null===a.step?e.set_list_slice(r,_.start,_.stop,s):e.set_list_slice_step(r,_.start,_.stop,_.step,s),t.None}if(t.hasattr(a,"__int__")||t.hasattr(a,"__index__"))return o.__setitem__(r,t.int.$factory(a),s),t.None;throw t.TypeError.$factory("list indices must be integer, not "+e.class_name(a))},o.append=function(r,n){return e.check_nb_args_no_kw("append",2,arguments),r[r.length]=n,t.None},o.clear=function(){for(var r=e.args("clear",1,{self:null},["self"],arguments,{},null,null);r.self.length;)r.self.pop();return t.None},o.copy=function(){var t=e.args("copy",1,{self:null},["self"],arguments,{},null,null).self.slice();return t.__class__=self.__class__,t.__brython__=!0,t},o.count=function(){var t=e.args("count",2,{self:null,x:null},["self","x"],arguments,{},null,null),r=0;for(var n of t.self)e.is_or_equals(n,t.x)&&r++;return r},o.extend=function(){var r=e.args("extend",2,{self:null,t:null},["self","t"],arguments,{},null,null);for(var n of e.make_js_iterator(r.t))r.self[r.self.length]=n;return t.None},o.index=function(){var r={},n=e.args("index",4,{self:null,x:null,start:null,stop:null},["self","x","start","stop"],arguments,{start:0,stop:r},null,null),a=n.self,o=n.start,s=n.stop;o.__class__===e.long_int&&(o=parseInt(o.value)*(o.pos?1:-1)),o<0&&(o=Math.max(0,o+a.length)),s===r?s=a.length:(s.__class__===e.long_int&&(s=parseInt(s.value)*(s.pos?1:-1)),s<0&&(s=Math.min(a.length,s+a.length)),s=Math.min(s,a.length));for(var i=o;i<s;i++)if(e.rich_comp("__eq__",n.x,a[i]))return i;throw t.ValueError.$factory(t.repr(n.x)+" is not in "+e.class_name(a))},o.insert=function(){var r=e.args("insert",3,{self:null,i:null,item:null},["self","i","item"],arguments,{},null,null);return r.self.splice(r.i,0,r.item),t.None},o.pop=function(){var r={},n=e.args("pop",2,{self:null,pos:null},["self","pos"],arguments,{pos:r},null,null),o=n.self,s=n.pos;a(o,"pop"),s===r&&(s=o.length-1),(s=e.$GetInt(s))<0&&(s+=o.length);var i=o[s];if(void 0===i)throw t.IndexError.$factory("pop index out of range");return o.splice(s,1),i},o.remove=function(){for(var r=e.args("remove",2,{self:null,x:null},["self","x"],arguments,{},null,null),n=0,a=r.self.length;n<a;n++)if(e.rich_comp("__eq__",r.self[n],r.x))return r.self.splice(n,1),t.None;throw t.ValueError.$factory(t.str.$factory(r.x)+" is not in list")},o.reverse=function(r){for(var n=e.args("reverse",1,{self:null},["self"],arguments,{},null,null),a=n.self.length-1,o=parseInt(n.self.length/2);o--;){var s=n.self[o];n.self[o]=n.self[a-o],n.self[a-o]=s}return t.None},o.sort=function(r){var n=e.args("sort",1,{self:null},["self"],arguments,{},null,"kw");a(r,"sort");var o=t.None,s=!1,i=n.kw;for(var _ in i.$jsobj)if("key"==_)o=i.$jsobj[_];else{if("reverse"!=_)throw t.TypeError.$factory("'"+_+"' is an invalid keyword argument for this function");s=i.$jsobj[_]}if(0==r.length)return t.None;o!==t.None&&(o=e.$call(o)),r.$cl=function(t){if(0==t.length)return null;for(var r=e.get_class(t[0]),n=t.length;n--;)if(e.get_class(t[n])!==r)return!1;return r}(r);var l=null;function c(t,r){return e.rich_comp("__lt__",t,r)?-1:e.rich_comp("__eq__",t,r)?0:1}if(o===t.None&&r.$cl===t.str)l=s?function(t,r){return e.$AlphabeticalCompare(r,t)}:function(t,r){return e.$AlphabeticalCompare(t,r)};else{if(o!==t.None||r.$cl!==t.int){if(l=s?function(e,t){return c(t[0],e[0])}:function(e,t){return c(e[0],t[0])},o===t.None)l=s?function(e,t){return c(t,e)}:c,r.sort(l);else{for(var u=[],f=r.slice(),p=0,h=r.length;p<h;p++)u.push([o(r[p]),p]);u.sort(l);for(p=0,h=u.length;p<h;p++)r[p]=f[u[p][1]]}return r.__brython__?t.None:r}l=s?function(e,t){return t-e}:function(e,t){return e-t}}return e.$TimSort(r,l),r.__brython__?t.None:r},e.$list=function(e){return e.__brython__=!0,e.__class__=t.list,e};var _=function(){if(0==arguments.length)return e.$list([]);var t,r=e.args(this.__name__,1,{obj:null},["obj"],arguments,{},null,null).obj;return Array.isArray(r)?((r=r.slice()).__brython__=!0,r.__class__==f?((t=r.slice()).__class__=o,t.__brython__=!0,t):r):((t=Array.from(e.make_js_iterator(r))).__brython__=!0,t)};o.$factory=function(){return _.apply(o,arguments)},o.$unpack=function(r){try{return t.list.$factory(r)}catch(err){try{var n=e.$iter(r);e.$call(e.$getattr(n,"__next__"))}catch(a){if(e.is_exc(a,[t.TypeError]))throw t.TypeError.$factory(`Value after * must be an iterable, not ${e.class_name(r)}`);throw a}throw err}},e.set_func_names(o,"builtins");var l=e.JSArray=e.make_class("JSArray",(function(e){return{__class__:l,js:e}}));function c(e){for(var t=[e[0].js],r=1,n=e.length;r<n;r++)t.push(e[r]);return t}for(var u in l.__repr__=l.__str__=function(){return"<JSArray object>"},o)void 0===e.JSArray[u]&&"function"==typeof o[u]&&(e.JSArray[u]=function(t){return function(){return e.$JS2Py(o[t].apply(null,c(arguments)))}}(u));e.set_func_names(e.JSArray,"builtins");var f={__class__:t.type,__mro__:[r],__qualname__:"tuple",$is_class:!0,$native:!0,$match_sequence_pattern:!0},p=e.make_iterator_class("tuple_iterator");for(var u in f.__iter__=function(e){return p.$factory(e)},f.$factory=function(){var e=_.apply(f,arguments);return e.__class__=f,e},e.fast_tuple=function(t){return t.__class__=f,t.__brython__=!0,t.__dict__=e.empty_dict(),t},o)switch(u){case"__delitem__":case"__iadd__":case"__imul__":case"__setitem__":case"append":case"extend":case"insert":case"pop":case"remove":case"reverse":case"sort":break;default:void 0===f[u]&&"function"==typeof o[u]&&(f[u]=function(e){return function(){return o[e].apply(null,arguments)}}(u))}f.__class_getitem__=function(t,r){return Array.isArray(r)||(r=[r]),e.GenericAlias.$factory(t,r)},f.__eq__=function(e,t){return void 0===t?e===f:o.__eq__(e,t)},f.$getnewargs=function(t){return e.fast_tuple([e.fast_tuple(t.slice())])},f.__getnewargs__=function(){return f.$getnewargs(e.single_arg("__getnewargs__","self",arguments))},f.__hash__=function(e){for(var r,n,a=54880137,o=0,s=e.length;o<s;o++){var i=t.hash(e[o]);r=a,n=void 0,n=(parseInt(1000003)*r&4294967295).toString(16),a=parseInt(n.substr(0,n.length-1),16)^4294967295&i}return a},f.__init__=function(){return t.None},f.__new__=function(r,...n){if(void 0===r)throw t.TypeError.$factory("list.__new__(): not enough arguments");var a=[];if(a.__class__=r,a.__brython__=!0,a.__dict__=e.empty_dict(),0==n.length)return a;for(var o=e.$iter(n[0]),s=e.$call(e.$getattr(o,"__next__"));;)try{var i=s();a.push(i)}catch(err){if(err.__class__===t.StopIteration)break;throw err}return a},f.__repr__=function(t){return e.builtins_repr_check(f,arguments),i(t)},e.set_func_names(f,"builtins"),t.list=o,t.tuple=f,t.object.__bases__=f.$factory(),t.type.__bases__=e.fast_tuple([t.object])}(__BRYTHON__),function(e){var t=e.builtins,r={};e.generator_return=function(e){return{__class__:r,value:e}},e.generator=e.make_class("generator",(function(t,r){var n=function(){var n=t.apply(null,arguments);return n.$name=r||"generator",n.$func=t,n.$has_run=!1,{__class__:e.generator,js_gen:n}};return n.$infos=t.$infos,n.$is_genfunc=!0,n.$name=r,n})),e.generator.__iter__=function(e){return e},e.generator.__next__=function(r){return e.generator.send(r,t.None)},e.generator.__str__=function(e){var t=e.js_gen.$name||"generator";return e.js_gen.$func&&e.js_gen.$func.$infos&&(t=e.js_gen.$func.$infos.__qualname__),`<generator object ${t}>`},e.generator.close=function(r){var n=e.frame_obj;r.$frame&&(e.frame_obj=e.push_frame(r.$frame));try{e.generator.throw(r,t.GeneratorExit.$factory())}catch(err){if(!e.is_exc(err,[t.GeneratorExit,t.StopIteration]))throw e.frame_obj=n,t.RuntimeError.$factory("generator ignored GeneratorExit")}e.frame_obj=n},e.generator.send=function(n,a){var o=n.js_gen;if(o.$has_run=!0,o.$finished)throw t.StopIteration.$factory(a);if(!0===o.gi_running)throw t.ValueError.$factory("generator already executing");o.gi_running=!0;var s=e.frame_obj;n.$frame&&(e.frame_obj=e.push_frame(n.$frame));try{var i=o.next(a)}catch(err){throw o.$finished=!0,e.frame_obj=s,err}if(null!==e.frame_obj&&e.frame_obj.frame===n.$frame&&e.leave_frame(),e.frame_obj=s,i.value&&i.value.__class__===r)throw o.$finished=!0,t.StopIteration.$factory(i.value.value);if(o.gi_running=!1,i.done)throw t.StopIteration.$factory(i.value);return i.value},e.generator.throw=function(r,n,a,o){var s=e.args("throw",4,{self:null,type:null,value:null,traceback:null},["self","type","value","traceback"],arguments,{value:t.None,traceback:t.None},null,null),i=(r=s.self,n=s.type,a=s.value,o=s.traceback,r.js_gen),_=n;if(_.$is_class){if(!t.issubclass(n,t.BaseException))throw t.TypeError.$factory("exception value must be an instance of BaseException");void 0===a||a===t.None?_=e.$call(_)():e.$isinstance(a,n)&&(_=a)}else a===t.None?a=_:_=e.$call(_)(a);o!==t.None&&(_.$traceback=o);var l=e.frame_obj;r.$frame&&(e.frame_obj=e.push_frame(r.$frame));var c=i.throw(_);if(e.frame_obj=l,c.done)throw t.StopIteration.$factory(c.value);return c.value},e.set_func_names(e.generator,"builtins"),e.async_generator=e.make_class("async_generator",(function(t){return function(){var r=t.apply(null,arguments),n=Object.create(null);return n.__class__=e.async_generator,n.js_gen=r,n}})),e.async_generator.__aiter__=function(e){return e},e.async_generator.__anext__=function(r){return e.async_generator.asend(r,t.None)},e.async_generator.aclose=function(e){return e.js_gen.$finished=!0,t.None},e.async_generator.asend=async function(n,a){var o=n.js_gen;if(o.$finished)throw t.StopAsyncIteration.$factory(a);if(!0===o.ag_running)throw t.ValueError.$factory("generator already executing");o.ag_running=!0;var s=e.frame_obj;n.$frame&&(e.frame_obj=e.push_frame(n.$frame));try{var i=await o.next(a)}catch(err){throw o.$finished=!0,e.frame_obj=s,err}if(null!==e.frame_obj&&e.frame_obj.frame===n.$frame&&e.leave_frame(),e.frame_obj=s,i.done)throw t.StopAsyncIteration.$factory(a);if(i.value.__class__===r)throw o.$finished=!0,t.StopAsyncIteration.$factory(i.value.value);return o.ag_running=!1,i.value},e.async_generator.athrow=async function(r,n,a,o){var s=r.js_gen,i=n;if(i.$is_class){if(!t.issubclass(n,t.BaseException))throw t.TypeError.$factory("exception value must be an instance of BaseException");void 0===a&&(a=e.$call(i)())}else void 0===a?a=i:i=e.$call(i)(a);void 0!==o&&(i.$traceback=o);var _=e.frame_obj;r.$frame&&(e.frame_obj=e.push_frame(r.$frame)),await s.throw(a),e.frame_obj=_},e.set_func_names(e.async_generator,"builtins")}(__BRYTHON__),function(e){var t=e.builtins;t.object,globalThis;function r(r){switch(typeof r){case"string":case"number":return r;case"boolean":return r?"true":"false";case"object":if(r===t.None)return"null";if(r instanceof Number)return r.valueOf();if(r instanceof String)return r.valueOf();default:throw t.TypeError.$factory("keys must be str, int, float, bool or None, not "+e.class_name(r))}}e.pyobj2structuredclone=function(n,a){if(a=void 0===a||a,"boolean"==typeof n||"number"==typeof n||"string"==typeof n||n instanceof String)return n;if(n.__class__===t.float)return n.value;if(n===t.None)return null;if(Array.isArray(n)||n.__class__===t.list||n.__class__===t.tuple){for(var o=new Array(n.length),s=0,i=n.length;s<i;++s)o[s]=e.pyobj2structuredclone(n[s]);return o}if(e.$isinstance(n,t.dict)){if(a)for(var _ of e.make_js_iterator(t.dict.keys(n)))if("string"!=typeof _)throw t.TypeError.$factory("a dictionary with non-string keys does not support structured clone");o={};for(var l of e.make_js_iterator(t.dict.items(n)))o[r(l[0])]=e.pyobj2structuredclone(l[1]);return o}return n.__class__===e.long_int?n.value:n},e.structuredclone2pyobj=function(r){if(null===r)return t.None;if(void 0===r)return e.Undefined;if("boolean"==typeof r||"string"==typeof r)return r;if("number"==typeof r)return Number.isInteger(r)?r:{__class__:t.float,value:r};if(r instanceof Number||r instanceof String)return r.valueOf();if(Array.isArray(r)||r.__class__===t.list||r.__class__===t.tuple){for(var n=t.list.$factory(),a=0,o=r.length;a<o;a++)n.push(e.structuredclone2pyobj(r[a]));return n}if("object"==typeof r){n=e.empty_dict();for(var s in r)t.dict.$setitem(n,s,e.structuredclone2pyobj(r[s]));return n}throw t.TypeError.$factory(t.str.$factory(r)+" does not support the structured clone algorithm")};const n=Symbol("JSOBJ"),a=Symbol("PYOBJ"),o=Symbol("PYOBJFCT"),s=Symbol("PYOBJFCTS");var i=e.jsobj2pyobj=function(r,l){switch(r){case!0:case!1:return r}if(void 0===r)return e.Undefined;if(null===r)return null;if(Array.isArray(r))return Object.defineProperty(r,"$is_js_array",{value:!0}),r;if("number"==typeof r)return r%1==0?t.int.$factory(r):t.float.$factory(r);if("string"==typeof r)return e.String(r);if("bigint"==typeof r)return t.int.$int_or_long(r);let c=r[a];if(void 0!==c)return c;if(r instanceof Promise)return r.then((e=>i(e))).catch(e.handle_error);if("function"==typeof r){if(null===(l=void 0===l?null:l)){const e=r[o];if(void 0!==e)return e}else{const e=l[s];if(void 0!==e){const t=e.get(r);if(void 0!==t)return t}else try{l[s]=new Map}catch(err){}}var u=function(){for(var t=new Array(arguments.length),n=0,a=arguments.length;n<a;++n)t[n]=_(arguments[n]);try{return i(r.apply(l,t))}catch(err){throw e.exception(err)}};return null===l?r[o]=u:void 0!==l[s]&&l[s].set(r,u),u[n]=r,u.$js_func=r,u.$is_js_func=!0,u.$infos={__name__:r.name,__qualname__:r.name},u}if(r.$kw)return r;if(e.$isNode(r)){const t=e.DOMNode.$factory(r);return r[a]=t,t[n]=r,t}const f=e.JSObj.$factory(r);return r[a]=f,f[n]=r,f},_=e.pyobj2jsobj=function(r){if(!0===r||!1===r)return r;if(r===e.Undefined)return;if(null===r)return null;let o=r[n];if(void 0!==o)return o;var s=e.get_class(r);if(void 0===s)return r;if(s===e.DOMNode||s.__mro__.indexOf(e.DOMNode)>-1)return r;if([t.list,t.tuple].indexOf(s)>-1)return r.map(_);if(s===t.dict||t.issubclass(s,t.dict)){var l={};for(var c of t.dict.$iter_items_with_hash(r)){var u=c.key;"string"!=typeof u&&(u=t.str.$factory(u)),"function"==typeof c.value&&c.value.bind(l),l[u]=_(c.value)}return l}if(s===t.str)return r.valueOf();if(s===e.long_int)return r.value;if(s===t.float)return r.value;if(s===e.function||s===e.method){if(r.prototype&&r.prototype.constructor===r&&!r.$is_func)return r;if(r.$is_async){const t=function(){var t=r.apply(null,arguments);return e.coroutine.send(t)};return r[n]=t,t[a]=r,t}l=function(){try{for(var t=new Array(arguments.length),n=0;n<arguments.length;++n)t[n]=i(arguments[n]);if(r.prototype.constructor!==r||r.$is_func)a=r.apply(this,t);else var a=new r(...t);return _(a)}catch(err){e.handle_error(err)}};return r[n]=l,l[a]=r,l}return r};function l(r){for(var n=new Array(r.length),a=0,o=r.length;a<o;a++){var s=r[a];if(null!=s&&void 0!==s.$kw)throw t.TypeError.$factory("A Javascript function can't take keyword arguments");n[a]=e.pyobj2jsobj(s)}return n}function c(r,n){if("bigint"!=typeof r||"bigint"!=typeof n)throw t.TypeError.$factory("unsupported operand type(s) for - : '"+e.class_name(r)+"' and '"+e.class_name(n)+"'")}e.JSObj=e.make_class("JSObject",(function(e){if(Array.isArray(e))e.$is_js_array=!0;else{if("function"==typeof e)return i(e);if("number"==typeof e&&!Number.isInteger(e))return{__class__:t.float,value:e}}return e}));var u={__add__:function(e,t){return c(e,t),e+t},__mod__:function(e,t){return c(e,t),e%t},__mul__:function(e,t){return c(e,t),e*t},__pow__:function(e,t){return c(e,t),e**t},__sub__:function(e,t){return c(e,t),e-t}};for(var f in u)e.JSObj[f]=u[f];e.JSObj.__bool__=function(e){if("object"==typeof e){for(var t in e)return!0;return!1}return!!e},e.JSObj.__contains__=function(e,t){return t in e},e.JSObj.__dir__=function(e){var t=Object.keys(e);return t=t.sort()},e.JSObj.__eq__=function(t,r){switch(typeof t){case"string":return t==r;case"object":if(void 0!==t.__eq__)return t.__eq__(r);if(Object.keys(t).length!==Object.keys(r).length)return!1;if(t===r)return!0;for(var n in t)if(!e.rich_comp("__eq__",t[n],r[n]))return!1;return!0;case"function":return t.$is_js_func&&r.$is_js_func?t.$js_func===r.$js_func:t===r;default:return t===r}};var p=e.make_class("js_iterator",(function(e){return{__class__:p,keys:Object.keys(e),values:Object.values(e),length:Object.keys(e).length,counter:-1}}));function h(r){var n,a,o=r.prototype,s=e.make_class(r.name);for([n,a]of(s.__init__=function(r){var n=l(Array.from(arguments).slice(1)),a=new o.constructor(...n);for(var s in a)t.dict.$setitem(r.__dict__,s,e.jsobj2pyobj(a[s]));return t.None},s.new=function(){var t=l(arguments);return e.JSObj.$factory(new o.constructor(...t))},Object.entries(Object.getOwnPropertyDescriptors(o))))if("constructor"!=n)if(a.get){var i=function(e){return function(t){return e.get.call(t.__dict__.$jsobj)}}(a),_=function(e){return function(t,r){e.set.call(t.__dict__.$jsobj,r)}}(a);s[n]=t.property.$factory(i,_)}else s[n]=function(e){return function(t){var r=Array.from(arguments).slice(1);return o[e].apply(t.__dict__.$jsobj,r)}}(n);var c=Object.getPrototypeOf(o).constructor;if(c.toString().startsWith("class ")){var u=h(c);s.__mro__=[u].concat(s.__mro__)}var f=e.frame_obj.frame;return f&&e.set_func_names(s,f[2]),s}p.__next__=function(e){if(e.counter++,e.counter==e.length)throw t.StopIteration.$factory("");return e.keys[e.counter]},e.set_func_names(p,"builtins"),e.JSObj.__iter__=function(e){return p.$factory(e)},e.JSObj.__ne__=function(t,r){return!e.JSObj.__eq__(t,r)},e.JSObj.__getattribute__=function(t,r){var n;if("new"==r&&"function"==typeof t)return n=t.$js_func?function(){var r=l(arguments);return e.JSObj.$factory(new t.$js_func(...r))}:function(){var r=l(arguments);return e.JSObj.$factory(new t(...r))},n.$infos={__name__:r,__qualname__:r},n;var a=t[r];if(null==a&&"function"==typeof t&&t.$js_func&&(a=t.$js_func[r]),void 0===a){if("object"==typeof t&&r in t)return e.Undefined;if("function"==typeof t.getNamedItem){var o=t.getNamedItem(r);if(void 0!==o)return e.JSObj.$factory(o)}var s=e.get_class(t),_=e.$getattr(s,r,null);if(null!==_)return"function"==typeof _?function(){var r=new Array(arguments.length+1);r[0]=t;for(var n=0,a=arguments.length;n<a;n++)r[n+1]=arguments[n];return e.JSObj.$factory(_.apply(null,r))}:_;throw e.attr_error(r,t)}return null!==a&&a.toString&&"function"==typeof a.toString&&a.toString().startsWith("class ")?h(a):"function"==typeof a?i(a,t.$js_func||t):e.JSObj.$factory(a)},e.JSObj.__setattr__=function(r,n,a){return r[n]=e.pyobj2jsobj(a),t.None},e.JSObj.__getitem__=function(r,n){if("string"==typeof n)try{return e.JSObj.__getattribute__(r,n)}catch(err){if(e.is_exc(err,[t.AttributeError]))throw t.KeyError.$factory(err.name);throw err}else if("number"==typeof n){if(void 0!==r[n])return e.JSObj.$factory(r[n]);if("number"==typeof r.length&&("number"==typeof n||"boolean"==typeof n)&&"function"==typeof r.item){var a=t.int.$factory(n);if(a<0&&(a+=r.length),null===(s=r.item(a)))throw t.IndexError.$factory(a);return e.JSObj.$factory(s)}}else if(n.__class__===t.slice&&"function"==typeof r.item){var o=t.slice.$conv_for_seq(n,r.length),s=new Array(Math.floor((o.stop-o.start)/o.step));let e=0;for(var i=o.start;i<o.stop;i+=o.step)s[e++]=r.item(i);return s}throw t.KeyError.$factory(n)},e.JSObj.__setitem__=e.JSObj.__setattr__,e.JSObj.__repr__=e.JSObj.__str__=function(e){return"number"==typeof e?e+"":`<Javascript object: ${Object.prototype.toString.call(e)}>`},e.JSObj.bind=function(r,n,a){var o=function(t){try{return a(i(t))}catch(err){if(void 0!==err.__class__)e.handle_error(err);else try{e.$getattr(e.get_stderr(),"write")(err)}catch(r){console.log(err)}}};return r.$brython_events=r.$brython_events||{},r.$brython_events&&(r.$brython_events[n]=r.$brython_events[n]||[],r.$brython_events[n].push([a,o])),r.addEventListener(n,o),t.None},e.JSObj.bindings=function(r){var n=e.empty_dict();if(r.$brython_events)for(var a in r.$brython_events)t.dict.$setitem(n,a,e.fast_tuple(r.$brython_events[a].map((e=>e[0]))));return n},e.JSObj.unbind=function(e,r,n){if(!e.$brython_events)return t.None;if(!e.$brython_events[r])return t.None;var a=e.$brython_events[r];if(void 0===n){for(var o of a)e.removeEventListener(r,o[1]);delete e.$brython_events[r]}else{for(var s=0,i=a.length;s<i;s++)a[s][0]===n&&a.splice(s,1);0==a.length&&delete e.$brython_events[r]}},e.JSObj.to_dict=function(t){return e.structuredclone2pyobj(t)},e.set_func_names(e.JSObj,"builtins");var d=e.make_class("js_list_meta");d.__mro__=[t.type,t.object],d.__getattribute__=function(r,n){if(void 0===t.list[n])throw t.AttributeError.$factory(n);return m.hasOwnProperty(n)?m[n]:["__delitem__","__setitem__"].indexOf(n)>-1?function(){var e=new Array(arguments.length);e[0]=arguments[0];for(var r=1,a=arguments.length;r<a;r++)e[r]=_(arguments[r]);return t.list[n].apply(null,e)}:["__add__","__contains__","__eq__","__getitem__","__mul__","__ge__","__gt__","__le__","__lt__"].indexOf(n)>-1?function(){var r=e.$list(arguments[0].map(i));return i(t.list[n].call(null,r,...Array.from(arguments).slice(1)))}:function(){var e=[i(arguments[0])];return t.list[n].apply(null,e)}},e.set_func_names(d,"builtins"),e.SizedJSObj=e.make_class("SizedJavascriptObject"),e.SizedJSObj.__bases__=[e.JSObj],e.SizedJSObj.__mro__=[e.JSObj,t.object],e.SizedJSObj.__len__=function(e){return e.length},e.set_func_names(e.SizedJSObj,"builtins"),e.IterableJSObj=e.make_class("IterableJavascriptObject"),e.IterableJSObj.__bases__=[e.JSObj],e.IterableJSObj.__mro__=[e.JSObj,t.object],e.IterableJSObj.__iter__=function(t){return{__class__:e.IterableJSObj,it:t[Symbol.iterator]()}},e.IterableJSObj.__len__=function(e){return e.length},e.IterableJSObj.__next__=function(e){var r=e.it.next();if(!r.done)return i(r.value);throw t.StopIteration.$factory("")},e.set_func_names(e.IterableJSObj,"builtins");var m=e.js_array=e.make_class("Array");m.__class__=d,m.__mro__=[e.JSObj,t.object],m.__getattribute__=function(r,n){if(void 0===t.list[n]){var a=Object.getPrototypeOf(r)[n];if(void 0!==a)return i(a,r);if(r.hasOwnProperty(n))return e.JSObj.$factory(r[n]);throw e.attr_error(n,r)}return function(){var e=_(Array.from(arguments));return t.list[n].call(null,r,...e)}},m.__getitem__=function(t,r){return r=e.PyNumber_Index(r),e.jsobj2pyobj(t[r])};var g=e.make_class("JSArray_iterator",(function(e){return{__class__:g,it:e[Symbol.iterator]()}}));g.__next__=function(r){var n=r.it.next();if(n.done)throw t.StopIteration.$factory("");return e.jsobj2pyobj(n.value)},e.set_func_names(g,"builtins"),m.__iter__=function(e){return g.$factory(e)},m.__repr__=function(r){if(e.repr.enter(r))return"[...]";for(var n,a=new Array(r.length),o=0;o<r.length;++o)a[o]=t.str.$factory(r[o]);return n="["+a.join(", ")+"]",e.repr.leave(r),n},e.set_func_names(m,"javascript"),e.get_jsobj_class=function(t){var r=Object.getPrototypeOf(t);return null===r?e.JSObj:void 0!==r[Symbol.iterator]?e.IterableJSObj:Object.getOwnPropertyNames(r).indexOf("length")>-1?e.SizedJSObj:e.JSObj},e.JSMeta=e.make_class("JSMeta"),e.JSMeta.__call__=function(e){for(var r=new Array(arguments.length-1),n=arguments[0],a=1,o=arguments.length;a<o;a++)r[a-1]=arguments[a];var s=t.type.__getattribute__(n,"__new__").apply(null,arguments);if(s instanceof e.__mro__[0].$js_func){var i=t.type.__getattribute__(n,"__init__");if(i!==t.object.__init__){var _=[s].concat(r);i.apply(null,_)}}return s},e.JSMeta.__mro__=[t.type,t.object],e.JSMeta.__getattribute__=function(r,n){return void 0!==r[n]?r[n]:void 0!==e.JSMeta[n]?e.JSMeta[n]:t.type.__getattribute__(r,n)},e.JSMeta.__init_subclass__=function(){},e.JSMeta.__new__=function(r,n,a,o){var s=Function("cl_dict","bases","\n    var _b_ = __BRYTHON__.builtins\n    return function(){\n        if(_b_.dict.$contains_string(cl_dict, '__init__')){\n            var args = [this]\n            for(var i = 0, len = arguments.length; i < len; i++){\n                args.push(arguments[i])\n            }\n            _b_.dict.$getitem_string(cl_dict, '__init__').apply(this, args)\n        }else{\n            return new bases[0].$js_func(...arguments)\n        }\n    }")(o,a);return s.prototype=Object.create(a[0].$js_func.prototype),s.prototype.constructor=s,s.$js_func=a[0].$js_func,s.__class__=e.JSMeta,s.__bases__=[a[0]],s.__mro__=[a[0],t.type],s.__qualname__=s.__name__=n,s.$is_js_class=!0,s},e.set_func_names(e.JSMeta,"builtins")}(__BRYTHON__),function(e){var t=e.builtins,r=t.object,n=globalThis,a=e.py_immutable_to_js=function(r){return e.$isinstance(r,t.float)?r.value:e.$isinstance(r,e.long_int)?e.long_int.$to_js_number(r):r};function o(e){var t=0,r=0,n=e.width||e.offsetWidth,a=e.height||e.offsetHeight;for(document.scrollingElement.scrollTop;e.offsetParent;)t+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;if(t+=e.offsetLeft||0,r+=e.offsetTop||0,e.parentElement){var s=o(e.parentElement);t+=s.left,r+=s.top}return{left:t,top:r,width:n,height:a}}var s=e.$mouseCoords=function(e){if(e.type.startsWith("touch"))return(r={}).x=t.int.$factory(e.touches[0].screenX),r.y=t.int.$factory(e.touches[0].screenY),r.__getattr__=function(e){return this[e]},r.__class__="MouseCoords",r;var r,a=0,o=0;if(!e)e=n.event;return e.pageX||e.pageY?(a=e.pageX,o=e.pageY):(e.clientX||e.clientY)&&(a=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,o=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),(r={}).x=t.int.$factory(a),r.y=t.int.$factory(o),r.__getattr__=function(e){return this[e]},r.__class__="MouseCoords",r};e.$isNode=function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},e.$isNodeList=function(e){try{var t=Object.prototype.toString.call(e),r=new RegExp("^\\[object (HTMLCollection|NodeList)\\]$");return"object"==typeof e&&null!==r.exec(t)&&void 0!==e.length&&(0==e.length||"object"==typeof e[0]&&e[0].nodeType>0)}catch(err){return!1}};var i=["NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","type","target","currentTarget","eventPhase","bubbles","cancelable","timeStamp","stopPropagation","preventDefault","initEvent"],_=["altKey","altLeft","button","cancelBubble","clientX","clientY","contentOverflow","ctrlKey","ctrlLeft","data","dataFld","dataTransfer","fromElement","keyCode","nextPage","offsetX","offsetY","origin","propertyName","reason","recordset","repeat","screenX","screenY","shiftKey","shiftLeft","source","srcElement","srcFilter","srcUrn","toElement","type","url","wheelDelta","x","y"];e.$isEvent=function(e){for(var t=!0,r=0;r<i.length;r++)if(void 0===e[i[r]]){t=!1;break}if(t)return!0;for(r=0;r<_.length;r++)if(void 0===e[_[r]])return!1;return!0};var l={1:"ELEMENT",2:"ATTRIBUTE",3:"TEXT",4:"CDATA_SECTION",5:"ENTITY_REFERENCE",6:"ENTITY",7:"PROCESSING_INSTRUCTION",8:"COMMENT",9:"DOCUMENT",10:"DOCUMENT_TYPE",11:"DOCUMENT_FRAGMENT",12:"NOTATION"},c=e.make_class("Attributes",(function(e){return{__class__:c,elt:e}}));c.__contains__=function(){var t=e.args("__getitem__",2,{self:null,key:null},["self","key"],arguments,{},null,null);return t.self.elt instanceof SVGElement?t.self.elt.hasAttributeNS(null,t.key):"function"==typeof t.self.elt.hasAttribute&&t.self.elt.hasAttribute(t.key)},c.__delitem__=function(){var r=e.args("__getitem__",2,{self:null,key:null},["self","key"],arguments,{},null,null);if(!c.__contains__(r.self,r.key))throw t.KeyError.$factory(r.key);return r.self.elt instanceof SVGElement?(r.self.elt.removeAttributeNS(null,r.key),t.None):"function"==typeof r.self.elt.hasAttribute?(r.self.elt.removeAttribute(r.key),t.None):void 0},c.__getitem__=function(){var r=e.args("__getitem__",2,{self:null,key:null},["self","key"],arguments,{},null,null);if(r.self.elt instanceof SVGElement&&r.self.elt.hasAttributeNS(null,r.key))return r.self.elt.getAttributeNS(null,r.key);if("function"==typeof r.self.elt.hasAttribute&&r.self.elt.hasAttribute(r.key))return r.self.elt.getAttribute(r.key);throw t.KeyError.$factory(r.key)},c.__iter__=function(e){e.$counter=0;for(var t=e.elt.attributes,r=[],n=0;n<t.length;n++)r.push(t[n].name);return e.$items=r,e},c.__next__=function(){var r=e.args("__next__",1,{self:null},["self"],arguments,{},null,null);if(r.self.$counter<r.self.$items.length){var n=r.self.$items[r.self.$counter];return r.self.$counter++,n}throw t.StopIteration.$factory("")},c.__setitem__=function(){var r=e.args("__setitem__",3,{self:null,key:null,value:null},["self","key","value"],arguments,{},null,null);if(r.self.elt instanceof SVGElement&&"function"==typeof r.self.elt.setAttributeNS)return r.self.elt.setAttributeNS(null,r.key,t.str.$factory(r.value)),t.None;if("function"==typeof r.self.elt.setAttribute)return r.self.elt.setAttribute(r.key,t.str.$factory(r.value)),t.None;throw t.TypeError.$factory("Can't set attributes on element")},c.__repr__=c.__str__=function(e){for(var t=e.elt.attributes,r=[],n=0;n<t.length;n++)r.push(t[n].name+': "'+e.elt.getAttributeNS(null,t[n].name)+'"');return"{"+r.join(", ")+"}"},c.get=function(){var r=e.args("get",3,{self:null,key:null,deflt:null},["self","key","deflt"],arguments,{deflt:t.None},null,null);try{return c.__getitem__(r.self,r.key)}catch(err){if(err.__class__===t.KeyError)return r.deflt;throw err}},c.keys=function(){return c.__iter__.apply(null,arguments)},c.items=function(){for(var r=e.args("values",1,{self:null},["self"],arguments,{},null,null).self.elt.attributes,n=[],a=0;a<r.length;a++)n.push([r[a].name,r[a].value]);return t.list.__iter__(n)},c.values=function(){for(var r=e.args("values",1,{self:null},["self"],arguments,{},null,null).self.elt.attributes,n=[],a=0;a<r.length;a++)n.push(r[a].value);return t.list.__iter__(n)},e.set_func_names(c,"<dom>");var u=e.DOMEvent=e.make_class("DOMEvent",(function(e){return u.__new__(u,e)}));function f(e,t){var r=e.createSVGPoint();return r.x=t.x,r.y=t.y,r.matrixTransform(e.getScreenCTM().inverse())}u.__new__=function(e,t){var r=new Event(t);return r.__class__=u,void 0===r.preventDefault&&(r.preventDefault=function(){r.returnValue=!1}),void 0===r.stopPropagation&&(r.stopPropagation=function(){r.cancelBubble=!0}),r},u.__getattribute__=function(r,n){switch(n){case"__repr__":case"__str__":return function(){return"<DOMEvent object>"};case"x":return s(r).x;case"y":return s(r).y;case"data":return null!==r.dataTransfer&&void 0!==r.dataTransfer?h.$factory(r.dataTransfer):e.$JS2Py(r.data);case"target":if(void 0!==r.target)return m.$factory(r.target);case"char":return String.fromCharCode(r.which);case"svgX":if(r.target instanceof SVGSVGElement)return Math.floor(f(r.target,s(r)).x);throw t.AttributeError.$factory("event target is not an SVG element");case"svgY":if(r.target instanceof SVGSVGElement)return Math.floor(f(r.target,s(r)).y);throw t.AttributeError.$factory("event target is not an SVG element")}var a=r[n];if(void 0!==a){if("function"==typeof a){var o=function(){for(var t=[],n=0;n<arguments.length;n++)t.push(e.pyobj2jsobj(arguments[n]));return a.apply(r,arguments)};return o.$infos={__name__:a.name,__qualname__:a.name},o}return e.$JS2Py(a)}throw e.attr_error(n,r)};var p=e.$DOMEvent=function(e){return e.__class__=u,e.$no_dict=!0,void 0===e.preventDefault&&(e.preventDefault=function(){e.returnValue=!1}),void 0===e.stopPropagation&&(e.stopPropagation=function(){e.cancelBubble=!0}),e};e.set_func_names(u,"browser");var h=e.make_class("Clipboard",(function(t){return{__class__:h,__dict__:e.empty_dict(),data:t}}));h.__getitem__=function(e,t){return e.data.getData(t)},h.__setitem__=function(e,t,r){e.data.setData(t,r)},e.set_func_names(h,"<dom>");var d={File:function(){},FileReader:function(){}};d.File.__class__=t.type,d.File.__str__=function(){return"<class 'File'>"},d.FileReader.__class__=t.type,d.FileReader.__str__=function(){return"<class 'FileReader'>"};var m=e.make_class("DOMNode",(function(e){return e}));function g(e){for(var t=[],r=0;r<e.length;r++)t.push(m.$factory(e[r]));return t}m.__add__=function(r,n){var a=y.$factory();a.children=[r];var o=1;if(e.$isinstance(n,y))a.children=a.children.concat(n.children);else if(e.$isinstance(n,[t.str,t.int,t.float,t.list,t.dict,t.set,t.tuple]))a.children[o++]=m.$factory(document.createTextNode(t.str.$factory(n)));else if(e.$isinstance(n,m))a.children[o++]=n;else try{a.children=a.children.concat(t.list.$factory(n))}catch(err){throw t.TypeError.$factory("can't add '"+e.class_name(n)+"' object to DOMNode instance")}return a},m.__bool__=function(e){return!0},m.__contains__=function(e,t){if(9==e.nodeType&&"string"==typeof t)return null!==document.getElementById(t);if(void 0!==e.length&&"function"==typeof e.item)for(var r=0,n=e.length;r<n;r++)if(e.item(r)===t)return!0;return!1},m.__del__=function(e){if(!e.parentNode)throw t.ValueError.$factory("can't delete "+t.str.$factory(e));e.parentNode.removeChild(e)},m.__delattr__=function(e,r){if(void 0===e[r])throw t.AttributeError.$factory(`cannot delete DOMNode attribute '${r}'`);return delete e[r],t.None},m.__delitem__=function(e,r){if(9==e.nodeType){var n=e.getElementById(r);if(!n)throw t.KeyError.$factory(r);n.parentNode.removeChild(n)}else e.parentNode.removeChild(e)},m.__dir__=function(e){var t=[];for(var r in e)"$"!=r.charAt(0)&&t.push(r);for(var r in m)-1==t.indexOf(r)&&t.push(r);return t.sort(),t},m.__eq__=function(e,t){return e==t},m.__getattribute__=function(n,a){switch(a){case"attrs":return c.$factory(n);case"children":case"child_nodes":case"class_name":case"html":case"parent":case"text":return m[a](n);case"height":case"left":case"top":case"width":if("CANVAS"==n.tagName&&n[a])return n[a];if(n instanceof SVGElement)return n[a].baseVal.value;var s=window.getComputedStyle(n).getPropertyValue(a);if(void 0!==s){if(""==s)return void 0!==n.style[a]?parseInt(n.style[a]):0;var i=Math.floor(parseFloat(s)+.5);return isNaN(i)?0:i}if(n.style[a])return parseInt(n.style[a]);throw t.AttributeError.$factory("style."+a+" is not set for "+t.str.$factory(n));case"x":case"y":if(!(n instanceof SVGElement)){var _=o(n);return"x"==a?_.left:_.top}case"clear":case"closest":return function(){return m[a].call(null,n,...arguments)};case"headers":if(9==n.nodeType){var l=new XMLHttpRequest;l.open("GET",document.location,!1),l.send(null);var u=l.getAllResponseHeaders();u=u.split("\r\n");for(var f=e.empty_dict(),p=0;p<u.length;p++){var h=u[p];if(0!=h.strip().length){_=h.search(":");f.__setitem__(h.substr(0,_),h.substr(_+1).lstrip())}}return f}break;case"location":a="location"}if("select"==a&&1==n.nodeType&&["INPUT","TEXTAREA"].indexOf(n.tagName.toUpperCase())>-1)return function(e){return void 0===e?(n.select(),t.None):m.select(n,e)};if("query"==a&&9==n.nodeType){f={__class__:v,_keys:[],_values:{}};var d=location.search.substr(1).split("&");if(""!=location.search)for(p=0;p<d.length;p++){_=d[p].search("=");var g=[d[p].substr(0,_),d[p].substr(_+1)],$=decodeURIComponent(g[0]),y=decodeURIComponent(g[1]);f._keys.indexOf($)>-1?f._values[$].push(y):(f._keys.push($),f._values[$]=[y])}return f}var b,w,x,k=e.get_class(n),j=n[a];if(void 0!==j&&n.__class__&&"browser.html"!=k.__module__&&"browser.svg"!=k.__module__&&!k.$webcomponent)if(null!==(B=e.$getattr(k,a,null))){if(j=B,"function"==typeof B)return j.bind(n,n)}else{var B,E=n.__class__.__bases__,N=!0;for(var S of E)if("browser.html"==S.__module__){N=!1;break}if(N)if((B=e.$getattr(n.__class__,a,t.None))!==t.None){var T=e.frame_obj.frame.$lineno;console.info("Warning: line "+T+", "+n.tagName+" element has instance attribute '"+a+"' set. Attribute of class "+e.class_name(n)+" is ignored.")}}if(void 0===j){if(!n.tagName)return r.__getattribute__(n,a);var O=customElements.get(n.tagName.toLowerCase());if(void 0!==O&&void 0!==O.$cls){var A=n.__class__;n.__class__=O.$cls;try{var f=t.object.__getattribute__(n,a);return n.__class__=A,f}catch(err){if(n.__class__=A,!e.is_exc(err,[t.AttributeError]))throw err}}}if(void 0!==(f=j)){if(null===f)return f;if("function"==typeof f){if(n.__class__&&n.__class__.$webcomponent)if(null!==e.$getattr(n.__class__,a,null))return f.bind(n);if(f.$is_func)return f;var I=(w=f,x=n,function(){for(var t=[],r=0;r<arguments.length;r++){var n=arguments[r];if("function"==typeof n){if(n.$cache)var a=n.$cache;else a=function(t){return function(){try{return t.apply(null,arguments)}catch(err){e.handle_error(err)}}}(n),n.$cache=a;t.push(a)}else t.push(e.pyobj2jsobj(n))}var o=w.apply(x,t);return e.$JS2Py(o)});return I.$infos={__name__:a,__qualname__:a},I.$is_func=!0,I.$python_function=f,I}return"style"==a?e.JSObj.$factory(n[a]):Array.isArray(f)?f:"number"==typeof(b=f)?Number.isSafeInteger(b)?b:Number.isInteger(b)?e.fast_long_int(BigInt(b+"")):e.fast_float(b):b}return r.__getattribute__(n,a)},m.__getitem__=function(e,r){if(9==e.nodeType){if("string"==typeof r.valueOf()){if(a=e.getElementById(r))return m.$factory(a);throw t.KeyError.$factory(r)}try{for(var n=e.getElementsByTagName(r.__name__),a=[],o=0;o<n.length;o++)a.push(m.$factory(n[o]));return a}catch(err){throw t.KeyError.$factory(t.str.$factory(r))}}else{if(("number"==typeof r||"boolean"==typeof r)&&"function"==typeof e.item){var s=t.int.$factory(r);if(s<0&&(s+=e.length),void 0===(a=m.$factory(e.item(s))))throw t.KeyError.$factory(r);return a}if("string"==typeof r&&e.attributes&&"function"==typeof e.attributes.getNamedItem){var i=e.attributes.getNamedItem(r);if(i)return i.value;throw t.KeyError.$factory(r)}}},m.__hash__=function(t){return void 0===t.__hashvalue__?t.__hashvalue__=e.$py_next_hash--:t.__hashvalue__},m.__iter__=function(t){if(void 0!==t.length&&"function"==typeof t.item)for(var r=[],n=0,a=t.length;n<a;n++)r.push(m.$factory(t.item(n)));else if(void 0!==t.childNodes)for(r=[],n=0,a=t.childNodes.length;n<a;n++)r.push(m.$factory(t.childNodes[n]));return e.$iter(r)},m.__le__=function(r,n){if(9==r.nodeType&&(r=r.body),e.$isinstance(n,y))for(var a=0;a<n.children.length;a++)r.appendChild(n.children[a]);else if("string"==typeof n||"number"==typeof n){var o=document.createTextNode(n.toString());r.appendChild(o)}else if(n instanceof Node)r.appendChild(n);else try{t.list.$factory(n).forEach((function(e){m.__le__(r,e)}))}catch(err){throw t.TypeError.$factory("can't add '"+e.class_name(n)+"' object to DOMNode instance")}return r},m.__len__=function(e){return e.length},m.__mul__=function(r,n){if(e.$isinstance(n,t.int)&&n.valueOf()>0){for(var a=y.$factory(),o=a.children.length,s=0;s<n.valueOf();s++)a.children[o++]=m.clone(r);return a}throw t.ValueError.$factory("can't multiply "+r.__class__+"by "+n)},m.__ne__=function(e,t){return!m.__eq__(e,t)},m.__next__=function(e){if(e.$counter++,e.$counter<e.childNodes.length)return m.$factory(e.childNodes[e.$counter]);throw t.StopIteration.$factory("StopIteration")},m.__radd__=function(e,t){var r=y.$factory(),n=m.$factory(document.createTextNode(t));return r.children=[n,e],r},m.__str__=m.__repr__=function(e){var t=e.attributes,r=[];if(void 0!==t){r=[];for(var n=0;n<t.length;n++)r.push(t[n].name+'="'+e.getAttributeNS(null,t[n].name)+'"')}var a=Object.getPrototypeOf(e);if(a){var o=a.constructor.name;if(void 0===o){var s=a.constructor.toString();o=s.substring(8,s.length-1)}return r.splice(0,0,o),"<"+r.join(" ")+">"}return"<DOMNode object type '"+l[e.nodeType]+"' name '"+e.nodeName+"'>"},m.__setattr__=function(r,n,o){switch(n){case"left":case"top":case"width":case"height":if(e.$isinstance(o,[t.int,t.float])&&1==r.nodeType)return r.style[n]=o+"px",t.None;throw t.ValueError.$factory(n+" value should be an integer or float, not "+e.class_name(o))}if(void 0!==m["set_"+n])return m["set_"+n](r,o);function s(t){console.log(t);var r=e.frame_obj.frame;if(r)if(e.get_option("debug")>0){var n=r.__file__,a=r.$lineno;if(console.log("module",r[2],"line",a),e.file_cache.hasOwnProperty(n)){var o=e.file_cache[n];console.log(o.split("\n")[a-1])}}else console.log("module",r[2])}for(var i=Object.getPrototypeOf(r),_=0;i&&i!==Object.prototype&&_++<10;){var l=Object.getOwnPropertyDescriptors(i);if(!l||"function"!=typeof l.hasOwnProperty)break;if(l.hasOwnProperty(n)){l[n].writable||void 0!==l[n].set||s("Warning: property '"+n+"' is not writable. Use element.attrs['"+n+"'] instead.");break}i=Object.getPrototypeOf(i)}return r.style&&void 0!==r.style[n]&&"src"!=n&&s("Warning: '"+n+"' is a property of element.style"),r[n]=a(o),t.None},m.__setitem__=function(e,t,r){"number"==typeof t?e.childNodes[t]=r:"string"==typeof t&&e.attributes&&(e instanceof SVGElement?e.setAttributeNS(null,t,r):"function"==typeof e.setAttribute&&e.setAttribute(t,r))},m.abs_left={__get__:function(e){return o(e).left},__set__:function(){throw t.AttributeError.$factory("'DOMNode' objectattribute 'abs_left' is read-only")}},m.abs_top={__get__:function(e){return o(e).top},__set__:function(){throw t.AttributeError.$factory("'DOMNode' objectattribute 'abs_top' is read-only")}},m.attach=m.__le__,m.bind=function(r,n){var a=e.args("bind",4,{self:null,event:null,func:null,options:null},["self","event","func","options"],arguments,{func:t.None,options:t.None},null,null),o=(r=a.self,n=a.event,a.func),s=a.options;if(o===t.None)return function(e){return m.bind(r,n,e)};var i,_=(i=o,function(t){try{return e.$call(i)(p(t))}catch(err){if(void 0!==err.__class__)e.handle_error(err);else try{e.$getattr(e.get_stderr(),"write")(err)}catch(r){console.log(err)}}});return _.$infos=o.$infos,_.$attrs=o.$attrs||{},_.$func=o,"boolean"==typeof s?r.addEventListener(n,_,s):s.__class__===t.dict?r.addEventListener(n,_,t.dict.$to_obj(s)):s===t.None&&r.addEventListener(n,_,!1),r.$events=r.$events||{},r.$events[n]=r.$events[n]||[],r.$events[n].push([o,_]),r},m.children=function(e){var t=[];for(var r of(9==e.nodeType&&(e=e.body),e.children))t.push(m.$factory(r));return t},m.child_nodes=function(e){var t=[];for(var r of(9==e.nodeType&&(e=e.body),e.childNodes))t.push(m.$factory(r));return t},m.clear=function(t){e.args("clear",1,{self:null},["self"],arguments,{},null,null);for(9==t.nodeType&&(t=t.body);t.firstChild;)t.removeChild(t.firstChild)},m.Class=function(e){return void 0!==e.className?e.className:t.None},m.class_name=function(e){return m.Class(e)},m.clone=function(e){var t=m.$factory(e.cloneNode(!0)),r=e.$events||{};for(var n in r){r[n].forEach((function(e){var r=e[0];m.bind(t,n,r)}))}return t},m.closest=function(r,n){e.args("closest",2,{self:null,selector:null},["self","selector"],arguments,{},null,null);var a=r.closest(n);if(null===a)throw t.KeyError.$factory("no parent with selector "+n);return m.$factory(a)},m.bindings=function(r){var n=e.empty_dict();for(var a in r.$events)t.dict.$setitem(n,a,r.$events[a].map((e=>e[1])));return n},m.events=function(e,t){e.$events=e.$events||{};var r=e.$events[t]=e.$events[t]||[],n=[];return r.forEach((function(e){n.push(e[1])})),n},m.get=function(r){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var o=e.args("get",0,{},[],n,{},null,"kw").kw.$jsobj;if(void 0!==o.name){if(void 0===r.getElementsByName)throw t.TypeError.$factory("DOMNode object doesn't support selection by name");return g(r.getElementsByName(o.name))}if(void 0!==o.tag){if(void 0===r.getElementsByTagName)throw t.TypeError.$factory("DOMNode object doesn't support selection by tag name");return g(r.getElementsByTagName(o.tag))}if(void 0!==o.classname){if(void 0===r.getElementsByClassName)throw t.TypeError.$factory("DOMNode object doesn't support selection by class name");return g(r.getElementsByClassName(o.classname))}if(void 0!==o.id){if(void 0===r.getElementById)throw t.TypeError.$factory("DOMNode object doesn't support selection by id");var s=document.getElementById(o.id);return s?[m.$factory(s)]:[]}if(void 0!==o.selector){if(void 0===r.querySelectorAll)throw t.TypeError.$factory("DOMNode object doesn't support selection by selector");return g(r.querySelectorAll(o.selector))}return[]},m.getContext=function(r){if(!("getContext"in r))throw t.AttributeError.$factory("object has no attribute 'getContext'");return function(t){return e.JSObj.$factory(r.getContext(t))}},m.getSelectionRange=function(e){if(void 0!==e.getSelectionRange)return e.getSelectionRange.apply(null,arguments)},m.html=function(e){var r=e.innerHTML;return void 0===r&&(r=9==e.nodeType&&e.body?e.body.innerHTML:t.None),r},m.index=function(e,t){var r;r=void 0===t?e.parentElement.childNodes:e.parentElement.querySelectorAll(t);for(var n=-1,a=0;a<r.length;a++)if(r[a]===e){n=a;break}return n},m.inside=function(e,t){for(var r=e;;){if(t===r)return!0;if(!(r=r.parentNode))return!1}},m.parent=function(e){return e.parentElement?m.$factory(e.parentElement):t.None},m.reset=function(e){return function(){e.reset()}},m.scrolled_left={__get__:function(e){return o(e).left-document.scrollingElement.scrollLeft},__set__:function(){throw t.AttributeError.$factory("'DOMNode' objectattribute 'scrolled_left' is read-only")}},m.scrolled_top={__get__:function(e){return o(e).top-document.scrollingElement.scrollTop},__set__:function(){throw t.AttributeError.$factory("'DOMNode' objectattribute 'scrolled_top' is read-only")}},m.select=function(e,r){if(void 0===e.querySelectorAll)throw t.TypeError.$factory("DOMNode object doesn't support selection by selector");return g(e.querySelectorAll(r))},m.select_one=function(e,r){if(void 0===e.querySelector)throw t.TypeError.$factory("DOMNode object doesn't support selection by selector");var n=e.querySelector(r);return null===n?t.None:m.$factory(n)},m.setSelectionRange=function(e){return void 0!==this.setSelectionRange?(t=this,function(){return t.setSelectionRange.apply(t,arguments)}):void 0!==this.createTextRange?function(e){return function(t,r){null==r&&(r=t);var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",r),n.select()}}(this):void 0;var t},m.set_class_name=function(e,t){e.setAttribute("class",t)},m.set_html=function(e,r){9==e.nodeType&&(e=e.body),e.innerHTML=t.str.$factory(r)},m.set_style=function(r,n){if("string"!=typeof n){if(!e.$isinstance(n,t.dict))throw t.TypeError.$factory("style must be str or dict, not "+e.class_name(n));for(var a=t.list.$factory(t.dict.items(n)),o=0;o<a.length;o++){var s=a[o][0],i=a[o][1];if("float"==s.toLowerCase())r.style.cssFloat=i,r.style.styleFloat=i;else{switch(s){case"top":case"left":case"width":case"height":case"borderWidth":e.$isinstance(i,t.int)&&(i+="px")}r.style[s]=i}}}else r.style=n},m.set_text=function(e,r){9==e.nodeType&&(e=e.body),e.innerText=t.str.$factory(r),e.textContent=t.str.$factory(r)},m.set_value=function(e,r){e.value=t.str.$factory(r)},m.submit=function(e){return function(){e.submit()}},m.text=function(e){9==e.nodeType&&(e=e.body);var r=e.innerText||e.textContent;return null===r&&(r=t.None),r},m.toString=function(e){return void 0===e?"DOMNode":e.nodeName},m.trigger=function(e,t){if(e.fireEvent)e.fireEvent("on"+t);else{var r=document.createEvent("Events");r.initEvent(t,!0,!1),e.dispatchEvent(r)}},m.unbind=function(r,n){if(r.$events=r.$events||{},r.$events==={})return t.None;if(void 0===n){for(var n in r.$events)m.unbind(r,n);return t.None}if(void 0===r.$events[n]||0==r.$events[n].length)return t.None;var a=r.$events[n];if(2==arguments.length){for(var o=0;o<a.length;o++){var s=a[o][1];r.removeEventListener(n,s,!1)}return r.$events[n]=[],t.None}for(o=2;o<arguments.length;o++){var i=!1;if(void 0===(c=(s=arguments[o]).$func)){for(var _=!1,l=0;l<a.length;l++)if(e.is_or_equals(a[l][0],s)){var c=s;_=!0;break}if(!_)throw t.TypeError.$factory("function is not an event callback")}for(l=0;l<a.length;l++)if(e.$getattr(c,"__eq__")(a[l][0])){s=a[l][1];r.removeEventListener(n,s,!1),a.splice(l,1),i=!0;break}if(!i)throw t.KeyError.$factory("missing callback for event "+n)}},e.set_func_names(m,"builtins");var v=e.make_class("query");v.__contains__=function(e,t){return e._keys.indexOf(t)>-1},v.__getitem__=function(e,r){var n=e._values[r];if(void 0===n)throw t.KeyError.$factory(r);return 1==n.length?n[0]:n};var $=e.make_iterator_class("query string iterator");v.__iter__=function(e){return $.$factory(e._keys)},v.__setitem__=function(e,r,n){return e._values[r]=[n],t.None},v.__str__=v.__repr__=function(e){var t=[];for(var r in e._values)for(const n of e._values[r])t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return 0==t.length?"":"?"+t.join("&")},v.getfirst=function(e,r,n){var a=e._values[r];return void 0===a?void 0===n?t.None:n:a[0]},v.getlist=function(e,t){var r=e._values[t];return void 0===r?[]:r},v.getvalue=function(e,r,n){try{return v.__getitem__(e,r)}catch(err){return void 0===n?t.None:n}},v.keys=function(e){return e._keys},e.set_func_names(v,"<dom>");var y=e.make_class("TagSum",(function(){return{__class__:y,children:[],toString:function(){return"(TagSum)"}}}));y.appendChild=function(e,t){e.children.push(t)},y.__add__=function(r,n){return e.get_class(n)===y?r.children=r.children.concat(n.children):e.$isinstance(n,[t.str,t.int,t.float,t.dict,t.set,t.list])?r.children=r.children.concat(m.$factory(document.createTextNode(n))):r.children.push(n),r},y.__radd__=function(e,t){var r=y.$factory();return r.children=e.children.slice(),r.children.splice(0,0,m.$factory(document.createTextNode(t))),r},y.__repr__=function(e){for(var t="<object TagSum> ",r=0;r<e.children.length;r++)t+=e.children[r],"[object Text]"==e.children[r].toString()&&(t+=" ["+e.children[r].textContent+"]\n");return t},y.__str__=y.toString=y.__repr__,y.clone=function(e){for(var t=y.$factory(),r=0;r<e.children.length;r++)t.children.push(e.children[r].cloneNode(!0));return t},e.set_func_names(y,"<dom>"),e.TagSum=y;var b=e.JSObj.$factory(n);b.get_postMessage=function(r,a){if(e.$isinstance(r,t.dict)){var o={__class__:"dict"};t.list.$factory(t.dict.items(r)).forEach((function(e){o[e[0]]=e[1]})),r=o}return n.postMessage(r,a)},e.DOMNode=m,e.win=b}(__BRYTHON__),function(e){e.pattern_match=function(t,r){var n=e.builtins,a=e.frame_obj.frame[1];function o(e,t){e.alias&&(a[e.alias]=t)}if(r.sequence){if(e.$isinstance(t,[n.str,n.bytes,n.bytearray]))return!1;var s,i;e.imported["collections.abc"]&&(s=e.imported["collections.abc"].Sequence),e.imported.collections&&(i=e.imported.collections.deque);var _=!1,l=t.__class__||e.get_class(t);for(var c of[l].concat(l.__bases__||[])){if(c.$match_sequence_pattern){_=!0;break}if(c===s||c==i){_=!0;break}}if(!_&&s&&(_=n.issubclass(l,s)),!_)return!1;if(1==r.sequence.length&&"_"==r.sequence[0].capture_starred)return!0;var u=n.len(t),f=0;for(var p of r.sequence)p.capture_starred||f++;if(u<f)return!1;if(0==u&&0==r.sequence.length)return!0;for(var h=n.iter(t),d=e.$getattr(h,"__next__"),m=[],g=0,v=0,$=r.sequence.length;v<$;v++)if(r.sequence[v].capture_starred){if("_"==r.sequence[v].capture_starred&&v==$-1)return o(r,t),!0;for(var y=u-g-$+v+1,b=0;b<y;b++)m.push(d());a[r.sequence[v].capture_starred]=m,g+=y}else{var w=d();if(!e.pattern_match(w,r.sequence[v]))return!1;g++}return g==u&&(o(r,t),!0)}if(r.group){if(1!=r.group.length)return r.sequence=r.group,e.pattern_match(t,r);if(e.pattern_match(t,r.group[0]))return o(r,t),!0}if(r.or){for(var p of r.or)if(e.pattern_match(t,p))return o(r,t),!0;return!1}if(r.mapping){var x;_=!1;e.imported["collections.abc"]&&(x=e.imported["collections.abc"].Mapping);l=t.__class__||e.get_class(t);for(var c of[l].concat(l.__bases__||[]))if(c.$match_mapping_pattern||c===x){_=!0;break}if(!_&&x&&(_=n.issubclass(l,x)),!_)return!1;var k=[],j=[];for(var p of r.mapping){var B=p[0],E=p[1];if(B.hasOwnProperty("literal"))var N=B.literal;else if(B.hasOwnProperty("value"))N=B.value;if(n.list.__contains__(j,N))throw n.ValueError.$factory("mapping pattern checks duplicate key ("+n.str.$factory(N)+")");j.push(N);var S=e.make_class("missing",(function(){return{__class__:S}}));try{if((M=e.$call(e.$getattr(t,"get"))(N,S))===S)return!1;if(!e.pattern_match(M,E))return!1;k.push(N)}catch(err){if(e.is_exc(err,[n.KeyError]))return!1;throw err}}if(r.rest){var T=e.empty_dict();for(h=n.iter(t);;){try{var O=n.next(h)}catch(err){if(e.is_exc(err,[n.StopIteration]))return a[r.rest]=T,!0;throw err}n.list.__contains__(k,O)||n.dict.__setitem__(T,O,e.$getitem(t,O))}}return!0}if(r.class){l=r.class;if(!e.$isinstance(l,n.type))throw n.TypeError.$factory("called match pattern must be a type");if(!e.$isinstance(t,l))return!1;if(r.args.length>0){if([n.bool,n.bytearray,n.bytes,n.dict,n.float,n.frozenset,n.int,n.list,n.set,n.str,n.tuple].indexOf(l)>-1){if(r.args.length>1)throw n.TypeError.$factory("for builtin type "+e.class_name(t)+", a single positional subpattern is accepted");return e.pattern_match(t,r.args[0])}var A=e.$getattr(l,"__match_args__",e.fast_tuple([]));if(!e.$isinstance(A,n.tuple))throw n.TypeError.$factory("__match_args__() did not return a tuple");if(r.args.length>A.length)throw n.TypeError.$factory("__match_args__() returns "+A.length+" names but "+r.args.length+" positional arguments were passed");for(v=0,$=r.args.length;v<$;v++){var I=r.args[v],C=A[v];if("string"!=typeof C)throw n.TypeError.$factory("item in __match_args__ is not a string: "+C);if(r.keywords.hasOwnProperty(C))throw n.TypeError.$factory("__match_arg__ item "+C+" was passed as keyword pattern");r.keywords[C]=I}}for(var N in r.keywords){var M;if(null===(M=e.$getattr(t,N,null)))return!1;if(!e.pattern_match(M,r.keywords[N]))return!1}return o(r,t),!0}if(r.capture)return"_"!=r.capture&&(a[r.capture]=t),o(r,t),!0;if(r.capture_starred)return a[r.capture_starred]=e.$list(t),!0;if(r.hasOwnProperty("literal")){var R=r.literal;return R===n.None||R===n.True||R===n.False?e.$is(t,R):!!e.rich_comp("__eq__",t,R)&&(o(r,t),!0)}if(r.hasOwnProperty("value")){if(e.rich_comp("__eq__",t,r.value))return o(r,t),!0}else if(t==r)return!0;return!1}}(__BRYTHON__),function(e){var t=e.builtins,r=e.coroutine=e.make_class("coroutine");r.close=function(e){},r.send=function(n){if(!e.$isinstance(n,r)){var a="object is not a coroutine";throw"function"==typeof n&&n.$infos&&n.$infos.__code__&&128&n.$infos.__code__.co_flags&&(a+=". Maybe you forgot to call the async function ?"),t.TypeError.$factory(a)}var o=n.$func.apply(null,n.$args);return o.then((function(){n.$frame_obj&&(e.frame_obj=n.$frame_obj)})).catch((function(t){n.$frame_obj&&(e.frame_obj=n.$frame_obj)})),o},r.__repr__=r.__str__=function(e){return e.$func.$infos?"<coroutine "+e.$func.$infos.__name__+">":"<coroutine object>"},e.set_func_names(r,"builtins"),e.make_async=e=>{if(e.$is_genfunc)return e;var t=function(){return{__class__:r,$args:arguments,$func:e}};return t.$infos=e.$infos,t.$is_func=!0,t.$is_async=!0,t},e.promise=function(n){if(n.__class__===r)return n.$frame_obj=e.frame_obj,r.send(n);if("function"==typeof n)return n();if(n instanceof Promise||"function"==typeof n.then)return n;var a=e.$getattr(n,"__await__",null);if(null!==a){if(a=e.$call(a)(),null===e.$getattr(a,"__next__",null))throw t.TypeError.$factory(`__await__() returned non-iterator of type '${e.class_name(a)}'`);return a}throw t.TypeError.$factory(`object ${e.class_name(n)} can't be used in 'await' expression`)}}(__BRYTHON__),__BRYTHON__.builtin_class_flags={builtins:{1074287874:["SystemError","NotImplementedError","TypeError","BufferError","BlockingIOError","IndexError","BytesWarning","ConnectionError","OverflowError","AssertionError","ArithmeticError","BaseException","EOFError","Exception","NameError","PermissionError","TimeoutError","ZeroDivisionError","ConnectionRefusedError","ChildProcessError","SyntaxWarning","ProcessLookupError","EncodingWarning","StopIteration","UnicodeError","WindowsError","AttributeError","BrokenPipeError","KeyError","ConnectionAbortedError","ReferenceError","TabError","ImportError","EnvironmentError","FileExistsError","ImportWarning","OSError","UnboundLocalError","FloatingPointError","UserWarning","IndentationError","RecursionError","NotADirectoryError","Warning","LookupError","UnicodeWarning","ModuleNotFoundError","IOError","StopAsyncIteration","ResourceWarning","BaseExceptionGroup","SystemExit","ConnectionResetError","RuntimeError","FutureWarning","FileNotFoundError","RuntimeWarning","UnicodeTranslateError","UnicodeEncodeError","PendingDeprecationWarning","UnicodeDecodeError","DeprecationWarning","IsADirectoryError","SyntaxError","KeyboardInterrupt","MemoryError","GeneratorExit","ValueError","InterruptedError"],1073763848:["ExceptionGroup"],21500162:["bool"],4723970:["bytearray","float"],138941698:["bytes"],546050:["staticmethod","reversed","filter","property","super","enumerate","classmethod","map","zip"],529666:["object","complex"],541611330:["dict"],4740354:["set","frozenset"],21501186:["int"],38294818:["list"],545058:["memoryview"],528674:["range"],545026:["slice"],273159426:["str"],71849250:["tuple"],2156420354:["type"]},types:{545154:["async_generator","member_descriptor","classmethod_descriptor","getset_descriptor","coroutine","method-wrapper","generator","frame"],547202:["builtin_function_or_method"],545026:["traceback","cell"],528642:["code","NoneType","ellipsis","NotImplementedType"],678146:["function"],545090:["mappingproxy"],678274:["method_descriptor"],547074:["method"],546050:["module"],676226:["wrapper_descriptor"]}},function($B){var _b_=$B.builtins,update=$B.update_obj=function(e,t){for(attr in t)e[attr]=t[attr]},_window=globalThis,modules={},browser={$package:!0,$is_package:!0,__initialized__:!0,__package__:"browser",__file__:$B.brython_path.replace(new RegExp("/*$","g"),"")+"/Lib/browser/__init__.py",bind:function(){var e=$B.args("bind",3,{elt:null,evt:null,options:null},["elt","evt","options"],arguments,{options:_b_.None},null,null),t=e.options;if("boolean"==typeof t);else if(t.__class__===_b_.dict){var r={};for(var n of _b_.dict.$keys_string(t))r[n]=_b_.dict.$getitem_string(t,n);t=r}return function(r){if($B.get_class(e.elt)===$B.JSObj){return e.elt.addEventListener(e.evt,(function(e){try{return r($B.JSObj.$factory(e))}catch(err){$B.handle_error(err)}}),t),r}if($B.$isinstance(e.elt,$B.DOMNode))return $B.DOMNode.bind(e.elt,e.evt,r,t),r;if($B.$isinstance(e.elt,_b_.str)){for(var n=document.querySelectorAll(e.elt),a=0;a<n.length;a++)$B.DOMNode.bind($B.DOMNode.$factory(n[a]),e.evt,r,t);return r}try{for(var o=$B.$iter(e.elt);;)try{var s=_b_.next(o);$B.DOMNode.bind(s,e.evt,r)}catch(err){if($B.$isinstance(err,_b_.StopIteration))break;throw err}}catch(err){throw $B.$isinstance(err,_b_.AttributeError)&&$B.DOMNode.bind(e.elt,e.evt,r),err}return r}},console:self.console&&$B.JSObj.$factory(self.console),self:$B.win,win:$B.win,window:$B.win};browser.__path__=browser.__file__,$B.isNode?(delete browser.window,delete browser.win):$B.isWebWorker?(browser.is_webworker=!0,delete browser.window,delete browser.win,browser.self.send=self.postMessage,browser.document=_b_.property.$factory((function(){throw _b_.ValueError.$factory("'document' is not available in Web Workers")}),(function(e,t){browser.document=t}))):(browser.is_webworker=!1,update(browser,{alert:function(e){window.alert($B.builtins.str.$factory(e||""))},confirm:$B.JSObj.$factory(window.confirm),document:$B.DOMNode.$factory(document),doc:$B.DOMNode.$factory(document),DOMEvent:$B.DOMEvent,DOMNode:$B.DOMNode,load:function(script_url){var file_obj=$B.builtins.open(script_url),content=$B.$getattr(file_obj,"read")();console.log("content",content.length),eval(content)},load1:function(e,t){var r=document.createElement("SCRIPT");r.src=e,t&&r.addEventListener("load",(function(e){t()})),document.body.appendChild(r)},mouseCoords:function(e){return $B.JSObj.$factory($B.$mouseCoords(e))},prompt:function(e,t){return $B.JSObj.$factory(window.prompt(e,t||""))},reload:function(){var e=document.getElementsByTagName("script"),t=[];for(var r in e.forEach((function(e){void 0!==e.type&&"text/javascript"!=e.type||(t.push(e),e.src&&console.log(e.src))})),$B.imported)$B.imported[r].$last_modified?console.log("check",r,$B.imported[r].__file__,$B.imported[r].$last_modified):console.log("no date for mod",r)},run_script:function(){var e=$B.args("run_script",2,{src:null,name:null},["src","name"],arguments,{name:"script_"+$B.UUID()},null,null),t=document.createElement("script");t.setAttribute("id",e.name),$B.run_script(t,e.src,e.name,$B.script_path,!0)},URLParameter:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return t=null===t?"":decodeURIComponent(t[1].replace(/\+/g," ")),$B.builtins.str.$factory(t)}}),modules["browser.html"]=function(e){var t=e.builtins,r=e.TagSum;var n={};function a(a,o){if("string"!=typeof a)throw t.TypeError.$factory("html.maketag expects a string as argument");if(void 0!==n[a])throw t.ValueError.$factory("cannot reset class for "+a);var s=function(a){var o={__class__:t.type,__name__:a,__module__:"browser.html",__qualname__:a,__init__:function(){var n=e.args("__init__",1,{self:null},["self"],arguments,{},"args","kw"),a=n.self,o=n.args;if(1==o.length){var s=o[0];if(e.$isinstance(s,[t.str,t.int,t.float]))a.innerHTML=t.str.$factory(s);else if(s.__class__===r)for(var i=0,_=s.children.length;i<_;i++)a.appendChild(s.children[i]);else if(e.$isinstance(s,e.DOMNode))a.appendChild(s);else try{var l=t.list.$factory(s);for(var c of l)e.DOMNode.__le__(a,c)}catch(err){throw e.get_option("debug",err)>1&&(console.log(err,err.__class__,err.args),console.log("first",s),console.log(arguments)),err}}for(var u in n.kw.$jsobj){var f=n.kw.$jsobj[u];if("on"==u.toLowerCase().substr(0,2))e.DOMNode.__setattr__(a,u,f);else if("style"==u.toLowerCase())e.DOMNode.set_style(a,f);else if(!1!==f)try{u=e.imported["browser.html"].attribute_mapper(u),a.setAttribute(u,e.pyobj2jsobj(f))}catch(err){throw t.ValueError.$factory("can't set attribute "+u)}}}};return o.__mro__=[e.DOMNode,e.builtins.object],o.__new__=function(e){var t=document.createElement(a);return e!==n[a]&&(t.__class__=e),t},o.__rmul__=function(t,r){return e.DOMNode.__mul__(t,r)},e.set_func_names(o,"browser.html"),o}(a);return s.$factory=function(t,r){return n=t,function(){if("SVG"==n.__name__)var t=e.DOMNode.$factory(document.createElementNS("http://www.w3.org/2000/svg","svg"),!0);else try{t=document.createElement(n.__name__)}catch(err){throw console.log("error "+err),console.log("creating element",n.__name__),err}var r=e.$getattr(n,"__init__",null);return null!==r&&r(t,...arguments),t};var n}(s),n[a]=s,t.dict.$setitem(n.tags,a,n[a]),s}for(var o of(n.tags=e.empty_dict(),["A","ABBR","ACRONYM","ADDRESS","APPLET","AREA","B","BASE","BASEFONT","BDO","BIG","BLOCKQUOTE","BODY","BR","BUTTON","CAPTION","CENTER","CITE","CODE","COL","COLGROUP","DD","DEL","DFN","DIR","DIV","DL","DT","EM","FIELDSET","FONT","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HEAD","HR","HTML","I","IFRAME","IMG","INPUT","INS","ISINDEX","KBD","LABEL","LEGEND","LI","LINK","MAP","MENU","META","NOFRAMES","NOSCRIPT","OBJECT","OL","OPTGROUP","OPTION","P","PARAM","PRE","Q","S","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRIKE","STRONG","STYLE","SUB","SUP","SVG","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TITLE","TR","TT","U","UL","VAR","ARTICLE","ASIDE","AUDIO","BDI","CANVAS","COMMAND","DATA","DATALIST","EMBED","FIGCAPTION","FIGURE","FOOTER","HEADER","KEYGEN","MAIN","MARK","MATH","METER","NAV","OUTPUT","PROGRESS","RB","RP","RT","RTC","RUBY","SECTION","SOURCE","TEMPLATE","TIME","TRACK","VIDEO","WBR","DETAILS","DIALOG","MENUITEM","PICTURE","SUMMARY"]))a(o);return n.maketag=a,n.attribute_mapper=function(e){return e.replace(/_/g,"-")},n}(__BRYTHON__)),modules.browser=browser,$B.UndefinedType=$B.make_class("UndefinedType",(function(){return $B.Undefined})),$B.UndefinedType.__mro__=[_b_.object],$B.UndefinedType.__bool__=function(e){return!1},$B.UndefinedType.__repr__=function(e){return"<Javascript undefined>"},$B.UndefinedType.__str__=$B.UndefinedType.__repr__,$B.Undefined={__class__:$B.UndefinedType},$B.set_func_names($B.UndefinedType,"javascript");var super_class=$B.make_class("JavascriptSuper",(function(){var e=_b_.super.$factory(),t=e.__thisclass__.__bases__[0];return function(){var r=new t.$js_func(...arguments);for(var n in console.log("obj from js constr",r),r)console.log("attr",n),e.__self_class__.__dict__[n]=$B.jsobj2pyobj(r[n]);return r}}));super_class.__getattribute__=function(e,t){return"__init__"==t||"__call__"==t?e.__init__:$B.$getattr(e.__self_class__,t)},$B.set_func_names(super_class,"javascript"),modules.javascript={this:function(){return void 0===$B.js_this?$B.builtins.None:$B.JSObj.$factory($B.js_this)},Array:$B.js_array,Date:self.Date&&$B.JSObj.$factory(self.Date),extends:function(e){if(!e.$js_func||!e.$js_func.toString().startsWith("class "))throw console.log(e),_b_.TypeError.$factory("argument of extend must be a Javascript class");return e.__class__=_b_.type,function(t){return t.__bases__.splice(0,0,e),t.__mro__.splice(0,0,e),t}},import_js:function(e,t){var r,n=$B.args("import_js",2,{url:null,alias:null},["url","alias"],arguments,{alias:_b_.None},null,null),a=(e=n.url,n.alias),o=new XMLHttpRequest;(o.open("GET",e,!1),o.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var n=this.responseText+"\nreturn $module",a=new Function(n);console.log("f",a,a+"");var o=a();if(void 0!==o){for(var s in r=$B.module.$factory(t),o)r[s]=$B.jsobj2pyobj(o[s]);r.__file__=e}else console.log(this.responseText),r=_b_.ImportError.$factory(`Javascript module at ${e} doesn't define $module`)}else r=_b_.ModuleNotFoundError.$factory(t)},o.send(),$B.$isinstance(r,_b_.BaseException))?$B.handle_error(r):(a===_b_.None&&((a=e.split(".")).length>1&&a.pop(),a=a.join("."),r.__name__=a),$B.imported[a]=r,$B.frame_obj.frame[1][a]=r)},import_modules:function(e,t,r){if(void 0===r&&(r=[]),!Array.isArray(e))throw _b_.TypeError.$factory(`first argument must be a list, got ${$B.class_name(e)}`);if(e.length>1){var n=e.shift();import(n).then((function(n){r.push(n),$B.imported.javascript.import_modules(e,t,r)})).catch($B.show_error)}else import(e[0]).then((function(e){return r.push(e),$B.$call(t).apply(null,r)})).catch($B.show_error)},import_scripts:function(e,t,r){if(console.log("import scripts",e),void 0===r&&(r=[]),!Array.isArray(e))throw _b_.TypeError.$factory(`first argument must be a list, got ${$B.class_name(e)}`);if(!(e.length>0))return console.log("appel callback",r),$B.$call(t).apply(null,r);var n=e.shift(),a=document.createElement("script");a.src=n,a.addEventListener("load",(function(n){console.log("script loaded"),r.push(a),$B.imported.javascript.import_scripts(e,t,r)})),document.body.appendChild(a)},JSObject:$B.JSObj,JSON:{__class__:$B.make_class("JSON"),parse:function(){return $B.structuredclone2pyobj(JSON.parse.apply(this,arguments))},stringify:function(e,t,r){return JSON.stringify($B.pyobj2structuredclone(e,!1),$B.JSObj.$factory(t),r)}},jsobj2pyobj:function(e){return $B.jsobj2pyobj(e)},load:function(script_url){console.log('"javascript.load" is deprecrated. Use browser.load instead.');var file_obj=$B.builtins.open(script_url),content=$B.$getattr(file_obj,"read")();eval(content)},Math:self.Math&&$B.JSObj.$factory(self.Math),NULL:null,NullType:$B.make_class("NullType"),Number:self.Number&&$B.JSObj.$factory(self.Number),py2js:function(e,t){void 0===t&&(t="__main__"+$B.UUID());var r=$B.py2js({src:e,filename:"<string>"},t,t,$B.builtins_scope).to_js();return $B.format_indent(r,0)},pyobj2jsobj:function(e){return $B.pyobj2jsobj(e)},RegExp:self.RegExp&&$B.JSObj.$factory(self.RegExp),String:self.String&&$B.JSObj.$factory(self.String),super:super_class,UNDEFINED:$B.Undefined,UndefinedType:$B.UndefinedType},modules.javascript.NullType.__module__="javascript",modules.javascript.NullType.__eq__=function(e,t){return null===t||t===$B.Undefined},$B.set_func_names(modules.javascript.NullType,"javascript"),modules.javascript.UndefinedType.__module__="javascript";var $io=$B.$io=$B.make_class("io",(function(e){return{__class__:$io,out:e,encoding:"utf-8"}}));$io.flush=function(e){e.buf&&(console[e.out](e.buf.join("")),e.buf=[])},$io.write=function(e,t){if(void 0===e.buf&&(e.buf=[]),"string"!=typeof t)throw _b_.TypeError.$factory("write() argument must be str, not "+$B.class_name(t));return e.buf.push(t),_b_.None};var _b_=$B.builtins;modules._sys={_getframe:function(){for(var e=$B.args("_getframe",1,{depth:null},["depth"],arguments,{depth:0},null,null).depth,t=$B.frame_obj,r=0;r<e;r++)t=t.prev;var n=t.frame;return n.$pos=$B.count_frames()-e-1,n},breakpointhook:function(){var e,t,r,n,a=$B.$options.breakpoint;void 0===a&&(a="pdb.set_trace"),[e,t,r]=_b_.str.rpartition(a,"."),""==t&&(e="builtins");try{$B.$import(e),n=$B.$getattr($B.imported[e],r)}catch(err){return console.warn("cannot import breakpoint",a),_b_.None}return $B.$call(n).apply(null,arguments)},exc_info:function(){for(var e,t=$B.frame_obj;null!==t;){if(e=t.frame[1].$current_exception)return _b_.tuple.$factory([e.__class__,e,$B.$getattr(e,"__traceback__")]);t=t.prev}return _b_.tuple.$factory([_b_.None,_b_.None,_b_.None])},excepthook:function(e,t,r){$B.handle_error(t)},exception:function(){for(var e,t=$B.frame_obj;null!==t;){if(void 0!==(e=t.frame[1].$current_exception))return e;t=t.prev}return _b_.None},float_repr_style:"short",getdefaultencoding:function(){return"utf-8"},getrecursionlimit:function(){return $B.recursion_limit},getrefcount:function(){return 0},gettrace:function(){return $B.tracefunc||_b_.None},getunicodeinternedsize:function(){return 0},last_exc:_b_.property.$factory((function(){return $B.imported._sys.exception()}),(function(e){$B.frame_obj.frame.$current_exception=e})),modules:_b_.property.$factory((function(){return $B.obj_dict($B.imported)}),(function(e,t){throw _b_.TypeError.$factory("Read only property 'sys.modules'")})),path:_b_.property.$factory((function(){var e=$B.get_filename_for_import();return $B.import_info[e].path}),(function(e,t){var r=$B.get_filename_for_import();$B.import_info[r].path=t})),meta_path:_b_.property.$factory((function(){var e=$B.get_filename();return $B.import_info[e].meta_path}),(function(e,t){var r=$B.get_filename();$B.import_info[r].meta_path=t})),path_hooks:_b_.property.$factory((function(){var e=$B.get_filename();return $B.import_info[e].path_hooks}),(function(e,t){var r=$B.get_filename();$B.import_info[r].path_hooks=t})),path_importer_cache:_b_.property.$factory((function(){return _b_.dict.$factory($B.JSObj.$factory($B.path_importer_cache))}),(function(e,t){throw _b_.TypeError.$factory("Read only property 'sys.path_importer_cache'")})),setrecursionlimit:function(e){$B.recursion_limit=e},settrace:function(){var e=$B.args("settrace",1,{tracefunc:null},["tracefunc"],arguments,{},null,null);return $B.tracefunc=e.tracefunc,$B.frame_obj.frame.$f_trace=$B.tracefunc,$B.tracefunc.$current_frame_id=$B.frame_obj.frame[0],_b_.None},stderr:void 0!==console.error?$io.$factory("error"):$io.$factory("log"),stdout:$io.$factory("log"),stdin:_b_.property.$factory((function(){return $B.stdin}),(function(e,t){$B.stdin=t})),vfs:_b_.property.$factory((function(){return $B.hasOwnProperty("VFS")?$B.obj_dict($B.VFS):_b_.None}),(function(){throw _b_.TypeError.$factory("Read only property 'sys.vfs'")}))};var WarningMessage=$B.make_class("WarningMessage",(function(){var e=$B.make_args("WarningMessage",8,{message:null,category:null,filename:null,lineno:null,file:null,line:null,source:null},["message","category","filename","lineno","file","line","source"],arguments,{file:_b_.None,line:_b_.None,source:_b_.None},null,null);return{__class__:WarningMessage,message:e.message,category:e.category,filename:e.filename,lineno:e.lineno,file:e.file,line:e.line,source:e.source,_category_name:_b_.bool.$factory(e.category)?$B.$getattr(e.category,"__name__"):_b_.None}}));modules._warnings={_defaultaction:"default",_filters_mutated:function(){},_onceregistry:$B.empty_dict(),filters:[$B.fast_tuple(["default",_b_.None,_b_.DeprecationWarning,"__main__",0]),$B.fast_tuple(["ignore",_b_.None,_b_.DeprecationWarning,_b_.None,0]),$B.fast_tuple(["ignore",_b_.None,_b_.PendingDeprecationWarning,_b_.None,0]),$B.fast_tuple(["ignore",_b_.None,_b_.ImportWarning,_b_.None,0]),$B.fast_tuple(["ignore",_b_.None,_b_.ResourceWarning,_b_.None,0])],warn:function(e){var t,r=$B.args("warn",4,{message:null,category:null,stacklevel:null,source:null},["message","category","stacklevel","source"],arguments,{category:_b_.None,stacklevel:1,source:_b_.None},null,null),n=(e=r.message,r.category),a=r.stacklevel;if($B.$isinstance(e,_b_.Warning)&&(n=$B.get_class(e)),"error"==($B.imported.warnings?$B.imported.warnings.filters:modules._warnings.filters)[0][0]){var o=_b_.SyntaxError.$factory(e.args[0]);throw o.args[1]=[e.filename,e.lineno,e.offset,e.line],o.filename=e.filename,o.lineno=e.lineno,o.offset=e.offset,o.line=e.line,o}if(n===_b_.SyntaxWarning){var s=e.filename,i=e.lineno,_=e.text;t={__class__:WarningMessage,message:e,category:n,filename:e.filename,lineno:e.lineno,file:_b_.None,line:_b_.None,source:_b_.None,_category_name:n.__name__}}else{var l=Math.max(0,$B.count_frames()-a),c=$B.get_frame_at(l),u=(s=c.__file__,$B._frame.f_code.__get__(c)),f=(i=c.$lineno,$B.file_cache[s]);_=f?f.split("\n")[i-1]:null;t={__class__:WarningMessage,message:e,category:n,filename:e.filename||u.co_filename,lineno:e.lineno||i,file:_b_.None,line:_b_.None,source:_b_.None,_category_name:n.__name__}}if($B.imported.warnings)$B.imported.warnings._showwarnmsg_impl(t);else{var p="";s&&i&&(p+=`${s}:${i}: `),p+=$B.class_name(e)+": "+e.args[0],_&&(p+="\n    "+_.trim());var h=$B.get_stderr();$B.$getattr(h,"write")(p+"\n");var d=$B.$getattr(h,"flush",_b_.None);d!==_b_.None&&d()}},warn_explicit:function(){console.log("warn_explicit",arguments)}};var responseType={text:"text",binary:"arraybuffer",dataURL:"arraybuffer"};function handle_kwargs(e,t){var r,n=!1,a="text",o={},s={};for(var i in e.$jsobj)if("data"==i){var _=e.$jsobj[i];if("string"==typeof _)r=_;else if($B.$isinstance(_,_b_.bytes)){r=new ArrayBuffer(_.source.length);for(var l=new Int8Array(r),c=0,u=_.source.length;c<u;c++)l[c]=_.source[c]}else{if(_.__class__!==_b_.dict)throw _b_.TypeError.$factory("wrong type for data, expected dict, bytes or str, got "+$B.class_name(_));var f=[];for(var i of _b_.dict.$keys_string(_)){var p=_b_.dict.$getitem_string(_,i);f.push(encodeURIComponent(i)+"="+encodeURIComponent($B.pyobj2jsobj(p)))}r=f.join("&")}}else if("headers"==i){p=e.$jsobj[i];if(!$B.$isinstance(p,_b_.dict))throw _b_.ValueError.$factory("headers must be a dict, not "+$B.class_name(p));for(var i of _b_.dict.$keys_string(p))o[i.toLowerCase()]=_b_.dict.$getitem_string(p,i)}else if(i.startsWith("on")){var h=i.substr(2);"timeout"==h?s.func=e.$jsobj[i]:ajax.bind(self,h,e.$jsobj[i])}else"timeout"==i?s.seconds=e.$jsobj[i]:"cache"==i?n=e.$jsobj[i]:"format"==i&&(a=e.$jsobj[i]);return"post"==t&&(o.hasOwnProperty("Content-type")||(o["Content-Type"]="application/x-www-form-urlencoded")),{body:r,cache:n,format:a,timeout:s,headers:o}}var HTTPRequest=$B.make_class("Request");HTTPRequest.data=_b_.property.$factory((function(e){if("binary"==e.format){var t=new Uint8Array(e.response);return _b_.bytes.$factory(Array.from(t))}if("text"==e.format)return e.responseText;if("dataURL"==e.format){var r=btoa(String.fromCharCode.apply(null,new Uint8Array(e.response)));return"data:"+e.getResponseHeader("Content-Type")+";base64,"+r}})),HTTPRequest.response_headers=_b_.property.$factory((function(e){var t=e.getAllResponseHeaders();if(null===t)return _b_.None;var r=$B.empty_dict();t.length>0&&t.trim().split(/[\r\n]+/).forEach((function(e){var t=e.split(": "),n=t.shift(),a=t.join(": ");_b_.dict.$setitem(r,n,a)}));return r}));var Future=$B.make_class("Future",(function(){var e={},t=new Promise((function(t,r){e.resolve=t,e.reject=r}));return t._methods=e,t._done=!1,t.__class__=Future,t}));function load(e,t){for(var r in t.__class__=$B.module,t.__name__=e,$B.imported[e]=t,t)"function"==typeof t[r]&&(t[r].$infos={__module__:e,__name__:r,__qualname__:e+"."+r})}for(var attr in Future.done=function(){$B.args("done",1,{self:null},["self"],arguments,{},null,null);return!!self._done},Future.set_result=function(e,t){$B.args("set_result",2,{self:null,value:null},["self","value"],arguments,{},null,null);return e._done=!0,e._methods.resolve(t),_b_.None},Future.set_exception=function(e,t){$B.args("set_exception",2,{self:null,exception:null},["self","exception"],arguments,{},null,null);return e._done=!0,e._methods.reject(t),_b_.None},$B.set_func_names(Future,"browser.aio"),modules["browser.aio"]={ajax:function(){var e=$B.args("ajax",2,{method:null,url:null},["method","url"],arguments,{},null,"kw"),t=e.method.toUpperCase(),r=e.url,n=handle_kwargs(e.kw,"get");"GET"!=t||n.cache||(r=r+"?ts"+(new Date).getTime()+"=0"),n.body&&"GET"==t&&(r=r+(n.cache?"?":"&")+n.body);var a=function(){return new Promise((function(e,a){var o=new XMLHttpRequest;for(var s in o.open(t,r,!0),n.headers)o.setRequestHeader(s,n.headers[s]);o.format=n.format,o.responseType=responseType[n.format],o.onreadystatechange=function(){4==this.readyState&&(this.__class__=HTTPRequest,e(this))},n.body&&["POST","PUT","DELETE","PATCH"].indexOf(t)>-1?o.send(n.body):o.send()}))};return a.$infos={__name__:"ajax_"+t},{__class__:$B.coroutine,$args:[r,n],$func:a}},event:function(){var e=$B.args("event",1,{element:null},["element"],arguments,{},"names",null),t=e.element,r=e.names;return new Promise((function(e){var n=[];r.forEach((function(r){var a=function(r){n.forEach((function(e){$B.DOMNode.unbind(t,e[0],e[1])})),e($B.$DOMEvent(r))};n.push([r,a]),$B.DOMNode.bind(t,r,a)}))}))},get:function(){return $B.imported["browser.aio"].ajax.bind(null,"GET").apply(null,arguments)},iscoroutine:function(e){return e.__class__===$B.coroutine},iscoroutinefunction:function(e){return 0!=(128&e.$infos.__code__.co_flags)},post:function(){return $B.imported["browser.aio"].ajax.bind(null,"POST").apply(null,arguments)},run:function(e){var t=$B.show_error,r=t,n=$B.args("run",3,{coro:null,onsuccess:null,onerror:null},["coro","onsuccess","onerror"],arguments,{onsuccess:function(){$B.leave_frame()},onerror:t},null,null),a=(e=n.coro,n.onsuccess),o=n.onerror;r=o;if(o!==t)function r(e){try{o(e)}catch(err){t(err)}}var s=$B.frame_obj;return $B.coroutine.send(e).then(a).catch(r),$B.frame_obj=s,_b_.None},sleep:function(e){if(e.__class__===_b_.float)e=e.value;else if("number"!=typeof e)throw _b_.TypeError.$factory("'sleep' argument must be int or float, not "+$B.class_name(e));var t=function(){return new Promise((t=>setTimeout((function(){t(_b_.None)}),1e3*e)))};return t.$infos={__name__:"sleep"},{__class__:$B.coroutine,$args:[e],$func:t}},Future:Future,__getattr__:function(e){return $B.$import("_aio"),$B.$getattr($B.imported._aio,e)}},modules)load(attr,modules[attr]);$B.isWebWorker||$B.isNode||(modules.browser.html=modules["browser.html"],modules.browser.aio=modules["browser.aio"]);var _b_=$B.builtins;for(var attr in _b_.__builtins__=$B.module.$factory("__builtins__","Python builtins"),_b_)_b_.__builtins__[attr]=_b_[attr],$B.builtins_scope.binding[attr]=!0,_b_[attr].$is_class&&(_b_[attr].__bases__?_b_[attr].__bases__.__class__=_b_.tuple:_b_[attr].__bases__=$B.fast_tuple([_b_.object]));for(var name in _b_.__builtins__.__setattr__=function(e,t){_b_[e]=t},$B.method_descriptor.__getattribute__=$B.function.__getattribute__,$B.wrapper_descriptor.__getattribute__=$B.function.__getattribute__,_b_){var builtin=_b_[name];if(_b_[name].__class__===_b_.type)for(var key in _b_[name].__qualname__=name,_b_[name].__module__="builtins",_b_[name].__name__=name,_b_[name].$is_builtin_class=!0,$B.builtin_classes.push(_b_[name]),_b_[name]){var value=_b_[name][key];void 0===value||value.__class__||"function"!=typeof value||("__new__"==key?value.__class__=$B.builtin_function_or_method:key.startsWith("__")?value.__class__=$B.wrapper_descriptor:value.__class__=$B.method_descriptor,value.__objclass__=_b_[name])}else"function"==typeof builtin&&(builtin.$infos={__name__:name,__qualname__:name})}for(var attr in $B)Array.isArray($B[attr])&&($B[attr].__class__=_b_.list);$B.cell=$B.make_class("cell",(function(e){return{__class__:$B.cell,$cell_contents:e}})),$B.cell.cell_contents=$B.$call(_b_.property)((function(e){if(null===e.$cell_contents)throw _b_.ValueError.$factory("empty cell");return e.$cell_contents}),(function(e,t){e.$cell_contents=t}));var $comps=Object.values($B.$comps).concat(["eq","ne"]);for(var flag in $comps.forEach((function(e){var t="__"+e+"__";$B.cell[t]=function(e){return function(t,r){return $B.$isinstance(r,$B.cell)?null===t.$cell_contents?null===r.$cell_contents?"__eq__"==e:["__ne__","__lt__","__le__"].indexOf(e)>-1:null===r.$cell_contents?["__ne__","__gt__","__ge__"].indexOf(e)>-1:$B.rich_comp(e,t.$cell_contents,r.$cell_contents):_b_.NotImplemented}}(t)})),$B.set_func_names($B.cell,"builtins"),$B.builtin_class_flags.builtins)for(var key of $B.builtin_class_flags.builtins[flag])_b_[key]?_b_[key].__flags__=parseInt(flag):console.log("not in _b_",key);for(var flag in $B.builtin_class_flags.types)for(var key of $B.builtin_class_flags.types[flag])$B[key]&&($B[key].__flags__=parseInt(flag));$B.AST={__class__:_b_.type,__mro__:[_b_.object],__name__:"AST",__qualname__:"AST",$is_class:!0,$convert:function(e){if(void 0===e)return _b_.None;var t=e.constructor;if(t&&t.$name)return $B.create_python_ast_classes(),$B.python_ast_classes[t.$name].$factory(e);if(Array.isArray(e))return e.map($B.AST.$convert);if(!e.type)return["string","number"].indexOf(typeof e)>-1?e:e.$name?e.$name+"()":([_b_.None,_b_.True,_b_.False].indexOf(e)>-1||e.__class__||console.log("cannot handle",e),e);switch(e.type){case"int":var r=e.value[1],n=e.value[0],a=parseInt(r,n);return Number.isSafeInteger(a)||(a=$B.long_int.$factory(r,n)),a;case"float":return $B.fast_float(parseFloat(e.value));case"imaginary":return $B.make_complex(0,$B.AST.$convert(e.value));case"ellipsis":return _b_.Ellipsis;case"str":return e.is_bytes?_b_.bytes.$factory(e.value,"latin-1"):e.value;case"id":if(["False","None","True"].indexOf(e.value)>-1)return _b_[e.value]}}},$B.stdin={__class__:$io,__original__:!0,closed:!1,len:1,pos:0,read:function(){return""},readline:function(){return""}}}(__BRYTHON__),function(e){var t=e.builtins;function r(r,n,a){var o=t.SyntaxError.$factory(n);if(o.filename=Z.filename,"<string>"!=o.filename){var s=e.file_cache[o.filename].split("\n")[r.lineno-1];o.text=s}else o.text=t.None;throw o.lineno=r.lineno,o.offset=r.col_offset,a=a||r,o.end_lineno=a.end_lineno,o.end_offset=a.end_col_offset,o.args[1]=[o.filename,o.lineno,o.offset,o.text,o.end_lineno,o.end_offset],o.$frame_obj=e.frame_obj,null===e.frame_obj&&alert("tiens !"),o}function n(t){return void 0!==t.$id?t.$id:t.$id=e.UUID()}function a(e,t){e.lineno=t.lineno,e.col_offset=t.col_offset,e.end_lineno=t.end_lineno,e.end_col_offset=t.end_col_offset}function o(e,t,r,n){return void 0===n?`[${[e,t,r]}]`:`[${[e,t,r,n]}]`}function s(e){for(var t=e.length-1;e[t].parent;)t--;return e[t]}function i(e,t,r){this.name=e,this.locals=new Set,this.globals=new Set,this.nonlocals=new Set,this.freevars=new Set,this.type=t,this.ast=r}function _(e,t,r){var n=new i(e.name,e.type,t);return void 0!==r&&(n.id=r),n.parent=e,n}function l(e,t){if(void 0!==t&&!(t instanceof i))throw console.log("bizarre",t),Error("scope \xe9trange");var r;if(t){var n=e.indexOf(t);r=n>-1?e.slice(0,n+1):e.concat(t)}else r=e.slice();var a=[];for(var o of r)o.parent||a.push(o.name);return a.join("_").replace(/\./g,"_")}function c(e,t){return t===O?"_b_":"locals_"+l(e,t)}function u(e){var t=[];for(var r of e.slice().reverse())r.parent||"class"==r.type||(r.is_exec_scope&&t.push("$B.exec_scope"),t.push(c(e,r)));return t.push("_b_"),t}function f(t,r,n){if(n.startsWith("__")&&!n.endsWith("__"))for(var a=t.indexOf(r);a>=0;){if(t[a].ast instanceof e.ast.ClassDef){for(var o=t[a].name;o.length>0&&o.startsWith("_");)o=o.substr(1);return 0==o.length?n:"_"+o+n}a--}return n}function p(e,t,r){return c(e,t)+"."+f(e,t,r)}function h(t,r){var n=e.last(r),a=s(r);if(t=f(r,a,t),a.globals&&a.globals.has(t))n=r[0];else if(a.nonlocals.has(t))for(var o=r.indexOf(a)-1;o>=0;o--)if(r[o].locals.has(t))return r[o];return n.locals.add(t),n}e.decode_position=function(e){return e};var d=5,m=1,g=15,v=12,$=1,y=2;function b(e,t,r){return w(e,t,x(e,t),r)}function w(e,t,r,n){return r.found?p(t,r.found,e):"all"==r.resolve?`$B.resolve_in_scopes('${e}', [${u(t)}], [${n}])`:"local"==r.resolve?`$B.resolve_local('${e}', [${n}])`:"global"==r.resolve?`$B.resolve_global('${e}', _frame_obj)`:Array.isArray(r.resolve)?`$B.resolve_in_scopes('${e}', [${r.resolve}], [${n}])`:"own_class_name"==r.resolve?`$B.own_class_name('${e}')`:void 0}function x(r,a){var o,i;if(0==a.length)return{found:!1,resolve:"all"};var _=e.last(a),l=s(a);r=f(a,_,r);void 0===l.ast&&console.log("no ast",_),void 0===(i=a.symtable.table.blocks.get(n(l.ast)))&&(console.log("no block",_,_.ast,"id",n(l.ast)),console.log("scopes",a.slice()),console.log("symtable",a.symtable));try{o=t.dict.$getitem_string(i.symbols,r)}catch(err){return console.log("name",r,"not in symbols of block",i),console.log("symtables",a.symtable),console.log("scopes",a.slice()),{found:!1,resolve:"all"}}var c=[m,d].indexOf(o>>v&g)>-1;if(l.ast instanceof e.ast.ClassDef&&r==l.name)return{found:!1,resolve:"own_class_name"};if("__annotations__"==r&&(i.type==$&&l.has_annotation||i.type==y)&&(c=!0),c){var p=function(e,t){for(var r=t;;){if(r.locals.has(e))return{found:!0,scope:r};if(!r.parent)return{found:!1};r=r.parent}}(r,_);return p.found?{found:p.scope}:i.type==$||i.type==y?(_.needs_frames=!0,{found:!1,resolve:"global"}):{found:!1,resolve:"local"}}if(_.globals.has(r)){var h=a[0];return h.locals.has(r)?{found:h}:(_.needs_frames=!0,{found:!1,resolve:"global"})}if(_.nonlocals.has(r))for(var b=a.length-2;b>=0;b--)if((i=a.symtable.table.blocks.get(n(a[b].ast)))&&t.dict.$contains_string(i.symbols,r)){var w=t.dict.$getitem_string(i.symbols,r);if(!([m,d].indexOf(w>>v&g)>-1))continue;return{found:a[b]}}if(_.has_import_star)return c||(_.needs_frames=!0),{found:!1,resolve:c?"all":"global"};for(b=a.length-2;b>=0;b--){if(i=void 0,a[b].ast&&(i=a.symtable.table.blocks.get(n(a[b].ast))),a[b].globals.has(r))return _.needs_frames=!0,{found:!1,resolve:"global"};if(a[b].locals.has(r)&&"class"!=a[b].type)return{found:a[b]};if(i&&t.dict.$contains_string(i.symbols,r)&&(o=t.dict.$getitem_string(i.symbols,r),[m,d].indexOf(o>>v&g)>-1))return{found:!1,resolve:"all"};if(a[b].has_import_star)return{found:!1,resolve:"all"}}return O.locals.has(r)?{found:O}:{found:!1,resolve:u(a)}}function k(r,n){if(n.$proxy)return void 0===n[r]?{found:!1}:{found:!0,value:n[r]};if(n.hasOwnProperty){if(n.hasOwnProperty(r))return{found:!0,value:n[r]};if(n.$dict)try{return{found:!0,value:n.$getitem(n.$dict,r)}}catch(err){if(n.$missing)try{return{found:!0,value:e.$call(n.$missing)(n.$dict,r)}}catch(err){if(!e.is_exc(err,[t.KeyError]))throw err}}}else if(void 0!==n[r])return{found:!0,value:n[r]};return{found:!1}}e.resolve=function(r){for(var n,a,o=new Set,s=e.frame_obj;null!==s;){if(a=s.frame,void 0===n)n=a[3];else if(a[3]!==n){if((i=k(r,n)).found)return i.value;o.add(n),n=a[3]}var i;if((i=k(r,a[1])).found)return i.value;s=s.prev}if(!o.has(a[3])&&(i=k(r,a[3])).found)return i.value;if(O.locals.has(r))return t[r];throw e.name_error(r)},e.resolve_local=function(r,n){if(null!==e.frame_obj){var a=e.frame_obj.frame;if(a[1].hasOwnProperty){if(a[1].hasOwnProperty(r))return a[1][r]}else{var o=a[1][r];if(void 0!==o)return o}}var s=t.UnboundLocalError.$factory(`cannot access local variable '${r}' where it is not associated with a value`);throw n&&e.frame_obj&&e.set_exception_offsets(s,n),s},e.resolve_in_scopes=function(t,r,n){for(var a of r)if(a===e.exec_scope){for(var o,s,i=e.frame_obj;null!==i;){if((s=i.frame).is_exec_top){o=s;break}i=i.prev}if(o)for(var a of[o[1],o[3]]){if((_=k(t,a)).found)return _.value}}else{var _;if((_=k(t,a)).found)return _.value}var l=e.name_error(t);throw n&&e.set_exception_offsets(l,n),l},e.resolve_global=function(r,n){for(;null!==n;){var a=n.frame,o=k(r,a[3]);if(o.found)return o.value;if(a.is_exec_top)break;n=n.prev}if(O.locals.has(r))return t[r];throw e.name_error(r)},e.own_class_name=function(t){throw e.name_error(t)};var j=e.op2method.subset("all"),B={};for(var E in j)B[j[E]]=E;var N={};for(var S of e.op_types)for(var T in S)N[S[T]]="__"+j[T]+"__";N.UAdd="__pos__",N.USub="__neg__",N.Invert="__invert__";var O=new i("__builtins__");for(var A in e.builtins)O.locals.add(A);function I(e){if(e.body&&e.body instanceof Array)for(var t of e.body)t.$parent=e,I(t);else if(e.handlers){var r={$parent:e,type:"except_handler"};for(var t of e.handlers)t.$parent=r,I(t)}}function C(t,r){var n="";let a;for(var o of t)a=e.js_from_ast(o,r),a.length>0&&(n+=a+"\n");return n.trimRight()}function M(t,r){var n="_b_.None";t.body.length&&t.body[0]instanceof e.ast.Expr&&t.body[0].value instanceof e.ast.Constant&&("string"==typeof t.body[0].value.value&&(n=t.body[0].value.to_js(r),t.body.shift()));return n}function R(e,t){return"genexpr"==e.type?function(e,t){e.type,e.id;var r=Object.keys(e.varnames||{}).map((e=>`'${e}'`)).join(", ");return`var ${e.locals_name} = {},\nlocals = ${e.locals_name}\nlocals['.0'] = expr\nvar frame = ["<${e.type.toLowerCase()}>", ${e.locals_name}, "${e.module_name}", ${e.globals_name}]\nframe.$has_generators = true\nframe.__file__ = '${t.filename}'\nframe.$lineno = ${e.ast.lineno}\nframe.f_code = {\nco_argcount: 1,\nco_firstlineno:${e.ast.lineno},\nco_name: "<${e.type.toLowerCase()}>",\nco_filename: "${t.filename}",\nco_flags: ${"genexpr"==e.type?115:83},\nco_freevars: $B.fast_tuple([]),\nco_kwonlyargcount: 0,\nco_posonlyargount: 0,\nco_qualname: "<${e.type.toLowerCase()}>",\nco_varnames: $B.fast_tuple(['.0', ${r}])\n}\nvar next_func_${e.id} = $B.make_js_iterator(expr, frame, ${e.ast.lineno})\nframe.$f_trace = _b_.None\nvar _frame_obj = $B.frame_obj\n`}(e,t):`var next_func_${e.id} = $B.make_js_iterator(expr, frame, ${e.ast.lineno})\n`}function F(r){for(var o,s=e.UUID(),i=this.constructor.$name,_=r.symtable.table.blocks.get(n(this)),l=_.varnames.map((e=>`"${e}"`)),u=e.last(r);u.parent;)u=u.parent;var f=void 0===u.nb_await?0:u.nb_await;for(var p of t.dict.$iter_items_with_hash(_.symbols))512&p.value&&(o=p.key);var h=x(o,r),d=this.generators[0],m=e.js_from_ast(d.iter,r),g=1,v=R({ast:this,id:s,type:i,varnames:l,module_name:r[0].name,locals_name:c(r),globals_name:c(r,r[0])},r);h.found&&(v+=`var save_comp_iter = ${b(o,r)}\n`),this instanceof e.ast.ListComp?v+=`var result_${s} = []\n`:this instanceof e.ast.SetComp?v+=`var result_${s} = _b_.set.$factory()\n`:this instanceof e.ast.DictComp&&(v+=`var result_${s} = $B.empty_dict()\n`);var $=this.generators[0];v+=`try{\nfor(var next_${s} of next_func_${s}){\n`;var y=new e.ast.Name(`next_${s}`,new e.ast.Load);a(y,d.iter),y.to_js=function(){return`next_${s}`};var w=new e.ast.Assign([$.target],y);for(var k of(w.lineno=this.lineno,v+=w.to_js(r)+"\n",$.ifs))g++,v+=`if($B.$bool(${e.js_from_ast(k,r)})){\n`;for(var j of this.generators.slice(1))for(var k of(v+=j.to_js(r),g++,j.ifs))g++;if(this instanceof e.ast.DictComp)var B=e.js_from_ast(this.key,r),E=e.js_from_ast(this.value,r);else var N=e.js_from_ast(this.elt,r);var S=(void 0===u.nb_await?0:u.nb_await)>f;v=`(${S?"async ":""}function(expr){\n`+v,v+=S?"var save_frame_obj = $B.frame_obj;\n":"",this instanceof e.ast.ListComp?v+=`result_${s}.push(${N})\n`:this instanceof e.ast.SetComp?v+=`_b_.set.add(result_${s}, ${N})\n`:this instanceof e.ast.DictComp&&(v+=`_b_.dict.$setitem(result_${s}, ${B}, ${E})\n`);for(var T=0;T<g;T++)v+="}\n";return v+="}catch(err){\n"+(S?"$B.restore_frame_obj(save_frame_obj, locals)\n":"")+"$B.set_exc(err, frame)\nthrow err\n}\n"+(S?"\n$B.restore_frame_obj(save_frame_obj, locals);":""),h.found?v+=`${b(o,r)} = save_comp_iter\n`:v+=`delete locals.${o}\n`,v+=`return result_${s}\n}\n)(${m})\n`}function P(t,r){var a=r?.symtable?.table?.filename,o=e.url2name[a],s=new i(o=o?o.replace(/-/g,"_"):void 0===a||a.startsWith("<")&&a.endsWith(">")?"exec":a.replace(/\./g,"_"),`${t}`,this),_=r.symtable.table.blocks.get(n(this));_&&_.$has_import_star&&(s.has_import_star=!0),r.push(s);var l=r.namespaces;if(l){for(var c in s.is_exec_scope=!0,l.exec_globals)c.startsWith("$")||s.globals.add(c);if(l.exec_locals!==l.exec_globals)for(var c in l.exec_locals)c.startsWith("$")||s.locals.add(c)}return o}function L(e){Object.getPrototypeOf(e)._check&&e._check()}e.ast.Assert.prototype.to_js=function(t){var r=e.js_from_ast(this.test,t),n=this.msg?e.js_from_ast(this.msg,t):"";return`if($B.set_lineno(frame, ${this.lineno}) && !$B.$bool(${r})){\nthrow _b_.AssertionError.$factory(${n})}\n`};function D(r){var n;return r instanceof e.ast.Name?n=r.id:r instanceof e.ast.BinOp?n=D(r.left)+"|"+D(r.right):r instanceof e.ast.Subscript?n=D(r.value)+"["+D(r.slice)+"]":r instanceof e.ast.Constant?r.value===t.None?n="None":console.log("other constant",r):console.log("other annotation",r),n}function q(t){for(var r of t.slice().reverse())if(r.ast instanceof e.ast.For||r.ast instanceof e.ast.While)return!0;return!1}function U(t){var n=[],a=[],o=[],s=!1;for(var i of this.args)i instanceof e.ast.Starred?(i.$handled=!0,s=!0):n.push(e.js_from_ast(i,t));var _=new Set;for(var l of this.keywords)l.arg?(_.has(l.arg)&&r(l,`keyword argument repeated: ${l.arg}`),_.add(l.arg),a.push(`${l.arg}: ${e.js_from_ast(l.value,t)}`)):o.push(e.js_from_ast(l.value,t));var c="";if(n=n.join(", "),s){var u=!0,f=[];for(var i of this.args)if(i instanceof e.ast.Starred){if(f.length>0){var p=f.map((r=>e.js_from_ast(r,t)));c+=u?`[${p.join(", ")}]`:`.concat([${p.join(", ")}])`,f=[]}else""==c&&(c="[]");c+=`.concat(_b_.list.$factory(${e.js_from_ast(i.value,t)}))`,u=!1}else f.push(i);if(f.length>0){p=f.map((r=>e.js_from_ast(r,t)));u?(c+=`[${p.join(", ")}]`,u=!1):c+=`.concat([${p.join(", ")}])`}"."==c[0]&&console.log("bizarre",c)}else c+=`${n}`;if(a.length+o.length==0)return{has_starred:s,js:`${c}`};var h=`{${a.join(", ")}}`;for(var d of o)h+=`, ${d}`;return h=`{$kw:[${h}]}`,c.length>0&&(h=s?`.concat([${h}])`:", "+h),{has_starred:s,js:`${c}${h}`}}function W(r){var n,a=this.args.posonlyargs.length>0,o=[],s=this.args.defaults.length,i=this.args.posonlyargs.concat(this.args.args),_=i.length-s,l=[],c=[];for(var u of i.concat(this.args.kwonlyargs).concat([this.args.vararg,this.args.kwarg]))u&&u.annotation&&((n=n||{})[u.arg]=u.annotation);for(var f=_;f<i.length;f++)l.push(`${i[f].arg}`),o.push(`${i[f].arg}: ${e.js_from_ast(this.args.defaults[f-_],r)}`);_=-1;for(var u of this.args.kwonlyargs)if(_++,this.args.kw_defaults[_]!==t.None)if(void 0===this.args.kw_defaults[_])o.push(`${u.arg}: _b_.None`);else{var p=e.js_from_ast(this.args.kw_defaults[_],r);o.push(`${u.arg}: `+p),c.push(`${u.arg}: ${p}`)}var h=[];for(var d of this.args.kwonlyargs)h.push(`'${d.arg}'`);return{default_names:l,_defaults:o,positional:i,has_posonlyargs:a,kw_defaults:c,kw_default_names:h,annotations:n}}e.ast.AnnAssign.prototype.to_js=function(t){var r=16777216&t.symtable.table.future.features,n="";if((o=s(t)).has_annotation||(n+="locals.__annotations__ = locals.__annotations__ || $B.empty_dict()\n",o.has_annotation=!0,o.locals.add("__annotations__")),this.target instanceof e.ast.Name)var a=r?`'${D(this.annotation)}'`:e.js_from_ast(this.annotation,t);if(this.value)if(n+=`var ann = ${e.js_from_ast(this.value,t)}\n`,this.target instanceof e.ast.Name&&this.simple){var o,i=f(t,o=h(this.target.id,t),this.target.id);"def"!=o.type&&(n+=`$B.$setitem(locals.__annotations__, '${i}', ${a})\n`),n+=`${b(this.target.id,t)} = ann`}else this.target instanceof e.ast.Attribute?n+=`$B.$setattr(${e.js_from_ast(this.target.value,t)}, "${this.target.attr}", ann)`:this.target instanceof e.ast.Subscript&&(n+=`$B.$setitem(${e.js_from_ast(this.target.value,t)}, ${e.js_from_ast(this.target.slice,t)}, ann)`);else if(this.target instanceof e.ast.Name){if(this.simple&&"def"!=o.type){i=f(t,o,this.target.id),this.annotation.id;n+=`$B.$setitem(locals.__annotations__, '${i}', ${a})`}}else e.js_from_ast(this.annotation,t);return`$B.set_lineno(frame, ${this.lineno})\n`+n},e.ast.Assign.prototype.to_js=function(t){L(this);var r=this.lineno?`$B.set_lineno(frame, ${this.lineno})\n`:"",n=e.js_from_ast(this.value,t);function a(r,n){if(r instanceof e.ast.Name)return e.js_from_ast(r,t)+" = "+n;if(r instanceof e.ast.Starred)return a(r.value,n);if(r instanceof e.ast.Subscript)return`$B.$setitem(${e.js_from_ast(r.value,t)}, ${e.js_from_ast(r.slice,t)}, ${n})`;if(r instanceof e.ast.Attribute){var o=f(t,s(t),r.attr);return`$B.$setattr(${e.js_from_ast(r.value,t)}, "${o}", ${n})`}}function i(t,r){for(var n,s="",_=t.elts.length,l=!1,c=0,u=_;c<u;c++)if(t.elts[c]instanceof e.ast.Starred){l=!0,n=u-c-1;break}var f="it_"+e.UUID();s+=`var ${f} = $B.unpacker(${r}, ${_}, ${l}`,void 0!==n&&(s+=`, ${n}`),s+=`, ${o(t.col_offset,t.col_offset,t.end_col_offset)})\n`;var p=[];for(var h of t.elts)h instanceof e.ast.Starred?p.push(a(h,`${f}.read_rest()`)):h instanceof e.ast.List||h instanceof e.ast.Tuple?p.push(i(h,`${f}.read_one()`)):p.push(a(h,`${f}.read_one()`));return s+=p.join("\n")}var _="v"+e.UUID();r+=`var ${_} = ${n}\n`;var l=[];for(var c of this.targets)c instanceof e.ast.Tuple||c instanceof e.ast.List?l.push(i(c,_)):l.push(a(c,_));return r+=l.join("\n")},e.ast.AsyncFor.prototype.to_js=function(t){return s(t).ast instanceof e.ast.AsyncFunctionDef||r(this,"'async for' outside async function"),e.ast.For.prototype.to_js.bind(this)(t)},e.ast.AsyncFunctionDef.prototype.to_js=function(t){return e.ast.FunctionDef.prototype.to_js.bind(this)(t)},e.ast.AsyncWith.prototype.to_js=function(t){function n(t,r){if(t instanceof e.ast.Name)h(t.id,r);else if(t instanceof e.ast.Tuple)for(var a of t.elts)n(a,r)}function o(r,n){var o=e.UUID(),s=`var mgr_${o} = `+e.js_from_ast(r.context_expr,t)+",\n"+`mgr_type_${o} = _b_.type.$factory(mgr_${o}),\n`+`aexit_${o} = $B.$getattr(mgr_type_${o}, '__aexit__'),\n`+`aenter_${o} = $B.$getattr(mgr_type_${o}, '__aenter__'),\n`+`value_${o} = await $B.promise($B.$call(aenter_${o})(mgr_${o})),\n`+`exc_${o} = true\n`;if(f&&(s+=`locals.$context_managers = locals.$context_managers || []\nlocals.$context_managers.push(mgr_${o})\n`),s+="try{\ntry{\n",r.optional_vars){var _={to_js:function(){return`value_${o}`}};a(_,i);var c=new e.ast.Assign([r.optional_vars],_);a(c,i),s+=c.to_js(t)+"\n"}return s+=n,s+=`}catch(err_${o}){\nframe.$lineno = ${l}\nexc_${o} = false\nerr_${o} = $B.exception(err_${o}, frame)\nvar $b = await $B.promise(aexit_${o}(mgr_${o}, err_${o}.__class__, err_${o}, $B.$getattr(err_${o}, '__traceback__')))\nif(! $B.$bool($b)){\nthrow err_${o}\n}\n}\n`,s+=`}\nfinally{\nframe.$lineno = ${l}\nif(exc_${o}){\nawait $B.promise(aexit_${o}(mgr_${o}, _b_.None, _b_.None, _b_.None))\n}\n}\n`}s(t).ast instanceof e.ast.AsyncFunctionDef||r(this,"'async with' outside async function");var i=this,_=s(t),l=this.lineno;for(var c of(delete _.is_generator,this.items.slice().reverse()))c.optional_vars&&n(c.optional_vars,t);var u=C(this.body,t)+"\n",f=_.is_generator;for(var c of this.items.slice().reverse())u=o(c,u);return`$B.set_lineno(frame, ${this.lineno})\n`+u},e.ast.Attribute.prototype.to_js=function(t){var r=f(t,s(t),this.attr);if(this.value instanceof e.ast.Name&&"axw"==this.value.id)return`${e.js_from_ast(this.value,t)}.${r}`;var n=o(this.value.col_offset,this.value.col_offset,this.end_col_offset);return`$B.$getattr_pep657(${e.js_from_ast(this.value,t)}, '${r}', ${n})`},e.ast.AugAssign.prototype.to_js=function(t){var r,n=this.op.$name?this.op:this.op.constructor;for(var a in e.op2ast_class)if(e.op2ast_class[a][1]===n){var o=a+"=";break}var i=e.js_from_ast(this.value,t);if(this.target instanceof e.ast.Name){var _=x(this.target.id,t);if(!_.found)return`${"global"==_.resolve?c(t,t[0]):"locals"}.${this.target.id} = $B.augm_assign(`+w(this.target.id,t,_)+`, '${o}', ${i})`;var l=`${c(t,_.found)}.${this.target.id}`;r=`${l} = $B.augm_assign(${l}, '${o}', ${i})`}else if(this.target instanceof e.ast.Subscript){a=N[this.op.constructor.$name];r=`$B.$setitem((locals.$tg = ${this.target.value.to_js(t)}), (locals.$key = ${this.target.slice.to_js(t)}), $B.augm_assign($B.$getitem(locals.$tg, locals.$key), '${o}', ${i}))`}else if(this.target instanceof e.ast.Attribute){a=N[this.op.constructor.$name];var u=f(t,s(t),this.target.attr);r=`$B.$setattr((locals.$tg = ${this.target.value.to_js(t)}), '${u}', $B.augm_assign($B.$getattr(locals.$tg, '${u}'), '${o}', ${i}))`}else{var p=e.js_from_ast(this.target,t);r=`${p} = $B.augm_assign(${p}, '${o}', ${i=e.js_from_ast(this.value,t)})`}return`$B.set_lineno(frame, ${this.lineno})\n`+r},e.ast.Await.prototype.to_js=function(t){for(var n=t.length-1;t[n].parent;)n--;for(t[n].nb_await=void 0===t[n].nb_await?1:t[n].nb_await+1;t[n].ast instanceof e.ast.ListComp||t[n].ast instanceof e.ast.DictComp||t[n].ast instanceof e.ast.SetComp||t[n].ast instanceof e.ast.GeneratorExp;)t[n].has_await=!0,n--;if(t[n].ast instanceof e.ast.AsyncFunctionDef)return t[n].has_await=!0,`await $B.promise(${e.js_from_ast(this.value,t)})`;t[n].ast instanceof e.ast.FunctionDef?r(this,"'await' outside async function",this.value):r(this,"'await' outside function",this.value)},e.ast.BinOp.prototype.to_js=function(t){var r=this.op.$name?this.op.$name:this.op.constructor.$name;return`$B.rich_op('${N[r]}', ${e.js_from_ast(this.left,t)}, ${e.js_from_ast(this.right,t)}`+`, ${o(this.left.col_offset,this.col_offset,this.end_col_offset,this.right.end_col_offset)})`},e.ast.BoolOp.prototype.to_js=function(t){for(var r=this.op instanceof e.ast.And?"! ":"",n=[],a=0,o=this.values.length;a<o;a++){var s=this.values[a];a<o-1?n.push(`${r}$B.$bool(locals.$test = ${e.js_from_ast(s,t)}) ? locals.$test : `):n.push(`${e.js_from_ast(s,t)}`)}return"("+n.join("")+")"},e.ast.Break.prototype.to_js=function(t){q(t)||r(this,"'break' outside loop");var n="";for(var a of t.slice().reverse())if(a.ast instanceof e.ast.For||a.ast instanceof e.ast.While){n+=`no_break_${a.id} = false\n`;break}return n+="break"},e.ast.Call.prototype.to_js=function(t){var r=`$B.$call(${e.js_from_ast(this.func,t)}`;this.end_lineno==this.lineno&&(r+=`, ${o(this.col_offset,this.col_offset,this.end_col_offset)}`);r+=")";var n=U.bind(this)(t);return r+(n.has_starred?`.apply(null, ${n.js})`:`(${n.js})`)},e.ast.ClassDef.prototype.to_js=function(t){var r=h(this.name,t),n=new i(this.name,"class",this),a="",o=c(t,n),s=this.name+e.UUID(),_=t[0].name,l=c(t,t[0]),u=[],f=!1;for(var d of this.decorator_list){f=!0;var m="decorator"+e.UUID();u.push(m),a+=`$B.set_lineno(frame, ${d.lineno})\nvar ${m} = ${e.js_from_ast(d,t)}\n`}a+=`$B.set_lineno(frame, ${this.lineno})\n`;for(var g=this.name,v=t.length-1;v>=0;)if(t[v].parent)v--;else{if(!(t[v].ast instanceof e.ast.ClassDef))break;g=t[v].name+"."+g,v--}var $,y=[];for(var b of this.keywords)"metaclass"==b.arg&&($=b.value),y.push(`["${b.arg}", `+e.js_from_ast(b.value,t)+"]");var w=this.bases.map((r=>e.js_from_ast(r,t)));if(this.type_params.length>0){a+="$B.$import('_typing')\nvar _typing = $B.imported._typing\n";var x=[];for(var k of this.type_params)k instanceof e.ast.TypeVar?x.push(`$B.$call(_typing.TypeVar)('${k.name}')`):k instanceof e.ast.TypeVarTuple?x.push(`$B.$call($B.$getattr(_typing.Unpack, '__getitem__'))($B.$call(_typing.TypeVarTuple)('${k.name.id}'))`):k instanceof e.ast.ParamSpec&&x.push(`$B.$call(_typing.ParamSpec)('${k.name.id}')`);for(var k of(w.push(`_typing.Generic.__class_getitem__(_typing.Generic, $B.fast_tuple([${x}]))`),this.type_params)){var j,B=k.constructor.$name;a+=`locals.${j="TypeVar"==B?k.name:k.name.id} = $B.$call(_typing.${B})('${j}')\n`}}var E=M(this,t);a+=`var ${s} = (function(name, module, bases){\nvar _frame_obj = $B.frame_obj,\nresolved_bases = $B.resolve_mro_entries(bases),\nmetaclass = $B.get_metaclass(name, module, resolved_bases`,$&&(a+=`, ${$.to_js(t)}`),a+=")\n",a+=`var ${o} = $B.make_class_namespace(metaclass, name, module ,"${g}", resolved_bases),\n`,a+=`locals = ${o}\nif(resolved_bases !== bases){\nlocals.__orig_bases__ = bases}\nlocals.__doc__ = ${E}\nvar frame = [name, locals, module, ${l}]\nframe.__file__ = __file__\nframe.$lineno = ${this.lineno}\nframe.$f_trace = $B.enter_frame(frame)\nvar _frame_obj = $B.frame_obj\n`,a+="if(frame.$f_trace !== _b_.None){\n$B.trace_line()}\n",t.push(n),a+=C(this.body,t),t.pop();y=[];for(var b of this.keywords)y.push(`["${b.arg}", `+e.js_from_ast(b.value,t)+"]");a+="\nif(frame.$f_trace !== _b_.None){\n$B.trace_return(_b_.None)\n}",a+=`\n$B.leave_frame()\nreturn $B.$class_constructor('${this.name}', locals, metaclass, resolved_bases, bases, [${y.join(", ")}])\n})('${this.name}', '${_}', $B.fast_tuple([${w}]))\n`;var N=p(t,r,this.name);f&&(N=`decorated${e.UUID()}`,a+="var ");w=this.bases.map((r=>e.js_from_ast(r,t)));if(a+=`${N} = ${s}\n`,f){a+=p(t,r,this.name)+" = ";var S=N;for(var d of u.reverse())S=`$B.$call(${d})(${S})`;a+=S+"\n"}return a},e.ast.Compare.prototype.to_js=function(t){for(var r=e.js_from_ast(this.left,t),n=[],a=this.ops.length,o=a>1?"locals.$op = ":"",s=0;s<a;s++){var i=this.ops[s].$name?this.ops[s].$name:this.ops[s].constructor.$name,_=N[i],l=this.comparators[s];void 0===_&&(console.log("op undefined",this.ops[s]),alert()),this.ops[s]instanceof e.ast.In?n.push(`$B.$is_member(${r}, ${o}${e.js_from_ast(l,t)})`):this.ops[s]instanceof e.ast.NotIn?n.push(`! $B.$is_member(${r}, ${o}${e.js_from_ast(l,t)})`):this.ops[s]instanceof e.ast.Is?n.push(`$B.$is(${r}, ${o}${e.js_from_ast(l,t)})`):this.ops[s]instanceof e.ast.IsNot?n.push(`! $B.$is(${r}, ${o}${e.js_from_ast(l,t)})`):n.push(`$B.rich_comp('${_}', ${r}, ${o}${e.js_from_ast(l,t)})`),a>1&&(r="locals.$op")}return n.join(" && ")},e.ast.comprehension.prototype.to_js=function(t){var r=e.UUID(),n=e.js_from_ast(this.iter,t),o=`var next_func_${r} = $B.make_js_iterator(${n}, frame, ${this.lineno})\nfor(var next_${r} of next_func_${r}){\n`,s=new e.ast.Name(`next_${r}`,new e.ast.Load);a(s,this.target),s.to_js=function(){return`next_${r}`};var i=new e.ast.Assign([this.target],s);for(var _ of(a(i,this.target),o+=i.to_js(t)+" // assign to target\n",this.ifs))o+=`if($B.$bool(${e.js_from_ast(_,t)})){\n`;return o},e.ast.Constant.prototype.to_js=function(r){if(!0===this.value||!1===this.value)return this.value+"";if(this.value===t.None)return"_b_.None";if("string"==typeof this.value){var n=this.value,a=e.surrogates(n);return 0==a.length?`'${n}'`:`$B.make_String('${n}', [${a}])`}if(this.value.__class__===t.bytes)return`_b_.bytes.$factory([${this.value.source}])`;if("number"==typeof this.value)return this.value;if(this.value.__class__===e.long_int)return`$B.fast_long_int(${this.value.value}n)`;if(this.value.__class__===t.float)return`({__class__: _b_.float, value: ${this.value.value}})`;if(this.value.__class__===t.complex)return`$B.make_complex(${this.value.$real.value}, ${this.value.$imag.value})`;if(this.value===t.Ellipsis)return"_b_.Ellipsis";throw console.log("invalid value",this.value),SyntaxError("bad value",this.value)},e.ast.Continue.prototype.to_js=function(e){return q(e)||r(this,"'continue' not properly in loop"),"continue"},e.ast.Delete.prototype.to_js=function(t){L(this);var r="";for(var n of this.targets)if(n instanceof e.ast.Name){var a=x(n.id,t);a.found&&a.found.locals.delete(n.id),r+=`$B.$delete("${n.id}")\n`}else n instanceof e.ast.Subscript?r+=`$B.$delitem(${e.js_from_ast(n.value,t)}, ${e.js_from_ast(n.slice,t)})\n`:n instanceof e.ast.Attribute&&(r+=`_b_.delattr(${e.js_from_ast(n.value,t)}, '${n.attr}')\n`);return`$B.set_lineno(frame, ${this.lineno})\n`+r},e.ast.Dict.prototype.to_js=function(r){var n=[],a=this.keys,o=!1;function s(e){return a[e]===t.None||void 0===a[e]}for(var i=0,_=this.keys.length;i<_;i++)if(s(i))o=!0,n.push("_b_.list.$factory(_b_.dict.items("+e.js_from_ast(this.values[i],r)+"))");else{var l=`[${e.js_from_ast(this.keys[i],r)}, ${e.js_from_ast(this.values[i],r)}`;if(this.keys[i]instanceof e.ast.Constant){var c=this.keys[i].value;if("string"==typeof c)l+=", "+e.$hash(e.string_from_ast_value(c));else try{l+=`, ${e.$hash(this.keys[i].value)}`}catch(err){}}n.push(l+"]")}if(!o)return`_b_.dict.$literal([${n}])`;var u="_b_.dict.$literal("+(s(0)?n[0]:`[${n[0]}]`);for(i=1,_=n.length;i<_;i++){u+=`.concat(${s(i)?n[i]:`[${n[i]}]`})`}return u+")"},e.ast.DictComp.prototype.to_js=function(e){return F.bind(this)(e)},e.ast.Expr.prototype.to_js=function(t){return`$B.set_lineno(frame, ${this.lineno});\n`+e.js_from_ast(this.value,t)},e.ast.Expression.prototype.to_js=function(t){return P.bind(this)("expression",t),e.js_from_ast(this.body,t)},e.ast.For.prototype.to_js=function(t){var r=e.UUID(),n=e.js_from_ast(this.iter,t),o=`frame.$lineno = ${this.lineno}\n`,s=_(e.last(t),this,r);t.push(s),this instanceof e.ast.AsyncFor?o+=`var no_break_${r} = true,\niter_${r} = ${n},\ntype_${r} = _b_.type.$factory(iter_${r})\niter_${r} = $B.$call($B.$getattr(type_${r}, "__aiter__"))(iter_${r})\ntype_${r} = _b_.type.$factory(iter_${r})\nvar next_func_${r} = $B.$call($B.$getattr(type_${r}, '__anext__'))\nwhile(true){\n  try{\n    var next_${r} = await $B.promise(next_func_${r}(iter_${r}))\n  }catch(err){\n    if($B.is_exc(err, [_b_.StopAsyncIteration])){\nbreak}\n    else{\nthrow err}\n  }\n`:o+=`var no_break_${r} = true,\niterator_${r} = ${n}\nfor(var next_${r} of $B.make_js_iterator(iterator_${r}, frame, ${this.lineno})){\n`;var i=new e.ast.Name(`next_${r}`,new e.ast.Load);return a(i,this.iter),i.to_js=function(){return`next_${r}`},o+=new e.ast.Assign([this.target],i).to_js(t)+"\n",o+=C(this.body,t),o+="\n}",t.pop(),this.orelse.length>0&&(o+=`\nif(no_break_${r}){\n`+C(this.orelse,t)+"}\n"),o},e.ast.FormattedValue.prototype.to_js=function(t){var r=e.js_from_ast(this.value,t);return 114==this.conversion?r=`_b_.repr(${r})`:115==this.conversion?r=`_b_.str.$factory(${r})`:97==this.conversion&&(r=`_b_.ascii(${r})`),this.format_spec?r="_b_.str.format('{0:' + "+e.js_from_ast(this.format_spec,t)+` + '}', ${r})`:-1==this.conversion&&(r=`_b_.str.$factory(${r})`),r};const V=e.args_parsers=[];function G(e,t,r,n,a,o,s,i){const _=e|t<<1|r<<3|n<<4|a<<6|o<<7|s<<8|i<<10,l=V[_];if(void 0!==l)return l;const c=V[_]=function(...e){return new Function("fct","args",function(e,t,r,n,a,o,s,i){let _="\n    const LAST_ARGS = args[args.length-1];\n    const HAS_KW = LAST_ARGS !== undefined && LAST_ARGS !== null && LAST_ARGS.$kw !== undefined;\n    let ARGS_POS_COUNT        = args.length;\n    let ARGS_NAMED            = null;\n    if( HAS_KW ) {\n        --ARGS_POS_COUNT;\n        ARGS_NAMED = LAST_ARGS.$kw;\n    }\n    const result = {};\n    // using const should enable the browser to perform some optimisation.\n    const $INFOS = fct.$infos;\n    const $CODE  = $INFOS.__code__;\n";(r||e||o)&&(_+="\n    const PARAMS_NAMES        = $INFOS.arg_names;\n");let l="0";(r||e)&&(l="PARAMS_POS_COUNT",_+="\n    const PARAMS_POS_COUNT    = $CODE.co_argcount;\n");let c=l,u="0";t===z.NONE&&n===z.NONE||(c="PARAMS_POS_DEFAULTS_OFFSET",u="PARAMS_POS_DEFAULTS_COUNT",_+=`\n    const PARAMS_POS_DEFAULTS = $INFOS.__defaults__;\n    const PARAMS_POS_DEFAULTS_COUNT = PARAMS_POS_DEFAULTS.length;\n    const PARAMS_POS_DEFAULTS_OFFSET= ${l} - PARAMS_POS_DEFAULTS_COUNT;\n`);_+="\n    let offset = 0;\n",a?(_+=`\n    result[$INFOS.vararg] = $B.fast_tuple( Array.prototype.slice.call(args, ${l}, ARGS_POS_COUNT ) ); //TODO: opti, better way to construct tuple from subarray ?\n`,(e||r)&&(_+=`\n    const min = Math.min( ARGS_POS_COUNT, ${l} );\n    for( ; offset < min ; ++offset)\n        result[ PARAMS_NAMES[offset] ] = args[offset];\n`)):(_+=`\n    if( ARGS_POS_COUNT > ${l} ) {\n        $B.args0_old(fct, args);\n        throw new Error('Too much positional arguments given (args0 should have raised an error) !');\n    }\n`,(e||r)&&(_+="\n    for( ; offset < ARGS_POS_COUNT ; ++offset)\n        result[ PARAMS_NAMES[offset] ] = args[offset];\n"));_+=r||o||i?"\n    if( HAS_KW === false ) {\n    ":"\n    if( HAS_KW === true ) {\n        for(let argname in ARGS_NAMED[0] ) {\n            $B.args0_old(fct, args);\n            throw new Error('No named arguments expected !!!');\n        }\n        for(let id = 1; id < ARGS_NAMED.length; ++id ) {\n            const kargs = ARGS_NAMED[id];\n            for(let argname of $B.make_js_iterator( kargs.__class__.keys(kargs) ) ) { //TODO: not optimal\n                $B.args0_old(fct, args);\n                throw new Error('No named arguments expected !!!');\n            }\n        }\n    }\n";(r||e)&&(t!==z.ALL&&n!==z.ALL&&(_+=`\n        if( offset < ${c} ) {\n            $B.args0_old(fct, args);\n            throw new Error('Not enough positional arguments given (args0 should have raised an error) !');\n        }\n`),t===z.NONE&&n===z.NONE||(_+="\n        for(let i = offset - PARAMS_POS_DEFAULTS_OFFSET;\n            i < PARAMS_POS_DEFAULTS_COUNT;\n            ++i)\n            result[ PARAMS_NAMES[offset++] ] = PARAMS_POS_DEFAULTS[i];"));i&&(_+="\n        result[$INFOS.kwarg] = __BRYTHON__.obj_dict({});");o&&s!==z.ALL?_+="\n        $B.args0_old(fct, args);\n        throw new Error('Named argument expected (args0 should have raised an error) !');\n":s!==z.NONE&&(_+="\n        const kwargs_defaults_values = fct.$kwdefaults_values;\n        for(let i = 0; i < kwargs_defaults_values.length; ++i )\n                result[ PARAMS_NAMES[offset++] ] = kwargs_defaults_values[i];\n");if(_+="\n        return result;\n",!(r||o||i))return _;_+="\n    }\n";s!==z.NONE&&(_+="\n    const kwargs_defaults = fct.$kwdefaults;\n");let f="0";e&&(f="PARAMS_POSONLY_COUNT",_+="\n    const PARAMS_POSONLY_COUNT         = $CODE.co_posonlyargcount;\n    if( offset < PARAMS_POSONLY_COUNT ) {\n        ",t!==z.SOME&&(_+=`\n        if( offset < ${c} ) {\n            $B.args0_old(fct, args);\n            throw new Error('Not enough positional parameters given (args0 should have raised an error) !');\n        }\n`),t===z.NONE&&(_+="\n        $B.args0_old(fct, args);\n        throw new Error('Not enough positional parameters given (args0 should have raised an error) !');\n"),_+=`\n        const max = ${u} - (${l} - PARAMS_POSONLY_COUNT);\n        // default parameters\n        for(let i = offset - ${c};\n                i < max;\n                ++i)\n            result[ PARAMS_NAMES[offset++] ] = PARAMS_POS_DEFAULTS[i];\n    }\n`);i&&(_+="\n    const extra = {};\n    let nb_extra_args = 0;\n",(r||o)&&(_+="\n    const HAS_PARAMS = fct.$hasParams;\n"));_+="\n    let nb_named_args = 0;\n    const kargs = ARGS_NAMED[0];\n    for(let argname in kargs) {\n        ",i||(_+="\n        result[ argname ] = kargs[argname];\n        ++nb_named_args;\n");i&&(_+=o||r?"\n        if( HAS_PARAMS.has(argname) ) {\n            result[ argname ] = kargs[argname];\n            ++nb_named_args;\n        } else {\n            extra[ argname ] = kargs[argname];\n            ++nb_extra_args;\n        }\n":"\n        extra[ argname ] = kargs[argname];\n        ++nb_extra_args;\n");_+="\n    }\n    for(let id = 1; id < ARGS_NAMED.length; ++id ) {\n        const kargs = ARGS_NAMED[id];\n        for(let argname of $B.make_js_iterator(kargs.__class__.keys(kargs)) ) {\n            if( typeof argname !== \"string\") {\n                $B.args0_old(fct, args);\n                throw new Error('Non string key passed in **kargs');\n            }\n            ",i||(_+="\n            result[ argname ] = $B.$getitem(kargs, argname);\n            ++nb_named_args;\n");i&&(_+=o||r?"\n            if( HAS_PARAMS.has(argname) ) {\n                result[ argname ] = $B.$getitem(kargs, argname);\n                ++nb_named_args;\n            } else {\n                extra[ argname ] = $B.$getitem(kargs, argname);\n                ++nb_extra_args;\n            }\n":"\n            extra[ argname ] = $B.$getitem(kargs, argname);\n            ++nb_extra_args;\n");_+="\n        }\n    }\n",_+="\n    let found = 0;\n    let ioffset = offset;\n",!e&&!r||e&&t===z.ALL||r&&n===z.ALL||(_+=`\n    for( ; ioffset < ${c}; ++ioffset) {\n        const key = PARAMS_NAMES[ioffset];\n        if( key in result ) // maybe could be speed up using "!(key in result)"\n            continue;\n        $B.args0_old(fct, args);\n        throw new Error('Missing a named arguments (args0 should have raised an error) !');\n    }\n`);(e&&t!==z.NONE||r&&n!==z.NONE)&&(_+=`\n    for( ; ioffset < PARAMS_POS_COUNT; ++ioffset) {\n        const key = PARAMS_NAMES[ioffset];\n        if( key in result )\n            continue;\n        result[key] = PARAMS_POS_DEFAULTS[ioffset - ${c}];\n    ++found;\n    }\n`);o&&(_+="\n        for( ; ioffset < PARAMS_NAMES.length; ++ioffset) {\n            const key = PARAMS_NAMES[ioffset];\n            if( key in result )\n                continue;\n",s===z.SOME&&(_+="\n            if( ! kwargs_defaults.has(key) ) {\n                $B.args0_old(fct, args);\n                throw new Error('Missing a named arguments (args0 should have raised an error) !');\n            }\n"),s===z.NONE&&(_+="\n            $B.args0_old(fct, args);\n            throw new Error('Missing a named arguments (args0 should have raised an error) !');\n"),s!==z.NONE&&(_+="\n            result[key] = kwargs_defaults.get(key);\n            ++found;\n"),_+="\n        }\n");(o||r)&&(_+="\n        if( found + nb_named_args !== PARAMS_NAMES.length - offset) {\n            $B.args0_old(fct, args);\n            throw new Error('Inexistant or duplicate named arguments (args0 should have raised an error) !');\n        }\n");i&&(_+="\n    if( Object.keys(extra).length !== nb_extra_args ) {\n        $B.args0_old(fct, args);\n        throw new Error('Duplicate name given to **kargs parameter (args0 should have raised an error) !');\n    }\n    result[$INFOS.kwarg] = __BRYTHON__.obj_dict(extra);\n");return _+="\n    return result\n    ",_}(...e))}(e,t,r,n,a,o,s,i);return c.id=_,c}e.getArgs0=G;const z=G.DEFAULTS={NONE:0,SOME:1,ALL:3};function J(e,t,r){var n,a=r[0].name,o=c(r,r[0]),s="",_=e.constructor.$name;if(h(n="TypeVar"==_?e.name:e.name.id,r),e.bound){var l=new i(n,"typevarbound",e);r.push(l),s+=`function BOUND_OF_${n}(){\nvar current_frame = $B.frame_obj.frame,\nframe = ['BOUND_OF_${n}', {}, '${a}', ${o}]\nframe.$f_trace = $B.enter_frame(frame)\nframe.__file__ = '${r.filename}'\nframe.$lineno = ${e.bound.lineno}\ntry{\nvar res = ${e.bound.to_js(r)}\n$B.leave_frame()\nreturn res\n}catch(err){\n$B.leave_frame()\nthrow err\n}\n}\n`,r.pop()}return s+=`locals_${t}.${n} = $B.$call(_typing.${_})('${n}')\ntype_params.push(locals_${t}.${n})\n`,e.bound&&(e.bound.elts?s+=`_typing.${_}._set_lazy_eval(locals_${t}.${n}, '__constraints__', BOUND_OF_${n})\n`:s+=`_typing.${_}._set_lazy_eval(locals_${t}.${n}, '__bound__', BOUND_OF_${n})\n`),s}function Y(t,r){if(this.elts.filter((t=>t instanceof e.ast.Starred)).length>0){var n=[],a=[];for(var o of this.elts)o instanceof e.ast.Starred?(o.$handled=!0,n.push(`[${a.join(", ")}]`),a=[],n.push(`_b_.list.$factory(${e.js_from_ast(o,r)})`)):a.push(e.js_from_ast(o,r));a.length>0&&n.push(`[${a.join(", ")}]`);var s=n[0];for(var i of n.slice(1))s+=`.concat(${i})`;return`${t}(${s})`}return`${t}([${this.elts.map((t=>e.js_from_ast(t,r))).join(", ")}])`}function H(t){switch(t.constructor){case e.ast.MatchAs:return void 0===t.pattern?t:H(t.pattern);case e.ast.MatchOr:for(var r=0;r<t.patterns.length;r++)if(H(t.patterns[r])){if(r==t.patterns.length-1)return t;K(t.patterns[r])}}}function K(e){var t=e.name?`name capture '${e.name}'`:"wildcard";r(e,t+=" makes remaining patterns unreachable")}function X(t){var n=[];switch(t.constructor){case e.ast.MatchAs:t.name&&n.push(t.name);break;case e.ast.MatchSequence:for(var a of t.patterns)n=n.concat(X(a));break;case e.ast.MatchOr:n=X(t.patterns[0]);for(var o="alternative patterns bind different names",s=1;s<t.patterns.length;s++){var i=X(t.patterns[s]);if(i.length!=n.length)r(t,o);else for(var _=0;_<n.length;_++)n[_]!=i[_]&&r(t,o)}}return n.sort()}e.ast.FunctionDef.prototype.to_js=function(r){var o=r.symtable.table.blocks.get(n(this)),_=s(r).ast instanceof e.ast.ClassDef,u=this instanceof e.ast.AsyncFunctionDef;if(_)var p=s(r);var d=h(this.name,r),m=r[0].name,$=c(r,r[0]),y=[],b=!1,w=this.decorator_list.length>0?"// declare decorators\n":"";for(var x of this.decorator_list){b=!0;var k="decorator"+e.UUID();y.push(k),w+=`$B.set_lineno(frame, ${x.lineno})\n`,w+=`var ${k} = ${e.js_from_ast(x,r)}\n`}var j=M(this,r),B=W.bind(this)(r),E=(B.default_names,B._defaults,B.positional),N=(B.has_posonlyargs,B.kw_defaults),S=B.kw_default_names,T=`$B.fast_tuple([${this.args.defaults.map((e=>e.to_js(r)))}])`,O=(N=0==S.length?"_b_.None":`$B.obj_dict({${N.join(", ")}})`,e.UUID()),A=(this.name,this.name+O),I=this.type_params.length>0,R="";if(I){var F=new i(`type_params_${A}`,"type_params",this.type_params);r.push(F);var P=l(r,F),L=`function TYPE_PARAMS_OF_${A}(){\n`;R=`$B.$import('_typing')\nvar _typing = $B.imported._typing\nvar locals_${P} = {\n},\nlocals = locals_${P},\nframe = ['${P}', locals, '${m}', ${$}],\ntype_params = []\nframe.$f_trace = $B.enter_frame(frame)\nframe.__file__ = '${r.filename}'\n`,this.type_params[0].name;for(var D of this.type_params)R+=J(D,P,r);L+=R}var q=new i(this.name,"def",this);r.push(q);var U=E.concat(this.args.kwonlyargs),V=[],G=[];for(var z of U)V.push(z.arg+": null"),h(z.arg,r);for(var z of this.args.posonlyargs)G.push(`'${z.arg}'`);for(var z of this.args.args.concat(this.args.kwonlyargs))G.push(`'${z.arg}'`);if(this.args.vararg&&h(this.args.vararg.arg,r),this.args.kwarg&&h(this.args.kwarg.arg,r),this.$is_lambda){var Y=new e.ast.Return(this.body);a(Y,this.body);var H=C([Y],r)}else H=C(this.body,r);var K=o.generator,X=[A],Z=`$B.set_lineno(frame, ${this.lineno})\n`;u&&!K&&(Z+="async "),Z+=`function ${A}(){\n`;var Q=c(r,q);Z+=`var ${Q},\n               locals\n`,X.push("arguments");var ee=void 0===this.args.vararg?"null":"'"+this.args.vararg.arg+"'",te=void 0===this.args.kwarg?"null":"'"+this.args.kwarg.arg+"'";if(0==E.length&&0==V.length&&void 0===this.args.vararg&&void 0===this.args.kwarg?(Z+=`${Q} = locals = {};\n`,Z+=`if(arguments.length !== 0) ${X[0]}.$args_parser(${X.join(", ")})\n;`):Z+=`${Q} = locals = ${X[0]}.$args_parser(${X.join(", ")})\n`,Z+=`var frame = ["${this.$is_lambda?"<lambda>":this.name}", locals, "${m}", ${$}, ${A}]\n    if(locals.$has_generators){\n        frame.$has_generators = true\n    }\n    frame.__file__ = __file__\n    frame.$lineno = ${this.lineno}\n    frame.$f_trace = $B.enter_frame(frame)\n`,q.needs_stack_length&&(Z+="var stack_length = $B.count_frames()\n"),(q.needs_frames||u)&&(Z+="var _frame_obj = $B.frame_obj\n_linenums = $B.make_linenums()\n"),u&&(Z+="frame.$async = true\n"),K&&(Z+="locals.$is_generator = true\n",Z+=u?`var gen_${O} = $B.async_generator.$factory(async function*(){\n`:`var gen_${O} = $B.generator.$factory(function*(){\n`),Z+="try{\n$B.js_this = this\n",_){var re=r.indexOf(p),ne=r[re-1],ae=c(r,ne),oe=p.name,se=oe.split(".").map((e=>`'${e}'`));h("__class__",r),Z+=`locals.__class__ =  $B.get_method_class(${A}, ${ae}, "${oe}", [${se}])\n`}Z+=H+"\n",this.$is_lambda||e.last(this.body)instanceof e.ast.Return||(Z+="var result = _b_.None\n",Z+="if(frame.$f_trace !== _b_.None){\n$B.trace_return(_b_.None)\n}\n",Z+="$B.leave_frame()\nreturn result\n"),Z+="}catch(err){\n    $B.set_exc(err, frame)\n",q.needs_frames&&(Z+="err.$frame_obj = _frame_obj\n_linenums[_linenums.length - 1] = frame.$lineno\nerr.$linenums = _linenums\n"),Z+="if((! err.$in_trace_func) && frame.$f_trace !== _b_.None){\n        frame.$f_trace = $B.trace_exception()\n        }\n",Z+="$B.leave_frame();throw err\n    }\n    }\n",K&&(Z+=`, '${this.name}')\nvar _gen_${O} = gen_${O}()\n_gen_${O}.$frame = frame\n$B.leave_frame()\nreturn _gen_${O}}\n`),r.pop();var ie=(_=d.ast instanceof e.ast.ClassDef)?`${d.name}.${this.name}`:this.name,_e=3;this.args.vararg&&(_e|=4),this.args.kwarg&&(_e|=8),K&&(_e|=32),u&&(_e|=128);var le=[],ce=[],ue=t.dict.$keys_string(o.symbols),fe=[];for(var pe of ue){var he=t.dict.$getitem_string(o.symbols,pe);4==(he>>v&g)&&fe.push(`'${pe}'`),4&he?le.push(`'${pe}'`):2&he&&ce.push(`'${pe}'`)}var de=le.concat(ce);_&&(Z+=`${A}.$is_method = true\n`),u&&(Z+=`${A}.$is_async = true\n`),Z+=`$B.make_function_infos(${A}, '${m}', ${T}, _b_.globals(), ${N}, ${j}, [${G}], ${ee}, ${te},\n${E.length}, __file__, ${this.lineno}, ${_e}, $B.fast_tuple([${fe}]), ${this.args.kwonlyargs.length}, '${this.$is_lambda?"<lambda>":this.name}', ${de.length}, ${this.args.posonlyargs.length}, '${this.$is_lambda?"<lambda>":ie}', $B.fast_tuple([${de}]))\n`,u&&!K&&(Z+=`${A} = $B.make_async(${A})\n`),Z+=`$B.make_function_defaults(${A})\n`;var me=f(r,d,this.name),ge=`${c(r,d)}.${me}`;if(b&&(ge=`decorated${e.UUID()}`,Z+="var "),Z+=`${ge} = ${A}\n`,this.returns||B.annotations){var ve=[];if(this.returns&&ve.push(`['return', ${this.returns.to_js(r)}]`),B.annotations)for(var $e in B.annotations){var ye=B.annotations[$e].to_js(r);_&&($e=f(r,p,$e)),ve.push(`['${$e}', ${ye}]`)}Z+=`${ge}.__annotations__ = _b_.dict.$factory([${ve.join(", ")}])\n`}else Z+=`${ge}.__annotations__ = $B.empty_dict()\n`;if(I&&r.pop(),b&&!I){Z+=`${c(r,d)}.${me} = `;var be=ge;for(var x of y.reverse())be=`$B.$call(${x})(${be})`;Z+=be}if(I)if(Z=L+="\n"+Z+"\n"+`${A}.__type_params__ = $B.fast_tuple(type_params)\n$B.leave_frame()\n`+`return ${A}\n}\n`,b){Z+=`var ${ge} = TYPE_PARAMS_OF_${A}()\n${c(r,d)}.${me} = `;be=ge;for(var x of y.reverse())be=`$B.$call(${x})(${be})`;Z+=be}else Z+=`var locals_${P} = TYPE_PARAMS_OF_${A}()\n`;return Z=w+Z},e.ast.GeneratorExp.prototype.to_js=function(t){var r=e.UUID(),o=t.symtable.table.blocks.get(n(this)).varnames.map((e=>`"${e}"`)),s=(this.elt,this.generators[0]),_=e.js_from_ast(s.iter,t),l=1,u=new i(`genexpr_${r}`,"comprehension",this);t.push(u);var f=R({ast:this,id:r,type:"genexpr",varnames:o,module_name:t[0].name,locals_name:c(t),globals_name:c(t,t[0])},t),p=this.generators[0],h=`$B.enter_frame(frame)\nvar next_func_${r} = $B.make_js_iterator(expr, frame, ${this.lineno})\nfor(var next_${r} of next_func_${r}){\nframe.$f_trace = $B.enter_frame(frame)\n`,d=new e.ast.Name(`next_${r}`,new e.ast.Load);a(d,s.iter),d.to_js=function(){return`next_${r}`};var m=new e.ast.Assign([p.target],d);for(var g of(m.lineno=this.lineno,h+=m.to_js(t)+"\n",p.ifs))l++,h+=`if($B.$bool(${e.js_from_ast(g,t)})){\n`;for(var v of this.generators.slice(1))for(var g of(h+=v.to_js(t),l++,v.ifs))l++;var $=e.js_from_ast(this.elt,t),y=u.has_await;h=`var gen${r} = $B.generator.$factory(${y?"async ":""}function*(expr){\n`+h,h+=y?"var save_frame_obj = $B.frame_obj;\n":"",h+=`try{\n yield ${$}\n}catch(err){\n`+(y?"$B.restore_frame_obj(save_frame_obj, locals)\n":"")+"$B.leave_frame()\nthrow err\n}\n"+(y?"\n$B.restore_frame_obj(save_frame_obj, locals);":"");for(var b=0;b<l-1;b++)h+="}\n";return h+='$B.leave_frame()\n}\n$B.leave_frame()\n}, "<genexpr>")(expr)\n',t.pop(),`(function(expr){\n${`${f}\n${h}\nreturn gen${r}`}\n})(${_})\n`},e.ast.Global.prototype.to_js=function(e){var t=s(e);for(var r of this.names)t.globals.add(r);return""},e.ast.If.prototype.to_js=function(t){var r=_(e.last(t),this),n=`if($B.set_lineno(frame, ${this.lineno}) && $B.$bool(${e.js_from_ast(this.test,t)})){\n`;return t.push(r),n+=C(this.body,t)+"\n}",t.pop(),this.orelse.length>0&&(this.orelse[0]instanceof e.ast.If&&1==this.orelse.length?n+="else "+e.js_from_ast(this.orelse[0],t)+C(this.orelse.slice(1),t):n+="\nelse{\n"+C(this.orelse,t)+"\n}"),n},e.ast.IfExp.prototype.to_js=function(t){return"($B.$bool("+e.js_from_ast(this.test,t)+") ? "+e.js_from_ast(this.body,t)+": "+e.js_from_ast(this.orelse,t)+")"},e.ast.Import.prototype.to_js=function(e){var t=`$B.set_lineno(frame, ${this.lineno})\n`;for(var r of this.names){t+=`$B.$import("${r.name}", [], `,r.asname?(t+=`{'${r.name}' : '${r.asname}'}, `,h(r.asname,e)):(t+="{}, ",h(r.name,e));for(var n=r.name.split("."),a=0;a<n.length;a++)e.imports[n.slice(0,a+1).join(".")]=!0;t+="locals, true)\n"}return t.trimRight()},e.ast.ImportFrom.prototype.to_js=function(t){"__future__"===this.module&&(e.last(t).ast instanceof e.ast.Module||r(this,"from __future__ imports must occur at the beginning of the file",e.last(this.names)));var n=`$B.set_lineno(frame, ${this.lineno})\nvar module = $B.$import_from("${this.module||""}", `,a=this.names.map((e=>`"${e.name}"`)).join(", "),o=[];for(var i of this.names)i.asname&&o.push(`${i.name}: '${i.asname}'`);for(var _ of(n+=`[${a}], {${o.join(", ")}}, ${this.level}, locals);`,this.names))_.asname?h(_.asname,t):"*"==_.name?(s(t).blurred=!0,n+="\n$B.import_all(locals, module)"):h(_.name,t);return n},e.ast.JoinedStr.prototype.to_js=function(t){var r=this.values.map((r=>e.js_from_ast(r,t)));return 0==r.length?"''":r.join(" + ")},e.ast.Lambda.prototype.to_js=function(t){var r=e.UUID(),a="lambda_"+e.lambda_magic+"_"+r,o=new e.ast.FunctionDef(a,this.args,this.body,[]);return o.lineno=this.lineno,o.$id=n(this),o.$is_lambda=!0,`(function(){ ${o.to_js(t)}\nreturn ${p(t,s(t),a)}\n})()`},e.ast.List.prototype.to_js=function(e){return Y.bind(this)("$B.$list",e)},e.ast.ListComp.prototype.to_js=function(e){return L(this),F.bind(this)(e)},e.ast.match_case.prototype.to_js=function(t){var r=`($B.set_lineno(frame, ${this.lineno}) && $B.pattern_match(subject, {${e.js_from_ast(this.pattern,t)}})`;return this.guard&&(r+=` && $B.$bool(${e.js_from_ast(this.guard,t)})`),r+="){\n",r+=C(this.body,t)+"\n}"},e.ast.Match.prototype.to_js=function(t){e.last(t);var r,n=`var subject = ${e.js_from_ast(this.subject,t)}\n`,a=!0;for(var o of this.cases){o.guard||(r&&K(r),r=H(o.pattern));var s=e.js_from_ast(o,t);a?(n+="if"+s,a=!1):n+="else if"+s}return`$B.set_lineno(frame, ${this.lineno})\n`+n},e.ast.MatchAs.prototype.to_js=function(t){var n,a=e.last(t),o=void 0===this.name?"_":this.name;if(void 0===this.pattern)n=`capture: '${o}'`;else{var s=e.js_from_ast(this.pattern,t);this.pattern instanceof e.ast.MatchAs&&this.pattern.name&&(s=`group: [{${s}}]`),n=`${s}, alias: '${o}'`}return a.bindings&&(a.bindings.indexOf(o)>-1&&r(this,`multiple assignment to name '${o}' in pattern`),a.bindings.push(o)),n},e.ast.MatchClass.prototype.to_js=function(t){var n=[];for(var a of this.patterns.concat(this.kwd_patterns)){var o=a.name;o&&(n.indexOf(o)>-1&&r(a,`multiple assignment to name '${o}' in pattern`),n.push(o))}n=[];for(var s=0;s<this.kwd_attrs.length;s++){var i=this.kwd_attrs[s];n.indexOf(i)>-1&&r(this.kwd_patterns[s],`attribute name repeated in class pattern: ${i}`),n.push(i)}for(var _=e.js_from_ast(this.cls,t),l=this.patterns.map((r=>`{${e.js_from_ast(r,t)}}`)),c=[],u=(s=0,this.kwd_patterns.length);s<u;s++)c.push(this.kwd_attrs[s]+": {"+e.js_from_ast(this.kwd_patterns[s],t)+"}");return`class: ${_}, args: [${l}], keywords: {${c.join(", ")}}`},e.ast.MatchMapping.prototype.to_js=function(t){for(var n of this.keys)n instanceof e.ast.Attribute||n instanceof e.ast.Constant||n instanceof e.ast.UnaryOp||n instanceof e.ast.BinOp||r(n,"mapping pattern keys may only match literals and attribute lookups");var a=[];for(var o of this.patterns)o instanceof e.ast.MatchAs&&o.name&&(a.indexOf(o.name)>-1&&r(o,`multiple assignments to name '${o.name}' in pattern`),a.push(o.name));for(var s=[],i=0,_=this.keys.length;i<_;i++){var l=this.keys[i]instanceof e.ast.Constant?"literal: ":"value: ",c=(n=e.js_from_ast(this.keys[i],t),e.js_from_ast(this.patterns[i],t));s.push(`[{${l}${n}}, {${c}}]`)}var u="mapping: ["+s.join(", ")+"]";return this.rest&&(u+=`, rest: '${this.rest}'`),u},e.ast.MatchOr.prototype.to_js=function(t){H(this),X(this);var r=[];for(var n of this.patterns)r.push(`{${e.js_from_ast(n,t)}}`);return`or: [${r.join(", ")}]`},e.ast.MatchSequence.prototype.to_js=function(t){var n=[],a=[];for(var o of this.patterns)o instanceof e.ast.MatchAs&&o.name&&(a.indexOf(o.name)>-1&&r(o,`multiple assignments to name '${o.name}' in pattern`),a.push(o.name)),n.push("{"+e.js_from_ast(o,t)+"}");return`sequence: [${n.join(", ")}]`},e.ast.MatchSingleton.prototype.to_js=function(e){return`literal: ${!0===this.value?"_b_.True":!1===this.value?"_b_.False":"_b_.None"}`},e.ast.MatchStar.prototype.to_js=function(e){return`capture_starred: '${void 0===this.name?"_":this.name}'`},e.ast.MatchValue.prototype.to_js=function(t){return this.value instanceof e.ast.Constant?`literal: ${e.js_from_ast(this.value,t)}`:this.value instanceof e.ast.Constant||this.value instanceof e.ast.UnaryOp||this.value instanceof e.ast.BinOp||this.value instanceof e.ast.Attribute?`value: ${e.js_from_ast(this.value,t)}`:void r(this,"patterns may only match literals and attribute lookups")},e.ast.Module.prototype.to_js=function(e){I(this);var t=P.bind(this)("module",e),r=e.namespaces,n=t,a=c(e),o=function(e){var t=e.slice(),r=[];for(var n of t)n.parent||r.push(n.name);return r.join(".")}(e),s="// Javascript code generated from ast\nvar $B = __BRYTHON__,\n_b_ = $B.builtins,\n";return r?(s+=`locals = ${r.local_name},\nglobals = ${r.global_name}`,t&&(s+=`,\nlocals_${t} = locals`)):s+=`${a} = $B.imported["${o}"],\nlocals = ${a},\nframe = ["${n}", locals, "${n}", locals]`,s+=`\nvar __file__ = frame.__file__ = '${e.filename||"<string>"}'\nlocals.__name__ = '${t}'\nlocals.__doc__ = ${M(this,e)}\n`,e.imported||(s+="locals.__annotations__ = locals.__annotations__ || $B.empty_dict()\n"),r||(s+="frame.$f_trace = $B.enter_frame(frame)\n"),s+="$B.set_lineno(frame, 1)\n\nvar _frame_obj = $B.frame_obj,\nstack_length = $B.count_frames()\ntry{\n"+C(this.body,e)+"\n"+(r?"":"$B.leave_frame({locals, value: _b_.None})\n")+"}catch(err){\n$B.set_exc(err, frame)\n",s+="if((! err.$in_trace_func) && frame.$f_trace !== _b_.None){\nframe.$f_trace = $B.trace_exception()\n}\n",s+=(r?"":"$B.leave_frame({locals, value: _b_.None})\n")+"throw err\n}",e.pop(),s},e.ast.Name.prototype.to_js=function(t){if(this.ctx instanceof e.ast.Store){var r=h(this.id,t);return r===e.last(t)&&r.freevars.has(this.id)&&r.freevars.delete(this.id),p(t,r,this.id)}if(this.ctx instanceof e.ast.Load){var n=b(this.id,t,[this.col_offset,this.col_offset,this.end_col_offset]);return"__debugger__"==this.id&&n.startsWith("$B.resolve_in_scopes")?"debugger":n}},e.ast.NamedExpr.prototype.to_js=function(t){for(var r=t.length-1;"comprehension"==t[r].type;)r--;var n=t.slice(0,r+1);return n.symtable=t.symtable,h(this.target.id,n),"("+e.js_from_ast(this.target,n)+" = "+e.js_from_ast(this.value,t)+")"},e.ast.Nonlocal.prototype.to_js=function(t){var r=e.last(t);for(var n of this.names)r.nonlocals.add(n);return""},e.ast.Pass.prototype.to_js=function(e){return`$B.set_lineno(frame, ${this.lineno})\nvoid(0)`},e.ast.Raise.prototype.to_js=function(t){var r=`$B.set_lineno(frame, ${this.lineno})\n$B.$raise(`;return this.exc&&(r+=e.js_from_ast(this.exc,t)),this.cause&&(r+=", "+e.js_from_ast(this.cause,t)),r+")"},e.ast.Return.prototype.to_js=function(t){L(this);var r=`$B.set_lineno(frame, ${this.lineno})\nvar result = `+(this.value?e.js_from_ast(this.value,t):" _b_.None")+"\n";return r+="if(frame.$f_trace !== _b_.None){\n$B.trace_return(result)\n}\n",r+="$B.leave_frame()\nreturn result\n"},e.ast.Set.prototype.to_js=function(t){var r=[];for(var n of this.elts){var a;a=n instanceof e.ast.Constant?`{constant: [${e.js_from_ast(n,t)}, ${e.$hash(n.value)}]}`:n instanceof e.ast.Starred?`{starred: ${e.js_from_ast(n.value,t)}}`:`{item: ${e.js_from_ast(n,t)}}`,r.push(a)}return`_b_.set.$literal([${r.join(", ")}])`},e.ast.SetComp.prototype.to_js=function(e){return F.bind(this)(e)},e.ast.Slice.prototype.to_js=function(t){return`_b_.slice.$fast_slice(${this.lower?e.js_from_ast(this.lower,t):"_b_.None"}, ${this.upper?e.js_from_ast(this.upper,t):"_b_.None"}, ${this.step?e.js_from_ast(this.step,t):"_b_.None"})`},e.ast.Starred.prototype.to_js=function(t){if(this.$handled)return`_b_.list.$unpack(${e.js_from_ast(this.value,t)})`;this.ctx instanceof e.ast.Store?r(this,"starred assignment target must be in a list or tuple"):r(this,"can't use starred expression here")},e.ast.Subscript.prototype.to_js=function(t){var r=e.js_from_ast(this.value,t),n=e.js_from_ast(this.slice,t);return this.slice instanceof e.ast.Slice?`$B.getitem_slice(${r}, ${n})`:`$B.$getitem(${r}, ${n},${o(this.value.col_offset,this.slice.col_offset,this.slice.end_col_offset)})`},e.ast.Try.prototype.to_js=function(t){L(this);var r=e.UUID(),n=this.handlers.length>0,a=this.orelse.length>0,o=this.finalbody.length>0,s=`$B.set_lineno(frame, ${this.lineno})\ntry{\n`;s+=`var stack_length_${r} = $B.count_frames()\n`,o&&(s+=`var save_frame_obj_${r} = $B.frames_obj\n`),a&&(s+=`var failed${r} = false\n`);var i=_(e.last(t));if(t.push(i),s+=C(this.body,t)+"\n",n){var l="err"+r;s+="}\n",s+=`catch(${l}){\n$B.set_exc(${l}, frame)\n`,s+="if(frame.$f_trace !== _b_.None){\nframe.$f_trace = $B.trace_exception()}\n",a&&(s+=`failed${r} = true\n`);var c=!0,u=!1;for(var p of this.handlers){if(c?(s+="if",c=!1):s+="}else if",s+=`($B.set_lineno(frame, ${p.lineno})`,p.type?(s+=` && $B.is_exc(${l}, `,p.type instanceof e.ast.Tuple?s+=`${e.js_from_ast(p.type,t)}`:s+=`[${e.js_from_ast(p.type,t)}]`,s+=")){\n"):(u=!0,s+="){\n"),p.name)h(p.name,t),s+=`locals.${f(t,i,p.name)} = ${l}\n`;s+=C(p.body,t)+"\n",e.last(p.body)instanceof e.ast.Return||(s+="$B.del_exc(frame)\n")}u||(s+=`}else{\nthrow ${l}\n`),s+="}\n"}if(a||o){s+="}\n",s+="finally{\n";var d=`var exit = false\nif($B.count_frames() < stack_length_${r}){\nexit = true\n$B.frame_obj = $B.push_frame(frame)\n}\n`+C(this.finalbody,t);this.finalbody.length>0&&!(e.last(this.finalbody)instanceof e.ast.Return)&&(d+="\nif(exit){\n$B.leave_frame()\n}");var m=`if($B.count_frames() == stack_length_${r} && ! failed${r}){\n`+C(this.orelse,t)+"\n}";s+=a&&o?"try{\n"+m+"\n}\nfinally{\n"+d+"}\n":a&&!o?m:d,s+="\n}\n"}else s+="}\n";return t.pop(),s},e.ast.TryStar.prototype.to_js=function(t){var r=e.UUID(),n=this.handlers.length>0,a=this.orelse.length>0,o=this.finalbody.length>0,s=`$B.set_lineno(frame, ${this.lineno})\ntry{\n`;s+=`var stack_length_${r} = $B.count_frames()\n`,o&&(s+=`var save_frame_obj_${r} = $B.frame_obj\n`),a&&(s+=`var failed${r} = false\n`);var i=_(e.last(t));if(t.push(i),s+=C(this.body,t)+"\n",n){var l="err"+r;s+="}\n",s+=`catch(${l}){\n$B.set_exc(${l}, frame)\n`,s+="if(frame.$f_trace !== _b_.None){\nframe.$f_trace = $B.trace_exception()\n}\n",s+=`if(! $B.$isinstance(${l}, _b_.BaseExceptionGroup)){\n${l} = _b_.BaseExceptionGroup.$factory(_b_.None, [${l}])\n}\nfunction fake_split(exc, condition){\nreturn condition(exc) ? $B.fast_tuple([exc, _b_.None]) : $B.fast_tuple([_b_.None, exc])\n}\n`,a&&(s+=`failed${r} = true\n`);for(var c of this.handlers)if(s+=`$B.set_lineno(frame, ${c.lineno})\n`,c.type){if(s+=`var condition = function(exc){\n    return $B.$isinstance(exc, ${e.js_from_ast(c.type,t)})\n}\nvar klass = $B.get_class(${l}),\nsplit_method = $B.$getattr(klass, 'split'),\nsplit = $B.$call(split_method)(${l}, condition),\n    matching = split[0],\n    rest = split[1]\nif(matching.exceptions !== _b_.None){\n    for(var err of matching.exceptions){\n`,c.name)h(c.name,t),s+=`locals.${f(t,i,c.name)} = ${l}\n`;s+=C(c.body,t)+"\n",e.last(c.body)instanceof e.ast.Return||(s+="$B.del_exc(frame)\n"),s+="}\n",s+="}\n",s+=`${l} = rest\n`}s+=`if(${l}.exceptions !== _b_.None){\nthrow ${l}\n}\n`}if(a||o){s+="}\n",s+="finally{\n";var u=`var exit = false\nif($B.count_frames() < stack_length_${r}){\nexit = true\n$B.frame_obj = $B.push_frame(frame)\n}\n`+C(this.finalbody,t);this.finalbody.length>0&&!(e.last(this.finalbody)instanceof e.ast.Return)&&(u+="\nif(exit){\n$B.leave_frame(locals)\n}");var p=`if($B.count_frames() == stack_length_${r} && ! failed${r}){\n`+C(this.orelse,t)+"\n}";s+=a&&o?"try{\n"+p+"\n}\nfinally{\n"+u+"}\n":a&&!o?p:u,s+="\n}\n"}else s+="}\n";return t.pop(),s},e.ast.Tuple.prototype.to_js=function(e){return Y.bind(this)("$B.fast_tuple",e)},e.ast.TypeAlias.prototype.to_js=function(t){var r=new i("type_params","type_params",this.type_params);t.push(r);var n=new i("type_alias","type_alias",this);t.push(n);var a=[];for(var o of this.type_params)o instanceof e.ast.TypeVar?a.push(o.name):(o instanceof e.ast.TypeVarTuple||o instanceof e.ast.ParamSpec)&&a.push(o.name.id);a.map((e=>`'${e}'`));for(var s of a)h(s,t);var _=l(t,n),c=this.value.to_js(t);t.pop(),t.pop();var u="$B.$import('_typing')\n";u+=`var locals_${l(t,r)} = {}\n`,u+=`function TYPE_PARAMS_OF_${this.name.id}(){\nvar locals_${_} = {},\n    locals = locals_${_}, \n    type_params = $B.fast_tuple([])\n`;for(var f=0,p=this.type_params.length;f<p;f++)u+=`type_params.push(locals.${a[f]} = ${this.type_params[f].to_js()})\n`;return u+=`function get_value(){\nreturn ${c}\n}\n`,u+=`var res = $B.$call($B.imported._typing.TypeAliasType)('${this.name.id}', get_value)\n$B.$setattr(res, '__module__', $B.frame_obj.frame[2])\n$B.$setattr(res, '__type_params__', type_params)\nreturn res\n}\nlocals.${this.name.id} = TYPE_PARAMS_OF_${this.name.id}()`},e.ast.TypeVar.prototype.to_js=function(){return`$B.$call($B.imported._typing.TypeVar)('${this.name}')`},e.ast.TypeVarTuple.prototype.to_js=function(){return`$B.$call($B.imported._typing.TypeVarTuple)('${this.name.id}')`},e.ast.ParamSpec.prototype.to_js=function(){return`$B.$call($B.imported._typing.ParamSpec)('${this.name.id}')`},e.ast.UnaryOp.prototype.to_js=function(t){var r=e.js_from_ast(this.operand,t);if(this.op instanceof e.ast.Not)return`! $B.$bool(${r})`;if("number"==typeof r||r instanceof Number){if(this.op instanceof e.ast.UAdd)return r+"";if(this.op instanceof e.ast.USub)return-r+""}return`$B.$getattr($B.get_class(locals.$result = ${r}), '${N[this.op.constructor.$name]}')(locals.$result)`},e.ast.While.prototype.to_js=function(t){var r=e.UUID(),n=_(e.last(t),this,r);t.push(n);var a=`var no_break_${r} = true\n`;return a+=`while($B.set_lineno(frame, ${this.lineno}) && $B.$bool(${e.js_from_ast(this.test,t)})){\n`,a+=C(this.body,t)+"\n}",t.pop(),this.orelse.length>0&&(a+=`\nif(no_break_${r}){\n`+C(this.orelse,t)+"}\n"),a};e.ast.With.prototype.to_js=function(t){function r(r,n){var s=e.UUID(),i=`var mgr_${s} = `+e.js_from_ast(r.context_expr,t)+",\n"+`klass = $B.get_class(mgr_${s})\ntry{\n`+`var exit_${s} = $B.$getattr(klass, '__exit__'),\n`+`enter_${s} = $B.$getattr(klass, '__enter__')\n}catch(err){\n`+`var klass_name = $B.class_name(mgr_${s})\nthrow _b_.TypeError.$factory("'" + klass_name + "' object does not support the context manager protocol")\n}\n`+`var value_${s} = $B.$call(enter_${s})(mgr_${s}),\n`+`exc_${s} = true\n`;if(c&&(i+=`locals.$context_managers = locals.$context_managers || []\nlocals.$context_managers.push(mgr_${s})\n`),i+="try{\ntry{\n",r.optional_vars){var l={to_js:function(){return`value_${s}`}};a(l,o);var u=new e.ast.Assign([r.optional_vars],l);a(u,o),i+=u.to_js(t)+"\n"}return i+=n,i+=`}catch(err_${s}){\nframe.$lineno = ${_}\nexc_${s} = false\nerr_${s} = $B.exception(err_${s}, frame)\nvar $b = exit_${s}(mgr_${s}, err_${s}.__class__, err_${s}, $B.$getattr(err_${s}, '__traceback__'))\nif(! $B.$bool($b)){\nthrow err_${s}\n}\n}\n`,i+=`}\nfinally{\nframe.$lineno = ${_}\n`+(c?"locals.$context_managers.pop()\n":"")+`if(exc_${s}){\ntry{\n`+`exit_${s}(mgr_${s}, _b_.None, _b_.None, _b_.None)\n}catch(err){\nif($B.count_frames() < stack_length){\n$B.frame_obj = $B.push_frame(frame)\n}\nthrow err\n}\n}\n}\n`}var o=this,i=s(t),_=this.lineno;i.needs_stack_length=!0;var l=C(this.body,t)+"\n",c=t.symtable.table.blocks.get(n(i.ast)).generator;for(var u of this.items.slice().reverse())l=r(u,l);return`$B.set_lineno(frame, ${this.lineno})\n`+l},e.ast.Yield.prototype.to_js=function(t){return"def"!=s(t).type&&r(this,"'yield' outside function"),s(t).is_generator=!0,`yield ${this.value?e.js_from_ast(this.value,t):"_b_.None"}`},e.ast.YieldFrom.prototype.to_js=function(t){var n=s(t);"def"!=n.type&&r(this,"'yield' outside function"),n.is_generator=!0;var a=e.js_from_ast(this.value,t),o=e.UUID();return`yield* (function* f(){\n        var _i${o} = _b_.iter(${a}),\n                _r${o}\n            var failed${o} = false\n            try{\n                var _y${o} = _b_.next(_i${o})\n            }catch(_e){\n                $B.set_exc(_e, frame)\n                failed${o} = true\n                $B.pmframe = $B.frame_obj.frame\n                _e = $B.exception(_e)\n                if(_e.__class__ === _b_.StopIteration){\n                    var _r${o} = $B.$getattr(_e, "value")\n                }else{\n                    throw _e\n                }\n            }\n            if(! failed${o}){\n                while(true){\n                    var failed1${o} = false\n                    try{\n                        $B.leave_frame()\n                        var _s${o} = yield _y${o}\n                        $B.frame_obj = $B.push_frame(frame)\n                    }catch(_e){\n                        $B.set_exc(_e, frame)\n                        if(_e.__class__ === _b_.GeneratorExit){\n                            var failed2${o} = false\n                            try{\n                                var _m${o} = $B.$getattr(_i${o}, "close")\n                            }catch(_e1){\n                                failed2${o} = true\n                                if(_e1.__class__ !== _b_.AttributeError){\n                                    throw _e1\n                                }\n                            }\n                            if(! failed2${o}){\n                                $B.$call(_m${o})()\n                            }\n                            throw _e\n                        }else if($B.is_exc(_e, [_b_.BaseException])){\n                            var sys_module = $B.imported._sys,\n                                _x${o} = sys_module.exc_info()\n                            var failed3${o} = false\n                            try{\n                                var _m${o} = $B.$getattr(_i${o}, "throw")\n                            }catch(err){\n                                failed3${o} = true\n                                if($B.is_exc(err, [_b_.AttributeError])){\n                                    throw err\n                                }\n                            }\n                            if(! failed3${o}){\n                                try{\n                                    _y${o} = $B.$call(_m${o}).apply(null,\n                                        _b_.list.$factory(_x${o}))\n                                }catch(err){\n                                    if($B.is_exc(err, [_b_.StopIteration])){\n                                        _r${o} = $B.$getattr(err, "value")\n                                        break\n                                    }\n                                    throw err\n                                }\n                            }\n                        }\n                    }\n                    if(! failed1${o}){\n                        try{\n                            if(_s${o} === _b_.None){\n                                _y${o} = _b_.next(_i${o})\n                            }else{\n                                _y${o} = $B.$call($B.$getattr(_i${o}, "send"))(_s${o})\n                            }\n                        }catch(err){\n                            if($B.is_exc(err, [_b_.StopIteration])){\n                                _r${o} = $B.$getattr(err, "value")\n                                break\n                            }\n                            throw err\n                        }\n                    }\n                }\n            }\n            return _r${o}\n        })()`};var Z={};e.js_from_root=function(t){var r=t.ast,n=t.symtable,a=t.filename,o=t.namespaces,s=t.imported;e.show_ast_dump&&console.log(e.ast_dump(r)),e.compiler_check&&e.compiler_check(r,n);var i=[];return Z.filename=a,i.symtable=n,i.filename=a,i.namespaces=o,i.imported=s,i.imports={},{js:r.to_js(i),imports:i.imports}},e.js_from_ast=function(e,t){if(!t.symtable)throw Error("perdu symtable");if(t=t||[],void 0!==e.to_js){if(void 0===e.col_offset){var r=e.constructor.$name;if(-1==["match_case"].indexOf(r))throw console.log("pas de col offset pour",r),console.log(e),Error("no col offset")}return e.to_js(t)}return console.log("unhandled",e.constructor.$name,e,typeof e),"// unhandled class ast."+e.constructor.$name}}(__BRYTHON__),function(e){var t=e.builtins,r="annotated name '%s' can't be global",n="annotated name '%s' can't be nonlocal",a="assignment expression within a comprehension cannot be used in a class body",o="assignment expression cannot rebind comprehension iteration variable '%s'",s="comprehension inner loop cannot rebind assignment expression target '%s'",i="duplicate argument '%s' in function definition",_="duplicate type parameter '%s'",l=1,c=2,u=4,f=8,p=16,h=64,d=256,m=512,g=1024,v=2048,$=c|u|128,y=12,b=l|c|u|f,w=1,x=2,k=3,j=4,B=5,E=16777216,N=void 0,S=2,T=1,O=0,A=4,I=5,C=6,M=7,R=t.SyntaxError;function F(t){if(!e.$bool(t))throw console.log("test fails",t),Error("test fails")}function P(e){return[e.lineno,e.col_offset,e.end_lineno,e.end_col_offset]}function L(e,t){var r,n;if(e==N||!t.startsWith("__"))return t;if(t.length,r=e.length,t.endsWith("__")||-1!=t.search(/\./))return t;for(n=0;"_"==e[n];)n++;return n==r?t:"_"+e.substr(n)+t}var D,q=N,U=0;function W(){this.filename=N,this.stack=[],this.blocks=new Map,this.cur=N,this.private=N}function V(e,r){return t.dict.$contains_string(e.symbols,r)?t.dict.$getitem_string(e.symbols,r):0}function G(e){return e.type==O||e.type==I||e.type==C||e.type==M}function z(e,r,n){return n&&(r=t.str.__mod__(r,n)),e.$factory(r)}function J(e,t){return e.$factory(t)}function Y(t,r,n,a,o,s){t.filename=r,t.lineno=n,t.offset=a+1,t.end_lineno=o,t.end_offset=s+1;var i=e.file_cache[r];if(void 0!==i){var _=i.split("\n");t.text=_[n-1]}else t.text="";t.args[1]=[r,t.lineno,t.offset,t.text,t.end_lineno,t.end_offset]}function H(e,r,n){for(var a of(F(r.directives),r.directives))if(a[0]==n)return Y(e,r.table.filename,a[1],a[2],a[3],a[4]),0;throw t.RuntimeError.$factory("BUG: internal directive bookkeeping broken")}function D(e,t,r){e[t]=r}function K(e,t){for(var r of e.ste_children){if((V(r,t)>>y&b)==j)return 1}return 0}function X(e,r,n,a,o){for(var s of t.dict.$iter_items_with_hash(r.symbols)){var i=s.key,_=s.value;if(!(_&u)){var l=_>>y&b,c=_&(1<<y)-1;(l==B||c&v)&&o.add(i);var f=t.dict.$contains_string(e.symbols,i);if(f)f&$&&!K(r,i)&&e.type!==T&&t.set.remove(a,i);else{var p=c;t.dict.$setitem(e.symbols,i,p),D(n,i,l)}}}return 1}function Z(e,r,n,a,o,s,i,_,c,u){if(a&l){if(a&f)throw H(p=z(t.SyntaxError,"name '%s' is nonlocal and global",n),e,n),p;return D(r,n,x),_.add(n),o&&o.delete(n),1}if(a&f){var p;if(!o)throw H(p=z(t.SyntaxError,"nonlocal declaration not allowed at module level"),e,n),p;if(!o.has(n))throw H(p=z(t.SyntaxError,"no binding for nonlocal '%s' found",n),e,n),p;if(c.has(n))throw H(p=z(t.SyntaxError,"nonlocal binding not allowed for type parameter '%s'",n),e,n),p;return D(r,n,j),e.free=1,i.add(n),1}if(a&$)return D(r,n,w),s.add(n),_.delete(n),a&g?c.add(n):c.delete(n),1;if(u!=N){var h=V(u,n);if(h&l)return D(r,n,x),1;if(h&$&&!(h&f))return D(r,n,k),1}return o&&o.has(n)?(D(r,n,j),e.free=1,i.add(n),1):_&&_.has(n)?(D(r,n,k),1):(e.nested&&(e.free=1),D(r,n,k),1)}function Q(e,r,n,a,o,s){let i=new Set,_={},c=new Set,u=new Set,f=new Set,p=new Set;for(var d of(e.type===T&&(te(c,a),r&&te(f,r)),t.dict.$keys_string(e.symbols))){if(!Z(e,_,d,t.dict.$getitem_string(e.symbols,d),r,i,n,a,o,s))return 0}for(var m of(e.type!=T?(G(e)&&te(f,i),r&&te(f,r),te(c,a)):(f.add("__class__"),f.add("__classdict__")),e.children)){var g=new Set,b=N;(E=m).can_see_class_scope&&(e.type==T?b=e:s&&(b=s));var x=E.comprehension&&!E.generator;if(!re(E,f,u,c,o,b,g))return 0;x&&(X(e,E,_,g,p),E.comp_inlined=1),te(u,g),(E.free||E.child_free)&&(e.child_free=1)}for(var k=e.children.length-1;k>=0;k--){var E;(E=e.children[k]).comp_inlined&&e.children.splice(k,0,...E.children)}return G(e)&&!function(e,t,r){var n;if(!(n=B))return 0;for(var a in e)e[a]==w&&(t.has(a)&&!r.has(a)||(e[a]=n,t.delete(a)));return 1}(_,u,p)?0:(e.type!==T||function(e,t){return t.delete("__class__")&&(e.needs_class_closure=1),t.delete("__classdict__")&&(e.needs_class_classdict=1),1}(e,u))&&function(e,r,n,a,o,s){var i,_,c;for(var u of t.dict.$keys_string(e)){var f=t.dict.$getitem_string(e,u);if(o.has(u)&&(f|=v),!(_=f|=r[u]<<y))return 0;t.dict.$setitem_string(e,u,_)}for(var u of(c=j<<y,a))if((i=t.dict.$get_string(e,u))===t.dict.$missing)n&&!n.has(u)||t.dict.$setitem_string(e,u,c);else if(s&&i&($|l)){if(!(_=f=i|h))return 0;t.dict.$setitem_string(e,u,_)}return 1}(e.symbols,_,r,u,p,e.type===T||e.can_see_class_scope)?(te(n,u),1,1):0}function ee(e){return e===N?new Set:new Set(e)}function te(e,t){for(let r of t)e.add(r)}function re(e,t,r,n,a,o,s){var i=ee(t),_=ee(r);return Q(e,i,_,ee(n),ee(a),o)?(te(s,_),1):0}function ne(e){var t=e.stack.length;return e.cur=N,t&&(e.stack.pop(),--t&&(e.cur=e.stack[t-1])),1}function ae(t,r,n,a,o,s,i,_){var l;void 0===a&&console.log("call ste new, key undef",t,r);var c=function(t,r,n,a,o,s,i,_){var l,c;return l={table:t,id:(c=a,void 0!==c.$id?c.$id:c.$id=e.UUID()),name:r,directives:N,type:n,nested:0,free:0,varargs:0,varkeywords:0,opt_lineno:0,opt_col_offset:0,lineno:o,col_offset:s,end_lineno:i,end_col_offset:_},t.cur==N||!t.cur.nested&&t.cur.type!=O||(l.nested=1),l.child_free=0,l.generator=0,l.coroutine=0,l.comprehension=U,l.returns_value=0,l.needs_class_closure=0,l.comp_inlined=0,l.comp_iter_target=0,l.comp_iter_expr=0,l.symbols=e.empty_dict(),l.varnames=[],l.children=[],t.blocks.set(l.id,l),l}(t,r,n,a,o,s,i,_);return t.stack.push(c),(l=t.cur)&&(c.comp_iter_expr=l.comp_iter_expr),t.cur=c,n===A||(n===S&&(t.global=t.cur.symbols),l&&l.children.push(c)),1}function oe(e,t){var r=L(e.private,t);return r?V(e.cur,r):0}function se(e,r,n,a,o){var c,p,h,d=L(e.private,r);if(!d)return 0;if(p=a.symbols,t.dict.$contains_string(p,d)){if(h=c=t.dict.$getitem_string(p,d),n&u&&h&u)throw Y(v=z(t.SyntaxError,i,r),e.filename,...o),v;if(n&g&&h&g)throw Y(v=z(t.SyntaxError,_,r),e.filename,...location),v;h|=n}else h=n;if(a.comp_iter_target){var v;if(h&(l|f))throw Y(v=z(t.SyntaxError,s,r),e.filename,...o),v;h|=m}if((c=h)==N)return 0;if(t.dict.$setitem(p,d,c),n&u)a.varnames.push(d);else if(n&l){if(h=n,e.global.hasOwnProperty(d)&&(h|=e.global[d]),(c=h)==N)return 0;e.global[d]=c}return 1}function ie(e,t,r,n){return se(e,t,r,e.cur,n)}function _e(t,r,n,a,o,s,i){var _=t.cur,l=t.cur.type;if(!ae(t,r,M,n,...i))return 0;if(_.$type_param=t.cur,l===T&&(t.cur.can_see_class_scope=1,!ie(t,"__classdict__",p,i)))return 0;if(s==e.ast.ClassDef){if(!ie(t,"type_params",c,i))return 0;if(!ie(t,"type_params",p,i))return 0;t.st_private=r;var f=".generic_base";if(!ie(t,f,c,i))return 0;if(!ie(t,f,p,i))return 0}if(a){if(!ie(t,".defaults",u,i))return 0}if(o){if(!ie(t,".kwdefaults",u,i))return 0}return 1}function le(e,t){return t}function ce(e,t,r){(0,de[t])(e,r)||le(0,0)}function ue(e,t,r){for(var n of r)de[t](e,n)||le(0,0)}function fe(e,t,r){for(var n of r)n&&(de[t](e,n)||le(0,0))}function pe(t,r,n,a,o,s){var i,_;return t.cur.directives||(t.cur.directives=[]),(_=L(t.private,r))?(i=e.fast_tuple([_,n,a,o,s]),t.cur.directives.push(i),!0):0}function he(e,t){for(var r=0,n=e.length;r<n;r++)if(t[r])return 1;return 0}e._PySymtable_Build=function(t,r,n){var a=new W;if(a.filename=r,a.future=n||{},a.type=2,!ae(a,"top",S,t,0,0,0,0))return N;switch(a.top=a.cur,t.constructor){case e.ast.Module:for(var o of t.body)de.stmt(a,o);break;case e.ast.Expression:de.expr(a,t.body);break;case e.ast.Interactive:for(var o of t.body)de.stmt(a,o)}return function(e){var t=new Set,r=new Set,n=new Set;Q(e.top,N,t,r,n,N)}(a),a.top};var de={};function me(r,n){if(r.cur.comp_iter_expr>0){var s=z(R,"assignment expression cannot be used in a comprehension iterable expression");throw Y(s,r.filename,n.lineno,n.col_offset,n.end_lineno,n.end_col_offset),s}return r.cur.comprehension&&!function(r,n){F(r.stack),F(n instanceof e.ast.Name);var s,i,_,u=n.id;for(F(i=r.stack.length),s=i-1;s>=0;s--)if((_=r.stack[s]).comprehension){if(V(_,u)&m)throw Y(p=z(t.SyntaxError,o,u),r.filename,n.lineno,n.col_offset,n.ed_lineno,n.end_col_offset),p}else{var p;if(G(_))return V(_,u)&l?ie(r,u,l,P(n))||le(0,0):ie(r,u,f,P(n))||le(0,0),pe(r,u,P(n))||le(0,0),se(r,u,c,_,P(n));if(_.type==S)return ie(r,u,l,P(n))||le(0,0),pe(r,u,P(n))||le(0,0),se(r,u,l,_,P(n));if(_.type==T)throw Y(p=z(t.SyntaxError,a),r.filename,n.lineno,n.col_offset,n.end_lineno,n.end_col_offset),p}return F(0),0}(r,n.target)?0:(ce(r,$e,n.value),ce(r,$e,n.target),1)}de.stmt=function(a,o){switch(o.constructor){case e.ast.FunctionDef:ie(a,o.name,c,P(o))||le(0,0),o.args.defaults&&ue(a,$e,o.args.defaults),o.args.kw_defaults&&fe(a,$e,o.args.kw_defaults),o.type_params.length>0&&(_e(a,o.name,o.type_params,o.args.defaults!=N,he(o.args.kwonlyargs,o.args.kw_defaults),o.constructor,P(o))||le(0,0),ue(a,ke,o.type_params)),de.annotations(a,o,o.args,o.returns)||le(0,0),o.decorator_list&&ue(a,$e,o.decorator_list),ae(a,o.name,O,o,...P(o))||le(0,0),ce(a,"arguments",o.args),ue(a,xe,o.body),ne(a)||le(0,0),o.type_params.length>0&&(ne(a)||le(0,0));break;case e.ast.ClassDef:var s;if(ie(a,o.name,c,P(o))||le(0,0),ue(a,$e,o.bases),ue(a,ye,o.keywords),o.decorator_list&&ue(a,$e,o.decorator_list),o.type_params.length>0&&(_e(a,o.name,o.type_params,!1,!1,o.constructor,P(o))||le(0,0),ue(a,ke,o.type_params)),ue(a,$e,o.bases),ue(a,ye,o.keywords),ae(a,o.name,T,o,o.lineno,o.col_offset,o.end_lineno,o.end_col_offset)||le(0,0),s=a.private,a.private=o.name,o.type_params.length>0){ie(a,"__type_params__",c,P(o))||le(0,0);ie(a,"type_params",p,P(o))||le(0,0)}ue(a,xe,o.body),a.private=s,ne(a)||le(0,0),o.type_params.length>0&&(ne(a)||le(0,0));break;case e.ast.TypeAlias:ce(a,$e,o.name),F(o.name instanceof e.ast.Name);var i=o.name.id,_=a.cur.type===T,h=o.type_params.length>0;h&&(_e(a,i,o.type_params,!1,!1,o.kind,P(o))||le(0,0),ue(a,ke,o.type_params)),ae(a,i,C,o,P(o))||le(0,0),a.cur.can_see_class_scope=_,_&&!ie(a,"__classdict__",p,P(o.value))&&le(0,0),ce(a,$e,o.value),ne(a)||le(0,0),h&&(ne(a)||le(0,0));break;case e.ast.Return:o.value&&(ce(a,$e,o.value),a.cur.returns_value=1);break;case e.ast.Delete:ue(a,$e,o.targets);break;case e.ast.Assign:ue(a,$e,o.targets),ce(a,$e,o.value);break;case e.ast.AnnAssign:if(o.target instanceof e.ast.Name){var m=o.target;if((v=oe(a,m.id))<0&&le(0,0),v&(l|f)&&a.cur.symbols!=a.global&&o.simple)throw(y=z(t.SyntaxError,v&l?r:n,m.id)).args[1]=[a.filename,o.lineno,o.col_offset+1,o.end_lineno,o.end_col_offset+1],y;(o.simple&&!ie(a,m.id,d|c,P(m))||o.value&&!ie(a,m.id,c,P(m)))&&le(0,0)}else ce(a,$e,o.target);de.annotation(a,o.annotation)||le(0,0),o.value&&ce(a,$e,o.value);break;case e.ast.AugAssign:ce(a,$e,o.target),ce(a,$e,o.value);break;case e.ast.For:ce(a,$e,o.target),ce(a,$e,o.iter),ue(a,xe,o.body),o.orelse&&ue(a,xe,o.orelse);break;case e.ast.While:case e.ast.If:ce(a,$e,o.test),ue(a,xe,o.body),o.orelse&&ue(a,xe,o.orelse);break;case e.ast.Match:ce(a,$e,o.subject),ue(a,be,o.cases);break;case e.ast.Raise:o.exc&&(ce(a,$e,o.exc),o.cause&&ce(a,$e,o.cause));break;case e.ast.Try:case e.ast.TryStar:ue(a,xe,o.body),ue(a,xe,o.orelse),ue(a,ve,o.handlers),ue(a,xe,o.finalbody);break;case e.ast.Assert:ce(a,$e,o.test),o.msg&&ce(a,$e,o.msg);break;case e.ast.Import:case e.ast.ImportFrom:ue(a,ge,o.names);break;case e.ast.Global:var g=o.names;for(var i of g){if((v=oe(a,i))<0&&le(0,0),v&(u|c|p|d))throw $=v&u?"name '%s' is parameter and global":v&p?"name '%s' is used prior to global declaration":v&d?r:"name '%s' is assigned to before global declaration",Y(y=z(t.SyntaxError,$,i),a.filename,o.lineno,o.col_offset,o.end_lineno,o.end_col_offset),y;ie(a,i,l,P(o))||le(0,0),pe(a,i,o.lineno,o.col_offset,o.end_lineno,o.end_col_offset)||le(0,0)}break;case e.ast.Nonlocal:g=o.names;for(var i of g){var v,$,y;if((v=oe(a,i))<0&&le(0,0),v&(u|c|p|d))throw $=v&u?"name '%s' is parameter and nonlocal":v&p?"name '%s' is used prior to nonlocal declaration":v&d?n:"name '%s' is assigned to before nonlocal declaration",Y(y=z(t.SyntaxError,$,i),a.filename,o.lineno,o.col_offset,o.end_lineno,o.end_col_offset),y;ie(a,i,f,P(o))||le(0,0),pe(a,i,o.lineno,o.col_offset,o.end_lineno,o.end_col_offset)||le(0,0)}break;case e.ast.Expr:ce(a,$e,o.value);break;case e.ast.Pass:case e.ast.Break:case e.ast.Continue:break;case e.ast.With:ue(a,"withitem",o.items),ue(a,xe,o.body);break;case e.ast.AsyncFunctionDef:ie(a,o.name,c,P(o))||le(0,0),o.args.defaults&&ue(a,$e,o.args.defaults),o.args.kw_defaults&&fe(a,$e,o.args.kw_defaults),de.annotations(a,o,o.args,o.returns)||le(0,0),o.decorator_list&&ue(a,$e,o.decorator_list),o.type_params.length>0&&(_e(a,o.name,o.type_params,o.args.defaults!=N,he(o.args.kwonlyargs,o.args.kw_defaults),o.constructor,P(o))||le(0,0),ue(a,ke,o.type_params)),de.annotations(a,o,o.args,o.returns)||le(0,0),ae(a,o.name,O,o,o.lineno,o.col_offset,o.end_lineno,o.end_col_offset)||le(0,0),a.cur.coroutine=1,ce(a,"arguments",o.args),ue(a,xe,o.body),ne(a)||le(0,0),o.type_params.length>0&&(ne(a)||le(0,0));break;case e.ast.AsyncWith:ue(a,je,o.items),ue(a,xe,o.body);break;case e.ast.AsyncFor:ce(a,$e,o.target),ce(a,$e,o.iter),ue(a,xe,o.body),o.orelse&&ue(a,xe,o.orelse);break;default:console.log("unhandled",o)}le(0,1)};const ge="alias",ve="excepthandler",$e="expr",ye="keyword",be="match_case",we="pattern",xe="stmt",ke="type_param",je="withitem";function Be(t,r,n,a,o,s){var i=r.constructor===e.ast.GeneratorExp,_=a[0];if(t.cur.comp_iter_expr++,ce(t,$e,_.iter),t.cur.comp_iter_expr--,!n||!ae(t,n,O,r,r.lineno,r.col_offset,r.end_lineno,r.end_col_offset))return 0;switch(r.constructor){case e.ast.ListComp:t.cur.comprehension=1;break;case e.ast.SetComp:t.cur.comprehension=3;break;case e.ast.DictComp:t.cur.comprehension=2;break;default:t.cur.comprehension=4}if(_.is_async&&(t.cur.coroutine=1),!function(e,t){var r;return ie(e,"."+t,u,[(r=e.cur).lineno,r.col_offset,r.end_lineno,r.end_col_offset])?1:0}(t,0))return ne(t),0;t.cur.comp_iter_target=1,ce(t,$e,_.target),t.cur.comp_iter_target=0,ue(t,$e,_.ifs),function(e,t,r,n){for(var a=n,o=r.length;a<o;a++){var s=r[a];de[t](e,s)||le(0,0)}}(t,"comprehension",a,1),s&&ce(t,$e,s),ce(t,$e,o),t.cur.generator=i;var l=t.cur.coroutine&&!i;return ne(t)?(l&&(t.cur.coroutine=1),1):0}function Ee(e,t,r){var n,a=e.cur.type;if(a==A)n=z(R,"'%s' can not be used within an annotation",t);else if(a==I)n=z(R,"'%s' can not be used within a TypeVar bound",t);else if(a==C)n=z(R,"'%s' can not be used within a type alias",t);else{if(a!=M)return 1;n=z(R,"'%s' can not be used within the definition of a generic",t)}throw Y(n,e.filename,r.lineno,r.col_offset,r.end_lineno,r.end_col_offset),n}function Ne(t,r){var n=t.cur.comprehension,a=J(R,1==n?"'yield' inside list comprehension":3==n?"'yield' inside set comprehension":2==n?"'yield' inside dict comprehension":"'yield' inside generator expression");throw a.$frame_obj=e.frame_obj,Y(a,t.filename,r.lineno,r.col_offset,r.end_lineno,r.end_col_offset),a}de.expr=function(t,r){switch(r.constructor){case e.ast.NamedExpr:Ee(t,"named expression",r)||le(0,0),me(t,r)||le(0,0);break;case e.ast.BoolOp:ue(t,"expr",r.values);break;case e.ast.BinOp:ce(t,"expr",r.left),ce(t,"expr",r.right);break;case e.ast.UnaryOp:ce(t,"expr",r.operand);break;case e.ast.Lambda:0,r.args.defaults&&ue(t,"expr",r.args.defaults),r.args.kw_defaults&&fe(t,"expr",r.args.kw_defaults),ae(t,q,O,r,r.lineno,r.col_offset,r.end_lineno,r.end_col_offset)||le(0,0),ce(t,"arguments",r.args),ce(t,"expr",r.body),ne(t)||le(0,0);break;case e.ast.IfExp:ce(t,"expr",r.test),ce(t,"expr",r.body),ce(t,"expr",r.orelse);break;case e.ast.Dict:fe(t,"expr",r.keys),ue(t,"expr",r.values);break;case e.ast.Set:ue(t,"expr",r.elts);break;case e.ast.GeneratorExp:de.genexp(t,r)||le(0,0);break;case e.ast.ListComp:de.listcomp(t,r)||le(0,0);break;case e.ast.SetComp:de.setcomp(t,r)||le(0,0);break;case e.ast.DictComp:de.dictcomp(t,r)||le(0,0);break;case e.ast.Yield:if(Ee(t,"yield expression",r)||le(0,0),r.value&&ce(t,"expr",r.value),t.cur.generator=1,t.cur.comprehension)return Ne(t,r);break;case e.ast.YieldFrom:if(Ee(t,"yield expression",r)||le(0,0),ce(t,"expr",r.value),t.cur.generator=1,t.cur.comprehension)return Ne(t,r);break;case e.ast.Await:Ee(t,"await expression",r)||le(0,0),ce(t,"expr",r.value),t.cur.coroutine=1;break;case e.ast.Compare:ce(t,"expr",r.left),ue(t,"expr",r.comparators);break;case e.ast.Call:ce(t,"expr",r.func),ue(t,"expr",r.args),fe(t,"keyword",r.keywords);break;case e.ast.FormattedValue:ce(t,"expr",r.value),r.format_spec&&ce(t,"expr",r.format_spec);break;case e.ast.JoinedStr:ue(t,"expr",r.values);break;case e.ast.Constant:break;case e.ast.Attribute:ce(t,"expr",r.value);break;case e.ast.Subscript:ce(t,"expr",r.value),ce(t,"expr",r.slice);break;case e.ast.Starred:ce(t,"expr",r.value);break;case e.ast.Slice:r.lower&&ce(t,$e,r.lower),r.upper&&ce(t,$e,r.upper),r.step&&ce(t,$e,r.step);break;case e.ast.Name:var n=r.ctx instanceof e.ast.Load?p:c;ie(t,r.id,n,P(r))||le(0,0),r.ctx instanceof e.ast.Load&&G(t.cur)&&"super"==r.id&&(ie(t,"__class__",p,P(r))||le(0,0));break;case e.ast.List:case e.ast.Tuple:ue(t,$e,r.elts)}le(0,1)},de.type_param=function(t,r){switch(r.constructor){case e.ast.TypeVar:if(ie(t,r.name,g|c,P(r))||le(0,0),r.bound){var n=t.cur.can_see_class_scope;ae(t,r.name,I,r,P(r))||le(0,0),t.cur.can_see_class_scope=n,n&&!ie(t,"__classdict__",p,P(r.bound))&&le(0,0),ce(t,$e,r.bound),ne(t)||le(0,0)}break;case e.ast.TypeVarTuple:case e.ast.ParamSpec:ie(t,r.name,g|c,P(r))||le(0,0)}le(0,1)},de.pattern=function(t,r){switch(r.constructor){case e.ast.MatchValue:ce(t,$e,r.value);break;case e.ast.MatchSingleton:break;case e.ast.MatchSequence:ue(t,we,r.patterns);break;case e.ast.MatchStar:r.name&&ie(t,r.name,c,P(r));break;case e.ast.MatchMapping:ue(t,$e,r.keys),ue(t,we,r.patterns),r.rest&&ie(t,r.rest,c,P(r));break;case e.ast.MatchClass:ce(t,$e,r.cls),ue(t,we,r.patterns),ue(t,we,r.kwd_patterns);break;case e.ast.MatchAs:r.pattern&&ce(t,we,r.pattern),r.name&&ie(t,r.name,c,P(r));break;case e.ast.MatchOr:ue(t,we,r.patterns)}le(0,1)},de.params=function(e,t){if(!t)return-1;for(var r of t)if(!ie(e,r.arg,u,P(r)))return 0;return 1},de.annotation=function(e,t){var r=e.future.features&E;return r&&!ae(e,"_annotation",A,t,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset)&&le(0,0),ce(e,$e,t),r&&!ne(e)&&le(0,0),1},de.argannotations=function(e,t){if(!t)return-1;for(var r of t)r.annotation&&ce(e,$e,r.annotation);return 1},de.annotations=function(e,t,r,n){var a=e.future.ff_features&E;return a&&!ae(e,"_annotation",A,t,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset)&&le(0,0),r.posonlyargs&&!de.argannotations(e,r.posonlyargs)||r.args&&!de.argannotations(e,r.args)?0:(r.vararg&&r.vararg.annotation&&ce(e,$e,r.vararg.annotation),r.kwarg&&r.kwarg.annotation&&ce(e,$e,r.kwarg.annotation),r.kwonlyargs&&!de.argannotations(e,r.kwonlyargs)?0:(a&&!ne(e)&&le(0,0),n&&!de.annotation(e,n)&&le(0,0),1))},de.arguments=function(e,t){if(t.posonlyargs&&!de.params(e,t.posonlyargs))return 0;if(t.args&&!de.params(e,t.args))return 0;if(t.kwonlyargs&&!de.params(e,t.kwonlyargs))return 0;if(t.vararg){if(!ie(e,t.vararg.arg,u,P(t.vararg)))return 0;e.cur.varargs=1}if(t.kwarg){if(!ie(e,t.kwarg.arg,u,P(t.kwarg)))return 0;e.cur.varkeywords=1}return 1},de.excepthandler=function(e,t){return t.type&&ce(e,$e,t.type),t.name&&!ie(e,t.name,c,P(t))?0:(ue(e,xe,t.body),1)},de.withitem=function(e,t){return ce(e,"expr",t.context_expr),t.optional_vars&&ce(e,"expr",t.optional_vars),1},de.match_case=function(e,t){return ce(e,we,t.pattern),t.guard&&ce(e,$e,t.guard),ue(e,xe,t.body),1},de.alias=function(e,t){var r,n=t.asname==N?t.name:t.asname,a=n.search("\\.");if(-1!=a){if(!(r=n.substring(0,a)))return 0}else r=n;if("*"!=n)return ie(e,r,128,P(t));if(e.cur.type!=S){var o=t.lineno,s=t.col_offset,i=t.end_lineno,_=t.end_col_offset,l=J(R,"import * only allowed at module level");throw Y(l,e.filename,o,s,i,_),l}return e.cur.$has_import_star=!0,1},de.comprehension=function(e,t){return e.cur.comp_iter_target=1,ce(e,$e,t.target),e.cur.comp_iter_target=0,e.cur.comp_iter_expr++,ce(e,$e,t.iter),e.cur.comp_iter_expr--,ue(e,$e,t.ifs),t.is_async&&(e.cur.coroutine=1),1},de.keyword=function(e,t){return ce(e,$e,t.value),1},de.genexp=function(e,t){return Be(e,t,"genexpr",t.generators,t.elt,N)},de.listcomp=function(e,t){return Be(e,t,"listcomp",t.generators,t.elt,N)},de.setcomp=function(e,t){return Be(e,t,"setcomp",t.generators,t.elt,N)},de.dictcomp=function(e,t){return Be(e,t,"dictcomp",t.generators,t.key,t.value)}}(__BRYTHON__);var docs={ArithmeticError:"Base class for arithmetic errors.",AssertionError:"Assertion failed.",AttributeError:"Attribute not found.",BaseException:"Common base class for all exceptions",BaseExceptionGroup:"A combination of multiple unrelated exceptions.",BlockingIOError:"I/O operation would block.",BrokenPipeError:"Broken pipe.",BufferError:"Buffer error.",BytesWarning:"Base class for warnings about bytes and buffer related problems, mostly\nrelated to conversion from str or comparing to str.",ChildProcessError:"Child process error.",ConnectionAbortedError:"Connection aborted.",ConnectionError:"Connection error.",ConnectionRefusedError:"Connection refused.",ConnectionResetError:"Connection reset.",DeprecationWarning:"Base class for warnings about deprecated features.",EOFError:"Read beyond end of file.",Ellipsis:"",EncodingWarning:"Base class for warnings about encodings.",EnvironmentError:"Base class for I/O related errors.",Exception:"Common base class for all non-exit exceptions.",ExceptionGroup:"",False:"bool(x) -> bool\n\nReturns True when the argument x is true, False otherwise.\nThe builtins True and False are the only two instances of the class bool.\nThe class bool is a subclass of the class int, and cannot be subclassed.",FileExistsError:"File already exists.",FileNotFoundError:"File not found.",FloatingPointError:"Floating point operation failed.",FutureWarning:"Base class for warnings about constructs that will change semantically\nin the future.",GeneratorExit:"Request that a generator exit.",IOError:"Base class for I/O related errors.",ImportError:"Import can't find module, or can't find name in module.",ImportWarning:"Base class for warnings about probable mistakes in module imports",IndentationError:"Improper indentation.",IndexError:"Sequence index out of range.",InterruptedError:"Interrupted by signal.",IsADirectoryError:"Operation doesn't work on directories.",KeyError:"Mapping key not found.",KeyboardInterrupt:"Program interrupted by user.",LookupError:"Base class for lookup errors.",MemoryError:"Out of memory.",ModuleNotFoundError:"Module not found.",NameError:"Name not found globally.",None:"",NotADirectoryError:"Operation only works on directories.",NotImplemented:"",NotImplementedError:"Method or function hasn't been implemented yet.",OSError:"Base class for I/O related errors.",OverflowError:"Result too large to be represented.",PendingDeprecationWarning:"Base class for warnings about features which will be deprecated\nin the future.",PermissionError:"Not enough permissions.",ProcessLookupError:"Process not found.",RecursionError:"Recursion limit exceeded.",ReferenceError:"Weak ref proxy used after referent went away.",ResourceWarning:"Base class for warnings about resource usage.",RuntimeError:"Unspecified run-time error.",RuntimeWarning:"Base class for warnings about dubious runtime behavior.",StopAsyncIteration:"Signal the end from iterator.__anext__().",StopIteration:"Signal the end from iterator.__next__().",SyntaxError:"Invalid syntax.",SyntaxWarning:"Base class for warnings about dubious syntax.",SystemError:"Internal error in the Python interpreter.\n\nPlease report this to the Python maintainer, along with the traceback,\nthe Python version, and the hardware/OS platform and version.",SystemExit:"Request to exit from the interpreter.",TabError:"Improper mixture of spaces and tabs.",TimeoutError:"Timeout expired.",True:"bool(x) -> bool\n\nReturns True when the argument x is true, False otherwise.\nThe builtins True and False are the only two instances of the class bool.\nThe class bool is a subclass of the class int, and cannot be subclassed.",TypeError:"Inappropriate argument type.",UnboundLocalError:"Local name referenced but not bound to a value.",UnicodeDecodeError:"Unicode decoding error.",UnicodeEncodeError:"Unicode encoding error.",UnicodeError:"Unicode related error.",UnicodeTranslateError:"Unicode translation error.",UnicodeWarning:"Base class for warnings about Unicode related problems, mostly\nrelated to conversion problems.",UserWarning:"Base class for warnings generated by user code.",ValueError:"Inappropriate argument value (of correct type).",Warning:"Base class for warning categories.",WindowsError:"Base class for I/O related errors.",ZeroDivisionError:"Second argument to a division or modulo operation was zero.",__debug__:"bool(x) -> bool\n\nReturns True when the argument x is true, False otherwise.\nThe builtins True and False are the only two instances of the class bool.\nThe class bool is a subclass of the class int, and cannot be subclassed.",abs:"Return the absolute value of the argument.",aiter:"Return an AsyncIterator for an AsyncIterable object.",all:"Return True if bool(x) is True for all values x in the iterable.\n\nIf the iterable is empty, return True.",anext:"async anext(aiterator[, default])\n\nReturn the next item from the async iterator.  If default is given and the async\niterator is exhausted, it is returned instead of raising StopAsyncIteration.",any:"Return True if bool(x) is True for any x in the iterable.\n\nIf the iterable is empty, return False.",ascii:"Return an ASCII-only representation of an object.\n\nAs repr(), return a string containing a printable representation of an\nobject, but escape the non-ASCII characters in the string returned by\nrepr() using \\\\x, \\\\u or \\\\U escapes. This generates a string similar\nto that returned by repr() in Python 2.",bin:"Return the binary representation of an integer.\n\n   >>> bin(2796202)\n   '0b1010101010101010101010'",bool:"bool(x) -> bool\n\nReturns True when the argument x is true, False otherwise.\nThe builtins True and False are the only two instances of the class bool.\nThe class bool is a subclass of the class int, and cannot be subclassed.",breakpoint:"breakpoint(*args, **kws)\n\nCall sys.breakpointhook(*args, **kws).  sys.breakpointhook() must accept\nwhatever arguments are passed.\n\nBy default, this drops you into the pdb debugger.",bytearray:"bytearray(iterable_of_ints) -> bytearray\nbytearray(string, encoding[, errors]) -> bytearray\nbytearray(bytes_or_buffer) -> mutable copy of bytes_or_buffer\nbytearray(int) -> bytes array of size given by the parameter initialized with null bytes\nbytearray() -> empty bytes array\n\nConstruct a mutable bytearray object from:\n  - an iterable yielding integers in range(256)\n  - a text string encoded using the specified encoding\n  - a bytes or a buffer object\n  - any object implementing the buffer API.\n  - an integer",bytes:"bytes(iterable_of_ints) -> bytes\nbytes(string, encoding[, errors]) -> bytes\nbytes(bytes_or_buffer) -> immutable copy of bytes_or_buffer\nbytes(int) -> bytes object of size given by the parameter initialized with null bytes\nbytes() -> empty bytes object\n\nConstruct an immutable array of bytes from:\n  - an iterable yielding integers in range(256)\n  - a text string encoded using the specified encoding\n  - any object implementing the buffer API.\n  - an integer",callable:"Return whether the object is callable (i.e., some kind of function).\n\nNote that classes are callable, as are instances of classes with a\n__call__() method.",chr:"Return a Unicode string of one character with ordinal i; 0 <= i <= 0x10ffff.",classmethod:"classmethod(function) -> method\n\nConvert a function to be a class method.\n\nA class method receives the class as implicit first argument,\njust like an instance method receives the instance.\nTo declare a class method, use this idiom:\n\n  class C:\n      @classmethod\n      def f(cls, arg1, arg2, argN):\n          ...\n\nIt can be called either on the class (e.g. C.f()) or on an instance\n(e.g. C().f()).  The instance is ignored except for its class.\nIf a class method is called for a derived class, the derived class\nobject is passed as the implied first argument.\n\nClass methods are different than C++ or Java static methods.\nIf you want those, see the staticmethod builtin.",compile:"Compile source into a code object that can be executed by exec() or eval().\n\nThe source code may represent a Python module, statement or expression.\nThe filename will be used for run-time error messages.\nThe mode must be 'exec' to compile a module, 'single' to compile a\nsingle (interactive) statement, or 'eval' to compile an expression.\nThe flags argument, if present, controls which future statements influence\nthe compilation of the code.\nThe dont_inherit argument, if true, stops the compilation inheriting\nthe effects of any future statements in effect in the code calling\ncompile; if absent or false these statements do influence the compilation,\nin addition to any features explicitly specified.",complex:"Create a complex number from a real part and an optional imaginary part.\n\nThis is equivalent to (real + imag*1j) where imag defaults to 0.",copyright:"interactive prompt objects for printing the license text, a list of\n    contributors and the copyright notice.",credits:"interactive prompt objects for printing the license text, a list of\n    contributors and the copyright notice.",delattr:"Deletes the named attribute from the given object.\n\ndelattr(x, 'y') is equivalent to ``del x.y``",dict:"dict() -> new empty dictionary\ndict(mapping) -> new dictionary initialized from a mapping object's\n    (key, value) pairs\ndict(iterable) -> new dictionary initialized as if via:\n    d = {}\n    for k, v in iterable:\n        d[k] = v\ndict(**kwargs) -> new dictionary initialized with the name=value pairs\n    in the keyword argument list.  For example:  dict(one=1, two=2)",dir:"Show attributes of an object.\n\nIf called without an argument, return the names in the current scope.\nElse, return an alphabetized list of names comprising (some of) the attributes\nof the given object, and of attributes reachable from it.\nIf the object supplies a method named __dir__, it will be used; otherwise\nthe default dir() logic is used and returns:\n  for a module object: the module's attributes.\n  for a class object:  its attributes, and recursively the attributes\n    of its bases.\n  for any other object: its attributes, its class's attributes, and\n    recursively the attributes of its class's base classes.",divmod:"Return the tuple (x//y, x%y).  Invariant: div*y + mod == x.",enumerate:"Return an enumerate object.\n\n  iterable\n    an object supporting iteration\n\nThe enumerate object yields pairs containing a count (from start, which\ndefaults to zero) and a value yielded by the iterable argument.\n\nenumerate is useful for obtaining an indexed list:\n    (0, seq[0]), (1, seq[1]), (2, seq[2]), ...",eval:"Evaluate the given source in the C of globals and locals.\n\nThe source may be a string representing a Python expression\nor a code object as returned by compile().\nThe globals must be a dictionary and locals can be any mapping,\ndefaulting to the current globals and locals.\nIf only globals is given, locals defaults to it.",exec:"Execute the given source in the C of globals and locals.\n\nThe source may be a string representing one or more Python statements\nor a code object as returned by compile().\nThe globals must be a dictionary and locals can be any mapping,\ndefaulting to the current globals and locals.\nIf only globals is given, locals defaults to it.\nThe closure must be a tuple of cellvars, and can only be used\nwhen source is a code object requiring exactly that many cellvars.",exit:"",filter:"filter(function or None, iterable) --\x3e filter object\n\nReturn an iterator yielding those items of iterable for which function(item)\nis true. If function is None, return the items that are true.",float:"Convert a string or number to a floating point number, if possible.",format:"Return type(value).__format__(value, format_spec)\n\nMany built-in types implement format_spec according to the\nFormat Specification Mini-language. See help('FORMATTING').\n\nIf type(value) does not supply a method named __format__\nand format_spec is empty, then str(value) is returned.\nSee also help('SPECIALMETHODS').",frozenset:"frozenset() -> empty frozenset object\nfrozenset(iterable) -> frozenset object\n\nBuild an immutable unordered collection of unique elements.",getattr:"Get a named attribute from an object.\n\ngetattr(x, 'y') is equivalent to x.y\nWhen a default argument is given, it is returned when the attribute doesn't\nexist; without it, an exception is raised in that case.",globals:"Return the dictionary containing the current scope's global variables.\n\nNOTE: Updates to this dictionary *will* affect name lookups in the current\nglobal scope and vice-versa.",hasattr:"Return whether the object has an attribute with the given name.\n\nThis is done by calling getattr(obj, name) and catching AttributeError.",hash:"Return the hash value for the given object.\n\nTwo objects that compare equal must also have the same hash value, but the\nreverse is not necessarily true.",help:"Define the builtin 'help'.\n\n    This is a wrapper around pydoc.help that provides a helpful message\n    when 'help' is typed at the Python interactive prompt.\n\n    Calling help() at the Python prompt starts an interactive help session.\n    Calling help(thing) prints help for the python object 'thing'.\n    ",hex:"Return the hexadecimal representation of an integer.\n\n   >>> hex(12648430)\n   '0xc0ffee'",id:"Return the identity of an object.\n\nThis is guaranteed to be unique among simultaneously existing objects.\n(CPython uses the object's memory address.)",input:"Read a string from standard input.  The trailing newline is stripped.\n\nThe prompt string, if given, is printed to standard output without a\ntrailing newline before reading input.\n\nIf the user hits EOF (*nix: Ctrl-D, Windows: Ctrl-Z+Return), raise EOFError.\nOn *nix systems, readline is used if available.",int:"int([x]) -> integer\nint(x, base=10) -> integer\n\nConvert a number or string to an integer, or return 0 if no arguments\nare given.  If x is a number, return x.__int__().  For floating point\nnumbers, this truncates towards zero.\n\nIf x is not a number or if base is given, then x must be a string,\nbytes, or bytearray instance representing an integer literal in the\ngiven base.  The literal can be preceded by '+' or '-' and be surrounded\nby whitespace.  The base defaults to 10.  Valid bases are 0 and 2-36.\nBase 0 means to interpret the base from the string as an integer literal.\n>>> int('0b100', base=0)\n4",isinstance:"Return whether an object is an instance of a class or of a subclass thereof.\n\nA tuple, as in ``isinstance(x, (A, B, ...))``, may be given as the target to\ncheck against. This is equivalent to ``isinstance(x, A) or isinstance(x, B)\nor ...`` etc.",issubclass:"Return whether 'cls' is derived from another class or is the same class.\n\nA tuple, as in ``issubclass(x, (A, B, ...))``, may be given as the target to\ncheck against. This is equivalent to ``issubclass(x, A) or issubclass(x, B)\nor ...``.",iter:"Get an iterator from an object.\n\nIn the first form, the argument must supply its own iterator, or be a sequence.\nIn the second form, the callable is called until it returns the sentinel.",len:"Return the number of items in a container.",license:"interactive prompt objects for printing the license text, a list of\n    contributors and the copyright notice.",list:"Built-in mutable sequence.\n\nIf no argument is given, the constructor creates a new empty list.\nThe argument must be an iterable if specified.",locals:"Return a dictionary containing the current scope's local variables.\n\nNOTE: Whether or not updates to this dictionary will affect name lookups in\nthe local scope and vice-versa is *implementation dependent* and not\ncovered by any backwards compatibility guarantees.",map:"map(func, *iterables) --\x3e map object\n\nMake an iterator that computes the function using arguments from\neach of the iterables.  Stops when the shortest iterable is exhausted.",max:"max(iterable, *[, default=obj, key=func]) -> value\nmax(arg1, arg2, *args, *[, key=func]) -> value\n\nWith a single iterable argument, return its biggest item. The\ndefault keyword-only argument specifies an object to return if\nthe provided iterable is empty.\nWith two or more arguments, return the largest argument.",memoryview:"Create a new memoryview object which references the given object.",min:"min(iterable, *[, default=obj, key=func]) -> value\nmin(arg1, arg2, *args, *[, key=func]) -> value\n\nWith a single iterable argument, return its smallest item. The\ndefault keyword-only argument specifies an object to return if\nthe provided iterable is empty.\nWith two or more arguments, return the smallest argument.",next:"Return the next item from the iterator.\n\nIf default is given and the iterator is exhausted,\nit is returned instead of raising StopIteration.",object:"The base class of the class hierarchy.\n\nWhen called, it accepts no arguments and returns a new featureless\ninstance that has no instance attributes and cannot be given any.\n",oct:"Return the octal representation of an integer.\n\n   >>> oct(342391)\n   '0o1234567'",open:"Open file and return a stream.  Raise OSError upon failure.\n\nfile is either a text or byte string giving the name (and the path\nif the file isn't in the current working directory) of the file to\nbe opened or an integer file descriptor of the file to be\nwrapped. (If a file descriptor is given, it is closed when the\nreturned I/O object is closed, unless closefd is set to False.)\n\nmode is an optional string that specifies the mode in which the file\nis opened. It defaults to 'r' which means open for reading in text\nmode.  Other common values are 'w' for writing (truncating the file if\nit already exists), 'x' for creating and writing to a new file, and\n'a' for appending (which on some Unix systems, means that all writes\nappend to the end of the file regardless of the current seek position).\nIn text mode, if encoding is not specified the encoding used is platform\ndependent: locale.getencoding() is called to get the current locale encoding.\n(For reading and writing raw bytes use binary mode and leave encoding\nunspecified.) The available modes are:\n\n========= ===============================================================\nCharacter Meaning\n--------- ---------------------------------------------------------------\n'r'       open for reading (default)\n'w'       open for writing, truncating the file first\n'x'       create a new file and open it for writing\n'a'       open for writing, appending to the end of the file if it exists\n'b'       binary mode\n't'       text mode (default)\n'+'       open a disk file for updating (reading and writing)\n========= ===============================================================\n\nThe default mode is 'rt' (open for reading text). For binary random\naccess, the mode 'w+b' opens and truncates the file to 0 bytes, while\n'r+b' opens the file without truncation. The 'x' mode implies 'w' and\nraises an `FileExistsError` if the file already exists.\n\nPython distinguishes between files opened in binary and text modes,\neven when the underlying operating system doesn't. Files opened in\nbinary mode (appending 'b' to the mode argument) return contents as\nbytes objects without any decoding. In text mode (the default, or when\n't' is appended to the mode argument), the contents of the file are\nreturned as strings, the bytes having been first decoded using a\nplatform-dependent encoding or using the specified encoding if given.\n\nbuffering is an optional integer used to set the buffering policy.\nPass 0 to switch buffering off (only allowed in binary mode), 1 to select\nline buffering (only usable in text mode), and an integer > 1 to indicate\nthe size of a fixed-size chunk buffer.  When no buffering argument is\ngiven, the default buffering policy works as follows:\n\n* Binary files are buffered in fixed-size chunks; the size of the buffer\n  is chosen using a heuristic trying to determine the underlying device's\n  \"block size\" and falling back on `io.DEFAULT_BUFFER_SIZE`.\n  On many systems, the buffer will typically be 4096 or 8192 bytes long.\n\n* \"Interactive\" text files (files for which isatty() returns True)\n  use line buffering.  Other text files use the policy described above\n  for binary files.\n\nencoding is the name of the encoding used to decode or encode the\nfile. This should only be used in text mode. The default encoding is\nplatform dependent, but any encoding supported by Python can be\npassed.  See the codecs module for the list of supported encodings.\n\nerrors is an optional string that specifies how encoding errors are to\nbe handled---this argument should not be used in binary mode. Pass\n'strict' to raise a ValueError exception if there is an encoding error\n(the default of None has the same effect), or pass 'ignore' to ignore\nerrors. (Note that ignoring encoding errors can lead to data loss.)\nSee the documentation for codecs.register or run 'help(codecs.Codec)'\nfor a list of the permitted encoding error strings.\n\nnewline controls how universal newlines works (it only applies to text\nmode). It can be None, '', '\\n', '\\r', and '\\r\\n'.  It works as\nfollows:\n\n* On input, if newline is None, universal newlines mode is\n  enabled. Lines in the input can end in '\\n', '\\r', or '\\r\\n', and\n  these are translated into '\\n' before being returned to the\n  caller. If it is '', universal newline mode is enabled, but line\n  endings are returned to the caller untranslated. If it has any of\n  the other legal values, input lines are only terminated by the given\n  string, and the line ending is returned to the caller untranslated.\n\n* On output, if newline is None, any '\\n' characters written are\n  translated to the system default line separator, os.linesep. If\n  newline is '' or '\\n', no translation takes place. If newline is any\n  of the other legal values, any '\\n' characters written are translated\n  to the given string.\n\nIf closefd is False, the underlying file descriptor will be kept open\nwhen the file is closed. This does not work when a file name is given\nand must be True in that case.\n\nA custom opener can be used by passing a callable as *opener*. The\nunderlying file descriptor for the file object is then obtained by\ncalling *opener* with (*file*, *flags*). *opener* must return an open\nfile descriptor (passing os.open as *opener* results in functionality\nsimilar to passing None).\n\nopen() returns a file object whose type depends on the mode, and\nthrough which the standard file operations such as reading and writing\nare performed. When open() is used to open a file in a text mode ('w',\n'r', 'wt', 'rt', etc.), it returns a TextIOWrapper. When used to open\na file in a binary mode, the returned class varies: in read binary\nmode, it returns a BufferedReader; in write binary and append binary\nmodes, it returns a BufferedWriter, and in read/write mode, it returns\na BufferedRandom.\n\nIt is also possible to use a string or bytearray as a file for both\nreading and writing. For strings StringIO can be used like a file\nopened in a text mode, and for bytes a BytesIO can be used like a file\nopened in a binary mode.",ord:"Return the Unicode code point for a one-character string.",pow:"Equivalent to base**exp with 2 arguments or base**exp % mod with 3 arguments\n\nSome types, such as ints, are able to use a more efficient algorithm when\ninvoked using the three argument form.",print:"Prints the values to a stream, or to sys.stdout by default.\n\n  sep\n    string inserted between values, default a space.\n  end\n    string appended after the last value, default a newline.\n  file\n    a file-like object (stream); defaults to the current sys.stdout.\n  flush\n    whether to forcibly flush the stream.",property:"Property attribute.\n\n  fget\n    function to be used for getting an attribute value\n  fset\n    function to be used for setting an attribute value\n  fdel\n    function to be used for del'ing an attribute\n  doc\n    docstring\n\nTypical use is to define a managed attribute x:\n\nclass C(object):\n    def getx(self): return self._x\n    def setx(self, value): self._x = value\n    def delx(self): del self._x\n    x = property(getx, setx, delx, \"I'm the 'x' property.\")\n\nDecorators make defining new properties or modifying existing ones easy:\n\nclass C(object):\n    @property\n    def x(self):\n        \"I am the 'x' property.\"\n        return self._x\n    @x.setter\n    def x(self, value):\n        self._x = value\n    @x.deleter\n    def x(self):\n        del self._x",quit:"",range:"range(stop) -> range object\nrange(start, stop[, step]) -> range object\n\nReturn an object that produces a sequence of integers from start (inclusive)\nto stop (exclusive) by step.  range(i, j) produces i, i+1, i+2, ..., j-1.\nstart defaults to 0, and stop is omitted!  range(4) produces 0, 1, 2, 3.\nThese are exactly the valid indices for a list of 4 elements.\nWhen step is given, it specifies the increment (or decrement).",repr:"Return the canonical string representation of the object.\n\nFor many object types, including most builtins, eval(repr(obj)) == obj.",reversed:"Return a reverse iterator over the values of the given sequence.",round:"Round a number to a given precision in decimal digits.\n\nThe return value is an integer if ndigits is omitted or None.  Otherwise\nthe return value has the same type as the number.  ndigits may be negative.",set:"set() -> new empty set object\nset(iterable) -> new set object\n\nBuild an unordered collection of unique elements.",setattr:"Sets the named attribute on the given object to the specified value.\n\nsetattr(x, 'y', v) is equivalent to ``x.y = v``",slice:"slice(stop)\nslice(start, stop[, step])\n\nCreate a slice object.  This is used for extended slicing (e.g. a[0:10:2]).",sorted:"Return a new list containing all items from the iterable in ascending order.\n\nA custom key function can be supplied to customize the sort order, and the\nreverse flag can be set to request the result in descending order.",staticmethod:"staticmethod(function) -> method\n\nConvert a function to be a static method.\n\nA static method does not receive an implicit first argument.\nTo declare a static method, use this idiom:\n\n     class C:\n         @staticmethod\n         def f(arg1, arg2, argN):\n             ...\n\nIt can be called either on the class (e.g. C.f()) or on an instance\n(e.g. C().f()). Both the class and the instance are ignored, and\nneither is passed implicitly as the first argument to the method.\n\nStatic methods in Python are similar to those found in Java or C++.\nFor a more advanced concept, see the classmethod builtin.",str:"str(object='') -> str\nstr(bytes_or_buffer[, encoding[, errors]]) -> str\n\nCreate a new string object from the given object. If encoding or\nerrors is specified, then the object must expose a data buffer\nthat will be decoded using the given encoding and error handler.\nOtherwise, returns the result of object.__str__() (if defined)\nor repr(object).\nencoding defaults to sys.getdefaultencoding().\nerrors defaults to 'strict'.",sum:"Return the sum of a 'start' value (default: 0) plus an iterable of numbers\n\nWhen the iterable is empty, return the start value.\nThis function is intended specifically for use with numeric values and may\nreject non-numeric types.",super:"super() -> same as super(__class__, <first argument>)\nsuper(type) -> unbound super object\nsuper(type, obj) -> bound super object; requires isinstance(obj, type)\nsuper(type, type2) -> bound super object; requires issubclass(type2, type)\nTypical use to call a cooperative superclass method:\nclass C(B):\n    def meth(self, arg):\n        super().meth(arg)\nThis works for class methods too:\nclass C(B):\n    @classmethod\n    def cmeth(cls, arg):\n        super().cmeth(arg)\n",tuple:"Built-in immutable sequence.\n\nIf no argument is given, the constructor returns an empty tuple.\nIf iterable is specified the tuple is initialized from iterable's items.\n\nIf the argument is a tuple, the return value is the same object.",type:"type(object) -> the object's type\ntype(name, bases, dict, **kwds) -> a new type",vars:"Show vars.\n\nWithout arguments, equivalent to locals().\nWith an argument, equivalent to object.__dict__.",zip:"zip(*iterables, strict=False) --\x3e Yield tuples until an input is exhausted.\n\n   >>> list(zip('abcdefg', range(3), range(4)))\n   [('a', 0, 0), ('b', 1, 1), ('c', 2, 2)]\n\nThe zip object yields n-length tuples, where n is the number of iterables\npassed as positional arguments to zip().  The i-th element in every tuple\ncomes from the i-th iterable argument to zip().  This continues until the\nshortest argument is exhausted.\n\nIf strict is true and one of the arguments is exhausted before the others,\nraise a ValueError."};for(var key in docs)__BRYTHON__.builtins[key]&&["object","function"].includes(typeof __BRYTHON__.builtins[key])&&(__BRYTHON__.builtins[key].__doc__=docs[key]);__BRYTHON__.whenReady=new Promise((function(e,t){e()}));