"use strict";(self.webpackChunkofi_blog_versioned=self.webpackChunkofi_blog_versioned||[]).push([[26654],{54302:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>l});var r=s(85893),d=s(11151);const i={sidebar_custom_props:{id:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9"}},a="Linien Folger",t={id:"Robotik/linien-folgen/index",title:"Linien Folger",description:"Ein einfacher Ansatz f\xfcr einen Linienfolger w\xe4re, die Liniensensoren immer zu \xfcberpr\xfcfen und entsprechend die Motoren anzusteuern:",source:"@site/versioned_docs/version-26P/12-Robotik/02-linien-folgen/index.md",sourceDirName:"12-Robotik/02-linien-folgen",slug:"/Robotik/linien-folgen/",permalink:"/26P/Robotik/linien-folgen/",draft:!1,unlisted:!1,tags:[],version:"26P",frontMatter:{sidebar_custom_props:{id:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9"}},sidebar:"sidebar",previous:{title:"Einstieg",permalink:"/26P/Robotik/intro/"}},c={},l=[{value:"Zustandsdiagramm",id:"zustandsdiagramm",level:2},{value:"Ecken erkennen",id:"ecken-erkennen",level:2}];function o(e){const n={admonition:"admonition",code:"code",div:"div",h1:"h1",h2:"h2",img:"img",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",...(0,d.a)(),...e.components},{Answer:i,Comment:a,Dl:t,Figure:c}=n;return i||x("Answer",!0),a||x("Comment",!0),t||x("Dl",!0),c||x("Figure",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.h1,{id:"linien-folger",children:"Linien Folger"}),(0,r.jsx)(a,{nr:0,type:"heading",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),"\n",(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.p,{children:"Ein einfacher Ansatz f\xfcr einen Linienfolger w\xe4re, die Liniensensoren immer zu \xfcberpr\xfcfen und entsprechend die Motoren anzusteuern:"}),(0,r.jsx)(a,{nr:0,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),"\n",(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsxs)(t,{children:[(0,r.jsx)("dt",{children:(0,r.jsx)(n.p,{children:"Sensor M = 1"})}),(0,r.jsx)("dd",{children:(0,r.jsx)(n.p,{children:"Geradeaus fahren"})}),(0,r.jsx)("dt",{children:(0,r.jsx)(n.p,{children:"Sensor L1 = 1 und M = 0"})}),(0,r.jsx)("dd",{children:(0,r.jsx)(n.p,{children:"Linkskurve, da nun zu weit rechts"})}),(0,r.jsx)("dt",{children:(0,r.jsx)(n.p,{children:"Sensor R1 = 1 und M = 0"})}),(0,r.jsx)("dd",{children:(0,r.jsx)(n.p,{children:"Rechtskurve, da nun zu weit links"})})]}),(0,r.jsx)(a,{nr:1,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),"\n",(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.p,{children:"In Python w\xfcrde das etwa so aussehen:"}),(0,r.jsx)(a,{nr:2,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from microbit import *\nfrom maqueen import *\nwhile True:\n    if line_sensor(LineSensor.M) == 1:\n        motor_run(Motor.ALL, 40)\n    elif line_sensor(LineSensor.L1) == 1:\n        motor_run(Motor.LEFT, 0)\n        motor_run(Motor.RIGHT, 40)\n    elif line_sensor(LineSensor.R1) == 1:\n        motor_run(Motor.LEFT, 40)\n        motor_run(Motor.RIGHT, 0)\n"})}),"\n",(0,r.jsx)(n.admonition,{title:"Beachte",type:"note",children:(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsxs)(n.p,{children:["Weil zuerst der mittlere Sensor ",(0,r.jsx)(n.code,{children:"M"})," \xfcberpr\xfcft wird, ist bei den folgenden ",(0,r.jsx)(n.code,{children:"elif"})," Bedingungen bereits ",(0,r.jsx)(n.strong,{children:"sicher"}),", dass ",(0,r.jsx)(n.code,{children:"M"})," Null ist, da sonst die erste Bedingung zugetroffen h\xe4tte. Deshalb muss nicht noch ",(0,r.jsx)(n.code,{children:"... and line_sensor(LineSensor.M)==0"})," \xfcberpr\xfcft werden."]}),(0,r.jsx)(a,{nr:3,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]})}),"\n",(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.p,{children:"Dieser Ansatz funktioniert allerdings nicht zuverl\xe4ssig \ud83d\ude2d."}),(0,r.jsx)(a,{nr:4,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),"\n",(0,r.jsxs)(c,{children:[(0,r.jsx)(n.img,{alt:"Problem des einfachen Linienfolgers",src:s(88665).Z+"",width:"4061",height:"1135"}),(0,r.jsxs)("figcaption",{children:[(0,r.jsx)("span",{style:{flexGrow:1}}),"Problem des einfachen Linienfolgers",(0,r.jsx)("span",{style:{flexGrow:1}})]})]}),"\n",(0,r.jsxs)(n.admonition,{type:"aufgabe",children:[(0,r.jsx)(i,{type:"state",webKey:"f666e93e-fb45-453d-90bd-a1489dacefea"}),(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.p,{children:"Erkl\xe4ren Sie kurz anhand der obigen Abbilgung, weshalb der einfache Linienfolger nicht zuverl\xe4ssig funktioniert."}),(0,r.jsx)(a,{nr:5,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),(0,r.jsx)(i,{type:"text",webKey:"176cf1ac-a450-40f6-a4e2-35688a6c3a1e"})]}),"\n",(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.h2,{id:"zustandsdiagramm",children:"Zustandsdiagramm"}),(0,r.jsx)(a,{nr:1,type:"heading",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),"\n",(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.p,{children:"Um den Linienfolger robuster und zuverl\xe4ssiger zu machen, braucht es eine Zustandsmaschine. Der Roboter ist stets nur in einem Zustand. Abh\xe4ngig von den Sensorwerten wird dann der Zustand gewechselt. In jedem Zustand ist zudem definiert, wie die Motoren angesteuert werden."}),(0,r.jsx)(a,{nr:6,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),"\n",(0,r.jsxs)("div",{className:"flex-cards flex",children:[(0,r.jsx)("div",{className:"item card",style:{flexBasis:"max(390px, 50% - calc(1 * 0.4em))"},children:(0,r.jsxs)("div",{className:"card__body",children:["Im Unterricht haben wir folgendes Zustandsdiagramm erarbeitet:",(0,r.jsx)(n.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e Start\n    Start --\x3e Vorw\xe4rts\n    Vorw\xe4rts --\x3e Vorw\xe4rts: M=1\n    Vorw\xe4rts --\x3e Rechtskurve: M=0 & L1=0\n    Vorw\xe4rts --\x3e Linkskurve: M=0 & R1=0\n    Rechtskurve --\x3e Vorw\xe4rts: M=1\n    Linkskurve --\x3e Vorw\xe4rts: M=1"})]})}),(0,r.jsx)("div",{className:"item card",style:{flexBasis:"max(390px, 50% - calc(1 * 0.4em))"},children:(0,r.jsxs)("div",{className:"card__body",children:["In Python wurde dieses Zustandsdiagramm wie folgt umgesetzt:",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from microbit import *\nfrom maqueen import *\n\nzustand = 'vorw\xe4rts'\n\n# Zustandsmaschine umsetzen\nwhile True:\n    '''\n    VORW\xc4RTSFAHREN\n    '''\n    if zustand == 'vorw\xe4rts':\n        # zuerst immer Motoren ansteuern\n        # hier: beide Motoren fahren vorw\xe4rts\n        motor_run(Motor.ALL, 40)\n        # dann die Sensoren einlesen\n        if line_sensor(LINE_SENSOR.M) == 1:\n            # alles beim Alten, weiterfahren\n            zustand = 'vorw\xe4rts'\n        elif line_sensor(LINE_SENSOR.L1) == 0:\n            zustand = 'rechtskurve'\n        elif line_sensor(LINE_SENSOR.R1) == 0:\n            zustand = 'linkskurve'\n    '''\n    RECHTSKURVE FAHREN\n    '''\n    elif zustand == 'rechtskurve':\n        motor_run(Motor.LEFT, 40)\n        motor_run(Motor.RIGHT, 0)\n        ...\n    '''\n    LINKSKURVE FAHREN\n    '''\n    elif zustand == 'linkskurve':\n        motor_run(Motor.LEFT, 0)\n        motor_run(Motor.RIGHT, 40)\n        ...\n"})})]})})]}),"\n",(0,r.jsx)(n.admonition,{title:"Beachte",type:"note",children:(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.p,{children:"Mit diesem Zustandsdiagramm ist es nicht m\xf6glich, von einer Rechtskurve direkt zu einer Linkskurve \xfcberzugehen."}),(0,r.jsx)(a,{nr:7,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]})}),"\n",(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.p,{children:"Mit diesem Ansatz ist es nun auch m\xf6glich, den Roboter zuverl\xe4ssig auf der Linie zu halten."}),(0,r.jsx)(a,{nr:8,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),"\n",(0,r.jsx)(c,{children:(0,r.jsx)(n.img,{src:s(84274).Z+"",width:"4175",height:"1690"})}),"\n",(0,r.jsx)(n.admonition,{title:"Zustands\xfcberg\xe4nge",type:"tip",children:(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsxs)(n.p,{children:["Zustands\xfcberg\xe4nge werden ",(0,r.jsx)(n.strong,{children:"nur durch die Sensoren"})," ausgel\xf6st. Somit spielt es keine Rolle, wenn im Zustand ",(0,r.jsx)("strong",{className:"boxed",children:"Linkskurve"})," der Sensor ",(0,r.jsx)("strong",{className:"boxed",children:"L1"})," pl\xf6tzlich wieder weiss sieht. Der Roboter wird weiterhin eine Linkskurve fahren, bis der Sensor ",(0,r.jsx)("strong",{className:"boxed",children:"M"})," wieder schwarz sieht."]}),(0,r.jsx)(a,{nr:9,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]})}),"\n",(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.h2,{id:"ecken-erkennen",children:"Ecken erkennen"}),(0,r.jsx)(a,{nr:2,type:"heading",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),"\n",(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.p,{children:"Obiger Ansatz funktioniert gut, aber nicht perfekt."}),(0,r.jsx)(a,{nr:10,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),"\n",(0,r.jsx)(c,{children:(0,r.jsx)(n.img,{src:s(48672).Z+"",width:"3638",height:"2159"})}),"\n",(0,r.jsx)(n.admonition,{title:"Probleme",type:"danger",children:(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsxs)(t,{children:[(0,r.jsx)("dt",{children:(0,r.jsx)(n.p,{children:"Geradeaus"})}),(0,r.jsx)("dd",{children:(0,r.jsx)(n.p,{children:"\u274c"})}),(0,r.jsx)("dd",{children:(0,r.jsxs)(n.p,{children:["Der Liniensensor nimmt gleichzeitig bei ",(0,r.jsx)("strong",{className:"boxed",children:"M"}),", ",(0,r.jsx)("strong",{className:"boxed",children:"R1"})," und ",(0,r.jsx)("strong",{className:"boxed",children:"L1"})," weiss wahr. Da ",(0,r.jsx)("strong",{className:"boxed",children:"M"})," bis zuletzt aber schwarz war, wird der Roboter weiterhin geradeaus fahren."]})}),(0,r.jsx)("dt",{children:(0,r.jsx)(n.p,{children:"Rechtskurve"})}),(0,r.jsx)("dd",{children:(0,r.jsx)(n.p,{children:"\u274c"})}),(0,r.jsx)("dd",{children:(0,r.jsx)(n.p,{children:"Der Roboter f\xe4hrt etwas schief nach rechts."})}),(0,r.jsx)("dd",{children:(0,r.jsxs)(n.p,{children:["Vor dem Verlassen der Linie haben sowohl ",(0,r.jsx)("strong",{className:"boxed",children:"M"})," wie auch ",(0,r.jsx)("strong",{className:"boxed",children:"R1"})," schwarz gemessen."]})}),(0,r.jsx)("dd",{children:(0,r.jsxs)(n.p,{children:["Wegen der Schiefen Lage verl\xe4sst ",(0,r.jsx)("strong",{className:"boxed",children:"M"})," zuerst die Linie, weshalb der Roboter eine ",(0,r.jsx)(n.strong,{children:"Rechtskurve"})," f\xe4hrt."]})}),(0,r.jsx)("dt",{children:(0,r.jsx)(n.p,{children:"Linkskurve"})}),(0,r.jsx)("dd",{children:(0,r.jsx)(n.p,{children:"\u2705"})}),(0,r.jsx)("dd",{children:(0,r.jsx)(n.p,{children:"Der Roboter f\xe4hrt etwas schief nach links."})}),(0,r.jsx)("dd",{children:(0,r.jsxs)(n.p,{children:["Vor dem Verlassen der Linie haben sowohl ",(0,r.jsx)("strong",{className:"boxed",children:"M"})," wie auch ",(0,r.jsx)("strong",{className:"boxed",children:"L1"})," schwarz gemessen."]})}),(0,r.jsx)("dd",{children:(0,r.jsxs)(n.p,{children:["Wegen der Schiefen Lage verl\xe4sst ",(0,r.jsx)("strong",{className:"boxed",children:"M"})," zuerst die Linie, weshalb der Roboter eine ",(0,r.jsx)(n.strong,{children:"Linkskurve"})," f\xe4hrt."]})})]}),(0,r.jsx)(a,{nr:11,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]})}),"\n",(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.p,{children:"Anpassungen:"}),(0,r.jsx)(a,{nr:12,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),"\n",(0,r.jsx)(n.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e Start\n    Start --\x3e Vorw\xe4rts\n    Vorw\xe4rts --\x3e Vorw\xe4rts: M=1\n    Vorw\xe4rts --\x3e Rechtskurve: M=0 & (L1=0 oder R2=1)\n    Vorw\xe4rts --\x3e Linkskurve: M=0 & R1=0\n    Rechtskurve --\x3e Vorw\xe4rts: M=1\n    Linkskurve --\x3e Vorw\xe4rts: M=1\n    Linkskurve --\x3e Rechtskurve: R2=1"}),"\n",(0,r.jsxs)(n.admonition,{type:"aufgabe",children:[(0,r.jsx)(i,{type:"state",webKey:"b7442dd1-cb2f-4dfd-8396-01540ad13b61"}),(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsxs)(n.p,{children:["Wann sollte der Roboter vom Zustand ",(0,r.jsx)("strong",{className:"boxed",children:"Rechtskurve"})," in den Zustand ",(0,r.jsx)("strong",{className:"boxed",children:"Linkskurve"})," wechseln?"]}),(0,r.jsx)(a,{nr:13,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]}),(0,r.jsx)(i,{type:"text",webKey:"01b8449e-61b4-4f28-9839-f2587ca6a2a3"}),(0,r.jsxs)(n.div,{className:"commentable",children:[(0,r.jsx)(n.p,{children:"Programmieren Sie die zus\xe4tzlichen \xdcberpr\xfcfungen und testen Sie Ihr Roboter."}),(0,r.jsx)(a,{nr:14,type:"paragraph",pageId:"3f4d61e1-44e5-4e5c-adbd-a5e95c4dc1d9",children:(0,r.jsx)(n.p,{children:"."})})]})]})]})}function h(e={}){const{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}function x(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},48672:(e,n,s)=>{s.d(n,{Z:()=>r});const r=s.p+"assets/images/maqueen-line-sensor-rectangle-c775c4ac43209eb0fdb9d28b59f986d0.png"},88665:(e,n,s)=>{s.d(n,{Z:()=>r});const r=s.p+"assets/images/maqueen-line-sensor-why-state-46aef75085d775c675baad954b691f8d.png"},84274:(e,n,s)=>{s.d(n,{Z:()=>r});const r=s.p+"assets/images/maqueen-line-sensor-with-state-22d80eb36d9ecedb5c6ef13cd9386f21.png"},11151:(e,n,s)=>{s.d(n,{Z:()=>t,a:()=>a});var r=s(67294);const d={},i=r.createContext(d);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);