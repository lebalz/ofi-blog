export default class SlideNumber{constructor(e){this.Reveal=e}render(){this.element=document.createElement("div"),this.element.className="slide-number",this.Reveal.getRevealElement().appendChild(this.element)}configure(e,t){let s="none";e.slideNumber&&!this.Reveal.isPrintingPDF()&&("all"===e.showSlideNumber||"speaker"===e.showSlideNumber&&this.Reveal.isSpeakerNotes())&&(s="block"),this.element.style.display=s}update(){this.Reveal.getConfig().slideNumber&&this.element&&(this.element.innerHTML=this.getSlideNumber())}getSlideNumber(e=this.Reveal.getCurrentSlide()){let t,s=this.Reveal.getConfig(),l="h.v";if("function"==typeof s.slideNumber)t=s.slideNumber(e);else{"string"==typeof s.slideNumber&&(l=s.slideNumber),/c/.test(l)||1!==this.Reveal.getHorizontalSlides().length||(l="c");let i=e&&"uncounted"===e.dataset.visibility?0:1;switch(t=[],l){case"c":t.push(this.Reveal.getSlidePastCount(e)+i);break;case"c/t":t.push(this.Reveal.getSlidePastCount(e)+i,"/",this.Reveal.getTotalSlides());break;default:let s=this.Reveal.getIndices(e);t.push(s.h+i);let a="h/v"===l?"/":".";this.Reveal.isVerticalSlide(e)&&t.push(a,s.v+1)}}let i="#"+this.Reveal.location.getHash(e);return this.formatNumber(t[0],t[1],t[2],i)}formatNumber(e,t,s,l="#"+this.Reveal.location.getHash()){return"number"!=typeof s||isNaN(s)?`<a href="${l}">\n\t\t\t\t\t<span class="slide-number-a">${e}</span>\n\t\t\t\t\t</a>`:`<a href="${l}">\n\t\t\t\t\t<span class="slide-number-a">${e}</span>\n\t\t\t\t\t<span class="slide-number-delimiter">${t}</span>\n\t\t\t\t\t<span class="slide-number-b">${s}</span>\n\t\t\t\t\t</a>`}destroy(){this.element.remove()}}