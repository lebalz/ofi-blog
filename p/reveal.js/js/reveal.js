import SlideContent from"./controllers/slidecontent.js";import SlideNumber from"./controllers/slidenumber.js";import Backgrounds from"./controllers/backgrounds.js";import AutoAnimate from"./controllers/autoanimate.js";import Fragments from"./controllers/fragments.js";import Overview from"./controllers/overview.js";import Keyboard from"./controllers/keyboard.js";import Location from"./controllers/location.js";import Controls from"./controllers/controls.js";import Progress from"./controllers/progress.js";import Pointer from"./controllers/pointer.js";import Plugins from"./controllers/plugins.js";import Print from"./controllers/print.js";import Touch from"./controllers/touch.js";import Focus from"./controllers/focus.js";import Notes from"./controllers/notes.js";import Playback from"./components/playback.js";import defaultConfig from"./config.js";import*as Util from"./utils/util.js";import*as Device from"./utils/device.js";import{SLIDES_SELECTOR,HORIZONTAL_SLIDES_SELECTOR,VERTICAL_SLIDES_SELECTOR,POST_MESSAGE_METHOD_BLACKLIST}from"./utils/constants.js";export const VERSION="4.3.1";export default function(e,t){arguments.length<2&&(t=arguments[0],e=document.querySelector(".reveal"));const i={};let r,n,s,a,o,l={},d=!1,u={hasNavigatedHorizontally:!1,hasNavigatedVertically:!1},c=[],p=1,v={layout:"",overview:""},g={},f=!1,m="idle",h=0,y=0,w=-1,b=!1,S=new SlideContent(i),L=new SlideNumber(i),E=new AutoAnimate(i),A=new Backgrounds(i),x=new Fragments(i),P=new Overview(i),k=new Keyboard(i),T=new Location(i),N=new Controls(i),O=new Progress(i),C=new Pointer(i),I=new Plugins(i),q=new Print(i),R=new Focus(i),U=new Touch(i),M=new Notes(i);function H(){d=!0,l.showHiddenSlides||Util.queryAll(g.wrapper,'section[data-visibility="hidden"]').forEach((e=>{e.parentNode.removeChild(e)})),function(){g.slides.classList.add("no-transition"),Device.isMobile?g.wrapper.classList.add("no-hover"):g.wrapper.classList.remove("no-hover");A.render(),L.render(),N.render(),O.render(),M.render(),g.pauseOverlay=Util.createSingletonNode(g.wrapper,"div","pause-overlay",l.controls?'<button class="resume-button">Resume presentation</button>':null),g.statusElement=function(){let e=g.wrapper.querySelector(".aria-status");e||(e=document.createElement("div"),e.style.position="absolute",e.style.height="1px",e.style.width="1px",e.style.overflow="hidden",e.style.clip="rect( 1px, 1px, 1px, 1px )",e.classList.add("aria-status"),e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),g.wrapper.appendChild(e));return e}(),g.wrapper.setAttribute("role","application")}(),l.postMessage&&window.addEventListener("message",_e,!1),setInterval((()=>{0===g.wrapper.scrollTop&&0===g.wrapper.scrollLeft||(g.wrapper.scrollTop=0,g.wrapper.scrollLeft=0)}),1e3),document.addEventListener("fullscreenchange",Ke),document.addEventListener("webkitfullscreenchange",Ke),Ee().forEach((e=>{Util.queryAll(e,"section").forEach(((e,t)=>{t>0&&(e.classList.remove("present"),e.classList.remove("past"),e.classList.add("future"),e.setAttribute("aria-hidden","true"))}))})),_(),T.readURL(),A.update(!0),setTimeout((()=>{g.slides.classList.remove("no-transition"),g.wrapper.classList.add("ready"),W({type:"ready",data:{indexh:r,indexv:n,currentSlide:a}})}),1),q.isPrintingPDF()&&(z(),"complete"===document.readyState?q.setupPDF():window.addEventListener("load",(()=>{q.setupPDF()})))}function D(e){g.statusElement.textContent=e}function F(e){let t="";if(3===e.nodeType)t+=e.textContent;else if(1===e.nodeType){let i=e.getAttribute("aria-hidden"),r="none"===window.getComputedStyle(e).display;"true"===i||r||Array.from(e.childNodes).forEach((e=>{t+=F(e)}))}return t=t.trim(),""===t?"":t+" "}function _(e){const t={...l};if("object"==typeof e&&Util.extend(l,e),!1===i.isReady())return;const r=g.wrapper.querySelectorAll(SLIDES_SELECTOR).length;g.wrapper.classList.remove(t.transition),g.wrapper.classList.add(l.transition),g.wrapper.setAttribute("data-transition-speed",l.transitionSpeed),g.wrapper.setAttribute("data-background-transition",l.backgroundTransition),g.viewport.style.setProperty("--slide-width",l.width+"px"),g.viewport.style.setProperty("--slide-height",l.height+"px"),l.shuffle&&ge(),Util.toggleClass(g.wrapper,"embedded",l.embedded),Util.toggleClass(g.wrapper,"rtl",l.rtl),Util.toggleClass(g.wrapper,"center",l.center),!1===l.pause&&de(),l.previewLinks?(Z(),Q("[data-preview-link=false]")):(Q(),Z("[data-preview-link]:not([data-preview-link=false])")),E.reset(),o&&(o.destroy(),o=null),r>1&&l.autoSlide&&l.autoSlideStoppable&&(o=new Playback(g.wrapper,(()=>Math.min(Math.max((Date.now()-w)/h,0),1))),o.on("click",$e),b=!1),"default"!==l.navigationMode?g.wrapper.setAttribute("data-navigation-mode",l.navigationMode):g.wrapper.removeAttribute("data-navigation-mode"),M.configure(l,t),R.configure(l,t),C.configure(l,t),N.configure(l,t),O.configure(l,t),k.configure(l,t),x.configure(l,t),L.configure(l,t),ve()}function j(){f=!0,window.addEventListener("resize",Ve,!1),l.touch&&U.bind(),l.keyboard&&k.bind(),l.progress&&O.bind(),l.respondToHashChanges&&T.bind(),N.bind(),R.bind(),g.slides.addEventListener("click",ze,!1),g.slides.addEventListener("transitionend",je,!1),g.pauseOverlay.addEventListener("click",de,!1),l.focusBodyOnPageVisibilityChange&&document.addEventListener("visibilitychange",Be,!1)}function z(){f=!1,U.unbind(),R.unbind(),k.unbind(),N.unbind(),O.unbind(),T.unbind(),window.removeEventListener("resize",Ve,!1),g.slides.removeEventListener("click",ze,!1),g.slides.removeEventListener("transitionend",je,!1),g.pauseOverlay.removeEventListener("click",de,!1)}function V(t,i,r){e.addEventListener(t,i,r)}function B(t,i,r){e.removeEventListener(t,i,r)}function K(e){"string"==typeof e.layout&&(v.layout=e.layout),"string"==typeof e.overview&&(v.overview=e.overview),v.layout?Util.transformElement(g.slides,v.layout+" "+v.overview):Util.transformElement(g.slides,v.overview)}function W({target:e=g.wrapper,type:t,data:i,bubbles:r=!0}){let n=document.createEvent("HTMLEvents",1,2);return n.initEvent(t,r,!0),Util.extend(n,i),e.dispatchEvent(n),e===g.wrapper&&$(t),n}function $(e,t){if(l.postMessageEvents&&window.parent!==window.self){let i={namespace:"reveal",eventName:e,state:Ne()};Util.extend(i,t),window.parent.postMessage(JSON.stringify(i),"*")}}function Z(e="a"){Array.from(g.wrapper.querySelectorAll(e)).forEach((e=>{/^(http|www)/gi.test(e.getAttribute("href"))&&e.addEventListener("click",We,!1)}))}function Q(e="a"){Array.from(g.wrapper.querySelectorAll(e)).forEach((e=>{/^(http|www)/gi.test(e.getAttribute("href"))&&e.removeEventListener("click",We,!1)}))}function G(e){X(),g.overlay=document.createElement("div"),g.overlay.classList.add("overlay"),g.overlay.classList.add("overlay-preview"),g.wrapper.appendChild(g.overlay),g.overlay.innerHTML=`<header>\n\t\t\t\t<a class="close" href="#"><span class="icon"></span></a>\n\t\t\t\t<a class="external" href="${e}" target="_blank"><span class="icon"></span></a>\n\t\t\t</header>\n\t\t\t<div class="spinner"></div>\n\t\t\t<div class="viewport">\n\t\t\t\t<iframe src="${e}"></iframe>\n\t\t\t\t<small class="viewport-inner">\n\t\t\t\t\t<span class="x-frame-error">Unable to load iframe. This is likely due to the site's policy (x-frame-options).</span>\n\t\t\t\t</small>\n\t\t\t</div>`,g.overlay.querySelector("iframe").addEventListener("load",(e=>{g.overlay.classList.add("loaded")}),!1),g.overlay.querySelector(".close").addEventListener("click",(e=>{X(),e.preventDefault()}),!1),g.overlay.querySelector(".external").addEventListener("click",(e=>{X()}),!1)}function J(){if(l.help){X(),g.overlay=document.createElement("div"),g.overlay.classList.add("overlay"),g.overlay.classList.add("overlay-help"),g.wrapper.appendChild(g.overlay);let e='<p class="title">Keyboard Shortcuts</p><br/>',t=k.getShortcuts(),i=k.getBindings();e+="<table><th>KEY</th><th>ACTION</th>";for(let r in t)e+=`<tr><td>${r}</td><td>${t[r]}</td></tr>`;for(let r in i)i[r].key&&i[r].description&&(e+=`<tr><td>${i[r].key}</td><td>${i[r].description}</td></tr>`);e+="</table>",g.overlay.innerHTML=`\n\t\t\t\t<header>\n\t\t\t\t\t<a class="close" href="#"><span class="icon"></span></a>\n\t\t\t\t</header>\n\t\t\t\t<div class="viewport">\n\t\t\t\t\t<div class="viewport-inner">${e}</div>\n\t\t\t\t</div>\n\t\t\t`,g.overlay.querySelector(".close").addEventListener("click",(e=>{X(),e.preventDefault()}),!1)}}function X(){return!!g.overlay&&(g.overlay.parentNode.removeChild(g.overlay),g.overlay=null,!0)}function Y(){if(g.wrapper&&!q.isPrintingPDF()){if(!l.disableLayout){Device.isMobile&&!l.embedded&&document.documentElement.style.setProperty("--vh",.01*window.innerHeight+"px");const e=te(),t=p;ee(l.width,l.height),g.slides.style.width=e.width+"px",g.slides.style.height=e.height+"px",p=Math.min(e.presentationWidth/e.width,e.presentationHeight/e.height),p=Math.max(p,l.minScale),p=Math.min(p,l.maxScale),1===p?(g.slides.style.zoom="",g.slides.style.left="",g.slides.style.top="",g.slides.style.bottom="",g.slides.style.right="",K({layout:""})):(g.slides.style.zoom="",g.slides.style.left="50%",g.slides.style.top="50%",g.slides.style.bottom="auto",g.slides.style.right="auto",K({layout:"translate(-50%, -50%) scale("+p+")"}));const i=Array.from(g.wrapper.querySelectorAll(SLIDES_SELECTOR));for(let r=0,n=i.length;r<n;r++){const t=i[r];"none"!==t.style.display&&(l.center||t.classList.contains("center")?t.classList.contains("stack")?t.style.top=0:t.style.top=Math.max((e.height-t.scrollHeight)/2,0)+"px":t.style.top="")}t!==p&&W({type:"resize",data:{oldScale:t,scale:p,size:e}})}g.viewport.style.setProperty("--slide-scale",p),O.update(),A.updateParallax(),P.isActive()&&P.update()}}function ee(e,t){Util.queryAll(g.slides,"section > .stretch, section > .r-stretch").forEach((i=>{let r=Util.getRemainingHeight(i,t);if(/(img|video)/gi.test(i.nodeName)){const t=i.naturalWidth||i.videoWidth,n=i.naturalHeight||i.videoHeight,s=Math.min(e/t,r/n);i.style.width=t*s+"px",i.style.height=n*s+"px"}else i.style.width=e+"px",i.style.height=r+"px"}))}function te(e,t){const i={width:l.width,height:l.height,presentationWidth:e||g.wrapper.offsetWidth,presentationHeight:t||g.wrapper.offsetHeight};return i.presentationWidth-=i.presentationWidth*l.margin,i.presentationHeight-=i.presentationHeight*l.margin,"string"==typeof i.width&&/%$/.test(i.width)&&(i.width=parseInt(i.width,10)/100*i.presentationWidth),"string"==typeof i.height&&/%$/.test(i.height)&&(i.height=parseInt(i.height,10)/100*i.presentationHeight),i}function ie(e,t){"object"==typeof e&&"function"==typeof e.setAttribute&&e.setAttribute("data-previous-indexv",t||0)}function re(e){if("object"==typeof e&&"function"==typeof e.setAttribute&&e.classList.contains("stack")){const t=e.hasAttribute("data-start-indexv")?"data-start-indexv":"data-previous-indexv";return parseInt(e.getAttribute(t)||0,10)}return 0}function ne(e=a){return e&&e.parentNode&&!!e.parentNode.nodeName.match(/section/i)}function se(){return!(!a||!ne(a))&&!a.nextElementSibling}function ae(){return 0===r&&0===n}function oe(){return!!a&&(!a.nextElementSibling&&(!ne(a)||!a.parentNode.nextElementSibling))}function le(){if(l.pause){const e=g.wrapper.classList.contains("paused");Ce(),g.wrapper.classList.add("paused"),!1===e&&W({type:"paused"})}}function de(){const e=g.wrapper.classList.contains("paused");g.wrapper.classList.remove("paused"),Oe(),e&&W({type:"resumed"})}function ue(e){"boolean"==typeof e?e?le():de():ce()?de():le()}function ce(){return g.wrapper.classList.contains("paused")}function pe(e,t,i,o){if(W({type:"beforeslidechange",data:{indexh:void 0===e?r:e,indexv:void 0===t?n:t,origin:o}}).defaultPrevented)return;s=a;const d=g.wrapper.querySelectorAll(HORIZONTAL_SLIDES_SELECTOR);if(0===d.length)return;void 0!==t||P.isActive()||(t=re(d[e])),s&&s.parentNode&&s.parentNode.classList.contains("stack")&&ie(s.parentNode,n);const u=c.concat();c.length=0;let p=r||0,v=n||0;r=fe(HORIZONTAL_SLIDES_SELECTOR,void 0===e?r:e),n=fe(VERTICAL_SLIDES_SELECTOR,void 0===t?n:t);let f=r!==p||n!==v;f||(s=null);let h=d[r],y=h.querySelectorAll("section");a=y[n]||h;let w=!1;f&&s&&a&&!P.isActive()&&(s.hasAttribute("data-auto-animate")&&a.hasAttribute("data-auto-animate")&&s.getAttribute("data-auto-animate-id")===a.getAttribute("data-auto-animate-id")&&!(r>p||n>v?a:s).hasAttribute("data-auto-animate-restart")&&(w=!0,g.slides.classList.add("disable-slide-transitions")),m="running"),ye(),Y(),P.isActive()&&P.update(),void 0!==i&&x.goto(i),s&&s!==a&&(s.classList.remove("present"),s.setAttribute("aria-hidden","true"),ae()&&setTimeout((()=>{Util.queryAll(g.wrapper,HORIZONTAL_SLIDES_SELECTOR+".stack").forEach((e=>{ie(e,0)}))}),0));e:for(let r=0,n=c.length;r<n;r++){for(let e=0;e<u.length;e++)if(u[e]===c[r]){u.splice(e,1);continue e}g.viewport.classList.add(c[r]),W({type:c[r]})}for(;u.length;)g.viewport.classList.remove(u.pop());f&&W({type:"slidechanged",data:{indexh:r,indexv:n,previousSlide:s,currentSlide:a,origin:o}}),!f&&s||(S.stopEmbeddedContent(s),S.startEmbeddedContent(a)),requestAnimationFrame((()=>{D(F(a))})),O.update(),N.update(),M.update(),A.update(),A.updateParallax(),L.update(),x.update(),T.writeURL(),Oe(),w&&(setTimeout((()=>{g.slides.classList.remove("disable-slide-transitions")}),0),l.autoAnimate&&E.run(s,a))}function ve(){z(),j(),Y(),h=l.autoSlide,Oe(),A.create(),T.writeURL(),x.sortAll(),N.update(),O.update(),ye(),M.update(),M.updateVisibility(),A.update(!0),L.update(),S.formatEmbeddedContent(),!1===l.autoPlayMedia?S.stopEmbeddedContent(a,{unloadIframes:!1}):S.startEmbeddedContent(a),P.isActive()&&P.layout()}function ge(e=Ee()){e.forEach(((t,i)=>{let r=e[Math.floor(Math.random()*e.length)];r.parentNode===t.parentNode&&t.parentNode.insertBefore(t,r);let n=t.querySelectorAll("section");n.length&&ge(n)}))}function fe(e,t){let i=Util.queryAll(g.wrapper,e),r=i.length,n=q.isPrintingPDF(),s=!1,a=!1;if(r){l.loop&&(t>=r&&(s=!0),(t%=r)<0&&(t=r+t,a=!0)),t=Math.max(Math.min(t,r-1),0);for(let u=0;u<r;u++){let e=i[u],r=l.rtl&&!ne(e);e.classList.remove("past"),e.classList.remove("present"),e.classList.remove("future"),e.setAttribute("hidden",""),e.setAttribute("aria-hidden","true"),e.querySelector("section")&&e.classList.add("stack"),n?e.classList.add("present"):u<t?(e.classList.add(r?"future":"past"),l.fragments&&me(e)):u>t?(e.classList.add(r?"past":"future"),l.fragments&&he(e)):u===t&&l.fragments&&(s?he(e):a&&me(e))}let e=i[t],o=e.classList.contains("present");e.classList.add("present"),e.removeAttribute("hidden"),e.removeAttribute("aria-hidden"),o||W({target:e,type:"visible",bubbles:!1});let d=e.getAttribute("data-state");d&&(c=c.concat(d.split(" ")))}else t=0;return t}function me(e){Util.queryAll(e,".fragment").forEach((e=>{e.classList.add("visible"),e.classList.remove("current-fragment")}))}function he(e){Util.queryAll(e,".fragment.visible").forEach((e=>{e.classList.remove("visible","current-fragment")}))}function ye(){let e,t,i=Ee(),s=i.length;if(s&&void 0!==r){let a=P.isActive()?10:l.viewDistance;Device.isMobile&&(a=P.isActive()?6:l.mobileViewDistance),q.isPrintingPDF()&&(a=Number.MAX_VALUE);for(let o=0;o<s;o++){let d=i[o],u=Util.queryAll(d,"section"),c=u.length;if(e=Math.abs((r||0)-o)||0,l.loop&&(e=Math.abs(((r||0)-o)%(s-a))||0),e<a?S.load(d):S.unload(d),c){let i=re(d);for(let s=0;s<c;s++){let l=u[s];t=o===(r||0)?Math.abs((n||0)-s):Math.abs(s-i),e+t<a?S.load(l):S.unload(l)}}}Pe()?g.wrapper.classList.add("has-vertical-slides"):g.wrapper.classList.remove("has-vertical-slides"),xe()?g.wrapper.classList.add("has-horizontal-slides"):g.wrapper.classList.remove("has-horizontal-slides")}}function we({includeFragments:e=!1}={}){let t=g.wrapper.querySelectorAll(HORIZONTAL_SLIDES_SELECTOR),i=g.wrapper.querySelectorAll(VERTICAL_SLIDES_SELECTOR),s={left:r>0,right:r<t.length-1,up:n>0,down:n<i.length-1};if(l.loop&&(t.length>1&&(s.left=!0,s.right=!0),i.length>1&&(s.up=!0,s.down=!0)),t.length>1&&"linear"===l.navigationMode&&(s.right=s.right||s.down,s.left=s.left||s.up),!0===e){let e=x.availableRoutes();s.left=s.left||e.prev,s.up=s.up||e.prev,s.down=s.down||e.next,s.right=s.right||e.next}if(l.rtl){let e=s.left;s.left=s.right,s.right=e}return s}function be(e=a){let t=Ee(),i=0;e:for(let r=0;r<t.length;r++){let n=t[r],s=n.querySelectorAll("section");for(let t=0;t<s.length;t++){if(s[t]===e)break e;"uncounted"!==s[t].dataset.visibility&&i++}if(n===e)break;!1===n.classList.contains("stack")&&"uncounted"!==n.dataset.visibility&&i++}return i}function Se(e){let t,i=r,s=n;if(e){let t=ne(e),r=t?e.parentNode:e,n=Ee();i=Math.max(n.indexOf(r),0),s=void 0,t&&(s=Math.max(Util.queryAll(e.parentNode,"section").indexOf(e),0))}if(!e&&a){if(a.querySelectorAll(".fragment").length>0){let e=a.querySelector(".current-fragment");t=e&&e.hasAttribute("data-fragment-index")?parseInt(e.getAttribute("data-fragment-index"),10):a.querySelectorAll(".fragment.visible").length-1}}return{h:i,v:s,f:t}}function Le(){return Util.queryAll(g.wrapper,SLIDES_SELECTOR+':not(.stack):not([data-visibility="uncounted"])')}function Ee(){return Util.queryAll(g.wrapper,HORIZONTAL_SLIDES_SELECTOR)}function Ae(){return Util.queryAll(g.wrapper,".slides>section>section")}function xe(){return Ee().length>1}function Pe(){return Ae().length>1}function ke(){return Le().length}function Te(e,t){let i=Ee()[e],r=i&&i.querySelectorAll("section");return r&&r.length&&"number"==typeof t?r?r[t]:void 0:i}function Ne(){let e=Se();return{indexh:e.h,indexv:e.v,indexf:e.f,paused:ce(),overview:P.isActive()}}function Oe(){if(Ce(),a&&!1!==l.autoSlide){let e=a.querySelector(".current-fragment");e||(e=a.querySelector(".fragment"));let t=e?e.getAttribute("data-autoslide"):null,i=a.parentNode?a.parentNode.getAttribute("data-autoslide"):null,r=a.getAttribute("data-autoslide");t?h=parseInt(t,10):r?h=parseInt(r,10):i?h=parseInt(i,10):(h=l.autoSlide,0===a.querySelectorAll(".fragment").length&&Util.queryAll(a,"video, audio").forEach((e=>{e.hasAttribute("data-autoplay")&&h&&1e3*e.duration/e.playbackRate>h&&(h=1e3*e.duration/e.playbackRate+1e3)}))),!h||b||ce()||P.isActive()||oe()&&!x.availableRoutes().next&&!0!==l.loop||(y=setTimeout((()=>{"function"==typeof l.autoSlideMethod?l.autoSlideMethod():Fe(),Oe()}),h),w=Date.now()),o&&o.setPlaying(-1!==y)}}function Ce(){clearTimeout(y),y=-1}function Ie(){h&&!b&&(b=!0,W({type:"autoslidepaused"}),clearTimeout(y),o&&o.setPlaying(!1))}function qe(){h&&b&&(b=!1,W({type:"autoslideresumed"}),Oe())}function Re({skipFragments:e=!1}={}){u.hasNavigatedHorizontally=!0,l.rtl?(P.isActive()||e||!1===x.next())&&we().left&&pe(r+1,"grid"===l.navigationMode?n:void 0):(P.isActive()||e||!1===x.prev())&&we().left&&pe(r-1,"grid"===l.navigationMode?n:void 0)}function Ue({skipFragments:e=!1}={}){u.hasNavigatedHorizontally=!0,l.rtl?(P.isActive()||e||!1===x.prev())&&we().right&&pe(r-1,"grid"===l.navigationMode?n:void 0):(P.isActive()||e||!1===x.next())&&we().right&&pe(r+1,"grid"===l.navigationMode?n:void 0)}function Me({skipFragments:e=!1}={}){(P.isActive()||e||!1===x.prev())&&we().up&&pe(r,n-1)}function He({skipFragments:e=!1}={}){u.hasNavigatedVertically=!0,(P.isActive()||e||!1===x.next())&&we().down&&pe(r,n+1)}function De({skipFragments:e=!1}={}){if(e||!1===x.prev())if(we().up)Me({skipFragments:e});else{let t;if(t=l.rtl?Util.queryAll(g.wrapper,HORIZONTAL_SLIDES_SELECTOR+".future").pop():Util.queryAll(g.wrapper,HORIZONTAL_SLIDES_SELECTOR+".past").pop(),t&&t.classList.contains("stack")){let e=t.querySelectorAll("section").length-1||void 0;pe(r-1,e)}else Re({skipFragments:e})}}function Fe({skipFragments:e=!1}={}){if(u.hasNavigatedHorizontally=!0,u.hasNavigatedVertically=!0,e||!1===x.next()){let t=we();t.down&&t.right&&l.loop&&se()&&(t.down=!1),t.down?He({skipFragments:e}):l.rtl?Re({skipFragments:e}):Ue({skipFragments:e})}}function _e(e){let t=e.data;if("string"==typeof t&&"{"===t.charAt(0)&&"}"===t.charAt(t.length-1)&&(t=JSON.parse(t),t.method&&"function"==typeof i[t.method]))if(!1===POST_MESSAGE_METHOD_BLACKLIST.test(t.method)){const e=i[t.method].apply(i,t.args);$("callback",{method:t.method,result:e})}else console.warn('reveal.js: "'+t.method+'" is is blacklisted from the postMessage API')}function je(e){"running"===m&&/section/gi.test(e.target.nodeName)&&(m="idle",W({type:"slidetransitionend",data:{indexh:r,indexv:n,previousSlide:s,currentSlide:a}}))}function ze(e){const t=Util.closest(e.target,'a[href^="#"]');if(t){const r=t.getAttribute("href"),n=T.getIndicesFromHash(r);n&&(i.slide(n.h,n.v,n.f),e.preventDefault())}}function Ve(e){Y()}function Be(e){!1===document.hidden&&document.activeElement!==document.body&&("function"==typeof document.activeElement.blur&&document.activeElement.blur(),document.body.focus())}function Ke(e){(document.fullscreenElement||document.webkitFullscreenElement)===g.wrapper&&(e.stopImmediatePropagation(),setTimeout((()=>{i.layout(),i.focus.focus()}),1))}function We(e){if(e.currentTarget&&e.currentTarget.hasAttribute("href")){let t=e.currentTarget.getAttribute("href");t&&(G(t),e.preventDefault())}}function $e(e){oe()&&!1===l.loop?(pe(0,0),qe()):b?qe():Ie()}const Ze={VERSION:"4.3.1",initialize:function(r){if(!e)throw'Unable to find presentation root (<div class="reveal">).';if(g.wrapper=e,g.slides=e.querySelector(".slides"),!g.slides)throw'Unable to find slides container (<div class="slides">).';return l={...defaultConfig,...l,...t,...r,...Util.getQueryHash()},function(){!0===l.embedded?g.viewport=Util.closest(e,".reveal-viewport")||e:(g.viewport=document.body,document.documentElement.classList.add("reveal-full-page"));g.viewport.classList.add("reveal-viewport")}(),window.addEventListener("load",Y,!1),I.load(l.plugins,l.dependencies).then(H),new Promise((e=>i.on("ready",e)))},configure:_,destroy:function(){z(),Ce(),Q(),M.destroy(),R.destroy(),I.destroy(),C.destroy(),N.destroy(),O.destroy(),A.destroy(),L.destroy(),document.removeEventListener("fullscreenchange",Ke),document.removeEventListener("webkitfullscreenchange",Ke),document.removeEventListener("visibilitychange",Be,!1),window.removeEventListener("message",_e,!1),window.removeEventListener("load",Y,!1),g.pauseOverlay&&g.pauseOverlay.remove(),g.statusElement&&g.statusElement.remove(),document.documentElement.classList.remove("reveal-full-page"),g.wrapper.classList.remove("ready","center","has-horizontal-slides","has-vertical-slides"),g.wrapper.removeAttribute("data-transition-speed"),g.wrapper.removeAttribute("data-background-transition"),g.viewport.classList.remove("reveal-viewport"),g.viewport.style.removeProperty("--slide-width"),g.viewport.style.removeProperty("--slide-height"),g.slides.style.removeProperty("width"),g.slides.style.removeProperty("height"),g.slides.style.removeProperty("zoom"),g.slides.style.removeProperty("left"),g.slides.style.removeProperty("top"),g.slides.style.removeProperty("bottom"),g.slides.style.removeProperty("right"),g.slides.style.removeProperty("transform"),Array.from(g.wrapper.querySelectorAll(SLIDES_SELECTOR)).forEach((e=>{e.style.removeProperty("display"),e.style.removeProperty("top"),e.removeAttribute("hidden"),e.removeAttribute("aria-hidden")}))},sync:ve,syncSlide:function(e=a){A.sync(e),x.sync(e),S.load(e),A.update(),M.update()},syncFragments:x.sync.bind(x),slide:pe,left:Re,right:Ue,up:Me,down:He,prev:De,next:Fe,navigateLeft:Re,navigateRight:Ue,navigateUp:Me,navigateDown:He,navigatePrev:De,navigateNext:Fe,navigateFragment:x.goto.bind(x),prevFragment:x.prev.bind(x),nextFragment:x.next.bind(x),on:V,off:B,addEventListener:V,removeEventListener:B,layout:Y,shuffle:ge,availableRoutes:we,availableFragments:x.availableRoutes.bind(x),toggleHelp:function(e){"boolean"==typeof e?e?J():X():g.overlay?X():J()},toggleOverview:P.toggle.bind(P),togglePause:ue,toggleAutoSlide:function(e){"boolean"==typeof e?e?qe():Ie():b?qe():Ie()},isFirstSlide:ae,isLastSlide:oe,isLastVerticalSlide:se,isVerticalSlide:ne,isPaused:ce,isAutoSliding:function(){return!(!h||b)},isSpeakerNotes:M.isSpeakerNotesWindow.bind(M),isOverview:P.isActive.bind(P),isFocused:R.isFocused.bind(R),isPrintingPDF:q.isPrintingPDF.bind(q),isReady:()=>d,loadSlide:S.load.bind(S),unloadSlide:S.unload.bind(S),showPreview:G,hidePreview:X,addEventListeners:j,removeEventListeners:z,dispatchEvent:W,getState:Ne,setState:function(e){if("object"==typeof e){pe(Util.deserialize(e.indexh),Util.deserialize(e.indexv),Util.deserialize(e.indexf));let t=Util.deserialize(e.paused),i=Util.deserialize(e.overview);"boolean"==typeof t&&t!==ce()&&ue(t),"boolean"==typeof i&&i!==P.isActive()&&P.toggle(i)}},getProgress:function(){let e=ke(),t=be();if(a){let e=a.querySelectorAll(".fragment");if(e.length>0){let i=.9;t+=a.querySelectorAll(".fragment.visible").length/e.length*i}}return Math.min(t/(e-1),1)},getIndices:Se,getSlidesAttributes:function(){return Le().map((e=>{let t={};for(let i=0;i<e.attributes.length;i++){let r=e.attributes[i];t[r.name]=r.value}return t}))},getSlidePastCount:be,getTotalSlides:ke,getSlide:Te,getPreviousSlide:()=>s,getCurrentSlide:()=>a,getSlideBackground:function(e,t){let i="number"==typeof e?Te(e,t):e;if(i)return i.slideBackgroundElement},getSlideNotes:M.getSlideNotes.bind(M),getSlides:Le,getHorizontalSlides:Ee,getVerticalSlides:Ae,hasHorizontalSlides:xe,hasVerticalSlides:Pe,hasNavigatedHorizontally:()=>u.hasNavigatedHorizontally,hasNavigatedVertically:()=>u.hasNavigatedVertically,addKeyBinding:k.addKeyBinding.bind(k),removeKeyBinding:k.removeKeyBinding.bind(k),triggerKey:k.triggerKey.bind(k),registerKeyboardShortcut:k.registerKeyboardShortcut.bind(k),getComputedSlideSize:te,getScale:()=>p,getConfig:()=>l,getQueryHash:Util.getQueryHash,getSlidePath:T.getHash.bind(T),getRevealElement:()=>e,getSlidesElement:()=>g.slides,getViewportElement:()=>g.viewport,getBackgroundsElement:()=>A.element,registerPlugin:I.registerPlugin.bind(I),hasPlugin:I.hasPlugin.bind(I),getPlugin:I.getPlugin.bind(I),getPlugins:I.getRegisteredPlugins.bind(I)};return Util.extend(i,{...Ze,announceStatus:D,getStatusText:F,print:q,focus:R,progress:O,controls:N,location:T,overview:P,fragments:x,slideContent:S,slideNumber:L,onUserInput:function(e){l.autoSlideStoppable&&Ie()},closeOverlay:X,updateSlidesVisibility:ye,layoutSlideContents:ee,transformSlides:K,cueAutoSlide:Oe,cancelAutoSlide:Ce}),Ze}